/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app-demos/dot-app3.ts":
/*!***********************************!*\
  !*** ./src/app-demos/dot-app3.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DotApp3\": () => /* binding */ DotApp3\n/* harmony export */ });\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _math_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/matrix */ \"./src/math/matrix.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _app_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../app/app */ \"./src/app/app.ts\");\n/* harmony import */ var _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../render/dot-renderer3 */ \"./src/render/dot-renderer3.ts\");\n/* harmony import */ var _render_camera__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../render/camera */ \"./src/render/camera.ts\");\n// dot-app3.ts\r\n// \r\n// author : Jos Feenstra\r\n// purpose : test with Renderers, Domains & Vectors\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass DotApp3 extends _app_app__WEBPACK_IMPORTED_MODULE_3__.App {\r\n    constructor(gl) {\r\n        super(gl);\r\n        this.dots = [];\r\n        this.dirs = [];\r\n        let canvas = gl.canvas;\r\n        let n = 1;\r\n        this.bounds = _math_domain__WEBPACK_IMPORTED_MODULE_0__.Domain3.fromBounds(-n, n, -n, n, -n, n);\r\n        this.whiteDotRend = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_4__.DotRenderer3(gl, 10, [1, 1, 1, 1], false);\r\n        this.redDotRend = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_4__.DotRenderer3(gl, 10, [1, 0, 0, 1], false);\r\n        this.camera = new _render_camera__WEBPACK_IMPORTED_MODULE_5__.Camera(canvas);\r\n    }\r\n    start() {\r\n        this.spawnSome(100, 0.001);\r\n    }\r\n    spawnSome(count, normrange) {\r\n        const normSpace = _math_domain__WEBPACK_IMPORTED_MODULE_0__.Domain3.fromBounds(-normrange, normrange, -normrange, normrange, -normrange, normrange);\r\n        for (let i = 0; i < count; i++) {\r\n            this.dots.push(this.bounds.elevate(_math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromRandom()));\r\n            this.dirs.push(normSpace.elevate(_math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromRandom()));\r\n        }\r\n    }\r\n    update(state) {\r\n        // move the camera with the mouse\r\n        this.camera.update(state);\r\n        if (state.mouseLeftPressed) {\r\n            this.spawnSome(100, 0.001);\r\n        }\r\n        // update the position of all dots\r\n        for (let i = 0; i < this.dots.length; i++) {\r\n            // this gives us a pointer apparantly\r\n            let dot = this.dots[i];\r\n            let dir = this.dirs[i];\r\n            // bounce of the edges\r\n            if (!this.bounds.x.includes(dot.x))\r\n                dir.x = -dir.x;\r\n            if (!this.bounds.y.includes(dot.y))\r\n                dir.y = -dir.y;\r\n            if (!this.bounds.z.includes(dot.z))\r\n                dir.z = -dir.z;\r\n            // update position\r\n            dot.add(dir);\r\n        }\r\n    }\r\n    draw(gl) {\r\n        // get to-screen matrix\r\n        const canvas = gl.canvas;\r\n        let matrix = this.camera.totalMatrix;\r\n        // render the corners of the box with the red renderer,\r\n        // and the dots themselves with the white renderer\r\n        this.redDotRend.setAndRender(gl, matrix, this.bounds.corners(_math_matrix__WEBPACK_IMPORTED_MODULE_1__.Matrix4.newIdentity()));\r\n        this.whiteDotRend.setAndRender(gl, matrix, this.dots);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2FwcC1kZW1vcy9kb3QtYXBwMy50cz9iYmVhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsR0FBRztBQUNILHdCQUF3QjtBQUN4QixtREFBbUQ7QUFHTztBQUNSO0FBQ0E7QUFFbEI7QUFDdUI7QUFDYjtBQUVuQyxNQUFNLE9BQVEsU0FBUSx5Q0FBRztJQVU1QixZQUFZLEVBQXlCO1FBQ2pDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQVRkLFNBQUksR0FBYyxFQUFFLENBQUM7UUFDckIsU0FBSSxHQUFjLEVBQUUsQ0FBQztRQVVqQixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBMkIsQ0FBQztRQUM1QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVixJQUFJLENBQUMsTUFBTSxHQUFHLDREQUFrQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLCtEQUFZLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSwrREFBWSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksa0RBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRUQsS0FBSztRQUNELElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxTQUFTLENBQUMsS0FBYSxFQUFFLFNBQWlCO1FBRXRDLE1BQU0sU0FBUyxHQUFHLDREQUFrQixDQUFDLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFMUcsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUU3QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyw0REFBa0IsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMxRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLDREQUFrQixFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQzNEO0lBQ0wsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFpQjtRQUVwQixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFMUIsSUFBSSxLQUFLLENBQUMsZ0JBQWdCLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDOUI7UUFFRCxrQ0FBa0M7UUFDbEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBRXhDLHFDQUFxQztZQUNyQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFdkIsc0JBQXNCO1lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUIsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUIsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUIsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRWxCLGtCQUFrQjtZQUNsQixHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2hCO0lBQ0wsQ0FBQztJQUVELElBQUksQ0FBQyxFQUF5QjtRQUUxQix1QkFBdUI7UUFDdkIsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQTJCLENBQUM7UUFDOUMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUM7UUFFckMsdURBQXVEO1FBQ3ZELGtEQUFrRDtRQUNsRCxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLDZEQUFtQixFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFELENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9hcHAtZGVtb3MvZG90LWFwcDMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkb3QtYXBwMy50c1xyXG4vLyBcclxuLy8gYXV0aG9yIDogSm9zIEZlZW5zdHJhXHJcbi8vIHB1cnBvc2UgOiB0ZXN0IHdpdGggUmVuZGVyZXJzLCBEb21haW5zICYgVmVjdG9yc1xyXG5cclxuaW1wb3J0IHsgR2VvbkltYWdlIH0gZnJvbSBcIi4uL2ltZy9JbWFnZVwiO1xyXG5pbXBvcnQgeyBEb21haW4sIERvbWFpbjIsIERvbWFpbjMgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgTWF0cml4MywgTWF0cml4NCB9IGZyb20gXCIuLi9tYXRoL21hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IElucHV0U3RhdGUgfSBmcm9tIFwiLi4vc3lzdGVtL2lucHV0LXN0YXRlXCJcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL2FwcC9hcHBcIlxyXG5pbXBvcnQgeyBEb3RSZW5kZXJlcjMgfSBmcm9tIFwiLi4vcmVuZGVyL2RvdC1yZW5kZXJlcjNcIjtcclxuaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4uL3JlbmRlci9jYW1lcmFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEb3RBcHAzIGV4dGVuZHMgQXBwIHtcclxuXHJcbiAgICBkb3RzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgIGRpcnM6IFZlY3RvcjNbXSA9IFtdO1xyXG5cclxuICAgIGJvdW5kczogRG9tYWluMztcclxuICAgIHdoaXRlRG90UmVuZDogRG90UmVuZGVyZXIzO1xyXG4gICAgcmVkRG90UmVuZDogRG90UmVuZGVyZXIzO1xyXG4gICAgY2FtZXJhOiBDYW1lcmE7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyKGdsKTtcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGdsLmNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgICAgICBsZXQgbiA9IDE7XHJcbiAgICAgICAgdGhpcy5ib3VuZHMgPSBEb21haW4zLmZyb21Cb3VuZHMoLW4sIG4sIC1uLCBuLCAtbiwgbik7XHJcbiAgICAgICAgdGhpcy53aGl0ZURvdFJlbmQgPSBuZXcgRG90UmVuZGVyZXIzKGdsLCAxMCwgWzEsMSwxLDFdLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yZWREb3RSZW5kID0gbmV3IERvdFJlbmRlcmVyMyhnbCwgMTAsIFsxLDAsMCwxXSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYShjYW52YXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuc3Bhd25Tb21lKDEwMCwgMC4wMDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHNwYXduU29tZShjb3VudDogbnVtYmVyLCBub3JtcmFuZ2U6IG51bWJlcikge1xyXG5cclxuICAgICAgICBjb25zdCBub3JtU3BhY2UgPSBEb21haW4zLmZyb21Cb3VuZHMoLW5vcm1yYW5nZSwgbm9ybXJhbmdlLCAtbm9ybXJhbmdlLCBub3JtcmFuZ2UsIC1ub3JtcmFuZ2UsIG5vcm1yYW5nZSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGNvdW50OyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZG90cy5wdXNoKHRoaXMuYm91bmRzLmVsZXZhdGUoVmVjdG9yMy5mcm9tUmFuZG9tKCkpKTtcclxuICAgICAgICAgICAgdGhpcy5kaXJzLnB1c2gobm9ybVNwYWNlLmVsZXZhdGUoVmVjdG9yMy5mcm9tUmFuZG9tKCkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlOiBJbnB1dFN0YXRlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gbW92ZSB0aGUgY2FtZXJhIHdpdGggdGhlIG1vdXNlXHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlKHN0YXRlKTtcclxuXHJcbiAgICAgICAgaWYgKHN0YXRlLm1vdXNlTGVmdFByZXNzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGF3blNvbWUoMTAwLCAwLjAwMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgdGhlIHBvc2l0aW9uIG9mIGFsbCBkb3RzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgdGhpcy5kb3RzLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzIGdpdmVzIHVzIGEgcG9pbnRlciBhcHBhcmFudGx5XHJcbiAgICAgICAgICAgIGxldCBkb3QgPSB0aGlzLmRvdHNbaV07XHJcbiAgICAgICAgICAgIGxldCBkaXIgPSB0aGlzLmRpcnNbaV07XHJcblxyXG4gICAgICAgICAgICAvLyBib3VuY2Ugb2YgdGhlIGVkZ2VzXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5ib3VuZHMueC5pbmNsdWRlcyhkb3QueCkpXHJcbiAgICAgICAgICAgICAgICBkaXIueCA9IC1kaXIueFxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYm91bmRzLnkuaW5jbHVkZXMoZG90LnkpKVxyXG4gICAgICAgICAgICAgICAgZGlyLnkgPSAtZGlyLnlcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmJvdW5kcy56LmluY2x1ZGVzKGRvdC56KSlcclxuICAgICAgICAgICAgICAgIGRpci56ID0gLWRpci56XHJcblxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgcG9zaXRpb25cclxuICAgICAgICAgICAgZG90LmFkZChkaXIpO1xyXG4gICAgICAgIH0gICAgXHJcbiAgICB9XHJcblxyXG4gICAgZHJhdyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcblxyXG4gICAgICAgIC8vIGdldCB0by1zY3JlZW4gbWF0cml4XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZ2wuY2FudmFzIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGxldCBtYXRyaXggPSB0aGlzLmNhbWVyYS50b3RhbE1hdHJpeDtcclxuXHJcbiAgICAgICAgLy8gcmVuZGVyIHRoZSBjb3JuZXJzIG9mIHRoZSBib3ggd2l0aCB0aGUgcmVkIHJlbmRlcmVyLFxyXG4gICAgICAgIC8vIGFuZCB0aGUgZG90cyB0aGVtc2VsdmVzIHdpdGggdGhlIHdoaXRlIHJlbmRlcmVyXHJcbiAgICAgICAgdGhpcy5yZWREb3RSZW5kLnNldEFuZFJlbmRlcihnbCwgbWF0cml4LCB0aGlzLmJvdW5kcy5jb3JuZXJzKE1hdHJpeDQubmV3SWRlbnRpdHkoKSkpO1xyXG4gICAgICAgIHRoaXMud2hpdGVEb3RSZW5kLnNldEFuZFJlbmRlcihnbCwgbWF0cml4LCB0aGlzLmRvdHMpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/app-demos/dot-app3.ts\n");

/***/ }),

/***/ "./src/app/app.ts":
/*!************************!*\
  !*** ./src/app/app.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"App\": () => /* binding */ App\n/* harmony export */ });\nclass App {\r\n    constructor(gl) {\r\n        // unique constructor    \r\n        this.gl = gl;\r\n        this.name = this.constructor.name;\r\n    }\r\n    ui(ui) {\r\n        // setup for UI\r\n    }\r\n    start() {\r\n        // additional setup of state\r\n    }\r\n    update(state) {\r\n        // updating state\r\n    }\r\n    draw(gl) {\r\n        // drawing state\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2FwcC9hcHAudHM/NWRiNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBR08sTUFBTSxHQUFHO0lBS1osWUFBWSxFQUF5QjtRQUNqQyx5QkFBeUI7UUFDekIsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDYixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxFQUFFLENBQUMsRUFBTTtRQUNMLGVBQWU7SUFDbkIsQ0FBQztJQUVELEtBQUs7UUFDRCw0QkFBNEI7SUFDaEMsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFpQjtRQUNwQixpQkFBaUI7SUFDckIsQ0FBQztJQUVELElBQUksQ0FBQyxFQUF5QjtRQUMxQixnQkFBZ0I7SUFDcEIsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL2FwcC9hcHAudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dFN0YXRlIH0gZnJvbSBcIi4uL3N5c3RlbS9pbnB1dC1zdGF0ZVwiXHJcbmltcG9ydCB7IFVJIH0gZnJvbSBcIi4uL3N5c3RlbS91aVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcblxyXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuICAgIG5hbWU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgICAgLy8gdW5pcXVlIGNvbnN0cnVjdG9yICAgIFxyXG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcclxuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgdWkodWk6IFVJKSB7XHJcbiAgICAgICAgLy8gc2V0dXAgZm9yIFVJXHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgLy8gYWRkaXRpb25hbCBzZXR1cCBvZiBzdGF0ZVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShzdGF0ZTogSW5wdXRTdGF0ZSkge1xyXG4gICAgICAgIC8vIHVwZGF0aW5nIHN0YXRlXHJcbiAgICB9XHJcblxyXG4gICAgZHJhdyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgICAgLy8gZHJhd2luZyBzdGF0ZVxyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/app/app.ts\n");

/***/ }),

/***/ "./src/app/geometry-app.ts":
/*!*********************************!*\
  !*** ./src/app/geometry-app.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GeometryApp\": () => /* binding */ GeometryApp\n/* harmony export */ });\n/* harmony import */ var _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mesh/pure-mesh */ \"./src/mesh/pure-mesh.ts\");\n/* harmony import */ var _mesh_render_mesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mesh/render-mesh */ \"./src/mesh/render-mesh.ts\");\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _render_camera__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../render/camera */ \"./src/render/camera.ts\");\n/* harmony import */ var _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../render/dot-renderer3 */ \"./src/render/dot-renderer3.ts\");\n/* harmony import */ var _render_line_renderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../render/line-renderer */ \"./src/render/line-renderer.ts\");\n/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./app */ \"./src/app/app.ts\");\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n/* harmony import */ var _geo_plane__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geo/plane */ \"./src/geo/plane.ts\");\n/* harmony import */ var _geo_cube__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../geo/cube */ \"./src/geo/cube.ts\");\n/* harmony import */ var _render_mesh_debug_renderer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../render/mesh-debug-renderer */ \"./src/render/mesh-debug-renderer.ts\");\n/* harmony import */ var _math_matrix__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/matrix */ \"./src/math/matrix.ts\");\n/* harmony import */ var _data_int_cube__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../data/int-cube */ \"./src/data/int-cube.ts\");\n// name:    geometry-app.ts\r\n// author:  Jos Feenstra\r\n// purpose: a 3d voxel environment to toy around in. Uses several features of geon\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GeometryApp extends _app__WEBPACK_IMPORTED_MODULE_7__.App {\r\n    constructor(gl) {\r\n        // setup render env\r\n        super(gl);\r\n        // geo data\r\n        this.plane = _geo_plane__WEBPACK_IMPORTED_MODULE_9__.Plane.WorldXY();\r\n        this.dots = [];\r\n        this.geo = [];\r\n        this.mapGeo = [];\r\n        // logic data \r\n        this.size = 50;\r\n        this.cellSize = 1;\r\n        this.camera = new _render_camera__WEBPACK_IMPORTED_MODULE_4__.Camera(gl.canvas, 10, true);\r\n        this.dotRenderer = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_5__.DotRenderer3(gl, 4, [1, 0, 0, 1], false);\r\n        this.whiteLineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_6__.LineRenderer(gl, [1, 1, 1, 1]);\r\n        this.greyLineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_6__.LineRenderer(gl, [0.2, 0, 1, 0.5]);\r\n        this.redLineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_6__.LineRenderer(gl, [0.8, 0, 0, 1]);\r\n        this.meshRenderer = new _render_mesh_debug_renderer__WEBPACK_IMPORTED_MODULE_11__.MeshDebugRenderer(gl);\r\n        this.transMeshRenderer = new _render_mesh_debug_renderer__WEBPACK_IMPORTED_MODULE_11__.MeshDebugRenderer(gl, [1, 1, 1, 0.10], [1, 1, 1, 0.10]);\r\n    }\r\n    // called after init\r\n    start() {\r\n        this.map = new _data_int_cube__WEBPACK_IMPORTED_MODULE_13__.IntCube(this.size, this.size, this.size);\r\n        this.map.fill(0);\r\n        // add random blocks in the world\r\n        this.map.map((value, index) => {\r\n            if (Math.random() > 0.99) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return value;\r\n            }\r\n        });\r\n        // let perlin = new Perlin();\r\n        // this.map.map((value, i) => {\r\n        //     let c = this.map.getCoords(i);\r\n        //     let scale = 0.05;\r\n        //     let noise = perlin.noise(c.x * scale, c.y * scale, c.z * scale);\r\n        //     if (i < 10) {\r\n        //         console.log(c);\r\n        //         console.log(noise);\r\n        //     }\r\n        //     if (noise > 0.60) {\r\n        //         return 1;\r\n        //     } else {\r\n        //         return value;\r\n        //     }\r\n        // })\r\n        // console.log(\"done setting\")\r\n        // after change, buffer \r\n        this.bufferMap();\r\n        // console.log(\"done\")\r\n        this.gridLarge = _mesh_line_array__WEBPACK_IMPORTED_MODULE_8__.LineArray.fromGrid(this.plane, this.size, this.cellSize);\r\n        this.gridSmall = _mesh_line_array__WEBPACK_IMPORTED_MODULE_8__.LineArray.fromGrid(this.plane, (this.size * 10) - 1, this.cellSize / 10);\r\n        // this.whiteLineRenderer.set(this.gl, this.gridLarge, DrawSpeed.StaticDraw);\r\n        // this.greyLineRenderer.set(this.gl, this.gridSmall, DrawSpeed.StaticDraw);\r\n    }\r\n    update(state) {\r\n        // move the camera with the mouse\r\n        this.camera.update(state);\r\n        this.updateCursor(state);\r\n    }\r\n    draw(gl) {\r\n        // get to-screen matrix\r\n        const canvas = gl.canvas;\r\n        let matrix = this.camera.totalMatrix;\r\n        // render the grid\r\n        // this.greyLineRenderer.render(gl, matrix);\r\n        // this.whiteLineRenderer.render(gl, matrix);\r\n        // this.redLineRenderer.setAndRender(gl, matrix, this.cursorVisual!);\r\n        // render the map\r\n        // TODO create MeshArray\r\n        this.meshRenderer.render(gl, matrix);\r\n        // render other things\r\n        for (let geo of this.geo) {\r\n            this.transMeshRenderer.setAndRender(gl, matrix, geo);\r\n        }\r\n    }\r\n    addPreviewCube(point) {\r\n        let cubeCenter = this.mapToWorld(point);\r\n        let cube = this.createCube(cubeCenter);\r\n        this.geo.push(_mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromCube(cube).toDisplayMesh());\r\n    }\r\n    flushPreviewCubes() {\r\n        this.geo = [];\r\n    }\r\n    updateCursor(state) {\r\n        // render mouse to world line \r\n        let mouseRay = this.camera.getMouseWorldRay(state.canvas.width, state.canvas.height);\r\n        // snap to world\r\n        // let cursor = mouseRay.at(mouseRay.xPlane(this.plane));\r\n        // let mapCursor = this.worldToMap(cursor);\r\n        // let coord = this.mapToWorld(mapCursor);\r\n        // place circle at cursor\r\n        // let plane = this.plane.clone();\r\n        // plane.matrix = plane.matrix.multiply(Matrix4.newTranslation(cursor.x, cursor.y, cursor.z));\r\n        // this.cursorVisual = LineArray.fromCircle(new Circle3(plane, 0.1));\r\n        // figure out which cube we are pointing to\r\n        this.flushPreviewCubes();\r\n        let [cubeID, cubeIDprevious] = this.voxelRaycast(mouseRay, 40);\r\n        if (cubeID == -1) {\r\n            // nothing else to do\r\n            return;\r\n        }\r\n        let cubeCursor = this.map.getCoords(cubeIDprevious);\r\n        this.addPreviewCube(cubeCursor);\r\n        // render cube at this position\r\n        // this.geo.push(Mesh.fromCube(cube));  \r\n        // click\r\n        if (state.mouseLeftPressed) {\r\n            console.log(\"click\");\r\n            if (state.IsKeyDown(\" \")) {\r\n                if (this.map.data[cubeID] == 0)\r\n                    return;\r\n                this.map.data[cubeID] = 0;\r\n                this.bufferMap();\r\n            }\r\n            else if (this.map.data[cubeIDprevious] != 1) {\r\n                this.map.data[cubeIDprevious] = 1;\r\n                this.bufferMap();\r\n            }\r\n        }\r\n    }\r\n    // return the ID of the \r\n    // A Fast Voxel Traversal Algorithm for Ray Tracing\r\n    // Amanatides, Woo\r\n    // Dept. of Computer Science\r\n    voxelRaycast(ray, range) {\r\n        let startPoint = this.worldToMap(ray.origin);\r\n        let voxelCenter = this.mapToWorld(startPoint);\r\n        // integers\r\n        let x = startPoint.x;\r\n        let y = startPoint.y;\r\n        let z = startPoint.z;\r\n        let xprev = x;\r\n        let yprev = y;\r\n        let zprev = z;\r\n        let stepX = ray.normal.x > 0 ? 1 : -1;\r\n        let stepY = ray.normal.y > 0 ? 1 : -1;\r\n        let stepZ = ray.normal.z > 0 ? 1 : -1;\r\n        // floats\r\n        let voxelsize = this.cellSize;\r\n        let deltax = voxelsize / Math.abs(ray.normal.x);\r\n        let deltay = voxelsize / Math.abs(ray.normal.y);\r\n        let deltaz = voxelsize / Math.abs(ray.normal.z);\r\n        // intit tx, ty, and tz, at their first intersection with corresponding plane\r\n        voxelCenter.add(new _math_vector__WEBPACK_IMPORTED_MODULE_3__.Vector3(voxelsize / 2 * stepX, voxelsize / 2 * stepY, voxelsize / 2 * stepZ));\r\n        let move = _math_matrix__WEBPACK_IMPORTED_MODULE_12__.Matrix4.newTranslation(voxelCenter.x, voxelCenter.y, voxelCenter.z);\r\n        let xy = _geo_plane__WEBPACK_IMPORTED_MODULE_9__.Plane.WorldXY();\r\n        xy._matrix.multiply(move);\r\n        let yz = _geo_plane__WEBPACK_IMPORTED_MODULE_9__.Plane.WorldYZ();\r\n        yz._matrix.multiply(move);\r\n        let xz = _geo_plane__WEBPACK_IMPORTED_MODULE_9__.Plane.WorldXZ();\r\n        xz._matrix.multiply(move);\r\n        let tx = ray.xPlane(yz);\r\n        let ty = ray.xPlane(xz);\r\n        let tz = ray.xPlane(xy);\r\n        if (tx < 0 || ty < 0 || tz < 0) {\r\n            console.log(\"something critical went wrong!\");\r\n            return [-1, -1];\r\n        }\r\n        // debug ray\r\n        // let lineSets: LineArray[] = [ray.toLine(100), LineArray.fromPlane(xy), LineArray.fromPlane(yz), LineArray.fromPlane(xz)];\r\n        // this.whiteLineRenderer.set(this.gl, LineArray.fromJoin(lineSets), DrawSpeed.StaticDraw);\r\n        // console.log(\"voxel raycast initialized with:\");\r\n        // console.log(\"deltas: \", deltax, deltay, deltaz);\r\n        // console.log(\"t's: \", tx, ty, tz);\r\n        // start iterating\r\n        // console.log(\"cast away!\");\r\n        // this.addPreviewCube(new Vector3(x,y,z));\r\n        // console.log(x,y,z);\r\n        for (let i = 0; i < range; i++) {\r\n            // this.addPreviewCube(new Vector3(xprev,yprev,zprev));\r\n            // if hit, return previous\r\n            let value = this.map.tryGet(x, y, z);\r\n            if (value == 1) {\r\n                // console.log(\"found a cube after \" + i + \"steps...\");\r\n                // this.addPreviewCube(new Vector3(xprev,yprev,zprev));\r\n                return [this.map.getIndex(x, y, z), this.map.getIndex(xprev, yprev, zprev)];\r\n            }\r\n            else {\r\n                xprev = x;\r\n                yprev = y;\r\n                zprev = z;\r\n            }\r\n            // to the next cube!\r\n            if (tx < ty && tx < tz) {\r\n                // x \r\n                tx += deltax;\r\n                x += stepX;\r\n            }\r\n            else if (ty < tz) {\r\n                // y\r\n                ty += deltay;\r\n                y += stepY;\r\n            }\r\n            else {\r\n                // z\r\n                tz += deltaz;\r\n                z += stepZ;\r\n            }\r\n        }\r\n        return [-1, -1];\r\n    }\r\n    // flush this.meshRenderer\r\n    // turn this.map into this.mapGeo\r\n    bufferMap() {\r\n        let mapGeo = [];\r\n        this.map.iter((entry, index) => {\r\n            if (entry == 1) {\r\n                let mapCoord = this.map.getCoords(index);\r\n                let coord = this.mapToWorld(mapCoord);\r\n                let cube = this.createCube(coord);\r\n                mapGeo.push(_mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromCube(cube).toDisplayMesh());\r\n            }\r\n        });\r\n        this.meshRenderer.set(this.gl, _mesh_render_mesh__WEBPACK_IMPORTED_MODULE_1__.RenderMesh.fromJoin(mapGeo));\r\n    }\r\n    worldToMap(coord) {\r\n        let halfsize = (this.size / 2) + (this.cellSize / 2);\r\n        return coord.added(new _math_vector__WEBPACK_IMPORTED_MODULE_3__.Vector3(halfsize, halfsize, halfsize)).floored();\r\n    }\r\n    mapToWorld(point) {\r\n        let halfsize = this.size / 2;\r\n        return point.added(new _math_vector__WEBPACK_IMPORTED_MODULE_3__.Vector3(-halfsize, -halfsize, -halfsize));\r\n    }\r\n    createCube(center) {\r\n        let hs = this.cellSize / 2;\r\n        let move = _math_matrix__WEBPACK_IMPORTED_MODULE_12__.Matrix4.newTranslation(center.x, center.y, center.z);\r\n        let cube = new _geo_cube__WEBPACK_IMPORTED_MODULE_10__.Cube(_geo_plane__WEBPACK_IMPORTED_MODULE_9__.Plane.WorldXY().transform(move), _math_domain__WEBPACK_IMPORTED_MODULE_2__.Domain3.fromBounds(-hs, hs, -hs, hs, -hs, hs));\r\n        return cube;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2FwcC9nZW9tZXRyeS1hcHAudHM/NTY5YyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQkFBMkI7QUFDM0Isd0JBQXdCO0FBQ3hCLGtGQUFrRjtBQUVyQztBQUNnQjtBQUVwQjtBQUNTO0FBQ1I7QUFDYTtBQUNBO0FBRzNCO0FBR21CO0FBR1Y7QUFDRjtBQUMrQjtBQUN6QjtBQUdFO0FBSXBDLE1BQU0sV0FBWSxTQUFRLHFDQUFHO0lBeUJoQyxZQUFZLEVBQXlCO1FBRWpDLG1CQUFtQjtRQUNuQixLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFqQmQsV0FBVztRQUNYLFVBQUssR0FBVSxxREFBYSxFQUFFLENBQUM7UUFHL0IsU0FBSSxHQUFjLEVBQUUsQ0FBQztRQUNyQixRQUFHLEdBQWlCLEVBQUUsQ0FBQztRQUN2QixXQUFNLEdBQWlCLEVBQUUsQ0FBQztRQUcxQixjQUFjO1FBQ2QsU0FBSSxHQUFHLEVBQUUsQ0FBQztRQUNWLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFPVCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksa0RBQU0sQ0FBQyxFQUFFLENBQUMsTUFBNEIsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLCtEQUFZLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzdELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLCtEQUFZLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6RCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSwrREFBWSxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcs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QUFDLENBQUM7UUFDaEUsSUFBSSxJQUFJLEdBQUcsSUFBSSw0Q0FBSSxDQUFDLHFEQUFhLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUUsNERBQWtCLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25HLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9hcHAvZ2VvbWV0cnktYXBwLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgZ2VvbWV0cnktYXBwLnRzXHJcbi8vIGF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiBhIDNkIHZveGVsIGVudmlyb25tZW50IHRvIHRveSBhcm91bmQgaW4uIFVzZXMgc2V2ZXJhbCBmZWF0dXJlcyBvZiBnZW9uXHJcblxyXG5pbXBvcnQgeyBQdXJlTWVzaCB9IGZyb20gXCIuLi9tZXNoL3B1cmUtbWVzaFwiO1xyXG5pbXBvcnQgeyBSZW5kZXJNZXNoLCBtZXNoRnJvbU9iaix9IGZyb20gXCIuLi9tZXNoL3JlbmRlci1tZXNoXCJcclxuaW1wb3J0IHsgYWRkRHJvcEZpbGVFdmVudExpc3RlbmVycywgbG9hZFRleHRGcm9tRmlsZSB9IGZyb20gXCIuLi9zeXN0ZW0vZG9td3JhcHBlcnNcIjtcclxuaW1wb3J0IHsgRG9tYWluMyB9IGZyb20gXCIuLi9tYXRoL2RvbWFpblwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuLi9yZW5kZXIvY2FtZXJhXCI7XHJcbmltcG9ydCB7IERvdFJlbmRlcmVyMyB9IGZyb20gXCIuLi9yZW5kZXIvZG90LXJlbmRlcmVyM1wiO1xyXG5pbXBvcnQgeyBMaW5lUmVuZGVyZXIgfSBmcm9tIFwiLi4vcmVuZGVyL2xpbmUtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU2ltcGxlTWVzaFJlbmRlcmVyIH0gZnJvbSBcIi4uL3JlbmRlci9zaW1wbGUtbWVzaC1yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBJbnB1dFN0YXRlIH0gZnJvbSBcIi4uL3N5c3RlbS9pbnB1dC1zdGF0ZVwiO1xyXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9hcHBcIjtcclxuaW1wb3J0IHsgRHJhd1NwZWVkIH0gZnJvbSBcIi4uL3JlbmRlci9yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgTGluZUFycmF5IH0gZnJvbSBcIi4uL21lc2gvbGluZS1hcnJheVwiO1xyXG5pbXBvcnQgeyBGbG9hdE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2Zsb2F0LW1hdHJpeFwiO1xyXG5pbXBvcnQgeyBTdGF0IH0gZnJvbSBcIi4uL21hdGgvc3RhdGlzdGljc1wiO1xyXG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuLi9nZW8vcGxhbmVcIjtcclxuaW1wb3J0IHsgQ3ViZSB9IGZyb20gXCIuLi9nZW8vY3ViZVwiO1xyXG5pbXBvcnQgeyBNZXNoRGVidWdSZW5kZXJlciB9IGZyb20gXCIuLi9yZW5kZXIvbWVzaC1kZWJ1Zy1yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBNYXRyaXg0IH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IENpcmNsZTMgfSBmcm9tIFwiLi4vZ2VvL2NpcmNsZTNcIjtcclxuaW1wb3J0IHsgSW50TWF0cml4IH0gZnJvbSBcIi4uL2RhdGEvaW50LW1hdHJpeFwiO1xyXG5pbXBvcnQgeyBJbnRDdWJlIH0gZnJvbSBcIi4uL2RhdGEvaW50LWN1YmVcIjtcclxuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL21hdGgvcmF5XCI7XHJcbmltcG9ydCB7IFBlcmxpbiB9IGZyb20gXCIuLi9hbGdvcml0aG1zL3Blcmxpbi1ub2lzZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb21ldHJ5QXBwIGV4dGVuZHMgQXBwIHtcclxuXHJcbiAgICAvLyByZW5kZXJpbmZvXHJcbiAgICBkb3RSZW5kZXJlcjogRG90UmVuZGVyZXIzO1xyXG4gICAgd2hpdGVMaW5lUmVuZGVyZXI6IExpbmVSZW5kZXJlcjtcclxuICAgIGdyZXlMaW5lUmVuZGVyZXI6IExpbmVSZW5kZXJlcjtcclxuICAgIHJlZExpbmVSZW5kZXJlcjogTGluZVJlbmRlcmVyO1xyXG4gICAgbWVzaFJlbmRlcmVyOiBNZXNoRGVidWdSZW5kZXJlcjtcclxuICAgIHRyYW5zTWVzaFJlbmRlcmVyOiBNZXNoRGVidWdSZW5kZXJlcjtcclxuICAgIGNhbWVyYTogQ2FtZXJhO1xyXG5cclxuICAgIC8vIGdlbyBkYXRhXHJcbiAgICBwbGFuZTogUGxhbmUgPSBQbGFuZS5Xb3JsZFhZKCk7XHJcbiAgICBncmlkTGFyZ2UhOiBMaW5lQXJyYXk7XHJcbiAgICBncmlkU21hbGwhOiBMaW5lQXJyYXk7XHJcbiAgICBkb3RzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgIGdlbzogUmVuZGVyTWVzaFtdID0gW107XHJcbiAgICBtYXBHZW86IFJlbmRlck1lc2hbXSA9IFtdO1xyXG4gICAgY3Vyc29yVmlzdWFsPzogTGluZUFycmF5XHJcblxyXG4gICAgLy8gbG9naWMgZGF0YSBcclxuICAgIHNpemUgPSA1MDtcclxuICAgIGNlbGxTaXplID0gMTtcclxuICAgIG1hcCE6IEludEN1YmU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNldHVwIHJlbmRlciBlbnZcclxuICAgICAgICBzdXBlcihnbCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKGdsLmNhbnZhcyEgYXMgSFRNTENhbnZhc0VsZW1lbnQsIDEwLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmRvdFJlbmRlcmVyID0gbmV3IERvdFJlbmRlcmVyMyhnbCwgNCwgWzEsMCwwLDFdLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy53aGl0ZUxpbmVSZW5kZXJlciA9IG5ldyBMaW5lUmVuZGVyZXIoZ2wsIFsxLDEsMSwxXSk7XHJcbiAgICAgICAgdGhpcy5ncmV5TGluZVJlbmRlcmVyID0gbmV3IExpbmVSZW5kZXJlcihnbCwgWzAuMiwwLDEsMC41XSk7XHJcbiAgICAgICAgdGhpcy5yZWRMaW5lUmVuZGVyZXIgPSBuZXcgTGluZVJlbmRlcmVyKGdsLCBbMC44LDAsMCwxXSk7XHJcbiAgICAgICAgdGhpcy5tZXNoUmVuZGVyZXIgPSBuZXcgTWVzaERlYnVnUmVuZGVyZXIoZ2wpO1xyXG4gICAgICAgIHRoaXMudHJhbnNNZXNoUmVuZGVyZXIgPSBuZXcgTWVzaERlYnVnUmVuZGVyZXIoZ2wsIFsxLDEsMSwwLjEwXSwgWzEsMSwxLDAuMTBdKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gY2FsbGVkIGFmdGVyIGluaXRcclxuICAgIHN0YXJ0KCkge1xyXG5cclxuICAgICAgICB0aGlzLm1hcCA9IG5ldyBJbnRDdWJlKHRoaXMuc2l6ZSwgdGhpcy5zaXplLCB0aGlzLnNpemUpO1xyXG4gICAgICAgIHRoaXMubWFwLmZpbGwoMCk7XHJcblxyXG4gICAgICAgIC8vIGFkZCByYW5kb20gYmxvY2tzIGluIHRoZSB3b3JsZFxyXG4gICAgICAgIHRoaXMubWFwLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC45OSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGxldCBwZXJsaW4gPSBuZXcgUGVybGluKCk7XHJcbiAgICAgICAgLy8gdGhpcy5tYXAubWFwKCh2YWx1ZSwgaSkgPT4ge1xyXG5cclxuICAgICAgICAvLyAgICAgbGV0IGMgPSB0aGlzLm1hcC5nZXRDb29yZHMoaSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICBsZXQgc2NhbGUgPSAwLjA1O1xyXG4gICAgICAgIC8vICAgICBsZXQgbm9pc2UgPSBwZXJsaW4ubm9pc2UoYy54ICogc2NhbGUsIGMueSAqIHNjYWxlLCBjLnogKiBzY2FsZSk7XHJcblxyXG4gICAgICAgIC8vICAgICBpZiAoaSA8IDEwKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhjKTtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKG5vaXNlKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgLy8gICAgIGlmIChub2lzZSA+IDAuNjApIHtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJkb25lIHNldHRpbmdcIilcclxuXHJcblxyXG4gICAgICAgIC8vIGFmdGVyIGNoYW5nZSwgYnVmZmVyIFxyXG4gICAgICAgIHRoaXMuYnVmZmVyTWFwKCk7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZG9uZVwiKVxyXG5cclxuICAgICAgICB0aGlzLmdyaWRMYXJnZSA9IExpbmVBcnJheS5mcm9tR3JpZCh0aGlzLnBsYW5lLCB0aGlzLnNpemUsIHRoaXMuY2VsbFNpemUpO1xyXG4gICAgICAgIHRoaXMuZ3JpZFNtYWxsID0gTGluZUFycmF5LmZyb21HcmlkKHRoaXMucGxhbmUsICh0aGlzLnNpemUqMTApLTEsIHRoaXMuY2VsbFNpemUgLyAxMCk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMud2hpdGVMaW5lUmVuZGVyZXIuc2V0KHRoaXMuZ2wsIHRoaXMuZ3JpZExhcmdlLCBEcmF3U3BlZWQuU3RhdGljRHJhdyk7XHJcbiAgICAgICAgLy8gdGhpcy5ncmV5TGluZVJlbmRlcmVyLnNldCh0aGlzLmdsLCB0aGlzLmdyaWRTbWFsbCwgRHJhd1NwZWVkLlN0YXRpY0RyYXcpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShzdGF0ZTogSW5wdXRTdGF0ZSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIG1vdmUgdGhlIGNhbWVyYSB3aXRoIHRoZSBtb3VzZVxyXG4gICAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZShzdGF0ZSk7IFxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUN1cnNvcihzdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBkcmF3KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpIHtcclxuXHJcbiAgICAgICAgLy8gZ2V0IHRvLXNjcmVlbiBtYXRyaXhcclxuICAgICAgICBjb25zdCBjYW52YXMgPSBnbC5jYW52YXMgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICAgICAgbGV0IG1hdHJpeCA9IHRoaXMuY2FtZXJhLnRvdGFsTWF0cml4O1xyXG5cclxuICAgICAgICAvLyByZW5kZXIgdGhlIGdyaWRcclxuICAgICAgICAvLyB0aGlzLmdyZXlMaW5lUmVuZGVyZXIucmVuZGVyKGdsLCBtYXRyaXgpO1xyXG4gICAgICAgIC8vIHRoaXMud2hpdGVMaW5lUmVuZGVyZXIucmVuZGVyKGdsLCBtYXRyaXgpO1xyXG5cclxuICAgICAgICAvLyB0aGlzLnJlZExpbmVSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgdGhpcy5jdXJzb3JWaXN1YWwhKTtcclxuXHJcbiAgICAgICAgLy8gcmVuZGVyIHRoZSBtYXBcclxuICAgICAgICAvLyBUT0RPIGNyZWF0ZSBNZXNoQXJyYXlcclxuICAgICAgICB0aGlzLm1lc2hSZW5kZXJlci5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcblxyXG4gICAgICAgIC8vIHJlbmRlciBvdGhlciB0aGluZ3NcclxuICAgICAgICBmb3IgKGxldCBnZW8gb2YgdGhpcy5nZW8pIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc01lc2hSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgZ2VvKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUHJldmlld0N1YmUocG9pbnQ6IFZlY3RvcjMpIHtcclxuICAgICAgICBsZXQgY3ViZUNlbnRlciA9IHRoaXMubWFwVG9Xb3JsZChwb2ludCk7XHJcbiAgICAgICAgbGV0IGN1YmUgPSB0aGlzLmNyZWF0ZUN1YmUoY3ViZUNlbnRlcik7XHJcbiAgICAgICAgdGhpcy5nZW8ucHVzaChQdXJlTWVzaC5mcm9tQ3ViZShjdWJlKS50b0Rpc3BsYXlNZXNoKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZsdXNoUHJldmlld0N1YmVzKCkge1xyXG4gICAgICAgIHRoaXMuZ2VvID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ3Vyc29yKHN0YXRlOiBJbnB1dFN0YXRlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVuZGVyIG1vdXNlIHRvIHdvcmxkIGxpbmUgXHJcbiAgICAgICAgbGV0IG1vdXNlUmF5ID0gdGhpcy5jYW1lcmEuZ2V0TW91c2VXb3JsZFJheShzdGF0ZS5jYW52YXMud2lkdGgsIHN0YXRlLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNuYXAgdG8gd29ybGRcclxuICAgICAgICAvLyBsZXQgY3Vyc29yID0gbW91c2VSYXkuYXQobW91c2VSYXkueFBsYW5lKHRoaXMucGxhbmUpKTtcclxuICAgICAgICAvLyBsZXQgbWFwQ3Vyc29yID0gdGhpcy53b3JsZFRvTWFwKGN1cnNvcik7XHJcbiAgICAgICAgLy8gbGV0IGNvb3JkID0gdGhpcy5tYXBUb1dvcmxkKG1hcEN1cnNvcik7XHJcblxyXG4gICAgICAgIC8vIHBsYWNlIGNpcmNsZSBhdCBjdXJzb3JcclxuICAgICAgICAvLyBsZXQgcGxhbmUgPSB0aGlzLnBsYW5lLmNsb25lKCk7XHJcbiAgICAgICAgLy8gcGxhbmUubWF0cml4ID0gcGxhbmUubWF0cml4Lm11bHRpcGx5KE1hdHJpeDQubmV3VHJhbnNsYXRpb24oY3Vyc29yLngsIGN1cnNvci55LCBjdXJzb3IueikpO1xyXG4gICAgICAgIC8vIHRoaXMuY3Vyc29yVmlzdWFsID0gTGluZUFycmF5LmZyb21DaXJjbGUobmV3IENpcmNsZTMocGxhbmUsIDAuMSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgd2hpY2ggY3ViZSB3ZSBhcmUgcG9pbnRpbmcgdG9cclxuICAgICAgICB0aGlzLmZsdXNoUHJldmlld0N1YmVzKCk7XHJcbiAgICAgICAgbGV0IFtjdWJlSUQsIGN1YmVJRHByZXZpb3VzXSA9IHRoaXMudm94ZWxSYXljYXN0KG1vdXNlUmF5LCA0MCk7XHJcbiAgICAgICAgaWYgKGN1YmVJRCA9PSAtMSkge1xyXG4gICAgICAgICAgICAvLyBub3RoaW5nIGVsc2UgdG8gZG9cclxuICAgICAgICAgICAgcmV0dXJuOyAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY3ViZUN1cnNvciA9IHRoaXMubWFwLmdldENvb3JkcyhjdWJlSURwcmV2aW91cyk7ICAgXHJcbiAgICAgICAgdGhpcy5hZGRQcmV2aWV3Q3ViZShjdWJlQ3Vyc29yKTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgLy8gcmVuZGVyIGN1YmUgYXQgdGhpcyBwb3NpdGlvblxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHRoaXMuZ2VvLnB1c2goTWVzaC5mcm9tQ3ViZShjdWJlKSk7ICBcclxuICAgICAgICBcclxuICAgICAgICAvLyBjbGlja1xyXG4gICAgICAgIGlmIChzdGF0ZS5tb3VzZUxlZnRQcmVzc2VkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2xpY2tcIilcclxuICAgICAgICAgICAgaWYgKHN0YXRlLklzS2V5RG93bihcIiBcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcC5kYXRhW2N1YmVJRF0gPT0gMCkgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXAuZGF0YVtjdWJlSURdID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyTWFwKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tYXAuZGF0YVtjdWJlSURwcmV2aW91c10gIT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXAuZGF0YVtjdWJlSURwcmV2aW91c10gPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJNYXAoKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICAvLyByZXR1cm4gdGhlIElEIG9mIHRoZSBcclxuICAgIC8vIEEgRmFzdCBWb3hlbCBUcmF2ZXJzYWwgQWxnb3JpdGhtIGZvciBSYXkgVHJhY2luZ1xyXG4gICAgLy8gQW1hbmF0aWRlcywgV29vXHJcbiAgICAvLyBEZXB0LiBvZiBDb21wdXRlciBTY2llbmNlXHJcbiAgICB2b3hlbFJheWNhc3QocmF5OiBSYXksIHJhbmdlOiBudW1iZXIpIDogW251bWJlciwgbnVtYmVyXSB7XHJcblxyXG4gICAgICAgIGxldCBzdGFydFBvaW50ID0gdGhpcy53b3JsZFRvTWFwKHJheS5vcmlnaW4pO1xyXG4gICAgICAgIGxldCB2b3hlbENlbnRlciA9IHRoaXMubWFwVG9Xb3JsZChzdGFydFBvaW50KTtcclxuXHJcbiAgICAgICAgLy8gaW50ZWdlcnNcclxuICAgICAgICBsZXQgeCA9IHN0YXJ0UG9pbnQueDtcclxuICAgICAgICBsZXQgeSA9IHN0YXJ0UG9pbnQueTtcclxuICAgICAgICBsZXQgeiA9IHN0YXJ0UG9pbnQuejtcclxuXHJcbiAgICAgICAgbGV0IHhwcmV2ID0geDtcclxuICAgICAgICBsZXQgeXByZXYgPSB5O1xyXG4gICAgICAgIGxldCB6cHJldiA9IHo7XHJcblxyXG4gICAgICAgIGxldCBzdGVwWCA9IHJheS5ub3JtYWwueCA+IDAgPyAxIDogLTE7XHJcbiAgICAgICAgbGV0IHN0ZXBZID0gcmF5Lm5vcm1hbC55ID4gMCA/IDEgOiAtMTtcclxuICAgICAgICBsZXQgc3RlcFogPSByYXkubm9ybWFsLnogPiAwID8gMSA6IC0xO1xyXG5cclxuICAgICAgICAvLyBmbG9hdHNcclxuICAgICAgICBsZXQgdm94ZWxzaXplID0gdGhpcy5jZWxsU2l6ZTtcclxuICAgICAgICBsZXQgZGVsdGF4ID0gdm94ZWxzaXplIC8gTWF0aC5hYnMocmF5Lm5vcm1hbC54KTtcclxuICAgICAgICBsZXQgZGVsdGF5ID0gdm94ZWxzaXplIC8gTWF0aC5hYnMocmF5Lm5vcm1hbC55KTtcclxuICAgICAgICBsZXQgZGVsdGF6ID0gdm94ZWxzaXplIC8gTWF0aC5hYnMocmF5Lm5vcm1hbC56KTtcclxuXHJcbiAgICAgICAgLy8gaW50aXQgdHgsIHR5LCBhbmQgdHosIGF0IHRoZWlyIGZpcnN0IGludGVyc2VjdGlvbiB3aXRoIGNvcnJlc3BvbmRpbmcgcGxhbmVcclxuICAgICAgICB2b3hlbENlbnRlci5hZGQobmV3IFZlY3RvcjModm94ZWxzaXplLzIgKiBzdGVwWCwgdm94ZWxzaXplLzIgKiBzdGVwWSwgdm94ZWxzaXplLzIgKiBzdGVwWikpO1xyXG5cclxuICAgICAgICBsZXQgbW92ZSA9IE1hdHJpeDQubmV3VHJhbnNsYXRpb24odm94ZWxDZW50ZXIueCwgdm94ZWxDZW50ZXIueSwgdm94ZWxDZW50ZXIueik7XHJcbiAgICAgICAgbGV0IHh5ID0gUGxhbmUuV29ybGRYWSgpO1xyXG4gICAgICAgIHh5Ll9tYXRyaXgubXVsdGlwbHkobW92ZSk7XHJcbiAgICAgICAgbGV0IHl6ID0gUGxhbmUuV29ybGRZWigpO1xyXG4gICAgICAgIHl6Ll9tYXRyaXgubXVsdGlwbHkobW92ZSk7XHJcbiAgICAgICAgbGV0IHh6ID0gUGxhbmUuV29ybGRYWigpO1xyXG4gICAgICAgIHh6Ll9tYXRyaXgubXVsdGlwbHkobW92ZSk7XHJcblxyXG4gICAgICAgIGxldCB0eCA9IHJheS54UGxhbmUoeXopO1xyXG4gICAgICAgIGxldCB0eSA9IHJheS54UGxhbmUoeHopO1xyXG4gICAgICAgIGxldCB0eiA9IHJheS54UGxhbmUoeHkpO1xyXG5cclxuICAgICAgICBpZiAodHggPCAwIHx8IHR5IDwgMCB8fCB0eiA8IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzb21ldGhpbmcgY3JpdGljYWwgd2VudCB3cm9uZyFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBbLTEsIC0xXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlYnVnIHJheVxyXG4gICAgICAgIC8vIGxldCBsaW5lU2V0czogTGluZUFycmF5W10gPSBbcmF5LnRvTGluZSgxMDApLCBMaW5lQXJyYXkuZnJvbVBsYW5lKHh5KSwgTGluZUFycmF5LmZyb21QbGFuZSh5eiksIExpbmVBcnJheS5mcm9tUGxhbmUoeHopXTtcclxuICAgICAgICAvLyB0aGlzLndoaXRlTGluZVJlbmRlcmVyLnNldCh0aGlzLmdsLCBMaW5lQXJyYXkuZnJvbUpvaW4obGluZVNldHMpLCBEcmF3U3BlZWQuU3RhdGljRHJhdyk7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidm94ZWwgcmF5Y2FzdCBpbml0aWFsaXplZCB3aXRoOlwiKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImRlbHRhczogXCIsIGRlbHRheCwgZGVsdGF5LCBkZWx0YXopO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidCdzOiBcIiwgdHgsIHR5LCB0eik7XHJcblxyXG4gICAgICAgIC8vIHN0YXJ0IGl0ZXJhdGluZ1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY2FzdCBhd2F5IVwiKTtcclxuICAgICAgICAvLyB0aGlzLmFkZFByZXZpZXdDdWJlKG5ldyBWZWN0b3IzKHgseSx6KSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coeCx5LHopO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgcmFuZ2U7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpcy5hZGRQcmV2aWV3Q3ViZShuZXcgVmVjdG9yMyh4cHJldix5cHJldix6cHJldikpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgaGl0LCByZXR1cm4gcHJldmlvdXNcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5tYXAudHJ5R2V0KHgseSx6KTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZm91bmQgYSBjdWJlIGFmdGVyIFwiICsgaSArIFwic3RlcHMuLi5cIik7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmFkZFByZXZpZXdDdWJlKG5ldyBWZWN0b3IzKHhwcmV2LHlwcmV2LHpwcmV2KSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMubWFwLmdldEluZGV4KHgseSx6KSwgdGhpcy5tYXAuZ2V0SW5kZXgoeHByZXYsIHlwcmV2LCB6cHJldildO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeHByZXYgPSB4O1xyXG4gICAgICAgICAgICAgICAgeXByZXYgPSB5O1xyXG4gICAgICAgICAgICAgICAgenByZXYgPSB6O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBjdWJlIVxyXG4gICAgICAgICAgICBpZiAodHggPCB0eSAmJiB0eCA8IHR6KSB7XHJcbiAgICAgICAgICAgICAgICAvLyB4IFxyXG4gICAgICAgICAgICAgICAgdHggKz0gZGVsdGF4O1xyXG4gICAgICAgICAgICAgICAgeCArPSBzdGVwWDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eSA8IHR6KSB7XHJcbiAgICAgICAgICAgICAgICAvLyB5XHJcbiAgICAgICAgICAgICAgICB0eSArPSBkZWx0YXk7XHJcbiAgICAgICAgICAgICAgICB5ICs9IHN0ZXBZO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gelxyXG4gICAgICAgICAgICAgICAgdHogKz0gZGVsdGF6O1xyXG4gICAgICAgICAgICAgICAgeiArPSBzdGVwWjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gWy0xLCAtMV1cclxuICAgIH1cclxuXHJcbiAgICAvLyBmbHVzaCB0aGlzLm1lc2hSZW5kZXJlclxyXG4gICAgLy8gdHVybiB0aGlzLm1hcCBpbnRvIHRoaXMubWFwR2VvXHJcbiAgICBidWZmZXJNYXAoKSB7XHJcbiAgICAgICAgbGV0IG1hcEdlbzogUmVuZGVyTWVzaFtdID0gW11cclxuICAgICAgICB0aGlzLm1hcC5pdGVyKChlbnRyeSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVudHJ5ID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBtYXBDb29yZCA9IHRoaXMubWFwLmdldENvb3JkcyhpbmRleCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29vcmQgPSB0aGlzLm1hcFRvV29ybGQobWFwQ29vcmQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1YmUgPSB0aGlzLmNyZWF0ZUN1YmUoY29vcmQpO1xyXG4gICAgICAgICAgICAgICAgbWFwR2VvLnB1c2goUHVyZU1lc2guZnJvbUN1YmUoY3ViZSkudG9EaXNwbGF5TWVzaCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubWVzaFJlbmRlcmVyLnNldCh0aGlzLmdsLCBSZW5kZXJNZXNoLmZyb21Kb2luKG1hcEdlbykpO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgd29ybGRUb01hcChjb29yZDogVmVjdG9yMykgOiBWZWN0b3IzIHtcclxuICAgICAgICBsZXQgaGFsZnNpemUgPSAodGhpcy5zaXplIC8gMikgKyAodGhpcy5jZWxsU2l6ZSAvIDIpO1xyXG4gICAgICAgIHJldHVybiBjb29yZC5hZGRlZChuZXcgVmVjdG9yMyhoYWxmc2l6ZSwgaGFsZnNpemUsIGhhbGZzaXplKSkuZmxvb3JlZCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtYXBUb1dvcmxkKHBvaW50OiBWZWN0b3IzKSA6IFZlY3RvcjMge1xyXG4gICAgICAgIGxldCBoYWxmc2l6ZSA9IHRoaXMuc2l6ZSAvIDI7XHJcbiAgICAgICAgcmV0dXJuIHBvaW50LmFkZGVkKG5ldyBWZWN0b3IzKC1oYWxmc2l6ZSwgLWhhbGZzaXplLCAtaGFsZnNpemUpKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY3JlYXRlQ3ViZShjZW50ZXI6IFZlY3RvcjMpIHtcclxuICAgICAgICBsZXQgaHMgPSB0aGlzLmNlbGxTaXplIC8gMjtcclxuICAgICAgICBsZXQgbW92ZSA9IE1hdHJpeDQubmV3VHJhbnNsYXRpb24oY2VudGVyLngsIGNlbnRlci55LCBjZW50ZXIueik7XHJcbiAgICAgICAgbGV0IGN1YmUgPSBuZXcgQ3ViZShQbGFuZS5Xb3JsZFhZKCkudHJhbnNmb3JtKG1vdmUpLCBEb21haW4zLmZyb21Cb3VuZHMoLWhzLCBocywgLWhzLCBocywtaHMsIGhzKSk7XHJcbiAgICAgICAgcmV0dXJuIGN1YmU7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/app/geometry-app.ts\n");

/***/ }),

/***/ "./src/app/mesh-inspector-app.ts":
/*!***************************************!*\
  !*** ./src/app/mesh-inspector-app.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MeshInspectorApp\": () => /* binding */ MeshInspectorApp\n/* harmony export */ });\n/* harmony import */ var _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mesh/pure-mesh */ \"./src/mesh/pure-mesh.ts\");\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _render_camera__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render/camera */ \"./src/render/camera.ts\");\n/* harmony import */ var _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../render/dot-renderer3 */ \"./src/render/dot-renderer3.ts\");\n/* harmony import */ var _render_line_renderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../render/line-renderer */ \"./src/render/line-renderer.ts\");\n/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./app */ \"./src/app/app.ts\");\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n/* harmony import */ var _geo_plane__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geo/plane */ \"./src/geo/plane.ts\");\n/* harmony import */ var _geo_cube__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geo/cube */ \"./src/geo/cube.ts\");\n/* harmony import */ var _render_mesh_debug_renderer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../render/mesh-debug-renderer */ \"./src/render/mesh-debug-renderer.ts\");\n/* harmony import */ var _system_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../system/ui */ \"./src/system/ui.ts\");\n// name:    shapes-app.ts\r\n// author:  Jos Feenstra\r\n// purpose: test creation of basic mesh shapes. Test UI\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass MeshInspectorApp extends _app__WEBPACK_IMPORTED_MODULE_6__.App {\r\n    constructor(gl) {\r\n        // setup render env\r\n        super(gl);\r\n        // geo data\r\n        this.plane = _geo_plane__WEBPACK_IMPORTED_MODULE_8__.Plane.WorldXY();\r\n        this.geo = [];\r\n        // logic data \r\n        this.distance = new _system_ui__WEBPACK_IMPORTED_MODULE_11__.SliderParameter(\"distance\", 3.0, 0, 4.0, 0.01);\r\n        this.size = 10;\r\n        this.cellSize = 0.5;\r\n        this.radius = new _system_ui__WEBPACK_IMPORTED_MODULE_11__.SliderParameter(\"radius\", 1.0, 0, 4.0, 0.01);\r\n        this.detail = new _system_ui__WEBPACK_IMPORTED_MODULE_11__.SliderParameter(\"detail\", 5, 0, 100, 1);\r\n        this.renderNormals = new _system_ui__WEBPACK_IMPORTED_MODULE_11__.SliderParameter(\"render normals\", 1, 0, 1, 1);\r\n        let canvas = gl.canvas;\r\n        // TODO abstract this to scene\r\n        this.camera = new _render_camera__WEBPACK_IMPORTED_MODULE_3__.Camera(canvas);\r\n        this.camera.z_offset = -10;\r\n        this.camera.angleAlpha = 0.4;\r\n        this.camera.angleBeta = 0.5;\r\n        this.dotRenderer = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_4__.DotRenderer3(gl, 4, [0, 1, 0, 1]);\r\n        this.meshRenderer = new _render_mesh_debug_renderer__WEBPACK_IMPORTED_MODULE_10__.MeshDebugRenderer(gl, [0, 0, 1, 1], [0, 0, 0.5, 1]);\r\n        this.lineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_5__.LineRenderer(gl);\r\n    }\r\n    ui(ui) {\r\n        // TODO : think of a system that ties parameter & slider together fully\r\n        ui.addSlider(this.radius, (value) => {\r\n            this.start();\r\n        });\r\n        ui.addSlider(this.distance, (value) => {\r\n            this.start();\r\n        });\r\n        ui.addSlider(this.detail, (value) => {\r\n            this.start();\r\n        });\r\n        ui.addBooleanSlider(this.renderNormals, (b) => {\r\n            this.start();\r\n        });\r\n    }\r\n    start() {\r\n        let grid = _mesh_line_array__WEBPACK_IMPORTED_MODULE_7__.LineArray.fromGrid(this.plane, this.size, this.cellSize);\r\n        let spherePerRing = this.detail.get() * 2;\r\n        let mesh = _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromJoin([\r\n            _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromSphere(new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(this.distance.get(), 0, 0), this.radius.get(), this.detail.get(), spherePerRing),\r\n            _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromCube(new _geo_cube__WEBPACK_IMPORTED_MODULE_9__.Cube(this.plane, _math_domain__WEBPACK_IMPORTED_MODULE_1__.Domain3.fromRadius(this.radius.get()))),\r\n            _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromCone(new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(-this.distance.get(), 0, -this.radius.get()), this.radius.get(), this.radius.get() * 2, spherePerRing),\r\n        ]);\r\n        let dmesh = mesh.toDisplayMesh();\r\n        if (this.renderNormals.get() == 1) {\r\n            dmesh.calculateFaceNormals();\r\n        }\r\n        // let mesh = Mesh.fromCube(new Cube(this.plane, Domain3.fromRadius(1)));\r\n        // console.log(mesh.verts);\r\n        // console.log(mesh.links);\r\n        // TODO abstract this to scene \r\n        this.meshRenderer.set(this.gl, dmesh);\r\n        // this.lineRenderer.set(this.gl, grid);\r\n        // this.dotRenderer.set(mesh.verts, DrawSpeed.StaticDraw);\r\n    }\r\n    update(state) {\r\n        // move the camera with the mouse\r\n        this.camera.update(state);\r\n    }\r\n    draw(gl) {\r\n        // TODO abstract this to 'scene'\r\n        let matrix = this.camera.totalMatrix;\r\n        this.dotRenderer.render(gl, matrix);\r\n        this.meshRenderer.render(gl, matrix);\r\n        // this.lineRenderer.render(gl, matrix);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2FwcC9tZXNoLWluc3BlY3Rvci1hcHAudHM/NmU0NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEseUJBQXlCO0FBQ3pCLHdCQUF3QjtBQUN4Qix1REFBdUQ7QUFFVjtBQUdKO0FBQ1M7QUFDUjtBQUNhO0FBQ0E7QUFHM0I7QUFHbUI7QUFHVjtBQUNGO0FBQytCO0FBUWY7QUFFNUMsTUFBTSxnQkFBaUIsU0FBUSxxQ0FBRztJQXFCckMsWUFBWSxFQUF5QjtRQUVqQyxtQkFBbUI7UUFDbkIsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBaEJkLFdBQVc7UUFDWCxVQUFLLEdBQVUscURBQWEsRUFBRSxDQUFDO1FBRS9CLFFBQUcsR0FBaUIsRUFBRSxDQUFDO1FBRXZCLGNBQWM7UUFDZCxhQUFRLEdBQUcsSUFBSSx3REFBZSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM5RCxTQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ1YsYUFBUSxHQUFHLEdBQUcsQ0FBQztRQUNmLFdBQU0sR0FBRyxJQUFJLHdEQUFlLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzFELFdBQU0sR0FBRyxJQUFJLHdEQUFlLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELGtCQUFhLEdBQUcsSUFBSSx3REFBZSxDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBTTlELElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxNQUEyQixDQUFDO1FBRTVDLDhCQUE4QjtRQUM5QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksa0RBQU0sQ0FBQyxN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YUFBYSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRTtZQUMvQixLQUFLLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztTQUNoQztRQUVELHlFQUF5RTtRQUV6RSwyQkFBMkI7UUFDM0IsMkJBQTJCO1FBRTNCLCtCQUErQjtRQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3RDLHdDQUF3QztRQUN4QywwREFBMEQ7SUFDOUQsQ0FBQztJQUdELE1BQU0sQ0FBQyxLQUFpQjtRQUVwQixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFOUIsQ0FBQztJQUdELElBQUksQ0FBQyxFQUF5QjtRQUMxQixnQ0FBZ0M7UUFDaEMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUM7UUFFckMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNyQyx3Q0FBd0M7SUFDNUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL2FwcC9tZXNoLWluc3BlY3Rvci1hcHAudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBuYW1lOiAgICBzaGFwZXMtYXBwLnRzXHJcbi8vIGF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiB0ZXN0IGNyZWF0aW9uIG9mIGJhc2ljIG1lc2ggc2hhcGVzLiBUZXN0IFVJXHJcblxyXG5pbXBvcnQgeyBQdXJlTWVzaCB9IGZyb20gXCIuLi9tZXNoL3B1cmUtbWVzaFwiO1xyXG5pbXBvcnQgeyBSZW5kZXJNZXNoLCBtZXNoRnJvbU9iaiB9IGZyb20gXCIuLi9tZXNoL3JlbmRlci1tZXNoXCI7XHJcbmltcG9ydCB7IGFkZERyb3BGaWxlRXZlbnRMaXN0ZW5lcnMsIGxvYWRUZXh0RnJvbUZpbGUgfSBmcm9tIFwiLi4vc3lzdGVtL2RvbXdyYXBwZXJzXCI7XHJcbmltcG9ydCB7IERvbWFpbjMgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi4vcmVuZGVyL2NhbWVyYVwiO1xyXG5pbXBvcnQgeyBEb3RSZW5kZXJlcjMgfSBmcm9tIFwiLi4vcmVuZGVyL2RvdC1yZW5kZXJlcjNcIjtcclxuaW1wb3J0IHsgTGluZVJlbmRlcmVyIH0gZnJvbSBcIi4uL3JlbmRlci9saW5lLXJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNpbXBsZU1lc2hSZW5kZXJlciB9IGZyb20gXCIuLi9yZW5kZXIvc2ltcGxlLW1lc2gtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSW5wdXRTdGF0ZSB9IGZyb20gXCIuLi9zeXN0ZW0vaW5wdXQtc3RhdGVcIjtcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XHJcbmltcG9ydCB7IERyYXdTcGVlZCB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgVmVjdG9yM0FycmF5IH0gZnJvbSBcIi4uL2RhdGEvdmVjdG9yLWFycmF5XCI7XHJcbmltcG9ydCB7IExpbmVBcnJheSB9IGZyb20gXCIuLi9tZXNoL2xpbmUtYXJyYXlcIjtcclxuaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi4vZGF0YS9mbG9hdC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgU3RhdCB9IGZyb20gXCIuLi9tYXRoL3N0YXRpc3RpY3NcIjtcclxuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vZ2VvL3BsYW5lXCI7XHJcbmltcG9ydCB7IEN1YmUgfSBmcm9tIFwiLi4vZ2VvL2N1YmVcIjtcclxuaW1wb3J0IHsgTWVzaERlYnVnUmVuZGVyZXIgfSBmcm9tIFwiLi4vcmVuZGVyL21lc2gtZGVidWctcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgTWF0cml4NCB9IGZyb20gXCIuLi9tYXRoL21hdHJpeFwiO1xyXG5pbXBvcnQgeyBDaXJjbGUzIH0gZnJvbSBcIi4uL2dlby9jaXJjbGUzXCI7XHJcbmltcG9ydCB7IEludE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2ludC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgSW50Q3ViZSB9IGZyb20gXCIuLi9kYXRhL2ludC1jdWJlXCI7XHJcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9tYXRoL3JheVwiO1xyXG5pbXBvcnQgeyBQZXJsaW4gfSBmcm9tIFwiLi4vYWxnb3JpdGhtcy9wZXJsaW4tbm9pc2VcIjtcclxuaW1wb3J0IHsgQ29yZSB9IGZyb20gXCIuLi9jb3JlXCI7XHJcbmltcG9ydCB7IFNsaWRlclBhcmFtZXRlciwgVUkgfSBmcm9tIFwiLi4vc3lzdGVtL3VpXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVzaEluc3BlY3RvckFwcCBleHRlbmRzIEFwcCB7XHJcblxyXG4gICAgLy8gcmVuZGVyaW5mb1xyXG4gICAgY2FtZXJhOiBDYW1lcmE7XHJcbiAgICBkb3RSZW5kZXJlcjogRG90UmVuZGVyZXIzO1xyXG4gICAgbGluZVJlbmRlcmVyOiBMaW5lUmVuZGVyZXI7XHJcbiAgICBtZXNoUmVuZGVyZXI6IE1lc2hEZWJ1Z1JlbmRlcmVyO1xyXG5cclxuICAgIC8vIGdlbyBkYXRhXHJcbiAgICBwbGFuZTogUGxhbmUgPSBQbGFuZS5Xb3JsZFhZKCk7XHJcbiAgICBncmlkPzogTGluZUFycmF5O1xyXG4gICAgZ2VvOiBSZW5kZXJNZXNoW10gPSBbXTtcclxuXHJcbiAgICAvLyBsb2dpYyBkYXRhIFxyXG4gICAgZGlzdGFuY2UgPSBuZXcgU2xpZGVyUGFyYW1ldGVyKFwiZGlzdGFuY2VcIiwgMy4wLCAwLCA0LjAsIDAuMDEpO1xyXG4gICAgc2l6ZSA9IDEwO1xyXG4gICAgY2VsbFNpemUgPSAwLjU7XHJcbiAgICByYWRpdXMgPSBuZXcgU2xpZGVyUGFyYW1ldGVyKFwicmFkaXVzXCIsIDEuMCwgMCwgNC4wLCAwLjAxKTtcclxuICAgIGRldGFpbCA9IG5ldyBTbGlkZXJQYXJhbWV0ZXIoXCJkZXRhaWxcIiwgNSwgMCwgMTAwLCAxKTtcclxuICAgIHJlbmRlck5vcm1hbHMgPSBuZXcgU2xpZGVyUGFyYW1ldGVyKFwicmVuZGVyIG5vcm1hbHNcIiwgMSwgMCwgMSwgMSk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNldHVwIHJlbmRlciBlbnZcclxuICAgICAgICBzdXBlcihnbCk7XHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGdsLmNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHJcbiAgICAgICAgLy8gVE9ETyBhYnN0cmFjdCB0aGlzIHRvIHNjZW5lXHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKGNhbnZhcyk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEuel9vZmZzZXQgPSAtMTA7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEuYW5nbGVBbHBoYSA9IDAuNDtcclxuICAgICAgICB0aGlzLmNhbWVyYS5hbmdsZUJldGEgPSAwLjU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5kb3RSZW5kZXJlciA9IG5ldyBEb3RSZW5kZXJlcjMoZ2wsIDQsIFswLDEsMCwxXSk7XHJcbiAgICAgICAgdGhpcy5tZXNoUmVuZGVyZXIgPSBuZXcgTWVzaERlYnVnUmVuZGVyZXIoZ2wsIFswLDAsMSwxXSwgWzAsMCwwLjUsMV0pO1xyXG4gICAgICAgIHRoaXMubGluZVJlbmRlcmVyID0gbmV3IExpbmVSZW5kZXJlcihnbCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHVpKHVpOiBVSSkge1xyXG5cclxuICAgICAgICAvLyBUT0RPIDogdGhpbmsgb2YgYSBzeXN0ZW0gdGhhdCB0aWVzIHBhcmFtZXRlciAmIHNsaWRlciB0b2dldGhlciBmdWxseVxyXG4gICAgICAgIFxyXG4gICAgICAgIHVpLmFkZFNsaWRlcih0aGlzLnJhZGl1cywgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdWkuYWRkU2xpZGVyKHRoaXMuZGlzdGFuY2UsICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHVpLmFkZFNsaWRlcih0aGlzLmRldGFpbCwgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdWkuYWRkQm9vbGVhblNsaWRlcih0aGlzLnJlbmRlck5vcm1hbHMsIChiKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgZ3JpZCA9IExpbmVBcnJheS5mcm9tR3JpZCh0aGlzLnBsYW5lLCB0aGlzLnNpemUsIHRoaXMuY2VsbFNpemUpO1xyXG4gICAgICAgIGxldCBzcGhlcmVQZXJSaW5nID0gdGhpcy5kZXRhaWwuZ2V0KCkgKiAyO1xyXG4gICAgICAgIGxldCBtZXNoID0gUHVyZU1lc2guZnJvbUpvaW4oW1xyXG4gICAgICAgICAgICBQdXJlTWVzaC5mcm9tU3BoZXJlKG5ldyBWZWN0b3IzKHRoaXMuZGlzdGFuY2UuZ2V0KCksMCwwKSwgdGhpcy5yYWRpdXMuZ2V0KCksIHRoaXMuZGV0YWlsLmdldCgpLCBzcGhlcmVQZXJSaW5nKSxcclxuICAgICAgICAgICAgUHVyZU1lc2guZnJvbUN1YmUobmV3IEN1YmUodGhpcy5wbGFuZSwgRG9tYWluMy5mcm9tUmFkaXVzKHRoaXMucmFkaXVzLmdldCgpKSkpLFxyXG4gICAgICAgICAgICBQdXJlTWVzaC5mcm9tQ29uZShuZXcgVmVjdG9yMygtdGhpcy5kaXN0YW5jZS5nZXQoKSwwLC10aGlzLnJhZGl1cy5nZXQoKSksIHRoaXMucmFkaXVzLmdldCgpLCB0aGlzLnJhZGl1cy5nZXQoKSAqIDIsIHNwaGVyZVBlclJpbmcpLFxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIGxldCBkbWVzaCA9IG1lc2gudG9EaXNwbGF5TWVzaCgpO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyTm9ybWFscy5nZXQoKSA9PSAxKSB7XHJcbiAgICAgICAgICAgIGRtZXNoLmNhbGN1bGF0ZUZhY2VOb3JtYWxzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBsZXQgbWVzaCA9IE1lc2guZnJvbUN1YmUobmV3IEN1YmUodGhpcy5wbGFuZSwgRG9tYWluMy5mcm9tUmFkaXVzKDEpKSk7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG1lc2gudmVydHMpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG1lc2gubGlua3MpO1xyXG5cclxuICAgICAgICAvLyBUT0RPIGFic3RyYWN0IHRoaXMgdG8gc2NlbmUgXHJcbiAgICAgICAgdGhpcy5tZXNoUmVuZGVyZXIuc2V0KHRoaXMuZ2wsIGRtZXNoKTtcclxuICAgICAgICAvLyB0aGlzLmxpbmVSZW5kZXJlci5zZXQodGhpcy5nbCwgZ3JpZCk7XHJcbiAgICAgICAgLy8gdGhpcy5kb3RSZW5kZXJlci5zZXQobWVzaC52ZXJ0cywgRHJhd1NwZWVkLlN0YXRpY0RyYXcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB1cGRhdGUoc3RhdGU6IElucHV0U3RhdGUpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBtb3ZlIHRoZSBjYW1lcmEgd2l0aCB0aGUgbW91c2VcclxuICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGUoc3RhdGUpOyBcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGRyYXcoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgIC8vIFRPRE8gYWJzdHJhY3QgdGhpcyB0byAnc2NlbmUnXHJcbiAgICAgICAgbGV0IG1hdHJpeCA9IHRoaXMuY2FtZXJhLnRvdGFsTWF0cml4O1xyXG5cclxuICAgICAgICB0aGlzLmRvdFJlbmRlcmVyLnJlbmRlcihnbCwgbWF0cml4KTtcclxuICAgICAgICB0aGlzLm1lc2hSZW5kZXJlci5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICAgICAgLy8gdGhpcy5saW5lUmVuZGVyZXIucmVuZGVyKGdsLCBtYXRyaXgpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/app/mesh-inspector-app.ts\n");

/***/ }),

/***/ "./src/app/obj-loader-app.ts":
/*!***********************************!*\
  !*** ./src/app/obj-loader-app.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ObjLoaderApp\": () => /* binding */ ObjLoaderApp\n/* harmony export */ });\n/* harmony import */ var _mesh_render_mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mesh/render-mesh */ \"./src/mesh/render-mesh.ts\");\n/* harmony import */ var _system_domwrappers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system/domwrappers */ \"./src/system/domwrappers.ts\");\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _render_camera__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../render/camera */ \"./src/render/camera.ts\");\n/* harmony import */ var _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../render/dot-renderer3 */ \"./src/render/dot-renderer3.ts\");\n/* harmony import */ var _render_line_renderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../render/line-renderer */ \"./src/render/line-renderer.ts\");\n/* harmony import */ var _render_simple_mesh_renderer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../render/simple-mesh-renderer */ \"./src/render/simple-mesh-renderer.ts\");\n/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./app */ \"./src/app/app.ts\");\n/* harmony import */ var _render_renderer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../render/renderer */ \"./src/render/renderer.ts\");\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n// name:    obj-loader-app.ts\r\n// author:  Jos Feenstra\r\n// purpose: drag an obj to the canvas, and view it on the web\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ObjLoaderApp extends _app__WEBPACK_IMPORTED_MODULE_8__.App {\r\n    constructor(gl) {\r\n        super(gl);\r\n        let canvas = gl.canvas;\r\n        this.dotRenderer = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_5__.DotRenderer3(gl, 4, [0, 0, 1, 1], false);\r\n        this.lineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_6__.LineRenderer(gl, [0, 0, 1, 0.5]);\r\n        this.meshRenderer = new _render_simple_mesh_renderer__WEBPACK_IMPORTED_MODULE_7__.SimpleMeshRenderer(gl, [0, 0, 1, 0.25]);\r\n        this.camera = new _render_camera__WEBPACK_IMPORTED_MODULE_4__.Camera(canvas);\r\n        (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_1__.addDropFileEventListeners)(canvas, processFiles.bind(this));\r\n    }\r\n    start() {\r\n        // nothing\r\n    }\r\n    update(state) {\r\n        // move the camera with the mouse\r\n        this.camera.update(state);\r\n    }\r\n    draw(gl) {\r\n        // get to-screen matrix\r\n        const canvas = gl.canvas;\r\n        let matrix = this.camera.totalMatrix;\r\n        if (this.obj == undefined)\r\n            this.dotRenderer.setAndRender(gl, matrix, _data_vector_array__WEBPACK_IMPORTED_MODULE_10__.Vector3Array.fromList([new _math_vector__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 0, 0), new _math_vector__WEBPACK_IMPORTED_MODULE_3__.Vector3(1, 1, 1)]));\r\n        else {\r\n            this.dotRenderer.setAndRender(gl, matrix, this.obj.verts);\r\n            // this.meshRenderer.render(gl, matrix);\r\n            this.lineRenderer.render(gl, matrix);\r\n        }\r\n    }\r\n}\r\nfunction processFiles(files) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        // assume its 1 file, the obj file.\r\n        let file = files[0];\r\n        // see if we can build an correct obj from the files\r\n        let objtext = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_1__.loadTextFromFile)(file);\r\n        this.obj = (0,_mesh_render_mesh__WEBPACK_IMPORTED_MODULE_0__.meshFromObj)(objtext);\r\n        this.renderable = _mesh_line_array__WEBPACK_IMPORTED_MODULE_11__.LineArray.fromMesh(this.obj);\r\n        // scale down if too big.\r\n        // NOTE: this could also be done using matrices. Figure that out!\r\n        console.log(\"scaling...\");\r\n        let bounds = _math_domain__WEBPACK_IMPORTED_MODULE_2__.Domain3.fromInclude(this.obj.verts);\r\n        let factor = 1 / bounds.size().largestValue();\r\n        // TODO : one line these types of operations? \r\n        // they will be quite common i think...\r\n        let count = this.obj.verts.count();\r\n        for (let i = 0; i < count; i++) {\r\n            let vec = this.obj.verts.getVector(i);\r\n            vec.scale(factor);\r\n            this.obj.verts.setVector(i, vec);\r\n        }\r\n        // let objBounds = Domain3.fromInclude(this.obj.verts);\r\n        // console.log(objBounds);\r\n        // let factor = 100;\r\n        // let smaller = Domain3.fromRadii(\r\n        //     objBounds.x.size() / factor,\r\n        //     objBounds.y.size() / factor,\r\n        //     objBounds.z.size() / factor,\r\n        // );\r\n        // this.obj.verts = objBounds.remapAll(this.obj.verts, smaller);\r\n        console.log(\"done!\");\r\n        // put the data into the render buffers.\r\n        // this.meshRenderer.set(this.gl, this.obj.verts, this.obj.faces);\r\n        this.lineRenderer.set(this.gl, this.renderable, _render_renderer__WEBPACK_IMPORTED_MODULE_9__.DrawSpeed.StaticDraw);\r\n    });\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2FwcC9vYmotbG9hZGVyLWFwcC50cz9hYWY0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw2QkFBNkI7QUFDN0Isd0JBQXdCO0FBQ3hCLDZEQUE2RDs7Ozs7Ozs7OztBQUVDO0FBQ3NCO0FBQzNDO0FBQ0E7QUFDQztBQUNhO0FBQ0E7QUFDYTtBQUV4QztBQUNtQjtBQUNLO0FBQ0w7QUFHeEMsTUFBTSxZQUFhLFNBQVEscUNBQUc7SUFTakMsWUFBWSxFQUF5QjtRQUVqQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDVixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBMkIsQ0FBQztRQUM1QyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksK0RBQVksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDN0QsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLCtEQUFZLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksNEVBQWtCLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksa0RBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVqQyw4RUFBeUIsQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFRCxLQUFLO1FBQ0QsVUFBVTtJQUNkLENBQUM7SUFFRCxNQUFNLENBQUMsS0FBaUI7UUFFcEIsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLENBQUMsRUFBeUI7UUFFMUIsdUJBQXVCO1FBQ3ZCLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxNQUEyQixDQUFDO1FBQzlDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDO1FBR3JDLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxTQUFTO1lBQ3JCLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsc0VBQXFCLENBQUMsQ0FBQyxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMxRztZQUNELElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLEdBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMzRCx3Q0FBd0M7WUFDeEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ3hDO0lBQ0wsQ0FBQztDQUNKO0FBRUQsU0FBZSxZQUFZLENBQXFCLEtBQWU7O1FBRTNELG1DQUFtQztRQUNuQyxJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFcEIsb0RBQW9EO1FBQ3BELElBQUksT0FBTyxHQUFHLE1BQU0scUVBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLEdBQUcsR0FBRyw4REFBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxVQUFVLEdBQUcsaUVBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRS9DLHlCQUF5QjtRQUN6QixpRUFBaUU7UUFDakUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUUxQixJQUFJLE1BQU0sR0FBRyw2REFBbUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pELElBQUksTUFBTSxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7UUFFOUMsOENBQThDO1FBQzlDLHVDQUF1QztRQUN2QyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNuQyxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzVCLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDckMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsQixJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3BDO1FBR0QsdURBQXVEO1FBQ3ZELDBCQUEwQjtRQUUxQixvQkFBb0I7UUFDcEIsbUNBQW1DO1FBQ25DLG1DQUFtQztRQUNuQyxtQ0FBbUM7UUFDbkMsbUNBQW1DO1FBQ25DLEtBQUs7UUFDTCxnRUFBZ0U7UUFDaEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUVyQix3Q0FBd0M7UUFDeEMsa0VBQWtFO1FBQ2xFLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxrRUFBb0IsQ0FBQyxDQUFDO0lBQzFFLENBQUM7Q0FBQSIsImZpbGUiOiIuL3NyYy9hcHAvb2JqLWxvYWRlci1hcHAudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBuYW1lOiAgICBvYmotbG9hZGVyLWFwcC50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogZHJhZyBhbiBvYmogdG8gdGhlIGNhbnZhcywgYW5kIHZpZXcgaXQgb24gdGhlIHdlYlxyXG5cclxuaW1wb3J0IHsgUmVuZGVyTWVzaCwgbWVzaEZyb21PYmogfSBmcm9tIFwiLi4vbWVzaC9yZW5kZXItbWVzaFwiO1xyXG5pbXBvcnQgeyBhZGREcm9wRmlsZUV2ZW50TGlzdGVuZXJzLCBsb2FkVGV4dEZyb21GaWxlIH0gZnJvbSBcIi4uL3N5c3RlbS9kb213cmFwcGVyc1wiO1xyXG5pbXBvcnQgeyBEb21haW4zIH0gZnJvbSBcIi4uL21hdGgvZG9tYWluXCI7XHJcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4uL3JlbmRlci9jYW1lcmFcIjtcclxuaW1wb3J0IHsgRG90UmVuZGVyZXIzIH0gZnJvbSBcIi4uL3JlbmRlci9kb3QtcmVuZGVyZXIzXCI7XHJcbmltcG9ydCB7IExpbmVSZW5kZXJlciB9IGZyb20gXCIuLi9yZW5kZXIvbGluZS1yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBTaW1wbGVNZXNoUmVuZGVyZXIgfSBmcm9tIFwiLi4vcmVuZGVyL3NpbXBsZS1tZXNoLXJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IElucHV0U3RhdGUgfSBmcm9tIFwiLi4vc3lzdGVtL2lucHV0LXN0YXRlXCI7XHJcbmltcG9ydCB7IEFwcCB9IGZyb20gXCIuL2FwcFwiO1xyXG5pbXBvcnQgeyBEcmF3U3BlZWQgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFZlY3RvcjNBcnJheSB9IGZyb20gXCIuLi9kYXRhL3ZlY3Rvci1hcnJheVwiO1xyXG5pbXBvcnQgeyBMaW5lQXJyYXkgfSBmcm9tIFwiLi4vbWVzaC9saW5lLWFycmF5XCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIE9iakxvYWRlckFwcCBleHRlbmRzIEFwcCB7XHJcbiAgICBcclxuICAgIGRvdFJlbmRlcmVyOiBEb3RSZW5kZXJlcjM7XHJcbiAgICBsaW5lUmVuZGVyZXI6IExpbmVSZW5kZXJlcjtcclxuICAgIG1lc2hSZW5kZXJlcjogU2ltcGxlTWVzaFJlbmRlcmVyO1xyXG4gICAgY2FtZXJhOiBDYW1lcmE7XHJcbiAgICBvYmo/OiBSZW5kZXJNZXNoO1xyXG4gICAgcmVuZGVyYWJsZT86IExpbmVBcnJheTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3VwZXIoZ2wpO1xyXG4gICAgICAgIGxldCBjYW52YXMgPSBnbC5jYW52YXMgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5kb3RSZW5kZXJlciA9IG5ldyBEb3RSZW5kZXJlcjMoZ2wsIDQsIFswLDAsMSwxXSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubGluZVJlbmRlcmVyID0gbmV3IExpbmVSZW5kZXJlcihnbCwgWzAsMCwxLDAuNV0pO1xyXG4gICAgICAgIHRoaXMubWVzaFJlbmRlcmVyID0gbmV3IFNpbXBsZU1lc2hSZW5kZXJlcihnbCwgWzAsMCwxLDAuMjVdKTtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBDYW1lcmEoY2FudmFzKTtcclxuXHJcbiAgICAgICAgYWRkRHJvcEZpbGVFdmVudExpc3RlbmVycyhjYW52YXMsIHByb2Nlc3NGaWxlcy5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICAvLyBub3RoaW5nXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlOiBJbnB1dFN0YXRlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gbW92ZSB0aGUgY2FtZXJhIHdpdGggdGhlIG1vdXNlXHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlKHN0YXRlKTsgXHJcbiAgICB9XHJcblxyXG4gICAgZHJhdyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcblxyXG4gICAgICAgIC8vIGdldCB0by1zY3JlZW4gbWF0cml4XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZ2wuY2FudmFzIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGxldCBtYXRyaXggPSB0aGlzLmNhbWVyYS50b3RhbE1hdHJpeDtcclxuXHJcbiAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMub2JqID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5kb3RSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgVmVjdG9yM0FycmF5LmZyb21MaXN0KFtuZXcgVmVjdG9yMygwLDAsMCksIG5ldyBWZWN0b3IzKDEsMSwxKV0pKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kb3RSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgdGhpcy5vYmohLnZlcnRzKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5tZXNoUmVuZGVyZXIucmVuZGVyKGdsLCBtYXRyaXgpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVSZW5kZXJlci5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICAgICAgfSAgICBcclxuICAgIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0ZpbGVzKHRoaXM6IE9iakxvYWRlckFwcCwgZmlsZXM6IEZpbGVMaXN0KSB7XHJcblxyXG4gICAgLy8gYXNzdW1lIGl0cyAxIGZpbGUsIHRoZSBvYmogZmlsZS5cclxuICAgIGxldCBmaWxlID0gZmlsZXNbMF07XHJcblxyXG4gICAgLy8gc2VlIGlmIHdlIGNhbiBidWlsZCBhbiBjb3JyZWN0IG9iaiBmcm9tIHRoZSBmaWxlc1xyXG4gICAgbGV0IG9ianRleHQgPSBhd2FpdCBsb2FkVGV4dEZyb21GaWxlKGZpbGUpO1xyXG4gICAgdGhpcy5vYmogPSBtZXNoRnJvbU9iaihvYmp0ZXh0KTtcclxuICAgIHRoaXMucmVuZGVyYWJsZSA9IExpbmVBcnJheS5mcm9tTWVzaCh0aGlzLm9iaik7XHJcblxyXG4gICAgLy8gc2NhbGUgZG93biBpZiB0b28gYmlnLlxyXG4gICAgLy8gTk9URTogdGhpcyBjb3VsZCBhbHNvIGJlIGRvbmUgdXNpbmcgbWF0cmljZXMuIEZpZ3VyZSB0aGF0IG91dCFcclxuICAgIGNvbnNvbGUubG9nKFwic2NhbGluZy4uLlwiKTtcclxuXHJcbiAgICBsZXQgYm91bmRzID0gRG9tYWluMy5mcm9tSW5jbHVkZSh0aGlzLm9iai52ZXJ0cyk7XHJcbiAgICBsZXQgZmFjdG9yID0gMSAvIGJvdW5kcy5zaXplKCkubGFyZ2VzdFZhbHVlKCk7XHJcbiAgICBcclxuICAgIC8vIFRPRE8gOiBvbmUgbGluZSB0aGVzZSB0eXBlcyBvZiBvcGVyYXRpb25zPyBcclxuICAgIC8vIHRoZXkgd2lsbCBiZSBxdWl0ZSBjb21tb24gaSB0aGluay4uLlxyXG4gICAgbGV0IGNvdW50ID0gdGhpcy5vYmoudmVydHMuY291bnQoKTtcclxuICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgIGxldCB2ZWMgPSB0aGlzLm9iai52ZXJ0cy5nZXRWZWN0b3IoaSlcclxuICAgICAgICB2ZWMuc2NhbGUoZmFjdG9yKTtcclxuICAgICAgICB0aGlzLm9iai52ZXJ0cy5zZXRWZWN0b3IoaSwgdmVjKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyBsZXQgb2JqQm91bmRzID0gRG9tYWluMy5mcm9tSW5jbHVkZSh0aGlzLm9iai52ZXJ0cyk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhvYmpCb3VuZHMpO1xyXG5cclxuICAgIC8vIGxldCBmYWN0b3IgPSAxMDA7XHJcbiAgICAvLyBsZXQgc21hbGxlciA9IERvbWFpbjMuZnJvbVJhZGlpKFxyXG4gICAgLy8gICAgIG9iakJvdW5kcy54LnNpemUoKSAvIGZhY3RvcixcclxuICAgIC8vICAgICBvYmpCb3VuZHMueS5zaXplKCkgLyBmYWN0b3IsXHJcbiAgICAvLyAgICAgb2JqQm91bmRzLnouc2l6ZSgpIC8gZmFjdG9yLFxyXG4gICAgLy8gKTtcclxuICAgIC8vIHRoaXMub2JqLnZlcnRzID0gb2JqQm91bmRzLnJlbWFwQWxsKHRoaXMub2JqLnZlcnRzLCBzbWFsbGVyKTtcclxuICAgIGNvbnNvbGUubG9nKFwiZG9uZSFcIik7XHJcblxyXG4gICAgLy8gcHV0IHRoZSBkYXRhIGludG8gdGhlIHJlbmRlciBidWZmZXJzLlxyXG4gICAgLy8gdGhpcy5tZXNoUmVuZGVyZXIuc2V0KHRoaXMuZ2wsIHRoaXMub2JqLnZlcnRzLCB0aGlzLm9iai5mYWNlcyk7XHJcbiAgICB0aGlzLmxpbmVSZW5kZXJlci5zZXQodGhpcy5nbCwgdGhpcy5yZW5kZXJhYmxlLCBEcmF3U3BlZWQuU3RhdGljRHJhdyk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/app/obj-loader-app.ts\n");

/***/ }),

/***/ "./src/app/stat-app.ts":
/*!*****************************!*\
  !*** ./src/app/stat-app.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StatApp\": () => /* binding */ StatApp\n/* harmony export */ });\n/* harmony import */ var _render_camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render/camera */ \"./src/render/camera.ts\");\n/* harmony import */ var _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/dot-renderer3 */ \"./src/render/dot-renderer3.ts\");\n/* harmony import */ var _render_line_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render/line-renderer */ \"./src/render/line-renderer.ts\");\n/* harmony import */ var _render_simple_mesh_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render/simple-mesh-renderer */ \"./src/render/simple-mesh-renderer.ts\");\n/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./app */ \"./src/app/app.ts\");\n/* harmony import */ var _data_float_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/float-matrix */ \"./src/data/float-matrix.ts\");\n/* harmony import */ var _math_statistics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/statistics */ \"./src/math/statistics.ts\");\n// name:    obj-loader-app.ts\r\n// author:  Jos Feenstra\r\n// purpose: test statistic functionalties\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass StatApp extends _app__WEBPACK_IMPORTED_MODULE_4__.App {\r\n    constructor(gl) {\r\n        super(gl);\r\n        this.dots = [];\r\n        let canvas = gl.canvas;\r\n        this.dotRenderer = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_1__.DotRenderer3(gl, 4, [0, 0, 1, 1], false);\r\n        this.lineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_2__.LineRenderer(gl, [0, 0, 1, 0.5]);\r\n        this.meshRenderer = new _render_simple_mesh_renderer__WEBPACK_IMPORTED_MODULE_3__.SimpleMeshRenderer(gl, [0, 0, 1, 0.25]);\r\n        this.camera = new _render_camera__WEBPACK_IMPORTED_MODULE_0__.Camera(canvas);\r\n    }\r\n    start() {\r\n        // test things\r\n        let a = _data_float_matrix__WEBPACK_IMPORTED_MODULE_5__.FloatMatrix.fromNative([\r\n            [22., 10., 2., 3., 7.],\r\n            [14., 7., 10., 0., 8.],\r\n            [-1., 13., -1., -11., 3.],\r\n            [-3., -2., 13., -2., 4.],\r\n            [9., 8., 1., -2., 4.],\r\n            [9., 1., -7., 5., -1.],\r\n            [2., -6., 6., 5., 1.],\r\n            [4., 5., 0., -2., 2.]\r\n        ]);\r\n        let data = _math_statistics__WEBPACK_IMPORTED_MODULE_6__.Stat.svd(a);\r\n        console.log(data);\r\n        console.log(Math.sqrt(1248.), 20., Math.sqrt(384.), 0., 0.);\r\n    }\r\n    update(state) {\r\n        // move the camera with the mouse\r\n        this.camera.update(state);\r\n    }\r\n    draw(gl) {\r\n        // get to-screen matrix\r\n        const canvas = gl.canvas;\r\n        let matrix = this.camera.totalMatrix;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2FwcC9zdGF0LWFwcC50cz82Y2M4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsNkJBQTZCO0FBQzdCLHdCQUF3QjtBQUN4Qix5Q0FBeUM7QUFNQztBQUNhO0FBQ0E7QUFDYTtBQUV4QztBQUl1QjtBQUNUO0FBRW5DLE1BQU0sT0FBUSxTQUFRLHFDQUFHO0lBWTVCLFlBQVksRUFBeUI7UUFFakMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBTGQsU0FBSSxHQUFjLEVBQUUsQ0FBQztRQU9qQixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBMkIsQ0FBQztRQUU1QyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksK0RBQVksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDN0QsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLCtEQUFZLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksNEVBQWtCLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksa0RBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRUQsS0FBSztRQUNELGNBQWM7UUFDZCxJQUFJLENBQUMsR0FBRyxzRUFBc0IsQ0FBQztZQUMzQixDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUUsRUFBRSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDdEIsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFDLEdBQUcsRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQ3RCLENBQUMsQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBRSxFQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztZQUN0QixDQUFDLENBQUMsRUFBRSxFQUFDLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDdEIsQ0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDdEIsQ0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFDLENBQUMsRUFBRSxFQUFHLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQztZQUN0QixDQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztZQUN0QixDQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztTQUN6QixDQUFDLENBQUM7UUFFSCxJQUFJLElBQUksR0FBRyxzREFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFDLEdBQUcsRUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFDLEVBQUUsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsTUFBTSxDQUFDLEtBQWlCO1FBRXBCLGlDQUFpQztRQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxDQUFDLEVBQXlCO1FBRTFCLHVCQUF1QjtRQUN2QixNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBMkIsQ0FBQztRQUM5QyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQztJQUl6QyxDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvYXBwL3N0YXQtYXBwLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgb2JqLWxvYWRlci1hcHAudHNcclxuLy8gYXV0aG9yOiAgSm9zIEZlZW5zdHJhXHJcbi8vIHB1cnBvc2U6IHRlc3Qgc3RhdGlzdGljIGZ1bmN0aW9uYWx0aWVzXHJcblxyXG5pbXBvcnQgeyBSZW5kZXJNZXNoLCBtZXNoRnJvbU9iaiB9IGZyb20gXCIuLi9tZXNoL3JlbmRlci1tZXNoXCI7XHJcbmltcG9ydCB7IGFkZERyb3BGaWxlRXZlbnRMaXN0ZW5lcnMsIGxvYWRUZXh0RnJvbUZpbGUgfSBmcm9tIFwiLi4vc3lzdGVtL2RvbXdyYXBwZXJzXCI7XHJcbmltcG9ydCB7IERvbWFpbjMgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi4vcmVuZGVyL2NhbWVyYVwiO1xyXG5pbXBvcnQgeyBEb3RSZW5kZXJlcjMgfSBmcm9tIFwiLi4vcmVuZGVyL2RvdC1yZW5kZXJlcjNcIjtcclxuaW1wb3J0IHsgTGluZVJlbmRlcmVyIH0gZnJvbSBcIi4uL3JlbmRlci9saW5lLXJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNpbXBsZU1lc2hSZW5kZXJlciB9IGZyb20gXCIuLi9yZW5kZXIvc2ltcGxlLW1lc2gtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSW5wdXRTdGF0ZSB9IGZyb20gXCIuLi9zeXN0ZW0vaW5wdXQtc3RhdGVcIjtcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XHJcbmltcG9ydCB7IERyYXdTcGVlZCB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgVmVjdG9yM0FycmF5IH0gZnJvbSBcIi4uL2RhdGEvdmVjdG9yLWFycmF5XCI7XHJcbmltcG9ydCB7IExpbmVBcnJheSB9IGZyb20gXCIuLi9tZXNoL2xpbmUtYXJyYXlcIjtcclxuaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi4vZGF0YS9mbG9hdC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgU3RhdCB9IGZyb20gXCIuLi9tYXRoL3N0YXRpc3RpY3NcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdGF0QXBwIGV4dGVuZHMgQXBwIHtcclxuXHJcbiAgICBkb3RSZW5kZXJlcjogRG90UmVuZGVyZXIzO1xyXG4gICAgbGluZVJlbmRlcmVyOiBMaW5lUmVuZGVyZXI7XHJcbiAgICBtZXNoUmVuZGVyZXI6IFNpbXBsZU1lc2hSZW5kZXJlcjtcclxuXHJcbiAgICBjYW1lcmE6IENhbWVyYTtcclxuXHJcbiAgICBvYmo/OiBSZW5kZXJNZXNoO1xyXG4gICAgZG90czogVmVjdG9yM1tdID0gW107XHJcbiAgICByZW5kZXJhYmxlPzogTGluZUFycmF5O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpIHtcclxuICAgICAgICBcclxuICAgICAgICBzdXBlcihnbCk7XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBnbC5jYW52YXMgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuZG90UmVuZGVyZXIgPSBuZXcgRG90UmVuZGVyZXIzKGdsLCA0LCBbMCwwLDEsMV0sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmxpbmVSZW5kZXJlciA9IG5ldyBMaW5lUmVuZGVyZXIoZ2wsIFswLDAsMSwwLjVdKTtcclxuICAgICAgICB0aGlzLm1lc2hSZW5kZXJlciA9IG5ldyBTaW1wbGVNZXNoUmVuZGVyZXIoZ2wsIFswLDAsMSwwLjI1XSk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKGNhbnZhcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgLy8gdGVzdCB0aGluZ3NcclxuICAgICAgICBsZXQgYSA9IEZsb2F0TWF0cml4LmZyb21OYXRpdmUoW1xyXG4gICAgICAgICAgICBbMjIuLDEwLiwgMi4sICAzLiwgNy5dLFxyXG4gICAgICAgICAgICBbMTQuLCA3LiwxMC4sICAwLiwgOC5dLFxyXG4gICAgICAgICAgICBbLTEuLDEzLiwtMS4sLTExLiwgMy5dLFxyXG4gICAgICAgICAgICBbLTMuLC0yLiwxMy4sIC0yLiwgNC5dLFxyXG4gICAgICAgICAgICBbIDkuLCA4LiwgMS4sIC0yLiwgNC5dLFxyXG4gICAgICAgICAgICBbIDkuLCAxLiwtNy4sICA1LiwtMS5dLFxyXG4gICAgICAgICAgICBbIDIuLC02LiwgNi4sICA1LiwgMS5dLFxyXG4gICAgICAgICAgICBbIDQuLCA1LiwgMC4sIC0yLiwgMi5dXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGxldCBkYXRhID0gU3RhdC5zdmQoYSk7IFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKE1hdGguc3FydCgxMjQ4LiksMjAuLE1hdGguc3FydCgzODQuKSwwLiwwLik7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlOiBJbnB1dFN0YXRlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gbW92ZSB0aGUgY2FtZXJhIHdpdGggdGhlIG1vdXNlXHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlKHN0YXRlKTsgXHJcbiAgICB9XHJcblxyXG4gICAgZHJhdyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcblxyXG4gICAgICAgIC8vIGdldCB0by1zY3JlZW4gbWF0cml4XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZ2wuY2FudmFzIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGxldCBtYXRyaXggPSB0aGlzLmNhbWVyYS50b3RhbE1hdHJpeDtcclxuXHJcblxyXG5cclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/app/stat-app.ts\n");

/***/ }),

/***/ "./src/app/swap-app.ts":
/*!*****************************!*\
  !*** ./src/app/swap-app.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SwapApp\": () => /* binding */ SwapApp\n/* harmony export */ });\n/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app */ \"./src/app/app.ts\");\n\r\n// purpose: swap between different apps.\r\n//          - factory for initiazing these apps\r\n//          - making sure core deletes old apps\r\nclass SwapApp extends _app__WEBPACK_IMPORTED_MODULE_0__.App {\r\n    constructor(gl, core, possibleApps) {\r\n        super(gl);\r\n        this.currentAppIndex = -1;\r\n        this.core = core;\r\n        this.possibleApps = possibleApps;\r\n    }\r\n    ui(ui) {\r\n        let names = [];\r\n        let ids = [];\r\n        let count = this.possibleApps.length;\r\n        for (let i = 0; i < count; i++) {\r\n            names.push(this.possibleApps[i].name);\r\n            ids.push(i);\r\n        }\r\n        ui.addEnum(names, ids, (i) => {\r\n            this.swap(i);\r\n        });\r\n    }\r\n    swap(index) {\r\n        // todo do some range checking\r\n        let AppType = this.possibleApps[index];\r\n        if (this.currentAppIndex > -1) {\r\n            let PreviousType = this.possibleApps[this.currentAppIndex];\r\n            console.log(\"removing\", PreviousType.name);\r\n            this.core.removeApp(PreviousType.name);\r\n        }\r\n        console.log(\"constructing\", AppType.name);\r\n        this.currentAppIndex = index;\r\n        let app = new AppType(this.gl);\r\n        this.core.addApp(app);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2FwcC9zd2FwLWFwcC50cz9jYmI2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBSTRCO0FBRTVCLHdDQUF3QztBQUN4QywrQ0FBK0M7QUFDL0MsK0NBQStDO0FBQ3hDLE1BQU0sT0FBUSxTQUFRLHFDQUFHO0lBTTVCLFlBQVksRUFBeUIsRUFBRSxJQUFVLEVBQUUsWUFBbUI7UUFFbEUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBSmQsb0JBQWUsR0FBVyxDQUFDLENBQUMsQ0FBQztRQUt6QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztJQUNyQyxDQUFDO0lBRUQsRUFBRSxDQUFDLEVBQU07UUFFTCxJQUFJLEtBQUssR0FBYSxFQUFFLENBQUM7UUFDekIsSUFBSSxHQUFHLEdBQWEsRUFBRSxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDO1FBQ3JDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDN0IsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDZjtRQUVELEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsSUFBSSxDQUFDLEtBQWE7UUFDZCw4QkFBOEI7UUFFOUIsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2QyxJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDM0IsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDM0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsWUFBWSxDQUFDLElBQUksQ0FBQztZQUMxQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDMUM7UUFDRCxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7UUFFN0IsSUFBSSxHQUFHLEdBQUcsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9hcHAvc3dhcC1hcHAudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bnNvcnRlZFNlZ21lbnRTdW0gfSBmcm9tIFwiQHRlbnNvcmZsb3cvdGZqcy1jb3JlXCI7XHJcbmltcG9ydCB7IENvcmUgfSBmcm9tIFwiLi4vY29yZVwiO1xyXG5pbXBvcnQgeyBJbnB1dFN0YXRlIH0gZnJvbSBcIi4uL3N5c3RlbS9pbnB1dC1zdGF0ZVwiXHJcbmltcG9ydCB7IFVJIH0gZnJvbSBcIi4uL3N5c3RlbS91aVwiO1xyXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9hcHBcIjtcclxuXHJcbi8vIHB1cnBvc2U6IHN3YXAgYmV0d2VlbiBkaWZmZXJlbnQgYXBwcy5cclxuLy8gICAgICAgICAgLSBmYWN0b3J5IGZvciBpbml0aWF6aW5nIHRoZXNlIGFwcHNcclxuLy8gICAgICAgICAgLSBtYWtpbmcgc3VyZSBjb3JlIGRlbGV0ZXMgb2xkIGFwcHNcclxuZXhwb3J0IGNsYXNzIFN3YXBBcHAgZXh0ZW5kcyBBcHAge1xyXG5cclxuICAgIHBvc3NpYmxlQXBwczogYW55W107XHJcbiAgICBjb3JlOiBDb3JlO1xyXG4gICAgY3VycmVudEFwcEluZGV4OiBudW1iZXIgPSAtMTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBjb3JlOiBDb3JlLCBwb3NzaWJsZUFwcHM6IGFueVtdKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKGdsKTtcclxuICAgICAgICB0aGlzLmNvcmUgPSBjb3JlO1xyXG4gICAgICAgIHRoaXMucG9zc2libGVBcHBzID0gcG9zc2libGVBcHBzO1xyXG4gICAgfVxyXG5cclxuICAgIHVpKHVpOiBVSSkge1xyXG5cclxuICAgICAgICBsZXQgbmFtZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgbGV0IGlkczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBsZXQgY291bnQgPSB0aGlzLnBvc3NpYmxlQXBwcy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBuYW1lcy5wdXNoKHRoaXMucG9zc2libGVBcHBzW2ldLm5hbWUpO1xyXG4gICAgICAgICAgICBpZHMucHVzaChpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVpLmFkZEVudW0obmFtZXMsIGlkcywgKGkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zd2FwKGkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN3YXAoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIC8vIHRvZG8gZG8gc29tZSByYW5nZSBjaGVja2luZ1xyXG4gICAgXHJcbiAgICAgICAgbGV0IEFwcFR5cGUgPSB0aGlzLnBvc3NpYmxlQXBwc1tpbmRleF07XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEFwcEluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgbGV0IFByZXZpb3VzVHlwZSA9IHRoaXMucG9zc2libGVBcHBzW3RoaXMuY3VycmVudEFwcEluZGV4XTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZW1vdmluZ1wiLCBQcmV2aW91c1R5cGUubmFtZSlcclxuICAgICAgICAgICAgdGhpcy5jb3JlLnJlbW92ZUFwcChQcmV2aW91c1R5cGUubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29uc3RydWN0aW5nXCIsIEFwcFR5cGUubmFtZSk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QXBwSW5kZXggPSBpbmRleDtcclxuXHJcbiAgICAgICAgbGV0IGFwcCA9IG5ldyBBcHBUeXBlKHRoaXMuZ2wpO1xyXG4gICAgICAgIHRoaXMuY29yZS5hZGRBcHAoYXBwKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/app/swap-app.ts\n");

/***/ }),

/***/ "./src/core.ts":
/*!*********************!*\
  !*** ./src/core.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Core\": () => /* binding */ Core\n/* harmony export */ });\n/* harmony import */ var _system_input_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./system/input-state */ \"./src/system/input-state.ts\");\n/* harmony import */ var _system_fpsCounter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./system/fpsCounter */ \"./src/system/fpsCounter.ts\");\n/* harmony import */ var _system_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./system/ui */ \"./src/system/ui.ts\");\n// Author: Jos Feenstra\r\n// Purpose: The Core app. This can hold multiple other apps with their own Update and Draw calls. \r\n// Use this to switch between Apps, or run multiple Apps.\r\n\r\n\r\n\r\nclass Core {\r\n    constructor(canvas, gl, uiFrame) {\r\n        this.STOP = false;\r\n        this.canvas = canvas;\r\n        this.gl = gl;\r\n        this.state = new _system_input_state__WEBPACK_IMPORTED_MODULE_0__.InputState(canvas);\r\n        this.fpsCounter = new _system_fpsCounter__WEBPACK_IMPORTED_MODULE_1__.FpsCounter();\r\n        this.ui = new _system_ui__WEBPACK_IMPORTED_MODULE_2__.UI(uiFrame);\r\n        this.apps = new Map();\r\n    }\r\n    // todo: cycle through apps\r\n    addApp(app) {\r\n        this.apps.set(app.name, app);\r\n        this.activateApp(app);\r\n    }\r\n    removeApp(appName) {\r\n        this.ui.removeContext(appName);\r\n        this.apps.delete(appName);\r\n    }\r\n    activateApp(app) {\r\n        this.ui.addContext(app.name);\r\n        app.ui(this.ui);\r\n        app.start();\r\n    }\r\n    update() {\r\n        this.state.preUpdate();\r\n        this.fpsCounter.update(this.state);\r\n        if (this.state.IsKeyPressed(\"Esc\"))\r\n            this.STOP = true;\r\n        this.apps.forEach((app) => {\r\n            app.update(this.state);\r\n        });\r\n        this.state.postUpdate();\r\n    }\r\n    draw() {\r\n        const canvas = this.canvas;\r\n        const gl = this.gl;\r\n        // put fps in the titel\r\n        document.title = \"fps: \" + this.fpsCounter.getFps();\r\n        // pre-gl business\r\n        if (window.innerHeight != canvas.height ||\r\n            window.innerWidth != canvas.width) {\r\n            canvas.height = window.innerHeight;\r\n            // canvas.clientHeight = window.innerHeight;\r\n            canvas.style.height = window.innerHeight.toString();\r\n            canvas.width = window.innerWidth;\r\n            // canvas.clientWidth = window.innerWidth;\r\n            canvas.style.width = window.innerWidth.toString();\r\n            gl.viewport(0, 0, window.innerWidth, window.innerHeight);\r\n        }\r\n        // Renderer.resizeCanvas(this.gl);\r\n        this.gl.clearColor(0, 0, 0, 0);\r\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n        // render all apps\r\n        // TODO : reverse order\r\n        this.apps.forEach((app) => {\r\n            app.draw(this.gl);\r\n        });\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2NvcmUudHM/Njk5ZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsdUJBQXVCO0FBQ3ZCLGtHQUFrRztBQUNsRyx5REFBeUQ7QUFFUDtBQUVEO0FBQ2hCO0FBRTFCLE1BQU0sSUFBSTtJQVliLFlBQVksTUFBeUIsRUFBRSxFQUF5QixFQUFFLE9BQXVCO1FBRnpGLFNBQUksR0FBRyxLQUFLLENBQUM7UUFHVCxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSwyREFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSwwREFBVSxFQUFFLENBQUM7UUFDbkMsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLDBDQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFHRCwyQkFBMkI7SUFDM0IsTUFBTSxDQUFDLEdBQVE7UUFFWCxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVELFNBQVMsQ0FBQyxPQUFlO1FBQ3JCLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFHRCxXQUFXLENBQUMsR0FBUTtRQUVoQixJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0IsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEIsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFHRCxNQUFNO1FBRUYsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUM7WUFDOUIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUN0QixHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUdELElBQUk7UUFFQSxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzNCLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFO1FBRWxCLHVCQUF1QjtRQUN2QixRQUFRLENBQUMsS0FBSyxHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRXBELGtCQUFrQjtRQUNsQixJQUFJLE1BQU0sQ0FBQyxXQUFXLElBQUksTUFBTSxDQUFDLE1BQU07WUFDbkMsTUFBTSxDQUFDLFVBQVUsSUFBSyxNQUFNLENBQUMsS0FBSyxFQUN0QztZQUNJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztZQUNuQyw0Q0FBNEM7WUFDNUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUVwRCxNQUFNLENBQUMsS0FBSyxHQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUM7WUFDbEMsMENBQTBDO1lBQzFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLENBQUM7WUFFbEQsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQzVEO1FBRUQsa0NBQWtDO1FBQ2xDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUV4QyxrQkFBa0I7UUFDbEIsdUJBQXVCO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7WUFDdEIsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDdEIsQ0FBQyxDQUFDO0lBQ04sQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL2NvcmUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBdXRob3I6IEpvcyBGZWVuc3RyYVxyXG4vLyBQdXJwb3NlOiBUaGUgQ29yZSBhcHAuIFRoaXMgY2FuIGhvbGQgbXVsdGlwbGUgb3RoZXIgYXBwcyB3aXRoIHRoZWlyIG93biBVcGRhdGUgYW5kIERyYXcgY2FsbHMuIFxyXG4vLyBVc2UgdGhpcyB0byBzd2l0Y2ggYmV0d2VlbiBBcHBzLCBvciBydW4gbXVsdGlwbGUgQXBwcy5cclxuXHJcbmltcG9ydCB7IElucHV0U3RhdGUgfSBmcm9tIFwiLi9zeXN0ZW0vaW5wdXQtc3RhdGVcIjtcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwL2FwcFwiO1xyXG5pbXBvcnQgeyBGcHNDb3VudGVyIH0gZnJvbSBcIi4vc3lzdGVtL2Zwc0NvdW50ZXJcIjtcclxuaW1wb3J0IHsgVUkgfSBmcm9tIFwiLi9zeXN0ZW0vdWlcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb3JlIHtcclxuXHJcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuICAgIHN0YXRlOiBJbnB1dFN0YXRlO1xyXG4gICAgdWk6IFVJO1xyXG4gICAgZnBzQ291bnRlcjogRnBzQ291bnRlcjtcclxuXHJcbiAgICBwcml2YXRlIGFwcHM6IE1hcDxzdHJpbmcsIEFwcD47XHJcbiAgICBcclxuICAgIFNUT1AgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdWlGcmFtZTogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICB0aGlzLmdsID0gZ2w7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IG5ldyBJbnB1dFN0YXRlKGNhbnZhcyk7XHJcbiAgICAgICAgdGhpcy5mcHNDb3VudGVyID0gbmV3IEZwc0NvdW50ZXIoKTtcclxuICAgICAgICB0aGlzLnVpID0gbmV3IFVJKHVpRnJhbWUpO1xyXG4gICAgICAgIHRoaXMuYXBwcyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gdG9kbzogY3ljbGUgdGhyb3VnaCBhcHBzXHJcbiAgICBhZGRBcHAoYXBwOiBBcHApIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmFwcHMuc2V0KGFwcC5uYW1lLCBhcHApO1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGVBcHAoYXBwKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBcHAoYXBwTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy51aS5yZW1vdmVDb250ZXh0KGFwcE5hbWUpO1xyXG4gICAgICAgIHRoaXMuYXBwcy5kZWxldGUoYXBwTmFtZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFjdGl2YXRlQXBwKGFwcDogQXBwKSB7XHJcblxyXG4gICAgICAgIHRoaXMudWkuYWRkQ29udGV4dChhcHAubmFtZSk7XHJcbiAgICAgICAgYXBwLnVpKHRoaXMudWkpO1xyXG4gICAgICAgIGFwcC5zdGFydCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5wcmVVcGRhdGUoKTtcclxuICAgICAgICB0aGlzLmZwc0NvdW50ZXIudXBkYXRlKHRoaXMuc3RhdGUpO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLklzS2V5UHJlc3NlZChcIkVzY1wiKSlcclxuICAgICAgICAgICAgdGhpcy5TVE9QID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFwcHMuZm9yRWFjaCgoYXBwKSA9PiB7XHJcbiAgICAgICAgICAgIGFwcC51cGRhdGUodGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5wb3N0VXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRyYXcoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jYW52YXM7XHJcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsXHJcblxyXG4gICAgICAgIC8vIHB1dCBmcHMgaW4gdGhlIHRpdGVsXHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcImZwczogXCIgKyB0aGlzLmZwc0NvdW50ZXIuZ2V0RnBzKCk7XHJcblxyXG4gICAgICAgIC8vIHByZS1nbCBidXNpbmVzc1xyXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgIT0gY2FudmFzLmhlaWdodCB8fCBcclxuICAgICAgICAgICAgd2luZG93LmlubmVyV2lkdGggICE9IGNhbnZhcy53aWR0aCkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgICAgICAvLyBjYW52YXMuY2xpZW50SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBjYW52YXMud2lkdGggID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICAgIC8vIGNhbnZhcy5jbGllbnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aC50b1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgZ2wudmlld3BvcnQoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW5kZXJlci5yZXNpemVDYW52YXModGhpcy5nbCk7XHJcbiAgICAgICAgdGhpcy5nbC5jbGVhckNvbG9yKDAsIDAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZ2wuY2xlYXIodGhpcy5nbC5DT0xPUl9CVUZGRVJfQklUKTtcclxuXHJcbiAgICAgICAgLy8gcmVuZGVyIGFsbCBhcHBzXHJcbiAgICAgICAgLy8gVE9ETyA6IHJldmVyc2Ugb3JkZXJcclxuICAgICAgICB0aGlzLmFwcHMuZm9yRWFjaCgoYXBwKSA9PiB7XHJcbiAgICAgICAgICAgIGFwcC5kcmF3KHRoaXMuZ2wpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/core.ts\n");

/***/ }),

/***/ "./src/data/float-matrix.ts":
/*!**********************************!*\
  !*** ./src/data/float-matrix.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FloatMatrix\": () => /* binding */ FloatMatrix\n/* harmony export */ });\n// generic all-pupose matrix of floats\r\nclass FloatMatrix {\r\n    constructor(height, width, data = []) {\r\n        this._height = height;\r\n        this._width = width;\r\n        this.data = new Float32Array(this._width * this._height);\r\n        if (data == [] || data.length == 0)\r\n            this.fill(0);\r\n        else\r\n            this.setData(data);\r\n    }\r\n    clone() {\r\n        let clone = new FloatMatrix(this._height, this._width);\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            clone.data[i] = this.data[i];\r\n        }\r\n        return clone;\r\n    }\r\n    setData(data) {\r\n        if (data.length != (this._height * this._width))\r\n            throw \"data.length does not match width * height \" + data.length.toString();\r\n        this.data.set(data);\r\n    }\r\n    count() {\r\n        // number of entries / rows.\r\n        // when derrived classes ask for 'how many of x?' they usually mean this.\r\n        return this._height;\r\n    }\r\n    getDimensions() {\r\n        return [this._height, this._width];\r\n    }\r\n    fill(value) {\r\n        let size = this._height * this._width;\r\n        for (let i = 0; i < size; i++) {\r\n            this.data[i] = value;\r\n        }\r\n    }\r\n    fillWith(data, valuesPerEntry = this._width) {\r\n        // values per entry can be used to setData which is not of the same shape.\r\n        let vpe = valuesPerEntry;\r\n        if (vpe > this._width)\r\n            throw \"values per entry is larger than this._width. This will spill over.\";\r\n        for (let i = 0; i < this._height; i++) {\r\n            for (let j = 0; j < vpe; j++) {\r\n                this.set(i, j, data[i * vpe + j]);\r\n            }\r\n        }\r\n    }\r\n    get(i, j) {\r\n        return this.data[i * this._width + j];\r\n    }\r\n    getRow(i) {\r\n        // if (i < 0 || i > this.height) throw \"column is out of bounds for FloatArray\"\r\n        let data = new Float32Array(this._width);\r\n        for (let j = 0; j < this._width; j++) {\r\n            data[j] = this.get(i, j);\r\n        }\r\n        return data;\r\n    }\r\n    getColumn(j) {\r\n        // if (j < 0 || j > this.width) throw \"column is out of bounds for FloatArray\"\r\n        let data = new Float32Array(this._height);\r\n        for (let i = 0; i < this._height; i++) {\r\n            let index = i * this._width + j;\r\n            data[i] = this.data[index];\r\n        }\r\n        return data;\r\n    }\r\n    set(i, j, value) {\r\n        this.data[i * this._width + j] = value;\r\n    }\r\n    setRow(rowIndex, row) {\r\n        // if (this.width != row.length) throw \"dimention of floatarray is not \" + row.length;\r\n        for (let j = 0; j < this._width; j++) {\r\n            this.set(rowIndex, j, row[j]);\r\n        }\r\n    }\r\n    forEachValue(callbackfn) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            this.data[i] = callbackfn(this.data[i], i);\r\n        }\r\n        return this;\r\n    }\r\n    takeRows(indices) {\r\n        // create a new floatarray\r\n        const count = indices.length;\r\n        let array = new FloatMatrix(count, this._width);\r\n        for (let i = 0; i < count; i++) {\r\n            let getIndex = indices[i];\r\n            array.setRow(i, this.getRow(getIndex));\r\n        }\r\n        return array;\r\n    }\r\n    // generalized multiplication\r\n    multiply(b) {\r\n        let a = this;\r\n        if (b._width !== a._height) {\r\n            throw new Error('Columns in A should be the same as the number of rows in B');\r\n        }\r\n        var product = new FloatMatrix(a._height, b._width);\r\n        for (var i = 0; i < product._height; i++) {\r\n            for (var j = 0; j < b._width; j++) {\r\n                for (var k = 0; k < a._width; k++) {\r\n                    product.set(i, j, product.get(i, j) + a.get(i, k) * b.get(k, j));\r\n                }\r\n            }\r\n        }\r\n        return product;\r\n    }\r\n    static fromNative(native) {\r\n        // assume all subarrays have the same shape!!\r\n        let height = native.length;\r\n        let width = native[0].length;\r\n        let matrix = new FloatMatrix(height, width);\r\n        for (var i = 0; i < native.length; i++) {\r\n            for (var j = 0; j < native[0].length; j++) {\r\n                matrix.set(i, j, native[i][j]);\r\n            }\r\n        }\r\n        return matrix;\r\n    }\r\n    toNative() {\r\n        let native = [];\r\n        for (var i = 0; i < this._height; i++) {\r\n            native[i] = [];\r\n            for (var j = 0; j < this._width; j++) {\r\n                native[i][j] = this.get(i, j);\r\n            }\r\n        }\r\n        return native;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2RhdGEvZmxvYXQtbWF0cml4LnRzPzY4MzEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUVBLHNDQUFzQztBQUMvQixNQUFNLFdBQVc7SUFNcEIsWUFBWSxNQUFjLEVBQUUsS0FBYSxFQUFFLE9BQWlCLEVBQUU7UUFFMUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDcEIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6RCxJQUFJLElBQUksSUFBSSxFQUFFLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDO1lBQzlCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7O1lBRWIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRUQsS0FBSztRQUNELElBQUksS0FBSyxHQUFHLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN4QyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQy9CO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELE9BQU8sQ0FBQyxJQUFjO1FBQ2xCLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUMzQyxNQUFNLDRDQUE0QyxHQUFHLElB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Q3BDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEM7U0FDSjtRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFRCxRQUFRO1FBQ0osSUFBSSxNQUFNLEdBQWUsRUFBRTtRQUMzQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNuQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ2YsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2xDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUNqQztTQUNKO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL2RhdGEvZmxvYXQtbWF0cml4LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb3V0ZXJQcm9kdWN0IH0gZnJvbSBcIkB0ZW5zb3JmbG93L3RmanNcIjtcclxuXHJcbi8vIGdlbmVyaWMgYWxsLXB1cG9zZSBtYXRyaXggb2YgZmxvYXRzXHJcbmV4cG9ydCBjbGFzcyBGbG9hdE1hdHJpeCB7XHJcblxyXG4gICAgZGF0YTogRmxvYXQzMkFycmF5O1xyXG4gICAgX3dpZHRoOiBudW1iZXI7XHJcbiAgICBfaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaGVpZ2h0OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGRhdGE6IG51bWJlcltdID0gW10pIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuX3dpZHRoICogdGhpcy5faGVpZ2h0KTtcclxuICAgICAgICBpZiAoZGF0YSA9PSBbXSB8fCBkYXRhLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICB0aGlzLmZpbGwoMCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnNldERhdGEoZGF0YSk7ICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGNsb25lKCkgOiBGbG9hdE1hdHJpeCB7XHJcbiAgICAgICAgbGV0IGNsb25lID0gbmV3IEZsb2F0TWF0cml4KHRoaXMuX2hlaWdodCwgdGhpcy5fd2lkdGgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjbG9uZS5kYXRhW2ldID0gdGhpcy5kYXRhW2ldXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9uZTsgIFxyXG4gICAgfVxyXG5cclxuICAgIHNldERhdGEoZGF0YTogbnVtYmVyW10pIHtcclxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggIT0gKHRoaXMuX2hlaWdodCAqIHRoaXMuX3dpZHRoKSlcclxuICAgICAgICAgICAgdGhyb3cgXCJkYXRhLmxlbmd0aCBkb2VzIG5vdCBtYXRjaCB3aWR0aCAqIGhlaWdodCBcIiArIGRhdGEubGVuZ3RoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5kYXRhLnNldChkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBjb3VudCgpIHtcclxuICAgICAgICAvLyBudW1iZXIgb2YgZW50cmllcyAvIHJvd3MuXHJcbiAgICAgICAgLy8gd2hlbiBkZXJyaXZlZCBjbGFzc2VzIGFzayBmb3IgJ2hvdyBtYW55IG9mIHg/JyB0aGV5IHVzdWFsbHkgbWVhbiB0aGlzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGltZW5zaW9ucygpIDogW251bWJlciwgbnVtYmVyXSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLl9oZWlnaHQsIHRoaXMuX3dpZHRoXTtcclxuICAgIH1cclxuXHJcbiAgICBmaWxsKHZhbHVlOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLl9oZWlnaHQgKiB0aGlzLl93aWR0aFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW2ldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxXaXRoKGRhdGE6IG51bWJlcltdLCB2YWx1ZXNQZXJFbnRyeTogbnVtYmVyPXRoaXMuX3dpZHRoKSB7XHJcblxyXG4gICAgICAgIC8vIHZhbHVlcyBwZXIgZW50cnkgY2FuIGJlIHVzZWQgdG8gc2V0RGF0YSB3aGljaCBpcyBub3Qgb2YgdGhlIHNhbWUgc2hhcGUuXHJcbiAgICAgICAgbGV0IHZwZSA9IHZhbHVlc1BlckVudHJ5O1xyXG4gICAgICAgIGlmICh2cGUgPiB0aGlzLl93aWR0aCkgdGhyb3cgXCJ2YWx1ZXMgcGVyIGVudHJ5IGlzIGxhcmdlciB0aGFuIHRoaXMuX3dpZHRoLiBUaGlzIHdpbGwgc3BpbGwgb3Zlci5cIjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCB0aGlzLl9oZWlnaHQ7IGkrKylcclxuICAgICAgICB7ICAgXHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDAgOyBqIDwgdnBlOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGksIGosIGRhdGFbaSp2cGUgKyBqXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICBcclxuICAgIH1cclxuXHJcbiAgICBnZXQoaTogbnVtYmVyLCBqOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2kgKiB0aGlzLl93aWR0aCArIGpdXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Um93KGk6IG51bWJlcikgOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICAgIC8vIGlmIChpIDwgMCB8fCBpID4gdGhpcy5oZWlnaHQpIHRocm93IFwiY29sdW1uIGlzIG91dCBvZiBib3VuZHMgZm9yIEZsb2F0QXJyYXlcIlxyXG4gICAgICAgIGxldCBkYXRhID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLl93aWR0aCk7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLl93aWR0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGRhdGFbal0gPSB0aGlzLmdldChpLCBqKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29sdW1uKGo6IG51bWJlcikgOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICAgIC8vIGlmIChqIDwgMCB8fCBqID4gdGhpcy53aWR0aCkgdGhyb3cgXCJjb2x1bW4gaXMgb3V0IG9mIGJvdW5kcyBmb3IgRmxvYXRBcnJheVwiXHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSBpICogdGhpcy5fd2lkdGggKyBqO1xyXG4gICAgICAgICAgICBkYXRhW2ldID0gdGhpcy5kYXRhW2luZGV4XTsgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldChpOiBudW1iZXIsIGogOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhW2kgKiB0aGlzLl93aWR0aCArIGpdID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Um93KHJvd0luZGV4OiBudW1iZXIsIHJvdzogbnVtYmVyW10gfCBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICAvLyBpZiAodGhpcy53aWR0aCAhPSByb3cubGVuZ3RoKSB0aHJvdyBcImRpbWVudGlvbiBvZiBmbG9hdGFycmF5IGlzIG5vdCBcIiArIHJvdy5sZW5ndGg7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHRoaXMuX3dpZHRoOyBqKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZXQocm93SW5kZXgsIGosIHJvd1tqXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvckVhY2hWYWx1ZShjYWxsYmFja2ZuOiAodmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyKSA6IEZsb2F0TWF0cml4IHtcclxuICAgICAgICBcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbaV0gPSBjYWxsYmFja2ZuKHRoaXMuZGF0YVtpXSwgaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHRha2VSb3dzKGluZGljZXM6IG51bWJlcltdKSA6IEZsb2F0TWF0cml4IHtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGEgbmV3IGZsb2F0YXJyYXlcclxuICAgICAgICBjb25zdCBjb3VudCA9IGluZGljZXMubGVuZ3RoXHJcbiAgICAgICAgbGV0IGFycmF5ID0gbmV3IEZsb2F0TWF0cml4KGNvdW50LCB0aGlzLl93aWR0aCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZ2V0SW5kZXggPSBpbmRpY2VzW2ldO1xyXG4gICAgICAgICAgICBhcnJheS5zZXRSb3coaSwgdGhpcy5nZXRSb3coZ2V0SW5kZXgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGdlbmVyYWxpemVkIG11bHRpcGxpY2F0aW9uXHJcbiAgICBtdWx0aXBseShiOiBGbG9hdE1hdHJpeCkgOiBGbG9hdE1hdHJpeCB7XHJcblxyXG4gICAgICAgIGxldCBhID0gdGhpcztcclxuICAgICAgICBpZiAoYi5fd2lkdGggIT09IGEuX2hlaWdodCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbHVtbnMgaW4gQSBzaG91bGQgYmUgdGhlIHNhbWUgYXMgdGhlIG51bWJlciBvZiByb3dzIGluIEInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHByb2R1Y3QgPSBuZXcgRmxvYXRNYXRyaXgoYS5faGVpZ2h0LCBiLl93aWR0aCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZHVjdC5faGVpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiLl93aWR0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGEuX3dpZHRoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LnNldChpLCBqLCBwcm9kdWN0LmdldChpLCBqKSArIGEuZ2V0KGksIGspICogYi5nZXQoaywgaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9kdWN0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tTmF0aXZlKG5hdGl2ZTogbnVtYmVyW11bXSkgOiBGbG9hdE1hdHJpeCB7XHJcbiAgICAgICAgLy8gYXNzdW1lIGFsbCBzdWJhcnJheXMgaGF2ZSB0aGUgc2FtZSBzaGFwZSEhXHJcbiAgICAgICAgbGV0IGhlaWdodCA9IG5hdGl2ZS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gbmF0aXZlWzBdLmxlbmd0aDtcclxuICAgICAgICBsZXQgbWF0cml4ID0gbmV3IEZsb2F0TWF0cml4KGhlaWdodCwgd2lkdGgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmF0aXZlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmF0aXZlWzBdLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRyaXguc2V0KGksIGosIG5hdGl2ZVtpXVtqXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDsgXHJcbiAgICB9XHJcblxyXG4gICAgdG9OYXRpdmUoKSA6IG51bWJlcltdW10ge1xyXG4gICAgICAgIGxldCBuYXRpdmU6IG51bWJlcltdW10gPSBbXVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faGVpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgbmF0aXZlW2ldID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5fd2lkdGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbmF0aXZlW2ldW2pdID0gdGhpcy5nZXQoaSwgaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5hdGl2ZTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/float-matrix.ts\n");

/***/ }),

/***/ "./src/data/hash-table.ts":
/*!********************************!*\
  !*** ./src/data/hash-table.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HashTable\": () => /* binding */ HashTable\n/* harmony export */ });\n// note: this wont always work, but it does in most cases\r\n// todo: implement proper hashtable\r\nclass HashTable {\r\n    constructor() {\r\n        this.data = new Map();\r\n    }\r\n    stringify(key) {\r\n        return key.toString();\r\n    }\r\n    set(key, value) {\r\n        return this.data.set(this.stringify(key), value);\r\n    }\r\n    has(key) {\r\n        return this.data.has(this.stringify(key));\r\n    }\r\n    get(key) {\r\n        return this.data.get(this.stringify(key));\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2RhdGEvaGFzaC10YWJsZS50cz9kN2ExIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSx5REFBeUQ7QUFDekQsbUNBQW1DO0FBQzVCLE1BQU0sU0FBUztJQUlsQjtRQUNJLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQWEsQ0FBQztJQUNyQyxDQUFDO0lBRU8sU0FBUyxDQUFDLEdBQVE7UUFDdEIsT0FBTyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFRLEVBQUUsS0FBUTtRQUNsQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDckQsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDOUMsQ0FBQztDQUVKIiwiZmlsZSI6Ii4vc3JjL2RhdGEvaGFzaC10YWJsZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vLyBub3RlOiB0aGlzIHdvbnQgYWx3YXlzIHdvcmssIGJ1dCBpdCBkb2VzIGluIG1vc3QgY2FzZXNcclxuLy8gdG9kbzogaW1wbGVtZW50IHByb3BlciBoYXNodGFibGVcclxuZXhwb3J0IGNsYXNzIEhhc2hUYWJsZTxWPiB7XHJcblxyXG4gICAgZGF0YTogTWFwPHN0cmluZywgVj5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgTWFwPHN0cmluZywgVj4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0cmluZ2lmeShrZXk6IGFueSkgOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBrZXkudG9TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQoa2V5OiBhbnksIHZhbHVlOiBWKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zZXQodGhpcy5zdHJpbmdpZnkoa2V5KSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhcyhrZXk6IGFueSkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmhhcyh0aGlzLnN0cmluZ2lmeShrZXkpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQoa2V5OiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmdldCh0aGlzLnN0cmluZ2lmeShrZXkpKTtcclxuICAgIH1cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/hash-table.ts\n");

/***/ }),

/***/ "./src/data/int-cube.ts":
/*!******************************!*\
  !*** ./src/data/int-cube.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IntCube\": () => /* binding */ IntCube\n/* harmony export */ });\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n\r\n// a Cube of voxels\r\nclass IntCube {\r\n    constructor(height, width, depth, data = []) {\r\n        this._height = height;\r\n        this._width = width;\r\n        this._depth = depth;\r\n        let size = this._width * this._height * this._depth;\r\n        this.data = new Int32Array(size);\r\n        if (data == [] || data.length == 0)\r\n            this.fill(0);\r\n        else {\r\n            this.setData(data);\r\n        }\r\n    }\r\n    size() {\r\n        return this._width * this._height * this._depth;\r\n    }\r\n    // shallow copy \r\n    clone() {\r\n        let clone = new IntCube(this._height, this._width, this._depth);\r\n        clone.data = this.data;\r\n        return clone;\r\n    }\r\n    setData(data) {\r\n        if (data.length != this.size())\r\n            throw \"data.length does not match width * height \" + data.length.toString();\r\n        this.data.set(data);\r\n    }\r\n    fill(value) {\r\n        let size = this.size();\r\n        for (let i = 0; i < size; i++) {\r\n            this.data[i] = value;\r\n        }\r\n    }\r\n    inRange(i, j, k) {\r\n        return (!(i < 0 || j < 0 || k < 0 ||\r\n            i > this._width - 1 || j > this._height - 1 || k > this._depth - 1));\r\n    }\r\n    getIndex(i, j, k) {\r\n        return i * (this._height * this._depth) + j * this._depth + k;\r\n    }\r\n    getCoords(index) {\r\n        // javascript, dont you dare turn  'int / int' into a float...\r\n        let i = Math.floor(index / (this._height * this._depth)) % this._width;\r\n        let j = Math.floor(index / this._depth) % this._height;\r\n        let k = index % this._depth;\r\n        return new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector3(i, j, k);\r\n    }\r\n    get(i, j, k) {\r\n        return this.data[this.getIndex(i, j, k)];\r\n    }\r\n    tryGet(i, j, k) {\r\n        if (this.inRange(i, j, k)) {\r\n            return this.data[this.getIndex(i, j, k)];\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    }\r\n    set(i, j, k, value) {\r\n        this.data[this.getIndex(i, j, k)] = value;\r\n    }\r\n    trySet(i, j, k, value) {\r\n        if (this.inRange(i, j, k)) {\r\n            this.data[this.getIndex(i, j, k)] = value;\r\n        }\r\n    }\r\n    iter(callbackfn) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            callbackfn(this.data[i], i);\r\n        }\r\n    }\r\n    map(callbackfn) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            this.data[i] = callbackfn(this.data[i], i);\r\n        }\r\n    }\r\n    trueForAll(callbackfn) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            if (!callbackfn(this.data[i], i)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2RhdGEvaW50LWN1YmUudHM/YzQzYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUF5QztBQUV6QyxtQkFBbUI7QUFDWixNQUFNLE9BQU87SUFPaEIsWUFBWSxNQUFjLEVBQUUsS0FBYSxFQUFFLEtBQWEsRUFBRSxPQUFpQixFQUFFO1FBRXpFLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3BELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakMsSUFBSSxJQUFJLElBQUksRUFBRSxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQztZQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ1o7WUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3RCO0lBQ0wsQ0FBQztJQUdELElBQUk7UUFDQSxPQUFPLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3BELENBQUM7SUFHRCxnQkFBZ0I7SUFDaEIsS0FBSztRQUNELElBQUksS0FBSyxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEUsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3ZCLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFHRCxPQUFP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QUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7U0FDM0M7SUFDTCxDQUFDO0lBR0QsSUFBSSxDQUFDLFVBQWtEO1FBQ25ELEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN2QyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUMvQjtJQUNMLENBQUM7SUFHRCxHQUFHLENBQUMsVUFBb0Q7UUFDcEQsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDOUM7SUFDTCxDQUFDO0lBR0QsVUFBVSxDQUFDLFVBQXFEO1FBQzVELEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN2QyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7Z0JBQzlCLE9BQU8sS0FBSyxDQUFDO2FBQ2hCO1NBQ0o7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvZGF0YS9pbnQtY3ViZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvcjMgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuXHJcbi8vIGEgQ3ViZSBvZiB2b3hlbHNcclxuZXhwb3J0IGNsYXNzIEludEN1YmUge1xyXG5cclxuICAgIGRhdGE6IEludDMyQXJyYXk7XHJcbiAgICBfd2lkdGg6IG51bWJlcjtcclxuICAgIF9oZWlnaHQ6IG51bWJlcjtcclxuICAgIF9kZXB0aDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGhlaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBkZXB0aDogbnVtYmVyLCBkYXRhOiBudW1iZXJbXSA9IFtdKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5fZGVwdGggPSBkZXB0aDsgICAgXHJcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLl93aWR0aCAqIHRoaXMuX2hlaWdodCAqIHRoaXMuX2RlcHRoO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBJbnQzMkFycmF5KHNpemUpO1xyXG4gICAgICAgIGlmIChkYXRhID09IFtdIHx8IGRhdGEubGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHRoaXMuZmlsbCgwKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXREYXRhKGRhdGEpOyAgICBcclxuICAgICAgICB9IFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzaXplKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aCAqIHRoaXMuX2hlaWdodCAqIHRoaXMuX2RlcHRoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBzaGFsbG93IGNvcHkgXHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICBsZXQgY2xvbmUgPSBuZXcgSW50Q3ViZSh0aGlzLl9oZWlnaHQsIHRoaXMuX3dpZHRoLCB0aGlzLl9kZXB0aCk7XHJcbiAgICAgICAgY2xvbmUuZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICByZXR1cm4gY2xvbmU7ICBcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0RGF0YShkYXRhOiBudW1iZXJbXSkge1xyXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCAhPSB0aGlzLnNpemUoKSlcclxuICAgICAgICAgICAgdGhyb3cgXCJkYXRhLmxlbmd0aCBkb2VzIG5vdCBtYXRjaCB3aWR0aCAqIGhlaWdodCBcIiArIGRhdGEubGVuZ3RoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5kYXRhLnNldChkYXRhKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZmlsbCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLnNpemUoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpXSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5SYW5nZShpOiBudW1iZXIsIGo6IG51bWJlciwgazogbnVtYmVyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoIShpIDwgMCB8fCBqIDwgMCB8fCBrIDwgMCB8fCBcclxuICAgICAgICAgICAgaSA+IHRoaXMuX3dpZHRoLTEgfHwgaiA+IHRoaXMuX2hlaWdodC0xIHx8IGsgPiB0aGlzLl9kZXB0aC0xKSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0SW5kZXgoaTogbnVtYmVyLCBqOiBudW1iZXIsIGs6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBpICogKHRoaXMuX2hlaWdodCAqIHRoaXMuX2RlcHRoKSArIGogKiB0aGlzLl9kZXB0aCArIGs7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldENvb3JkcyhpbmRleDogbnVtYmVyKSA6IFZlY3RvcjMge1xyXG4gICAgICAgIC8vIGphdmFzY3JpcHQsIGRvbnQgeW91IGRhcmUgdHVybiAgJ2ludCAvIGludCcgaW50byBhIGZsb2F0Li4uXHJcbiAgICAgICAgbGV0IGkgPSBNYXRoLmZsb29yKGluZGV4IC8gKHRoaXMuX2hlaWdodCAqIHRoaXMuX2RlcHRoKSkgJSB0aGlzLl93aWR0aDtcclxuICAgICAgICBsZXQgaiA9IE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLl9kZXB0aCkgICAgICAgICAgICAgICAgICAlIHRoaXMuX2hlaWdodDtcclxuICAgICAgICBsZXQgayA9IGluZGV4ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAlIHRoaXMuX2RlcHRoO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoaSxqLGspO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXQoaTogbnVtYmVyLCBqOiBudW1iZXIsIGs6IG51bWJlcikgOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbdGhpcy5nZXRJbmRleChpLGosayldO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0cnlHZXQoaTogbnVtYmVyLCBqOiBudW1iZXIsIGs6IG51bWJlcikgOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmluUmFuZ2UoaSxqLGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbdGhpcy5nZXRJbmRleChpLGosayldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldChpOiBudW1iZXIsIGogOiBudW1iZXIsIGsgOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmRhdGFbdGhpcy5nZXRJbmRleChpLGosayldID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRyeVNldChpOiBudW1iZXIsIGogOiBudW1iZXIsIGsgOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5pblJhbmdlKGksaixrKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbdGhpcy5nZXRJbmRleChpLGosayldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpdGVyKGNhbGxiYWNrZm46ICh2YWx1ZTogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2FsbGJhY2tmbih0aGlzLmRhdGFbaV0sIGkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgbWFwKGNhbGxiYWNrZm46ICh2YWx1ZTogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiBudW1iZXIpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbaV0gPSBjYWxsYmFja2ZuKHRoaXMuZGF0YVtpXSwgaSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgdHJ1ZUZvckFsbChjYWxsYmFja2ZuOiAodmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbikgOiBib29sZWFuIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrZm4odGhpcy5kYXRhW2ldLCBpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/int-cube.ts\n");

/***/ }),

/***/ "./src/data/int-matrix.ts":
/*!********************************!*\
  !*** ./src/data/int-matrix.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IntMatrix\": () => /* binding */ IntMatrix\n/* harmony export */ });\n// generic all-pupose matrix of ints\r\nclass IntMatrix {\r\n    constructor(height, width, data = []) {\r\n        this._height = height;\r\n        this._width = width;\r\n        this.data = new Int32Array(this._width * this._height);\r\n        if (data == [] || data.length == 0)\r\n            this.fill(0);\r\n        else\r\n            this.setData(data);\r\n    }\r\n    static fromList(list, width) {\r\n        let height = list.length / width;\r\n        let array = new IntMatrix(height, width);\r\n        for (let i = 0; i < list.length; i++) {\r\n            array.data[i] = list[i];\r\n        }\r\n        return array;\r\n    }\r\n    clone() {\r\n        let clone = new IntMatrix(this._height, this._width);\r\n        clone.data = this.data;\r\n        return clone;\r\n    }\r\n    setData(data) {\r\n        if (data.length != (this._height * this._width))\r\n            throw \"data.length does not match width * height \" + data.length.toString();\r\n        this.data.set(data);\r\n    }\r\n    count() {\r\n        // number of entries / rows.\r\n        // when derrived classes ask for 'how many of x?' they usually mean this.\r\n        return this._height;\r\n    }\r\n    getDimensions() {\r\n        return [this._height, this._width];\r\n    }\r\n    inRange(i, j) {\r\n        return !(i < 0 || i > this._height - 1 || j < 0 || j > this._width - 1);\r\n    }\r\n    fill(value) {\r\n        let size = this._height * this._width;\r\n        for (let i = 0; i < size; i++) {\r\n            this.data[i] = value;\r\n        }\r\n    }\r\n    fillWith(data, valuesPerEntry = this._width) {\r\n        // values per entry can be used to setData which is not of the same shape.\r\n        let vpe = valuesPerEntry;\r\n        if (vpe > this._width)\r\n            throw \"values per entry is larger than this._width. This will spill over.\";\r\n        for (let i = 0; i < this._height; i++) {\r\n            for (let j = 0; j < vpe; j++) {\r\n                this.set(i, j, data[i * vpe + j]);\r\n            }\r\n        }\r\n    }\r\n    get(i, j) {\r\n        if (!this.inRange(i, j)) {\r\n            console.warn(\"out of range!\");\r\n            return 0;\r\n        }\r\n        return this.data[i * this._width + j];\r\n    }\r\n    getRow(i) {\r\n        // if (i < 0 || i > this.height) throw \"column is out of bounds for Array\"\r\n        let data = new Int32Array(this._width);\r\n        for (let j = 0; j < this._width; j++) {\r\n            data[j] = this.get(i, j);\r\n        }\r\n        return data;\r\n    }\r\n    getColumn(j) {\r\n        // if (j < 0 || j > this.width) throw \"column is out of bounds for Array\"\r\n        let data = new Int32Array(this._height);\r\n        for (let i = 0; i < this._height; i++) {\r\n            let index = i * this._width + j;\r\n            data[i] = this.data[index];\r\n        }\r\n        return data;\r\n    }\r\n    set(i, j, value) {\r\n        if (!this.inRange(i, j)) {\r\n            console.warn(\"out of range!\");\r\n            return;\r\n        }\r\n        this.data[i * this._width + j] = value;\r\n    }\r\n    setRow(rowIndex, row) {\r\n        // if (this.width != row.length) throw \"dimention of floatarray is not \" + row.length;\r\n        for (let j = 0; j < this._width; j++) {\r\n            this.set(rowIndex, j, row[j]);\r\n        }\r\n    }\r\n    takeRows(indices) {\r\n        // create a new array from a couple of rows\r\n        console.log(this._height, this._width);\r\n        const count = indices.length;\r\n        let array = new IntMatrix(count, this._width);\r\n        for (let i = 0; i < count; i++) {\r\n            let getIndex = indices[i];\r\n            array.setRow(i, this.getRow(getIndex));\r\n        }\r\n        return array;\r\n    }\r\n    toUInt16Array() {\r\n        return new Uint16Array(this.data);\r\n    }\r\n    forEachValue(callbackfn) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            this.data[i] = callbackfn(this.data[i], i);\r\n        }\r\n        return this;\r\n    }\r\n    forEachRow(callbackfn) {\r\n        for (let i = 0; i < this._height; i++) {\r\n            let row = this.getRow(i);\r\n            callbackfn(row, i);\r\n            this.setRow(i, row);\r\n        }\r\n        return this;\r\n    }\r\n    trueForAll(callbackfn) {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            if (!callbackfn(this.data[i], i)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2RhdGEvaW50LW1hdHJpeC50cz8xZjQ0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxvQ0FBb0M7QUFDN0IsTUFBTSxTQUFTO0lBTWxCLFlBQVksTUFBYyxFQUFFLEtBQWEsRUFBRSxPQUFpQixFQUFFO1FBRTFELElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkQsSUFBSSxJQUFJLElBQUksRUFBRSxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQztZQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDOztZQUViLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUdELE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBYyxFQUFFLEtBQWE7UUFFekMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDakMsSUFBSSxLQUFLLEdBQUcsSUFBSSxTQUFTLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3pDLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2xDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzNCO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUdELEtBQUs7UUFDRCxJQUFJLEtBQUssR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxN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QUFHLENBQUMsQ0FBQztTQUN2QjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFHRCxVQUFVLENBQUMsVUFBcUQ7UUFDNUQsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDOUIsT0FBTyxLQUFLLENBQUM7YUFDaEI7U0FDSjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9kYXRhL2ludC1tYXRyaXgudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBnZW5lcmljIGFsbC1wdXBvc2UgbWF0cml4IG9mIGludHNcclxuZXhwb3J0IGNsYXNzIEludE1hdHJpeCB7XHJcblxyXG4gICAgZGF0YTogSW50MzJBcnJheTtcclxuICAgIF93aWR0aDogbnVtYmVyO1xyXG4gICAgX2hlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGhlaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBkYXRhOiBudW1iZXJbXSA9IFtdKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IEludDMyQXJyYXkodGhpcy5fd2lkdGggKiB0aGlzLl9oZWlnaHQpO1xyXG4gICAgICAgIGlmIChkYXRhID09IFtdIHx8IGRhdGEubGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHRoaXMuZmlsbCgwKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YShkYXRhKTsgICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBmcm9tTGlzdChsaXN0OiBudW1iZXJbXSwgd2lkdGg6IG51bWJlcikgOiBJbnRNYXRyaXgge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBoZWlnaHQgPSBsaXN0Lmxlbmd0aCAvIHdpZHRoO1xyXG4gICAgICAgIGxldCBhcnJheSA9IG5ldyBJbnRNYXRyaXgoaGVpZ2h0LCB3aWR0aCk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFycmF5LmRhdGFbaV0gPSBsaXN0W2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIGxldCBjbG9uZSA9IG5ldyBJbnRNYXRyaXgodGhpcy5faGVpZ2h0LCB0aGlzLl93aWR0aCk7XHJcbiAgICAgICAgY2xvbmUuZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICByZXR1cm4gY2xvbmU7ICBcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0RGF0YShkYXRhOiBudW1iZXJbXSkge1xyXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCAhPSAodGhpcy5faGVpZ2h0ICogdGhpcy5fd2lkdGgpKVxyXG4gICAgICAgICAgICB0aHJvdyBcImRhdGEubGVuZ3RoIGRvZXMgbm90IG1hdGNoIHdpZHRoICogaGVpZ2h0IFwiICsgZGF0YS5sZW5ndGgudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmRhdGEuc2V0KGRhdGEpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb3VudCgpIHtcclxuICAgICAgICAvLyBudW1iZXIgb2YgZW50cmllcyAvIHJvd3MuXHJcbiAgICAgICAgLy8gd2hlbiBkZXJyaXZlZCBjbGFzc2VzIGFzayBmb3IgJ2hvdyBtYW55IG9mIHg/JyB0aGV5IHVzdWFsbHkgbWVhbiB0aGlzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldERpbWVuc2lvbnMoKSA6IFtudW1iZXIsIG51bWJlcl0ge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5faGVpZ2h0LCB0aGlzLl93aWR0aF07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGluUmFuZ2UoaTogbnVtYmVyLCBqOiBudW1iZXIpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICEoaSA8IDAgfHwgaSA+IHRoaXMuX2hlaWdodCAtMSB8fCBqIDwgMCB8fCBqID4gdGhpcy5fd2lkdGggLSAxKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmaWxsKHZhbHVlOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLl9oZWlnaHQgKiB0aGlzLl93aWR0aFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW2ldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgZmlsbFdpdGgoZGF0YTogbnVtYmVyW10sIHZhbHVlc1BlckVudHJ5OiBudW1iZXI9dGhpcy5fd2lkdGgpIHtcclxuXHJcbiAgICAgICAgLy8gdmFsdWVzIHBlciBlbnRyeSBjYW4gYmUgdXNlZCB0byBzZXREYXRhIHdoaWNoIGlzIG5vdCBvZiB0aGUgc2FtZSBzaGFwZS5cclxuICAgICAgICBsZXQgdnBlID0gdmFsdWVzUGVyRW50cnk7XHJcbiAgICAgICAgaWYgKHZwZSA+IHRoaXMuX3dpZHRoKSB0aHJvdyBcInZhbHVlcyBwZXIgZW50cnkgaXMgbGFyZ2VyIHRoYW4gdGhpcy5fd2lkdGguIFRoaXMgd2lsbCBzcGlsbCBvdmVyLlwiO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHRoaXMuX2hlaWdodDsgaSsrKVxyXG4gICAgICAgIHsgICBcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMCA7IGogPCB2cGU7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoaSwgaiwgZGF0YVtpKnZwZSArIGpdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gIFxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgZ2V0KGk6IG51bWJlciwgajogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluUmFuZ2UoaSAsIGopKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIm91dCBvZiByYW5nZSFcIilcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbaSAqIHRoaXMuX3dpZHRoICsgal1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGdldFJvdyhpOiBudW1iZXIpIDogSW50MzJBcnJheSB7XHJcbiAgICAgICAgLy8gaWYgKGkgPCAwIHx8IGkgPiB0aGlzLmhlaWdodCkgdGhyb3cgXCJjb2x1bW4gaXMgb3V0IG9mIGJvdW5kcyBmb3IgQXJyYXlcIlxyXG4gICAgICAgIGxldCBkYXRhID0gbmV3IEludDMyQXJyYXkodGhpcy5fd2lkdGgpO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5fd2lkdGg7IGorKykge1xyXG4gICAgICAgICAgICBkYXRhW2pdID0gdGhpcy5nZXQoaSwgaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgZ2V0Q29sdW1uKGo6IG51bWJlcikgOiBJbnQzMkFycmF5IHtcclxuICAgICAgICAvLyBpZiAoaiA8IDAgfHwgaiA+IHRoaXMud2lkdGgpIHRocm93IFwiY29sdW1uIGlzIG91dCBvZiBib3VuZHMgZm9yIEFycmF5XCJcclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBJbnQzMkFycmF5KHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSBpICogdGhpcy5fd2lkdGggKyBqO1xyXG4gICAgICAgICAgICBkYXRhW2ldID0gdGhpcy5kYXRhW2luZGV4XTsgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgc2V0KGk6IG51bWJlciwgaiA6IG51bWJlciwgdmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5pblJhbmdlKGksIGopKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIm91dCBvZiByYW5nZSFcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IFxyXG4gICAgICAgIHRoaXMuZGF0YVtpICogdGhpcy5fd2lkdGggKyBqXSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgc2V0Um93KHJvd0luZGV4OiBudW1iZXIsIHJvdzogbnVtYmVyW10gfCBJbnQzMkFycmF5KSB7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMud2lkdGggIT0gcm93Lmxlbmd0aCkgdGhyb3cgXCJkaW1lbnRpb24gb2YgZmxvYXRhcnJheSBpcyBub3QgXCIgKyByb3cubGVuZ3RoO1xyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLl93aWR0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0KHJvd0luZGV4LCBqLCByb3dbal0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICB0YWtlUm93cyhpbmRpY2VzOiBudW1iZXJbXSkgOiBJbnRNYXRyaXgge1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgYSBuZXcgYXJyYXkgZnJvbSBhIGNvdXBsZSBvZiByb3dzXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5faGVpZ2h0LCB0aGlzLl93aWR0aCk7XHJcbiAgICAgICAgY29uc3QgY291bnQgPSBpbmRpY2VzLmxlbmd0aFxyXG4gICAgICAgIGxldCBhcnJheSA9IG5ldyBJbnRNYXRyaXgoY291bnQsIHRoaXMuX3dpZHRoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBnZXRJbmRleCA9IGluZGljZXNbaV07XHJcbiAgICAgICAgICAgIGFycmF5LnNldFJvdyhpLCB0aGlzLmdldFJvdyhnZXRJbmRleCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICB0b1VJbnQxNkFycmF5KCkgOiBVaW50MTZBcnJheSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50MTZBcnJheSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgZm9yRWFjaFZhbHVlKGNhbGxiYWNrZm46ICh2YWx1ZTogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiBudW1iZXIpIDogSW50TWF0cml4IHtcclxuICAgICAgICBcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbaV0gPSBjYWxsYmFja2ZuKHRoaXMuZGF0YVtpXSwgaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgZm9yRWFjaFJvdyhjYWxsYmFja2ZuOiAodmFsdWU6IEludDMyQXJyYXksIGluZGV4OiBudW1iZXIpID0+IHZvaWQpIDogSW50TWF0cml4IHtcclxuICAgICAgICBcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuX2hlaWdodDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLmdldFJvdyhpKTtcclxuICAgICAgICAgICAgY2FsbGJhY2tmbihyb3csIGkpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIHJvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgdHJ1ZUZvckFsbChjYWxsYmFja2ZuOiAodmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbikgOiBib29sZWFuIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrZm4odGhpcy5kYXRhW2ldLCBpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/int-matrix.ts\n");

/***/ }),

/***/ "./src/data/vector-array.ts":
/*!**********************************!*\
  !*** ./src/data/vector-array.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Vector2Array\": () => /* binding */ Vector2Array,\n/* harmony export */   \"Vector3Array\": () => /* binding */ Vector3Array,\n/* harmony export */   \"getGeneralFloatMatrix\": () => /* binding */ getGeneralFloatMatrix\n/* harmony export */ });\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _float_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./float-matrix */ \"./src/data/float-matrix.ts\");\n// name:    array.ts\r\n// author:  Jos Feenstra\r\n// purpose: Small wrapper around Float32Array / FloatMatrix to add interoperability with Vector2 & Vector3, \r\n//          while remaining a datastructure thats easy to pass over to webgl\r\n// \r\n// NOTE:    all these small wrappers might not be good pratice, but I \r\n//          like to extract simple logic like this to not clutter the code too much\r\n\r\n\r\nclass Vector2Array extends _float_matrix__WEBPACK_IMPORTED_MODULE_1__.FloatMatrix {\r\n    constructor(count) {\r\n        super(count, 2);\r\n    }\r\n    static fromList(vecs) {\r\n        let length = vecs.length;\r\n        let array = new Vector2Array(length);\r\n        for (let i = 0; i < vecs.length; i++) {\r\n            array.data[i * 2] = vecs[i].x;\r\n            array.data[i * 2 + 1] = vecs[i].y;\r\n        }\r\n        return array;\r\n    }\r\n    forEach(callbackfn) {\r\n        for (let i = 0; i < this.count(); i++) {\r\n            let vec = this.getVector(i);\r\n            callbackfn(vec, i);\r\n            this.setVector(i, vec);\r\n        }\r\n        return this;\r\n    }\r\n    map(callbackfn) {\r\n        let clone = this.clone();\r\n        for (let i = 0; i < this.count(); i++) {\r\n            let vec = this.getVector(i);\r\n            let result = callbackfn(vec, i);\r\n            if (result instanceof _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2) {\r\n                clone.setVector(i, result);\r\n            }\r\n            else {\r\n                clone.setVector(i, vec);\r\n            }\r\n        }\r\n        return clone;\r\n    }\r\n    setVector(i, vec) {\r\n        this.data[i * this._width + 0] = vec.x;\r\n        this.data[i * this._width + 1] = vec.y;\r\n    }\r\n    getVector(i) {\r\n        return new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(this.data[i * this._width + 0], this.data[i * this._width + 1]);\r\n    }\r\n    toList() {\r\n        let vecs = [];\r\n        for (let i = 0; i < this._height; i++) {\r\n            vecs.push(this.getVector(i));\r\n        }\r\n        return vecs;\r\n    }\r\n    to3D() {\r\n        let array = new Vector3Array(this.count());\r\n        for (let i = 0; i < this.count(); i++) {\r\n            let row = this.getRow(i);\r\n            array.setRow(i, [row[0], row[1], 0]);\r\n        }\r\n        return array;\r\n    }\r\n    clone() {\r\n        let clone = new Vector2Array(this._height);\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            clone.data[i] = this.data[i];\r\n        }\r\n        return clone;\r\n    }\r\n}\r\nclass Vector3Array extends _float_matrix__WEBPACK_IMPORTED_MODULE_1__.FloatMatrix {\r\n    constructor(count) {\r\n        super(count, 3);\r\n    }\r\n    static fromList(vecs) {\r\n        let length = vecs.length;\r\n        let array = new Vector3Array(length);\r\n        for (let i = 0; i < vecs.length; i++) {\r\n            array.data[i * 3] = vecs[i].x;\r\n            array.data[i * 3 + 1] = vecs[i].y;\r\n            array.data[i * 3 + 2] = vecs[i].z;\r\n        }\r\n        return array;\r\n    }\r\n    static fromNative(native) {\r\n        // assume all subarrays have the same shape!!\r\n        let height = native.length;\r\n        let matrix = new Vector3Array(height);\r\n        for (var i = 0; i < native.length; i++) {\r\n            for (var j = 0; j < native[0].length; j++) {\r\n                matrix.set(i, j, native[i][j]);\r\n            }\r\n        }\r\n        return matrix;\r\n    }\r\n    fillFromList(vecs) {\r\n        for (let i = 0; i < vecs.length; i++) {\r\n            this.data[i * 3] = vecs[i].x;\r\n            this.data[i * 3 + 1] = vecs[i].y;\r\n            this.data[i * 3 + 2] = vecs[i].z;\r\n        }\r\n    }\r\n    forEach(callbackfn) {\r\n        for (let i = 0; i < this.count(); i++) {\r\n            let vec = this.getVector(i);\r\n            vec = callbackfn(vec, i);\r\n            if (vec instanceof _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector3) {\r\n                this.setVector(i, vec);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    map(callbackfn) {\r\n        let clone = this.clone();\r\n        for (let i = 0; i < this.count(); i++) {\r\n            let vec = this.getVector(i);\r\n            let result = callbackfn(vec, i);\r\n            if (result instanceof _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector3) {\r\n                clone.setVector(i, result);\r\n            }\r\n            else {\r\n                clone.setVector(i, vec);\r\n            }\r\n        }\r\n        return clone;\r\n    }\r\n    setVector(i, vec) {\r\n        this.data[i * this._width + 0] = vec.x;\r\n        this.data[i * this._width + 1] = vec.y;\r\n        this.data[i * this._width + 2] = vec.z;\r\n    }\r\n    getVector(i) {\r\n        return new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector3(this.data[i * this._width + 0], this.data[i * this._width + 1], this.data[i * this._width + 2]);\r\n    }\r\n    toList() {\r\n        let vecs = [];\r\n        for (let i = 0; i < this._height; i++) {\r\n            vecs.push(this.getVector(i));\r\n        }\r\n        return vecs;\r\n    }\r\n    transform(m) {\r\n        for (let i = 0; i < this._height; i++) {\r\n            let vec = this.getVector(i);\r\n            vec = m.multiplyVector(vec);\r\n            this.setVector(i, vec);\r\n        }\r\n        // this.data = m.MultiplyM(this).data;\r\n        return this;\r\n    }\r\n    to2D() {\r\n        let clone = new Vector2Array(this._height);\r\n        for (let i = 0; i < this._height; i++) {\r\n            for (let j = 0; j < 2; j++) {\r\n                clone.set(i, j, this.get(i, j));\r\n            }\r\n        }\r\n        return clone;\r\n    }\r\n    clone() {\r\n        let clone = new Vector3Array(this._height);\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            clone.data[i] = this.data[i];\r\n        }\r\n        return clone;\r\n    }\r\n    mean() {\r\n        // the mean vector of a series of vectors\r\n        let sum = _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero();\r\n        let count = this.count();\r\n        for (let i = 0; i < count; i++) {\r\n            sum.x += this.data[i * 3];\r\n            sum.y += this.data[i * 3 + 1];\r\n            sum.z += this.data[i * 3 + 2];\r\n        }\r\n        return sum.scale(1 / count);\r\n    }\r\n    average() {\r\n        return this.mean();\r\n    }\r\n    closestId(point) {\r\n        let lowScore = Infinity;\r\n        let id = -1;\r\n        this.forEach((v, i) => {\r\n            let disSquared = point.disToSquared(v);\r\n            if (disSquared < lowScore) {\r\n                lowScore = disSquared;\r\n                id = i;\r\n            }\r\n        });\r\n        return id;\r\n    }\r\n    closestIds(point, n) {\r\n        // O(m*n)... TODO implement quicksort \r\n        let ids = [];\r\n        for (let i = 0; i < n; i++) {\r\n            let lowScore = Infinity;\r\n            let id = -1;\r\n            this.forEach((v, i) => {\r\n                if (ids.includes(id))\r\n                    return;\r\n                let disSquared = point.disToSquared(v);\r\n                if (disSquared < lowScore) {\r\n                    lowScore = disSquared;\r\n                    id = i;\r\n                }\r\n            });\r\n            ids.push(id);\r\n        }\r\n        return ids;\r\n    }\r\n}\r\nfunction getGeneralFloatMatrix(vectors) {\r\n    if (vectors instanceof Vector2Array) {\r\n        return vectors;\r\n    }\r\n    else if (vectors instanceof Vector3Array) {\r\n        return vectors;\r\n    }\r\n    else if (vectors[0] instanceof _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2) {\r\n        return Vector2Array.fromList(vectors);\r\n    }\r\n    else {\r\n        return Vector3Array.fromList(vectors);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2RhdGEvdmVjdG9yLWFycmF5LnRzP2ViMWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxvQkFBb0I7QUFDcEIsd0JBQXdCO0FBQ3hCLDRHQUE0RztBQUM1Ryw0RUFBNEU7QUFDNUUsR0FBRztBQUNILHNFQUFzRTtBQUN0RSxtRkFBbUY7QUFJakM7QUFDTDtBQUV0QyxNQUFNLFlBQWEsU0FBUSxzREFBVztJQUV6QyxZQUFZLEtBQWE7UUFDckIsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNwQixDQUFDO0lBR0QsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFlO1FBQzNCLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDekIsSUFBSSxLQUFLLEdBQUcsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckMsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDakMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QixLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNqQztRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFHRCxPQUFPLENBQUMsVUFBbUQ7UUFFdkQsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNuQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVC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RUFBRSxDQUFDLENBQUM7U0FDaEI7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7Q0FDSjtBQUVNLFNBQVMscUJBQXFCLENBQUMsT0FBNEQ7SUFFOUYsSUFBRyxPQUFPLFlBQVksWUFBWSxFQUFFO1FBQ2hDLE9BQU8sT0FBTyxDQUFDO0tBQ2xCO1NBQU0sSUFBSSxPQUFPLFlBQVksWUFBWSxFQUFFO1FBQ3hDLE9BQU8sT0FBTyxDQUFDO0tBQ2xCO1NBQU0sSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLFlBQVksaURBQU8sRUFBRTtRQUN0QyxPQUFPLFlBQVksQ0FBQyxRQUFRLENBQUMsT0FBb0IsQ0FBQyxDQUFDO0tBQ3REO1NBQU07UUFDSCxPQUFPLFlBQVksQ0FBQyxRQUFRLENBQUMsT0FBb0IsQ0FBQyxDQUFDO0tBQ3REO0FBQ0wsQ0FBQyIsImZpbGUiOiIuL3NyYy9kYXRhL3ZlY3Rvci1hcnJheS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIG5hbWU6ICAgIGFycmF5LnRzXHJcbi8vIGF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiBTbWFsbCB3cmFwcGVyIGFyb3VuZCBGbG9hdDMyQXJyYXkgLyBGbG9hdE1hdHJpeCB0byBhZGQgaW50ZXJvcGVyYWJpbGl0eSB3aXRoIFZlY3RvcjIgJiBWZWN0b3IzLCBcclxuLy8gICAgICAgICAgd2hpbGUgcmVtYWluaW5nIGEgZGF0YXN0cnVjdHVyZSB0aGF0cyBlYXN5IHRvIHBhc3Mgb3ZlciB0byB3ZWJnbFxyXG4vLyBcclxuLy8gTk9URTogICAgYWxsIHRoZXNlIHNtYWxsIHdyYXBwZXJzIG1pZ2h0IG5vdCBiZSBnb29kIHByYXRpY2UsIGJ1dCBJIFxyXG4vLyAgICAgICAgICBsaWtlIHRvIGV4dHJhY3Qgc2ltcGxlIGxvZ2ljIGxpa2UgdGhpcyB0byBub3QgY2x1dHRlciB0aGUgY29kZSB0b28gbXVjaFxyXG5cclxuaW1wb3J0IHsgaXNEb3dubG9hZEZsb2F0VGV4dHVyZUVuYWJsZWQgfSBmcm9tIFwiQHRlbnNvcmZsb3cvdGZqcy1iYWNrZW5kLXdlYmdsL2Rpc3Qvd2ViZ2xfdXRpbFwiO1xyXG5pbXBvcnQgeyBNYXRyaXg0IH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IFZlY3RvcjMsIFZlY3RvcjIgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi9mbG9hdC1tYXRyaXhcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWZWN0b3IyQXJyYXkgZXh0ZW5kcyBGbG9hdE1hdHJpeCB7XHJcbiAgIFxyXG4gICAgY29uc3RydWN0b3IoY291bnQ6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKGNvdW50LCAyKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIHN0YXRpYyBmcm9tTGlzdCh2ZWNzOiBWZWN0b3IyW10pIDogVmVjdG9yMkFycmF5IHtcclxuICAgICAgICBsZXQgbGVuZ3RoID0gdmVjcy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGFycmF5ID0gbmV3IFZlY3RvcjJBcnJheShsZW5ndGgpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2ZWNzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFycmF5LmRhdGFbaSoyXSA9IHZlY3NbaV0ueDtcclxuICAgICAgICAgICAgYXJyYXkuZGF0YVtpKjIrMV0gPSB2ZWNzW2ldLnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZm9yRWFjaChjYWxsYmFja2ZuOiAodmFsdWU6IFZlY3RvcjIsIGluZGV4OiBudW1iZXIpID0+IHZvaWQpIDogVmVjdG9yMkFycmF5IHtcclxuICAgICAgICBcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuY291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2ZWMgPSB0aGlzLmdldFZlY3RvcihpKTtcclxuICAgICAgICAgICAgY2FsbGJhY2tmbih2ZWMsIGkpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlY3RvcihpLCB2ZWMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblxyXG4gICAgbWFwKGNhbGxiYWNrZm46ICh2YWx1ZTogVmVjdG9yMiwgaW5kZXg6IG51bWJlcikgPT4gYW55KSA6IFZlY3RvcjJBcnJheSB7XHJcblxyXG4gICAgICAgIGxldCBjbG9uZSA9IHRoaXMuY2xvbmUoKTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmVjID0gdGhpcy5nZXRWZWN0b3IoaSk7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBjYWxsYmFja2ZuKHZlYywgaSkhO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgVmVjdG9yMikge1xyXG4gICAgICAgICAgICAgICAgY2xvbmUuc2V0VmVjdG9yKGksIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZS5zZXRWZWN0b3IoaSwgdmVjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldFZlY3RvcihpOiBudW1iZXIsIHZlYzogVmVjdG9yMikge1xyXG4gICAgICAgIHRoaXMuZGF0YVtpICogdGhpcy5fd2lkdGggKyAwXSA9IHZlYy54O1xyXG4gICAgICAgIHRoaXMuZGF0YVtpICogdGhpcy5fd2lkdGggKyAxXSA9IHZlYy55O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXRWZWN0b3IoaTogbnVtYmVyKSA6IFZlY3RvcjIge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMihcclxuICAgICAgICAgICAgdGhpcy5kYXRhW2kgKiB0aGlzLl93aWR0aCArIDBdLFxyXG4gICAgICAgICAgICB0aGlzLmRhdGFbaSAqIHRoaXMuX3dpZHRoICsgMV0sXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0b0xpc3QoKSA6IFZlY3RvcjJbXSB7XHJcblxyXG4gICAgICAgIGxldCB2ZWNzOiBWZWN0b3IyW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCB0aGlzLl9oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICB2ZWNzLnB1c2godGhpcy5nZXRWZWN0b3IoaSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmVjcztcclxuICAgIH1cclxuXHJcbiAgICB0bzNEKCkgOiBWZWN0b3IzQXJyYXkge1xyXG4gICAgICAgIGxldCBhcnJheSA9IG5ldyBWZWN0b3IzQXJyYXkodGhpcy5jb3VudCgpKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuY291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLmdldFJvdyhpKTtcclxuICAgICAgICAgICAgYXJyYXkuc2V0Um93KGksIFtyb3dbMF0sIHJvd1sxXSwgMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKSA6IFZlY3RvcjJBcnJheSB7XHJcbiAgICAgICAgbGV0IGNsb25lID0gbmV3IFZlY3RvcjJBcnJheSh0aGlzLl9oZWlnaHQpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY2xvbmUuZGF0YVtpXSA9IHRoaXMuZGF0YVtpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNsb25lOyAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWZWN0b3IzQXJyYXkgZXh0ZW5kcyBGbG9hdE1hdHJpeCB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKGNvdW50OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihjb3VudCwgMyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBmcm9tTGlzdCh2ZWNzOiBWZWN0b3IzW10pIDogVmVjdG9yM0FycmF5IHtcclxuICAgICAgICBsZXQgbGVuZ3RoID0gdmVjcy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGFycmF5ID0gbmV3IFZlY3RvcjNBcnJheShsZW5ndGgpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2ZWNzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFycmF5LmRhdGFbaSozXSA9IHZlY3NbaV0ueDtcclxuICAgICAgICAgICAgYXJyYXkuZGF0YVtpKjMrMV0gPSB2ZWNzW2ldLnk7XHJcbiAgICAgICAgICAgIGFycmF5LmRhdGFbaSozKzJdID0gdmVjc1tpXS56O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBmcm9tTmF0aXZlKG5hdGl2ZTogbnVtYmVyW11bXSkgOiBWZWN0b3IzQXJyYXkge1xyXG4gICAgICAgIC8vIGFzc3VtZSBhbGwgc3ViYXJyYXlzIGhhdmUgdGhlIHNhbWUgc2hhcGUhIVxyXG4gICAgICAgIGxldCBoZWlnaHQgPSBuYXRpdmUubGVuZ3RoO1xyXG4gICAgICAgIGxldCBtYXRyaXggPSBuZXcgVmVjdG9yM0FycmF5KGhlaWdodCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYXRpdmUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuYXRpdmVbMF0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoaSwgaiwgbmF0aXZlW2ldW2pdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF0cml4OyBcclxuICAgIH1cclxuXHJcblxyXG4gICAgZmlsbEZyb21MaXN0KHZlY3M6IFZlY3RvcjNbXSkge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2ZWNzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpKjNdID0gdmVjc1tpXS54O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbaSozKzFdID0gdmVjc1tpXS55O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbaSozKzJdID0gdmVjc1tpXS56O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZm9yRWFjaChjYWxsYmFja2ZuOiAodmFsdWU6IFZlY3RvcjMsIGluZGV4OiBudW1iZXIpID0+IGFueSkgOiBWZWN0b3IzQXJyYXkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5jb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHZlYyA9IHRoaXMuZ2V0VmVjdG9yKGkpO1xyXG4gICAgICAgICAgICB2ZWMgPSBjYWxsYmFja2ZuKHZlYywgaSkhO1xyXG4gICAgICAgICAgICBpZiAodmVjIGluc3RhbmNlb2YgVmVjdG9yMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWZWN0b3IoaSwgdmVjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblxyXG4gICAgbWFwKGNhbGxiYWNrZm46ICh2YWx1ZTogVmVjdG9yMywgaW5kZXg6IG51bWJlcikgPT4gYW55KSA6IFZlY3RvcjNBcnJheSB7XHJcblxyXG4gICAgICAgIGxldCBjbG9uZSA9IHRoaXMuY2xvbmUoKTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmVjID0gdGhpcy5nZXRWZWN0b3IoaSk7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBjYWxsYmFja2ZuKHZlYywgaSkhO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgVmVjdG9yMykge1xyXG4gICAgICAgICAgICAgICAgY2xvbmUuc2V0VmVjdG9yKGksIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZS5zZXRWZWN0b3IoaSwgdmVjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldFZlY3RvcihpOiBudW1iZXIsIHZlYzogVmVjdG9yMykge1xyXG4gICAgICAgIHRoaXMuZGF0YVtpICogdGhpcy5fd2lkdGggKyAwXSA9IHZlYy54O1xyXG4gICAgICAgIHRoaXMuZGF0YVtpICogdGhpcy5fd2lkdGggKyAxXSA9IHZlYy55O1xyXG4gICAgICAgIHRoaXMuZGF0YVtpICogdGhpcy5fd2lkdGggKyAyXSA9IHZlYy56O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXRWZWN0b3IoaTogbnVtYmVyKSA6IFZlY3RvcjMge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyhcclxuICAgICAgICAgICAgdGhpcy5kYXRhW2kgKiB0aGlzLl93aWR0aCArIDBdLFxyXG4gICAgICAgICAgICB0aGlzLmRhdGFbaSAqIHRoaXMuX3dpZHRoICsgMV0sXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpICogdGhpcy5fd2lkdGggKyAyXSxcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRvTGlzdCgpIDogVmVjdG9yM1tdIHtcclxuXHJcbiAgICAgICAgbGV0IHZlY3M6IFZlY3RvcjNbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHRoaXMuX2hlaWdodDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZlY3MucHVzaCh0aGlzLmdldFZlY3RvcihpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2ZWNzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0cmFuc2Zvcm0obTogTWF0cml4NCkgOiBWZWN0b3IzQXJyYXkge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCB0aGlzLl9oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmVjID0gdGhpcy5nZXRWZWN0b3IoaSk7XHJcbiAgICAgICAgICAgIHZlYyA9IG0ubXVsdGlwbHlWZWN0b3IodmVjKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRWZWN0b3IoaSwgdmVjKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5kYXRhID0gbS5NdWx0aXBseU0odGhpcykuZGF0YTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblxyXG4gICAgdG8yRCgpIDogVmVjdG9yMkFycmF5IHtcclxuICAgICAgICBsZXQgY2xvbmUgPSBuZXcgVmVjdG9yMkFycmF5KHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDI7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY2xvbmUuc2V0KGksIGosIHRoaXMuZ2V0KGksIGopKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmU7ICBcclxuICAgIH1cclxuXHJcblxyXG4gICAgY2xvbmUoKSA6IFZlY3RvcjNBcnJheSB7XHJcbiAgICAgICAgbGV0IGNsb25lID0gbmV3IFZlY3RvcjNBcnJheSh0aGlzLl9oZWlnaHQpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNsb25lLmRhdGFbaV0gPSB0aGlzLmRhdGFbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9uZTsgIFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtZWFuKCkgOiBWZWN0b3IzIHtcclxuICAgICAgICAvLyB0aGUgbWVhbiB2ZWN0b3Igb2YgYSBzZXJpZXMgb2YgdmVjdG9yc1xyXG4gICAgICAgIGxldCBzdW0gPSBWZWN0b3IzLnplcm8oKTtcclxuXHJcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5jb3VudCgpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN1bS54ICs9IHRoaXMuZGF0YVtpKjNdXHJcbiAgICAgICAgICAgIHN1bS55ICs9IHRoaXMuZGF0YVtpKjMrMV1cclxuICAgICAgICAgICAgc3VtLnogKz0gdGhpcy5kYXRhW2kqMysyXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN1bS5zY2FsZSgxIC8gY291bnQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhdmVyYWdlKCkgOiBWZWN0b3IzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZWFuKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNsb3Nlc3RJZChwb2ludDogVmVjdG9yMykgOiBudW1iZXIge1xyXG5cclxuICAgICAgICBsZXQgbG93U2NvcmUgPSBJbmZpbml0eVxyXG4gICAgICAgIGxldCBpZCA9IC0xO1xyXG5cclxuICAgICAgICB0aGlzLmZvckVhY2goKHYsIGkpID0+IHtcclxuICAgICAgICAgICAgbGV0IGRpc1NxdWFyZWQgPSBwb2ludC5kaXNUb1NxdWFyZWQodik7XHJcbiAgICAgICAgICAgIGlmIChkaXNTcXVhcmVkIDwgbG93U2NvcmUpIHtcclxuICAgICAgICAgICAgICAgIGxvd1Njb3JlID0gZGlzU3F1YXJlZDtcclxuICAgICAgICAgICAgICAgIGlkID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgY2xvc2VzdElkcyhwb2ludDogVmVjdG9yMywgbjogbnVtYmVyKSA6IG51bWJlcltdIHtcclxuICAgICAgICAvLyBPKG0qbikuLi4gVE9ETyBpbXBsZW1lbnQgcXVpY2tzb3J0IFxyXG5cclxuICAgICAgICBsZXQgaWRzOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGxvd1Njb3JlID0gSW5maW5pdHk7XHJcbiAgICAgICAgICAgIGxldCBpZCA9IC0xO1xyXG4gICAgICAgICAgICB0aGlzLmZvckVhY2goKHYsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpZHMuaW5jbHVkZXMoaWQpKSBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlzU3F1YXJlZCA9IHBvaW50LmRpc1RvU3F1YXJlZCh2KTtcclxuICAgICAgICAgICAgICAgIGlmIChkaXNTcXVhcmVkIDwgbG93U2NvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb3dTY29yZSA9IGRpc1NxdWFyZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZHMucHVzaChpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpZHM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHZW5lcmFsRmxvYXRNYXRyaXgodmVjdG9yczogVmVjdG9yMkFycmF5IHwgVmVjdG9yM0FycmF5IHwgVmVjdG9yMltdIHwgVmVjdG9yM1tdKTogRmxvYXRNYXRyaXgge1xyXG5cclxuICAgIGlmKHZlY3RvcnMgaW5zdGFuY2VvZiBWZWN0b3IyQXJyYXkpIHtcclxuICAgICAgICByZXR1cm4gdmVjdG9ycztcclxuICAgIH0gZWxzZSBpZiAodmVjdG9ycyBpbnN0YW5jZW9mIFZlY3RvcjNBcnJheSkge1xyXG4gICAgICAgIHJldHVybiB2ZWN0b3JzO1xyXG4gICAgfSBlbHNlIGlmICh2ZWN0b3JzWzBdIGluc3RhbmNlb2YgVmVjdG9yMikge1xyXG4gICAgICAgIHJldHVybiBWZWN0b3IyQXJyYXkuZnJvbUxpc3QodmVjdG9ycyBhcyBWZWN0b3IyW10pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yM0FycmF5LmZyb21MaXN0KHZlY3RvcnMgYXMgVmVjdG9yM1tdKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/vector-array.ts\n");

/***/ }),

/***/ "./src/geo/circle2.ts":
/*!****************************!*\
  !*** ./src/geo/circle2.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Circle2\": () => /* binding */ Circle2\n/* harmony export */ });\n/* harmony import */ var _math_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/const */ \"./src/math/const.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n\r\n\r\nclass Circle2 {\r\n    constructor(center, radius) {\r\n        this.center = center;\r\n        this.radius = radius;\r\n    }\r\n    // thank you mr Mitteldorf for making me remember how basic math works\r\n    // http://mathforum.org/library/drmath/view/53027.html\r\n    // calculate the centers of two circles, defined by two points and a radius\r\n    static centersFromPPR(a, b, radius) {\r\n        // throw new Error(\"Method not implemented.\");\r\n        // get in between length and halfway point\r\n        let normal = b.clone().sub(a);\r\n        let dis = normal.length();\r\n        let middle = a.clone().add(b).scale(1 / 2);\r\n        // scalar length on mirror line (pythagoras)\r\n        let value = Math.pow(radius, 2) - Math.pow((dis / 2), 2);\r\n        if (value < -_math_const__WEBPACK_IMPORTED_MODULE_0__.Const.TOLERANCE) {\r\n            // no sollution\r\n            return [];\r\n        }\r\n        else if (value < _math_const__WEBPACK_IMPORTED_MODULE_0__.Const.TOLERANCE) {\r\n            // center roughly in the middle, so just return the middle\r\n            return [middle];\r\n        }\r\n        else {\r\n            // two circles possible:\r\n            let disToCenter = Math.pow((value), 0.5);\r\n            let normY = new _math_vector__WEBPACK_IMPORTED_MODULE_1__.Vector2(normal.y, -normal.x).normalize();\r\n            // move the middle point up and down\r\n            return [\r\n                middle.clone().add(normY.clone().scale(disToCenter)),\r\n                middle.clone().add(normY.clone().scale(-disToCenter)),\r\n            ];\r\n        }\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2dlby9jaXJjbGUyLnRzPzBjMWYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRXNDO0FBQ0c7QUFFbEMsTUFBTSxPQUFPO0lBS2hCLFlBQVksTUFBZSxFQUFFLE1BQWM7UUFDdkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQztJQUVELHNFQUFzRTtJQUN0RSxzREFBc0Q7SUFDdEQsMkVBQTJFO0lBQzNFLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBVSxFQUFFLENBQVUsRUFBRSxNQUFjO1FBQ3hELDhDQUE4QztRQUU5QywwQ0FBMEM7UUFDMUMsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QixJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDMUIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXpDLDRDQUE0QztRQUM1QyxJQUFJLEtBQUssR0FBRyxlQUFNLEVBQUUsQ0FBQyxJQUFHLFVBQUMsR0FBRyxHQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDbEMsSUFBSSxLQUFLLEdBQUcsQ0FBQyx3REFBZSxFQUFFO1lBQzFCLGVBQWU7WUFDZixPQUFPLEVBQUUsQ0FBQztTQUNiO2FBQU0sSUFBSSxLQUFLLEdBQUcsd0RBQWUsRUFBRTtZQUNoQywwREFBMEQ7WUFDMUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ25CO2FBQU07WUFDSCx3QkFBd0I7WUFDeEIsSUFBSSxXQUFXLEdBQUcsVUFBQyxLQUFLLENBQUMsRUFBRSxHQUFHO1lBQzlCLElBQUksS0FBSyxHQUFHLElBQUksaURBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBRXpELG9DQUFvQztZQUNwQyxPQUFPO2dCQUNILE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDcEQsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7YUFDeEQsQ0FBQztTQUNMO0lBQ0wsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL2dlby9jaXJjbGUyLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbm9ybSB9IGZyb20gXCJAdGVuc29yZmxvdy90ZmpzXCI7XHJcbmltcG9ydCB7IHJhbmRVbmlmb3JtIH0gZnJvbSBcIkB0ZW5zb3JmbG93L3RmanMtY29yZS9kaXN0L3V0aWxcIjtcclxuaW1wb3J0IHsgQ29uc3QgfSBmcm9tIFwiLi4vbWF0aC9jb25zdFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2lyY2xlMiB7XHJcblxyXG4gICAgY2VudGVyOiBWZWN0b3IyO1xyXG4gICAgcmFkaXVzOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2VudGVyOiBWZWN0b3IyLCByYWRpdXM6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyB0aGFuayB5b3UgbXIgTWl0dGVsZG9yZiBmb3IgbWFraW5nIG1lIHJlbWVtYmVyIGhvdyBiYXNpYyBtYXRoIHdvcmtzXHJcbiAgICAvLyBodHRwOi8vbWF0aGZvcnVtLm9yZy9saWJyYXJ5L2RybWF0aC92aWV3LzUzMDI3Lmh0bWxcclxuICAgIC8vIGNhbGN1bGF0ZSB0aGUgY2VudGVycyBvZiB0d28gY2lyY2xlcywgZGVmaW5lZCBieSB0d28gcG9pbnRzIGFuZCBhIHJhZGl1c1xyXG4gICAgc3RhdGljIGNlbnRlcnNGcm9tUFBSKGE6IFZlY3RvcjIsIGI6IFZlY3RvcjIsIHJhZGl1czogbnVtYmVyKSA6IFZlY3RvcjJbXSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcblxyXG4gICAgICAgIC8vIGdldCBpbiBiZXR3ZWVuIGxlbmd0aCBhbmQgaGFsZndheSBwb2ludFxyXG4gICAgICAgIGxldCBub3JtYWwgPSBiLmNsb25lKCkuc3ViKGEpO1xyXG4gICAgICAgIGxldCBkaXMgPSBub3JtYWwubGVuZ3RoKCk7XHJcbiAgICAgICAgbGV0IG1pZGRsZSA9IGEuY2xvbmUoKS5hZGQoYikuc2NhbGUoMS8yKTtcclxuXHJcbiAgICAgICAgLy8gc2NhbGFyIGxlbmd0aCBvbiBtaXJyb3IgbGluZSAocHl0aGFnb3JhcylcclxuICAgICAgICBsZXQgdmFsdWUgPSByYWRpdXMqKjIgLSAoZGlzLzIpKioyXHJcbiAgICAgICAgaWYgKHZhbHVlIDwgLUNvbnN0LlRPTEVSQU5DRSkge1xyXG4gICAgICAgICAgICAvLyBubyBzb2xsdXRpb25cclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCBDb25zdC5UT0xFUkFOQ0UpIHtcclxuICAgICAgICAgICAgLy8gY2VudGVyIHJvdWdobHkgaW4gdGhlIG1pZGRsZSwgc28ganVzdCByZXR1cm4gdGhlIG1pZGRsZVxyXG4gICAgICAgICAgICByZXR1cm4gW21pZGRsZV07IFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHR3byBjaXJjbGVzIHBvc3NpYmxlOlxyXG4gICAgICAgICAgICBsZXQgZGlzVG9DZW50ZXIgPSAodmFsdWUpKiowLjVcclxuICAgICAgICAgICAgbGV0IG5vcm1ZID0gbmV3IFZlY3RvcjIobm9ybWFsLnksIC1ub3JtYWwueCkubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBtb3ZlIHRoZSBtaWRkbGUgcG9pbnQgdXAgYW5kIGRvd25cclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIG1pZGRsZS5jbG9uZSgpLmFkZChub3JtWS5jbG9uZSgpLnNjYWxlKGRpc1RvQ2VudGVyKSksXHJcbiAgICAgICAgICAgICAgICBtaWRkbGUuY2xvbmUoKS5hZGQobm9ybVkuY2xvbmUoKS5zY2FsZSgtZGlzVG9DZW50ZXIpKSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geo/circle2.ts\n");

/***/ }),

/***/ "./src/geo/circle3.ts":
/*!****************************!*\
  !*** ./src/geo/circle3.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Circle3\": () => /* binding */ Circle3\n/* harmony export */ });\n/* harmony import */ var _math_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/const */ \"./src/math/const.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plane */ \"./src/geo/plane.ts\");\n// purpose: represents a 3d circle\r\n\r\n\r\nclass Circle3 {\r\n    constructor(plane, radius) {\r\n        this.plane = plane;\r\n        this.radius = radius;\r\n    }\r\n    static fromCircle2(circle2, plane = _plane__WEBPACK_IMPORTED_MODULE_1__.Plane.WorldXY()) {\r\n        // elevate center of circle, make it the center of a plane\r\n        let center3d = plane.pushToWorld(circle2.center.to3D());\r\n        plane = plane.clone();\r\n        plane.center = center3d;\r\n        return new Circle3(plane, circle2.radius);\r\n    }\r\n    includes(p) {\r\n        // test if the point falls in range of the circle, by regarding\r\n        // the circle as a torus\r\n        // CHANGE NOTE: i set this to zero, for testing\r\n        // vertical error\r\n        let [projPoint, yError] = this.plane.closestPoint(p);\r\n        yError = yError / 3;\r\n        // horizontal error: get the difference between point\r\n        let xError = this.plane.center.clone().disTo(projPoint) - this.radius;\r\n        // length of total error vector needs to be smaller than the given\r\n        // tolerance\r\n        return Math.pow(yError, 2) + Math.pow(xError, 2) < _math_const__WEBPACK_IMPORTED_MODULE_0__.Const.TOL_SQUARED;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2dlby9jaXJjbGUzLnRzP2VkY2MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0Esa0NBQWtDO0FBRUk7QUFJTjtBQUl6QixNQUFNLE9BQU87SUFLaEIsWUFBWSxLQUFZLEVBQUUsTUFBYztRQUNwQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN6QixDQUFDO0lBRUQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFnQixFQUFFLEtBQUssR0FBRyxpREFBYSxFQUFFO1FBRXhELDBEQUEwRDtRQUMxRCxJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUN4RCxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3RCLEtBQUssQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDO1FBQ3hCLE9BQU8sSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsUUFBUSxDQUFDLENBQVU7UUFDZiwrREFBK0Q7UUFDL0Qsd0JBQXdCO1FBRXhCLCtDQUErQztRQUMvQyxpQkFBaUI7UUFDakIsSUFBSSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRCxNQUFNLEdBQUcsTUFBTSxHQUFHLENBQUM7UUFFbkIscURBQXFEO1FBQ3JELElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBRXRFLGtFQUFrRTtRQUNsRSxZQUFZO1FBQ1osT0FBTyxlQUFNLEVBQUUsQ0FBQyxJQUFHLGVBQU0sRUFBRyxDQUFDLElBQUcsMERBQWlCLENBQUM7SUFDdEQsQ0FBQztDQUlKIiwiZmlsZSI6Ii4vc3JjL2dlby9jaXJjbGUzLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8vIHB1cnBvc2U6IHJlcHJlc2VudHMgYSAzZCBjaXJjbGVcclxuXHJcbmltcG9ydCB7IENvbnN0IH0gZnJvbSBcIi4uL21hdGgvY29uc3RcIjtcclxuaW1wb3J0IHsgTWF0cml4NCB9IGZyb20gXCIuLi9tYXRoL21hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IENpcmNsZTIgfSBmcm9tIFwiLi9jaXJjbGUyXCI7XHJcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4vcGxhbmVcIjtcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENpcmNsZTMge1xyXG5cclxuICAgIHBsYW5lOiBQbGFuZTtcclxuICAgIHJhZGl1czogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYW5lOiBQbGFuZSwgcmFkaXVzOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnBsYW5lID0gcGxhbmU7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21DaXJjbGUyKGNpcmNsZTI6IENpcmNsZTIsIHBsYW5lID0gUGxhbmUuV29ybGRYWSgpKSB7XHJcblxyXG4gICAgICAgIC8vIGVsZXZhdGUgY2VudGVyIG9mIGNpcmNsZSwgbWFrZSBpdCB0aGUgY2VudGVyIG9mIGEgcGxhbmVcclxuICAgICAgICBsZXQgY2VudGVyM2QgPSBwbGFuZS5wdXNoVG9Xb3JsZChjaXJjbGUyLmNlbnRlci50bzNEKCkpO1xyXG4gICAgICAgIHBsYW5lID0gcGxhbmUuY2xvbmUoKTtcclxuICAgICAgICBwbGFuZS5jZW50ZXIgPSBjZW50ZXIzZDtcclxuICAgICAgICByZXR1cm4gbmV3IENpcmNsZTMocGxhbmUsIGNpcmNsZTIucmFkaXVzKTtcclxuICAgIH1cclxuXHJcbiAgICBpbmNsdWRlcyhwOiBWZWN0b3IzKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIHRlc3QgaWYgdGhlIHBvaW50IGZhbGxzIGluIHJhbmdlIG9mIHRoZSBjaXJjbGUsIGJ5IHJlZ2FyZGluZ1xyXG4gICAgICAgIC8vIHRoZSBjaXJjbGUgYXMgYSB0b3J1c1xyXG5cclxuICAgICAgICAvLyBDSEFOR0UgTk9URTogaSBzZXQgdGhpcyB0byB6ZXJvLCBmb3IgdGVzdGluZ1xyXG4gICAgICAgIC8vIHZlcnRpY2FsIGVycm9yXHJcbiAgICAgICAgbGV0IFtwcm9qUG9pbnQsIHlFcnJvcl0gPSB0aGlzLnBsYW5lLmNsb3Nlc3RQb2ludChwKTtcclxuICAgICAgICB5RXJyb3IgPSB5RXJyb3IgLyAzXHJcbiAgICBcclxuICAgICAgICAvLyBob3Jpem9udGFsIGVycm9yOiBnZXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBwb2ludFxyXG4gICAgICAgIGxldCB4RXJyb3IgPSB0aGlzLnBsYW5lLmNlbnRlci5jbG9uZSgpLmRpc1RvKHByb2pQb2ludCkgLSB0aGlzLnJhZGl1cztcclxuICAgIFxyXG4gICAgICAgIC8vIGxlbmd0aCBvZiB0b3RhbCBlcnJvciB2ZWN0b3IgbmVlZHMgdG8gYmUgc21hbGxlciB0aGFuIHRoZSBnaXZlblxyXG4gICAgICAgIC8vIHRvbGVyYW5jZVxyXG4gICAgICAgIHJldHVybiB5RXJyb3IqKjIgKyB4RXJyb3IgKioyIDwgQ29uc3QuVE9MX1NRVUFSRUQ7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geo/circle3.ts\n");

/***/ }),

/***/ "./src/geo/cube.ts":
/*!*************************!*\
  !*** ./src/geo/cube.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Cube\": () => /* binding */ Cube\n/* harmony export */ });\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plane */ \"./src/geo/plane.ts\");\n// name:    cube.ts\r\n// author:  Jos Feenstra\r\n// purpose: Represents a cube in 3d space, in a certain pose. \r\n\r\n\r\nclass Cube {\r\n    constructor(plane, domain) {\r\n        this.plane = plane;\r\n        this.domain = domain;\r\n    }\r\n    static fromRadius(point, radius) {\r\n        return new Cube(_plane__WEBPACK_IMPORTED_MODULE_1__.Plane.WorldXY().moveTo(point), _math_domain__WEBPACK_IMPORTED_MODULE_0__.Domain3.fromRadius(radius));\r\n    }\r\n    getCorners() {\r\n        return this.domain.corners(this.plane.matrix);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2dlby9jdWJlLnRzPzMxMmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsbUJBQW1CO0FBQ25CLHdCQUF3QjtBQUN4Qiw4REFBOEQ7QUFHckI7QUFHVDtBQUV6QixNQUFNLElBQUk7SUFNYixZQUFZLEtBQVksRUFBRSxNQUFlO1FBQ3JDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBQ3pCLENBQUM7SUFHRCxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQWMsRUFBRSxNQUFjO1FBQzVDLE9BQU8sSUFBSSxJQUFJLENBQ1gsaURBQWEsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFDN0IsNERBQWtCLENBQUMsTUFBTSxDQUFDLENBQzdCLENBQUM7SUFDTixDQUFDO0lBR0QsVUFBVTtRQUNOLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsRCxDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvZ2VvL2N1YmUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBuYW1lOiAgICBjdWJlLnRzXHJcbi8vIGF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiBSZXByZXNlbnRzIGEgY3ViZSBpbiAzZCBzcGFjZSwgaW4gYSBjZXJ0YWluIHBvc2UuIFxyXG5cclxuaW1wb3J0IHsgVmVjdG9yM0FycmF5IH0gZnJvbSBcIi4uL2RhdGEvdmVjdG9yLWFycmF5XCI7XHJcbmltcG9ydCB7IERvbWFpbjMgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBHZW8gfSBmcm9tIFwiLi9nZW9cIjtcclxuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi9wbGFuZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEN1YmUge1xyXG5cclxuICAgIFxyXG4gICAgcGxhbmU6IFBsYW5lXHJcbiAgICBkb21haW46IERvbWFpbjNcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwbGFuZTogUGxhbmUsIGRvbWFpbjogRG9tYWluMykge1xyXG4gICAgICAgIHRoaXMucGxhbmUgPSBwbGFuZTtcclxuICAgICAgICB0aGlzLmRvbWFpbiA9IGRvbWFpbjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21SYWRpdXMocG9pbnQ6IFZlY3RvcjMsIHJhZGl1czogbnVtYmVyKTogQ3ViZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDdWJlKFxyXG4gICAgICAgICAgICBQbGFuZS5Xb3JsZFhZKCkubW92ZVRvKHBvaW50KSxcclxuICAgICAgICAgICAgRG9tYWluMy5mcm9tUmFkaXVzKHJhZGl1cyksXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGdldENvcm5lcnMoKSA6IFZlY3RvcjNbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9tYWluLmNvcm5lcnModGhpcy5wbGFuZS5tYXRyaXgpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geo/cube.ts\n");

/***/ }),

/***/ "./src/geo/line.ts":
/*!*************************!*\
  !*** ./src/geo/line.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LineCurve2\": () => /* binding */ LineCurve2\n/* harmony export */ });\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n\r\n\r\n// heavy weight Line class\r\nclass LineCurve2 {\r\n    constructor(from, to) {\r\n        this.from = from;\r\n        this.to = to;\r\n        this.vector = to.subbed(this.from);\r\n        this.normal = this.vector.normalized();\r\n        this.bounds = new _math_domain__WEBPACK_IMPORTED_MODULE_0__.Domain(0, this.vector.length());\r\n        this.length = this.vector.length();\r\n    }\r\n    at(t, bounded = true) {\r\n        if (bounded)\r\n            t = this.bounds.comform(t);\r\n        return _math_vector__WEBPACK_IMPORTED_MODULE_1__.Vector2.fromLerp(this.from, this.to, t / this.length);\r\n    }\r\n    atNormal(t, bounded = true) {\r\n        if (bounded)\r\n            t = new _math_domain__WEBPACK_IMPORTED_MODULE_0__.Domain(0, 1).comform(t);\r\n        return _math_vector__WEBPACK_IMPORTED_MODULE_1__.Vector2.fromLerp(this.from, this.to, t);\r\n    }\r\n    closestPoint(point, bounded = true) {\r\n        const d = this.vector.length();\r\n        if (d === 0)\r\n            return;\r\n        let lineToPoint = point.subbed(this.from);\r\n        let dot = lineToPoint.dot(this.vector);\r\n        return this.at(dot, bounded);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2dlby9saW5lLnRzP2FhODUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEO0FBQ1Q7QUFFeEMsMEJBQTBCO0FBQ25CLE1BQU0sVUFBVTtJQVVuQixZQUFZLElBQWEsRUFBRSxFQUFXO1FBQ2xDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDdkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLGdEQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUdELEVBQUUsQ0FBQyxDQUFTLEVBQUUsT0FBTyxHQUFDLElBQUk7UUFDdEIsSUFBSSxPQUFPO1lBQ1AsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLE9BQU8sMERBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ2hFLENBQUM7SUFHRCxRQUFRLENBQUMsQ0FBUyxFQUFFLE9BQU8sR0FBQyxJQUFJO1FBQzVCLElBQUksT0FBTztZQUNQLENBQUMsR0FBRyxJQUFJLGdEQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxPQUFPLDBEQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBR0QsWUFBWSxDQUFDLEtBQWMsRUFBRSxPQUFPLEdBQUMsSUFBSTtRQUVyQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDRCxPQUFPO1FBRVgsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUMsSUFBSSxHQUFHLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDN0MsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQixDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvZ2VvL2xpbmUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEb21haW4sIERvbWFpbjIgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiXHJcblxyXG4vLyBoZWF2eSB3ZWlnaHQgTGluZSBjbGFzc1xyXG5leHBvcnQgY2xhc3MgTGluZUN1cnZlMiB7XHJcblxyXG4gICAgcmVhZG9ubHkgZnJvbTogVmVjdG9yMjtcclxuICAgIHJlYWRvbmx5IHRvOiBWZWN0b3IyO1xyXG4gICAgcmVhZG9ubHkgdmVjdG9yOiBWZWN0b3IyO1xyXG4gICAgcmVhZG9ubHkgbm9ybWFsOiBWZWN0b3IyO1xyXG4gICAgcmVhZG9ubHkgYm91bmRzOiBEb21haW47XHJcbiAgICByZWFkb25seSBsZW5ndGg6IG51bWJlcjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoZnJvbTogVmVjdG9yMiwgdG86IFZlY3RvcjIpIHtcclxuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xyXG4gICAgICAgIHRoaXMudG8gPSB0bztcclxuICAgICAgICB0aGlzLnZlY3RvciA9IHRvLnN1YmJlZCh0aGlzLmZyb20pO1xyXG4gICAgICAgIHRoaXMubm9ybWFsID0gdGhpcy52ZWN0b3Iubm9ybWFsaXplZCgpO1xyXG4gICAgICAgIHRoaXMuYm91bmRzID0gbmV3IERvbWFpbigwLCB0aGlzLnZlY3Rvci5sZW5ndGgoKSk7XHJcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLnZlY3Rvci5sZW5ndGgoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYXQodDogbnVtYmVyLCBib3VuZGVkPXRydWUpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgaWYgKGJvdW5kZWQpIFxyXG4gICAgICAgICAgICB0ID0gdGhpcy5ib3VuZHMuY29tZm9ybSh0KTtcclxuICAgICAgICByZXR1cm4gVmVjdG9yMi5mcm9tTGVycCh0aGlzLmZyb20sIHRoaXMudG8sIHQgLyB0aGlzLmxlbmd0aClcclxuICAgIH1cclxuXHJcblxyXG4gICAgYXROb3JtYWwodDogbnVtYmVyLCBib3VuZGVkPXRydWUpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgaWYgKGJvdW5kZWQpXHJcbiAgICAgICAgICAgIHQgPSBuZXcgRG9tYWluKDAsMSkuY29tZm9ybSh0KTtcclxuICAgICAgICByZXR1cm4gVmVjdG9yMi5mcm9tTGVycCh0aGlzLmZyb20sIHRoaXMudG8sIHQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjbG9zZXN0UG9pbnQocG9pbnQ6IFZlY3RvcjIsIGJvdW5kZWQ9dHJ1ZSkgOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcclxuXHJcbiAgICAgICAgY29uc3QgZCA9IHRoaXMudmVjdG9yLmxlbmd0aCgpO1xyXG5cdFx0aWYgKGQgPT09IDApIFxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBsaW5lVG9Qb2ludCA9IHBvaW50LnN1YmJlZCh0aGlzLmZyb20pO1xyXG4gICAgICAgIGxldCBkb3QgPSBsaW5lVG9Qb2ludC5kb3QodGhpcy52ZWN0b3IpO1xyXG5cdFx0cmV0dXJuIHRoaXMuYXQoZG90LCBib3VuZGVkKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geo/line.ts\n");

/***/ }),

/***/ "./src/geo/plane.ts":
/*!**************************!*\
  !*** ./src/geo/plane.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Plane\": () => /* binding */ Plane\n/* harmony export */ });\n/* harmony import */ var _math_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/matrix */ \"./src/math/matrix.ts\");\n/* harmony import */ var _math_statistics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/statistics */ \"./src/math/statistics.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n// name:    plane.ts\r\n// author:  Jos Feenstra\r\n// purpose: definition of a 3d plane. \r\n// todo:    turn Center, Ihat, Jhat, Khat construction to an actual matrix\r\n\r\n\r\n\r\nclass Plane {\r\n    // _inverse!: Matrix4; // NOTE: currently im not caching this. Might be needed.\r\n    // NOTE : d is not really needed anymore...\r\n    constructor(m) {\r\n        this._matrix = m;\r\n    }\r\n    static fromPVV(a, v1, v2) {\r\n        // TODO check if we still need this -1 thing \r\n        let khat = v1.clone().cross(v2).normalize(); //.scale(-1);\r\n        let center = a.clone();\r\n        let ihat = v1.normalize();\r\n        let jhat = v1.clone().cross(khat);\r\n        let mat = Plane.planeMatrixFromVecs(center, ihat, jhat, khat);\r\n        return new Plane(mat);\r\n    }\r\n    static from3pt(a, b, c) {\r\n        let v1 = b.clone().sub(a);\r\n        let v2 = c.clone().sub(a);\r\n        return this.fromPVV(a, v1, v2);\r\n    }\r\n    static WorldXY() {\r\n        return Plane.from3pt(_math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.zero(), _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.unitX(), _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.unitY());\r\n    }\r\n    static WorldYZ() {\r\n        return Plane.from3pt(_math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.zero(), _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.unitY(), _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.unitZ());\r\n    }\r\n    static WorldXZ() {\r\n        return Plane.from3pt(_math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.zero(), _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.unitX(), _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.unitZ());\r\n    }\r\n    static fromLeastSquares(pts) {\r\n        let mean = pts.mean();\r\n        let cov = _math_statistics__WEBPACK_IMPORTED_MODULE_1__.Stat.cov(pts);\r\n        let [eigValues, eigVectors] = _math_statistics__WEBPACK_IMPORTED_MODULE_1__.Stat.eig(cov);\r\n        console.log(eigValues);\r\n        let biggestEigenVector = _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromArray(eigVectors.getColumn(0));\r\n        let secondBiggestEigenVector = _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromArray(eigVectors.getColumn(1));\r\n        return Plane.fromPVV(mean, biggestEigenVector, secondBiggestEigenVector);\r\n    }\r\n    static fromXYLeastSquares(pts) {\r\n        // quite specific, but this was needed.\r\n        let mean = pts.mean();\r\n        return Plane.WorldXY().transform(_math_matrix__WEBPACK_IMPORTED_MODULE_0__.Matrix4.newTranslation(mean.x, mean.y, mean.z));\r\n    }\r\n    static planeMatrixFromVecs(c, i, j, k) {\r\n        return new _math_matrix__WEBPACK_IMPORTED_MODULE_0__.Matrix4([\r\n            i.x, i.y, i.z, 0,\r\n            j.x, j.y, j.z, 0,\r\n            k.x, k.y, k.z, 0,\r\n            c.x, c.y, c.z, 1,\r\n        ]);\r\n    }\r\n    get ihat() { return _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromArray(this._matrix.getRow(0)); }\r\n    get jhat() { return _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromArray(this._matrix.getRow(1)); }\r\n    get khat() { return _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromArray(this._matrix.getRow(2)); }\r\n    get center() { return _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromArray(this._matrix.getRow(3)); }\r\n    get matrix() { return this._matrix.clone(); }\r\n    get normal() { return this.khat; }\r\n    get d() { return this.closestPoint(_math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3.zero())[1]; }\r\n    set ihat(v) { this._matrix.setRow(0, [v.x, v.y, v.z, 0]); }\r\n    set jhat(v) { this._matrix.setRow(1, [v.x, v.y, v.z, 0]); }\r\n    set khat(v) { this._matrix.setRow(2, [v.x, v.y, v.z, 0]); }\r\n    set center(v) { this._matrix.setRow(3, [v.x, v.y, v.z, 1]); }\r\n    set matrix(m) { this._matrix = m; }\r\n    get inverse() { return this._matrix.inverse(); }\r\n    clone() {\r\n        return new Plane(this._matrix.clone());\r\n    }\r\n    transform(m) {\r\n        this._matrix = this._matrix.multiply(m);\r\n        return this;\r\n    }\r\n    moveTo(origin) {\r\n        this.center = origin;\r\n        return this;\r\n    }\r\n    // NOTE: pulling is inefficient since i do not cache the inverse.\r\n    pullToPlane(p) {\r\n        return this.inverse.multiplyVector(p);\r\n    }\r\n    pushToWorld(p) {\r\n        return this.matrix.multiplyVector(p);\r\n    }\r\n    closestPoint(p) {\r\n        let pulled = this.pullToPlane(p);\r\n        let distance = pulled.z;\r\n        pulled.z = 0;\r\n        let vec = this.pushToWorld(pulled);\r\n        return [vec, distance];\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2dlby9wbGFuZS50cz9iZDY1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxvQkFBb0I7QUFDcEIsd0JBQXdCO0FBQ3hCLHNDQUFzQztBQUN0QywwRUFBMEU7QUFJakM7QUFDQztBQUNRO0FBRTNDLE1BQU0sS0FBSztJQUdkLCtFQUErRTtJQUUvRSwyQ0FBMkM7SUFDM0MsWUFBWSxDQUFVO1FBQ2xCLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBTyxDQUFDLENBQVUsRUFBRSxFQUFXLEVBQUUsRUFBVztRQUUvQyw2Q0FBNkM7UUFDN0MsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLGFBQWE7UUFFMUQsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3ZCLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxTQUFTLEVBQUU7UUFDekIsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVsQyxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDOUQsT0FBTyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUM7SUFDekIsQ0FBQztJQUVELE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBVSxFQUFFLENBQVUsRUFBRSxDQUFVO1FBQzdDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdB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OiIuL3NyYy9nZW8vcGxhbmUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBuYW1lOiAgICBwbGFuZS50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogZGVmaW5pdGlvbiBvZiBhIDNkIHBsYW5lLiBcclxuLy8gdG9kbzogICAgdHVybiBDZW50ZXIsIEloYXQsIEpoYXQsIEtoYXQgY29uc3RydWN0aW9uIHRvIGFuIGFjdHVhbCBtYXRyaXhcclxuXHJcbmltcG9ydCB7IFZlY3RvcjNBcnJheSB9IGZyb20gXCIuLi9kYXRhL3ZlY3Rvci1hcnJheVwiO1xyXG5pbXBvcnQgeyBDb25zdCB9IGZyb20gXCIuLi9tYXRoL2NvbnN0XCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgU3RhdCB9IGZyb20gXCIuLi9tYXRoL3N0YXRpc3RpY3NcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYW5lIHtcclxuICAgIFxyXG4gICAgX21hdHJpeCE6IE1hdHJpeDQ7XHJcbiAgICAvLyBfaW52ZXJzZSE6IE1hdHJpeDQ7IC8vIE5PVEU6IGN1cnJlbnRseSBpbSBub3QgY2FjaGluZyB0aGlzLiBNaWdodCBiZSBuZWVkZWQuXHJcblxyXG4gICAgLy8gTk9URSA6IGQgaXMgbm90IHJlYWxseSBuZWVkZWQgYW55bW9yZS4uLlxyXG4gICAgY29uc3RydWN0b3IobTogTWF0cml4NCkge1xyXG4gICAgICAgIHRoaXMuX21hdHJpeCA9IG07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21QVlYoYTogVmVjdG9yMywgdjE6IFZlY3RvcjMsIHYyOiBWZWN0b3IzKSB7XHJcblxyXG4gICAgICAgIC8vIFRPRE8gY2hlY2sgaWYgd2Ugc3RpbGwgbmVlZCB0aGlzIC0xIHRoaW5nIFxyXG4gICAgICAgIGxldCBraGF0ID0gdjEuY2xvbmUoKS5jcm9zcyh2Mikubm9ybWFsaXplKCk7IC8vLnNjYWxlKC0xKTtcclxuXHJcbiAgICAgICAgbGV0IGNlbnRlciA9IGEuY2xvbmUoKTtcclxuICAgICAgICBsZXQgaWhhdCA9IHYxLm5vcm1hbGl6ZSgpXHJcbiAgICAgICAgbGV0IGpoYXQgPSB2MS5jbG9uZSgpLmNyb3NzKGtoYXQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBtYXQgPSBQbGFuZS5wbGFuZU1hdHJpeEZyb21WZWNzKGNlbnRlciwgaWhhdCwgamhhdCwga2hhdCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZShtYXQpXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb20zcHQoYTogVmVjdG9yMywgYjogVmVjdG9yMywgYzogVmVjdG9yMykge1xyXG4gICAgICAgIGxldCB2MSA9IGIuY2xvbmUoKS5zdWIoYSk7XHJcbiAgICAgICAgbGV0IHYyID0gYy5jbG9uZSgpLnN1YihhKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcm9tUFZWKGEsIHYxLCB2Mik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIFdvcmxkWFkoKTogUGxhbmUge1xyXG4gICAgICAgIHJldHVybiBQbGFuZS5mcm9tM3B0KFZlY3RvcjMuemVybygpLCBWZWN0b3IzLnVuaXRYKCksIFZlY3RvcjMudW5pdFkoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIFdvcmxkWVooKTogUGxhbmUge1xyXG4gICAgICAgIHJldHVybiBQbGFuZS5mcm9tM3B0KFZlY3RvcjMuemVybygpLCBWZWN0b3IzLnVuaXRZKCksIFZlY3RvcjMudW5pdFooKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIFdvcmxkWFooKTogUGxhbmUge1xyXG4gICAgICAgIHJldHVybiBQbGFuZS5mcm9tM3B0KFZlY3RvcjMuemVybygpLCBWZWN0b3IzLnVuaXRYKCksIFZlY3RvcjMudW5pdFooKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21MZWFzdFNxdWFyZXMocHRzOiBWZWN0b3IzQXJyYXkpIDogUGxhbmV7XHJcblxyXG4gICAgICAgIGxldCBtZWFuID0gcHRzLm1lYW4oKTtcclxuICAgICAgICBsZXQgY292ID0gU3RhdC5jb3YocHRzKTtcclxuICAgICAgICBsZXQgW2VpZ1ZhbHVlcywgZWlnVmVjdG9yc10gPSBTdGF0LmVpZyhjb3YpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVpZ1ZhbHVlcyk7XHJcblxyXG4gICAgICAgIGxldCBiaWdnZXN0RWlnZW5WZWN0b3IgPSBWZWN0b3IzLmZyb21BcnJheShlaWdWZWN0b3JzLmdldENvbHVtbigwKSk7XHJcbiAgICAgICAgbGV0IHNlY29uZEJpZ2dlc3RFaWdlblZlY3RvciA9IFZlY3RvcjMuZnJvbUFycmF5KGVpZ1ZlY3RvcnMuZ2V0Q29sdW1uKDEpKVxyXG5cclxuICAgICAgICByZXR1cm4gUGxhbmUuZnJvbVBWVihtZWFuLCBiaWdnZXN0RWlnZW5WZWN0b3IsIHNlY29uZEJpZ2dlc3RFaWdlblZlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21YWUxlYXN0U3F1YXJlcyhwdHM6IFZlY3RvcjNBcnJheSkgOiBQbGFuZSB7XHJcbiAgICAgICAgLy8gcXVpdGUgc3BlY2lmaWMsIGJ1dCB0aGlzIHdhcyBuZWVkZWQuXHJcbiAgICAgICAgbGV0IG1lYW4gPSBwdHMubWVhbigpO1xyXG4gICAgICAgIHJldHVybiBQbGFuZS5Xb3JsZFhZKCkudHJhbnNmb3JtKE1hdHJpeDQubmV3VHJhbnNsYXRpb24obWVhbi54LCBtZWFuLnksIG1lYW4ueikpOyAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGxhbmVNYXRyaXhGcm9tVmVjcyhjOiBWZWN0b3IzLCBpOiBWZWN0b3IzLCBqOiBWZWN0b3IzLCBrOiBWZWN0b3IzKSB7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4NChbXHJcbiAgICAgICAgICAgIGkueCwgaS55LCBpLnosIDAsXHJcbiAgICAgICAgICAgIGoueCwgai55LCBqLnosIDAsXHJcbiAgICAgICAgICAgIGsueCwgay55LCBrLnosIDAsXHJcbiAgICAgICAgICAgIGMueCwgYy55LCBjLnosIDEsXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpaGF0KCkge3JldHVybiBWZWN0b3IzLmZyb21BcnJheSh0aGlzLl9tYXRyaXguZ2V0Um93KDApKX1cclxuICAgIHB1YmxpYyBnZXQgamhhdCgpIHtyZXR1cm4gVmVjdG9yMy5mcm9tQXJyYXkodGhpcy5fbWF0cml4LmdldFJvdygxKSl9XHJcbiAgICBwdWJsaWMgZ2V0IGtoYXQoKSB7cmV0dXJuIFZlY3RvcjMuZnJvbUFycmF5KHRoaXMuX21hdHJpeC5nZXRSb3coMikpfVxyXG4gICAgcHVibGljIGdldCBjZW50ZXIoKSB7cmV0dXJuIFZlY3RvcjMuZnJvbUFycmF5KHRoaXMuX21hdHJpeC5nZXRSb3coMykpfVxyXG4gICAgcHVibGljIGdldCBtYXRyaXgoKSB7cmV0dXJuIHRoaXMuX21hdHJpeC5jbG9uZSgpfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbm9ybWFsKCkge3JldHVybiB0aGlzLmtoYXR9XHJcbiAgICBwdWJsaWMgZ2V0IGQoKSA6IG51bWJlciB7cmV0dXJuIHRoaXMuY2xvc2VzdFBvaW50KFZlY3RvcjMuemVybygpKVsxXX1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGloYXQodjogVmVjdG9yMykgICB7IHRoaXMuX21hdHJpeC5zZXRSb3coMCwgW3YueCwgdi55LCB2LnosIDBdKTt9XHJcbiAgICBwdWJsaWMgc2V0IGpoYXQodjogVmVjdG9yMykgICB7IHRoaXMuX21hdHJpeC5zZXRSb3coMSwgW3YueCwgdi55LCB2LnosIDBdKTt9XHJcbiAgICBwdWJsaWMgc2V0IGtoYXQodjogVmVjdG9yMykgICB7IHRoaXMuX21hdHJpeC5zZXRSb3coMiwgW3YueCwgdi55LCB2LnosIDBdKTt9XHJcbiAgICBwdWJsaWMgc2V0IGNlbnRlcih2OiBWZWN0b3IzKSB7IHRoaXMuX21hdHJpeC5zZXRSb3coMywgW3YueCwgdi55LCB2LnosIDFdKTt9XHJcbiAgICBwdWJsaWMgc2V0IG1hdHJpeChtOiBNYXRyaXg0KSB7IHRoaXMuX21hdHJpeCA9IG07fVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaW52ZXJzZSgpIHtyZXR1cm4gdGhpcy5fbWF0cml4LmludmVyc2UoKX1cclxuXHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBsYW5lKHRoaXMuX21hdHJpeC5jbG9uZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2Zvcm0obTogTWF0cml4NCkgOiBQbGFuZSB7XHJcbiAgICAgICAgdGhpcy5fbWF0cml4ID0gdGhpcy5fbWF0cml4Lm11bHRpcGx5KG0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUbyhvcmlnaW46IFZlY3RvcjMpIHtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IG9yaWdpbjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBOT1RFOiBwdWxsaW5nIGlzIGluZWZmaWNpZW50IHNpbmNlIGkgZG8gbm90IGNhY2hlIHRoZSBpbnZlcnNlLlxyXG4gICAgcHVsbFRvUGxhbmUocDogVmVjdG9yMykgOiBWZWN0b3IzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnZlcnNlLm11bHRpcGx5VmVjdG9yKHApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1c2hUb1dvcmxkKHA6IFZlY3RvcjMpIDogVmVjdG9yMyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4Lm11bHRpcGx5VmVjdG9yKHApO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3Nlc3RQb2ludChwOiBWZWN0b3IzKSA6IFtWZWN0b3IzLCBudW1iZXJdIHtcclxuICAgICAgICBsZXQgcHVsbGVkID0gdGhpcy5wdWxsVG9QbGFuZShwKTtcclxuICAgICAgICBsZXQgZGlzdGFuY2UgPSBwdWxsZWQuejtcclxuICAgICAgICBwdWxsZWQueiA9IDA7XHJcbiAgICAgICAgbGV0IHZlYyA9IHRoaXMucHVzaFRvV29ybGQocHVsbGVkKTtcclxuICAgICAgICByZXR1cm4gW3ZlYywgZGlzdGFuY2VdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNsb3Nlc3RQb2ludChwOiBWZWN0b3IzKSA6IFtWZWN0b3IzLCBudW1iZXJdIHtcclxuICAgIC8vICAgICAvLyBwcm9qZWN0IGEgcG9pbnQgdG8gdGhlIHBsYW5lIHVzaW5nIHRoZSBzaG9ydGVzdCBkaXN0YW5jZVxyXG4gICAgLy8gICAgIC8vIE5PVEU6IHRoaXMgbWV0aG9kIGlzIGEgc29ydCBvZiBoYWxmIGludmVyc2UgbWF0cml4IGFwcHJvYWNoLiBcclxuICAgIC8vICAgICAvLyAgICAgICB1c2luZyB0aGUgaW52ZXJzZSBvZiB0aGUgcGxhbmUgbWF0cml4IG1pZ2h0IGp1c3QgYmUgZWFzaWVyLlxyXG4gICAgLy8gICAgIGxldCBbYSxiLGMsZF0gPSB0aGlzLmdldFBsYW5lUGFyYW1zKCk7XHJcbiAgICAvLyAgICAgbGV0IG5vcm1hbGl6ZXIgPSAoKGEqKjIgKyBiKioyICsgYyoqMikqKjAuNSk7XHJcbiAgICAvLyAgICAgbGV0IHNpZ25lZF9kaXN0YW5jZSA9IGEqcC54ICsgYipwLnkgKyBjKnAueiArIGQgLyBub3JtYWxpemVyO1xyXG5cclxuICAgIC8vICAgICBsZXQgdnggPSAoYSAvIG5vcm1hbGl6ZXIpICogLXNpZ25lZF9kaXN0YW5jZTtcclxuICAgIC8vICAgICBsZXQgdnkgPSAoYiAvIG5vcm1hbGl6ZXIpICogLXNpZ25lZF9kaXN0YW5jZTtcclxuICAgIC8vICAgICBsZXQgdnogPSAoYyAvIG5vcm1hbGl6ZXIpICogLXNpZ25lZF9kaXN0YW5jZTtcclxuXHJcbiAgICAvLyAgICAgbGV0IHZlYyA9IHAuY2xvbmUoKS5hZGQobmV3IFZlY3RvcjModngsIHZ5LCB2eikpO1xyXG4gICAgLy8gICAgIHJldHVybiBbdmVjLCBzaWduZWRfZGlzdGFuY2VdXHJcbiAgICAvLyB9XHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geo/plane.ts\n");

/***/ }),

/***/ "./src/geo/rectangle.ts":
/*!******************************!*\
  !*** ./src/geo/rectangle.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Rectangle2\": () => /* binding */ Rectangle2,\n/* harmony export */   \"Rectangle3\": () => /* binding */ Rectangle3\n/* harmony export */ });\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plane */ \"./src/geo/plane.ts\");\n\r\n\r\nclass Rectangle2 {\r\n    constructor(pose, domain) {\r\n        this.pose = pose;\r\n        this.domain = domain;\r\n    }\r\n    center() {\r\n        return this.pose.transformVector(new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(0, 0));\r\n    }\r\n    getVertices() {\r\n        let verts = [\r\n            new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(this.domain.x.t0, this.domain.y.t0),\r\n            new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(this.domain.x.t1, this.domain.y.t0),\r\n            new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(this.domain.x.t0, this.domain.y.t1),\r\n            new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(this.domain.x.t1, this.domain.y.t1),\r\n        ];\r\n        verts.forEach((v) => this.pose.transformVector(v));\r\n        return verts;\r\n    }\r\n    to3D() {\r\n        let mat4 = this.pose.toMat4();\r\n        return new Rectangle3(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(mat4), this.domain);\r\n    }\r\n}\r\nclass Rectangle3 {\r\n    constructor(plane, domain) {\r\n        this.plane = plane;\r\n        this.domain = domain;\r\n    }\r\n    getCorners() {\r\n        let corners = this.domain.corners();\r\n        let corners3 = corners.map((c) => this.plane.pushToWorld(c.to3D()));\r\n        return corners3;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2dlby9yZWN0YW5nbGUudHM/MTRiNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRXlDO0FBV1Q7QUFFekIsTUFBTSxVQUFVO0lBS25CLFlBQVksSUFBYSxFQUFFLE1BQWU7UUFDdEMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQztJQUVELE1BQU07UUFDRixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQsV0FBVztRQUVQLElBQUksS0FBSyxHQUFHO1lBQ1IsSUFBSSxpREFBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDL0MsSUFBSSxpREFBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDL0MsSUFBSSxpREFBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDL0MsSUFBSSxpREFBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7U0FDbEQsQ0FBQztRQUVGLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkQsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELElBQUk7UUFDQSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzlCLE9BQU8sSUFBSSxVQUFVLENBQUMsSUFBSSx5Q0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN4RCxDQUFDO0NBQ0o7QUFFTSxNQUFNLFVBQVU7SUFLbkIsWUFBWSxLQUFZLEVBQUUsTUFBZTtRQUNyQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN6QixDQUFDO0lBRUQsVUFBVTtRQUNOLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDcEMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwRSxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvZ2VvL3JlY3RhbmdsZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvbWFpbjIgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgTWF0cml4MywgTWF0cml4NCB9IGZyb20gXCIuLi9tYXRoL21hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcblxyXG4vLyBiYXNpYyAyZCByZWN0YW5nbGVcclxuLy8gYSBNYXRyaXgzIGFuZCBEb21haW4yIGlzIHVzZWQuIFxyXG4vLyB0aGlzIHdheSwgYSByZWN0YW5nbGUgY2FuIGJlIHJvdGF0ZWQgYXJvdW5kIGFuIGFyYmlydGFyeSBwb2ludCBpdCByZWdhcmRzIGFzIGl0cyBjZW50ZXIuXHJcbi8vIG5hbWU6ICAgIGN1YmUudHNcclxuLy8gYXV0aG9yOiAgSm9zIEZlZW5zdHJhXHJcbi8vIHB1cnBvc2U6IFJlcHJlc2VudHMgYSBjdWJlIGluIDNkIHNwYWNlLCBpbiBhIGNlcnRhaW4gcG9zZS4gXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IEdlbyB9IGZyb20gXCIuL2dlb1wiO1xyXG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuL3BsYW5lXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVjdGFuZ2xlMiB7XHJcblxyXG4gICAgcG9zZTogTWF0cml4MztcclxuICAgIGRvbWFpbjogRG9tYWluMjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwb3NlOiBNYXRyaXgzLCBkb21haW46IERvbWFpbjIpIHtcclxuICAgICAgICB0aGlzLnBvc2UgPSBwb3NlO1xyXG4gICAgICAgIHRoaXMuZG9tYWluID0gZG9tYWluO1xyXG4gICAgfVxyXG5cclxuICAgIGNlbnRlcigpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zZS50cmFuc2Zvcm1WZWN0b3IobmV3IFZlY3RvcjIoMCwgMCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZlcnRpY2VzKCkgOiBWZWN0b3IyW10ge1xyXG5cclxuICAgICAgICBsZXQgdmVydHMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IyKHRoaXMuZG9tYWluLngudDAsIHRoaXMuZG9tYWluLnkudDApLFxyXG4gICAgICAgICAgICBuZXcgVmVjdG9yMih0aGlzLmRvbWFpbi54LnQxLCB0aGlzLmRvbWFpbi55LnQwKSxcclxuICAgICAgICAgICAgbmV3IFZlY3RvcjIodGhpcy5kb21haW4ueC50MCwgdGhpcy5kb21haW4ueS50MSksXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IyKHRoaXMuZG9tYWluLngudDEsIHRoaXMuZG9tYWluLnkudDEpLFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHZlcnRzLmZvckVhY2goKHYpID0+IHRoaXMucG9zZS50cmFuc2Zvcm1WZWN0b3IodikpO1xyXG4gICAgICAgIHJldHVybiB2ZXJ0cztcclxuICAgIH1cclxuXHJcbiAgICB0bzNEKCk6IFJlY3RhbmdsZTMge1xyXG4gICAgICAgIGxldCBtYXQ0ID0gdGhpcy5wb3NlLnRvTWF0NCgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlMyhuZXcgUGxhbmUobWF0NCksIHRoaXMuZG9tYWluKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlY3RhbmdsZTMge1xyXG4gICAgXHJcbiAgICBwbGFuZTogUGxhbmVcclxuICAgIGRvbWFpbjogRG9tYWluMlxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYW5lOiBQbGFuZSwgZG9tYWluOiBEb21haW4yKSB7XHJcbiAgICAgICAgdGhpcy5wbGFuZSA9IHBsYW5lO1xyXG4gICAgICAgIHRoaXMuZG9tYWluID0gZG9tYWluO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvcm5lcnMoKSA6IFZlY3RvcjNbXSB7XHJcbiAgICAgICAgbGV0IGNvcm5lcnMgPSB0aGlzLmRvbWFpbi5jb3JuZXJzKCk7XHJcbiAgICAgICAgbGV0IGNvcm5lcnMzID0gY29ybmVycy5tYXAoKGMpID0+IHRoaXMucGxhbmUucHVzaFRvV29ybGQoYy50bzNEKCkpKTtcclxuICAgICAgICByZXR1cm4gY29ybmVyczM7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geo/rectangle.ts\n");

/***/ }),

/***/ "./src/geo/triangle.ts":
/*!*****************************!*\
  !*** ./src/geo/triangle.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Triangle2\": () => /* binding */ Triangle2,\n/* harmony export */   \"Triangle3\": () => /* binding */ Triangle3\n/* harmony export */ });\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./line */ \"./src/geo/line.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./plane */ \"./src/geo/plane.ts\");\n\r\n\r\n\r\n\r\nclass Triangle2 {\r\n    constructor(a, b, c) {\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n    }\r\n    points() {\r\n        return _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector2Array.fromList([this.a, this.b, this.c]);\r\n    }\r\n    toBarycentric(point) {\r\n        let v0 = this.b.subbed(this.a);\r\n        let v1 = this.c.subbed(this.a);\r\n        let v2 = point.subbed(this.a);\r\n        let d00 = v0.dot(v0);\r\n        let d01 = v0.dot(v1);\r\n        let d11 = v1.dot(v1);\r\n        let d20 = v2.dot(v0);\r\n        let d21 = v2.dot(v1);\r\n        let denom = d00 * d11 - d01 * d01;\r\n        let v = (d11 * d20 - d01 * d21) / denom;\r\n        let w = (d00 * d21 - d01 * d20) / denom;\r\n        let u = 1.0 - v - w;\r\n        return new _math_vector__WEBPACK_IMPORTED_MODULE_1__.Vector3(u, v, w);\r\n    }\r\n    fromBarycentric(bari) {\r\n        let a = this.a.scaled(bari.x);\r\n        let b = this.b.scaled(bari.y);\r\n        let c = this.c.scaled(bari.z);\r\n        return a.add(b).add(c);\r\n    }\r\n    closestPoint(point) {\r\n        // figure out roughly where the point is. \r\n        // note: \r\n        let ab = point.sign(this.a, this.b);\r\n        let bc = point.sign(this.b, this.c);\r\n        let ca = point.sign(this.c, this.a);\r\n        // if its fully within, return it!\r\n        if ((ab < 0 && bc < 0 && ca < 0) ||\r\n            (ab > 0 && bc > 0 && ca > 0)) {\r\n            console.log(\"fully inside!\");\r\n            return point;\r\n        }\r\n        else {\r\n            let abs = Math.abs(ab);\r\n            let bcs = Math.abs(bc);\r\n            let cas = Math.abs(ca);\r\n            if (abs < bcs && abs < cas) {\r\n                // ab\r\n                return new _line__WEBPACK_IMPORTED_MODULE_2__.LineCurve2(this.a, this.b).closestPoint(point);\r\n            }\r\n            else if (bcs < cas) {\r\n                // bc\r\n                return new _line__WEBPACK_IMPORTED_MODULE_2__.LineCurve2(this.b, this.c).closestPoint(point);\r\n            }\r\n            else {\r\n                // ca\r\n                return new _line__WEBPACK_IMPORTED_MODULE_2__.LineCurve2(this.c, this.a).closestPoint(point);\r\n            }\r\n        }\r\n    }\r\n}\r\nclass Triangle3 {\r\n    constructor(a, b, c) {\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n    }\r\n    points() {\r\n        return [this.a, this.b, this.c];\r\n    }\r\n    getPlane() {\r\n        return _plane__WEBPACK_IMPORTED_MODULE_3__.Plane.from3pt(this.a, this.b, this.c);\r\n    }\r\n    to2D(plane = _plane__WEBPACK_IMPORTED_MODULE_3__.Plane.WorldXY()) {\r\n        return new Triangle2(plane.pullToPlane(this.a).to2D(), plane.pullToPlane(this.b).to2D(), plane.pullToPlane(this.c).to2D());\r\n    }\r\n    closestPoint(point) {\r\n        let plane = this.getPlane();\r\n        let [cp, _] = plane.closestPoint(point);\r\n        let planeCP = plane.pullToPlane(cp);\r\n        let planeTriangle = this.to2D(plane);\r\n        return point;\r\n    }\r\n    // Transcribed from Christer Ericson's Real-Time Collision Detection:\r\n    // http://realtimecollisiondetection.net/\r\n    toBarycentric(point) {\r\n        let v0 = this.b.subbed(this.a);\r\n        let v1 = this.c.subbed(this.a);\r\n        let v2 = point.subbed(this.a);\r\n        let d00 = v0.dot(v0);\r\n        let d01 = v0.dot(v1);\r\n        let d11 = v1.dot(v1);\r\n        let d20 = v2.dot(v0);\r\n        let d21 = v2.dot(v1);\r\n        let denom = d00 * d11 - d01 * d01;\r\n        let v = (d11 * d20 - d01 * d21) / denom;\r\n        let w = (d00 * d21 - d01 * d20) / denom;\r\n        let u = 1.0 - v - w;\r\n        return new _math_vector__WEBPACK_IMPORTED_MODULE_1__.Vector3(u, v, w);\r\n    }\r\n    fromBarycentric(bari) {\r\n        let a = this.a.clone().scale(bari.x);\r\n        let b = this.b.clone().scale(bari.y);\r\n        let c = this.c.clone().scale(bari.z);\r\n        return a.added(b).add(c);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2dlby90cmlhbmdsZS50cz84NGQ1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvRDtBQUVGO0FBQ2Q7QUFDSjtBQUV6QixNQUFNLFNBQVM7SUFPbEIsWUFBWSxDQUFVLEVBQUUsQ0FBVSxFQUFFLENBQVU7UUFFMUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDWCxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUdELE1BQU07UUFDRixPQUFPLHFFQUFxQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFHRCxhQUFhLENBQUMsS0FBYztRQUV4QixJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlCLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckIsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNyQixJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3JCLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckIsSUFBSSxHQUFHLEdB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QUFPLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFHRCxlQUFlLENBQUMsSUFBYTtRQUV6QixJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVyQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9nZW8vdHJpYW5nbGUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IyQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgQ29uc3QgfSBmcm9tIFwiLi4vbWF0aC9jb25zdFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IExpbmVDdXJ2ZTIgfSBmcm9tIFwiLi9saW5lXCI7XHJcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4vcGxhbmVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUcmlhbmdsZTIge1xyXG4gICAgXHJcbiAgICBhOiBWZWN0b3IyO1xyXG4gICAgYjogVmVjdG9yMjtcclxuICAgIGM6IFZlY3RvcjI7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGE6IFZlY3RvcjIsIGI6IFZlY3RvcjIsIGM6IFZlY3RvcjIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5hID0gYTtcclxuICAgICAgICB0aGlzLmIgPSBiO1xyXG4gICAgICAgIHRoaXMuYyA9IGM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHBvaW50cygpIDogVmVjdG9yMkFycmF5IHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yMkFycmF5LmZyb21MaXN0KFt0aGlzLmEsIHRoaXMuYiwgdGhpcy5jXSk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICB0b0JhcnljZW50cmljKHBvaW50OiBWZWN0b3IyKSA6IFZlY3RvcjMge1xyXG5cclxuICAgICAgICBsZXQgdjAgPSB0aGlzLmIuc3ViYmVkKHRoaXMuYSk7XHJcbiAgICAgICAgbGV0IHYxID0gdGhpcy5jLnN1YmJlZCh0aGlzLmEpO1xyXG4gICAgICAgIGxldCB2MiA9IHBvaW50LnN1YmJlZCh0aGlzLmEpO1xyXG4gICAgICAgIGxldCBkMDAgPSB2MC5kb3QodjApO1xyXG4gICAgICAgIGxldCBkMDEgPSB2MC5kb3QodjEpO1xyXG4gICAgICAgIGxldCBkMTEgPSB2MS5kb3QodjEpO1xyXG4gICAgICAgIGxldCBkMjAgPSB2Mi5kb3QodjApO1xyXG4gICAgICAgIGxldCBkMjEgPSB2Mi5kb3QodjEpO1xyXG4gICAgICAgIGxldCBkZW5vbSA9IGQwMCAqIGQxMSAtIGQwMSAqIGQwMTtcclxuICAgICAgICBsZXQgdiA9IChkMTEgKiBkMjAgLSBkMDEgKiBkMjEpIC8gZGVub207XHJcbiAgICAgICAgbGV0IHcgPSAoZDAwICogZDIxIC0gZDAxICogZDIwKSAvIGRlbm9tO1xyXG4gICAgICAgIGxldCB1ID0gMS4wIC0gdiAtIHc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHUsIHYsIHcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmcm9tQmFyeWNlbnRyaWMoYmFyaTogVmVjdG9yMykgOiBWZWN0b3IyIHtcclxuXHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmEuc2NhbGVkKGJhcmkueCk7XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmIuc2NhbGVkKGJhcmkueSk7XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmMuc2NhbGVkKGJhcmkueik7XHJcblxyXG4gICAgICAgIHJldHVybiBhLmFkZChiKS5hZGQoYyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNsb3Nlc3RQb2ludChwb2ludDogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuXHJcbiAgICAgICAgLy8gZmlndXJlIG91dCByb3VnaGx5IHdoZXJlIHRoZSBwb2ludCBpcy4gXHJcbiAgICAgICAgLy8gbm90ZTogXHJcbiAgICAgICAgbGV0IGFiID0gcG9pbnQuc2lnbih0aGlzLmEsIHRoaXMuYik7XHJcbiAgICAgICAgbGV0IGJjID0gcG9pbnQuc2lnbih0aGlzLmIsIHRoaXMuYyk7XHJcbiAgICAgICAgbGV0IGNhID0gcG9pbnQuc2lnbih0aGlzLmMsIHRoaXMuYSk7XHJcblxyXG4gICAgICAgIC8vIGlmIGl0cyBmdWxseSB3aXRoaW4sIHJldHVybiBpdCFcclxuICAgICAgICBpZiAoKGFiIDwgMCAmJiBiYyA8IDAgJiYgY2EgPCAwKSB8fFxyXG4gICAgICAgICAgICAoYWIgPiAwICYmIGJjID4gMCAmJiBjYSA+IDApKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZnVsbHkgaW5zaWRlIVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBhYnMgPSBNYXRoLmFicyhhYik7XHJcbiAgICAgICAgICAgIGxldCBiY3MgPSBNYXRoLmFicyhiYyk7XHJcbiAgICAgICAgICAgIGxldCBjYXMgPSBNYXRoLmFicyhjYSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYWJzIDwgYmNzICYmIGFicyA8IGNhcykge1xyXG4gICAgICAgICAgICAgICAgLy8gYWJcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGluZUN1cnZlMih0aGlzLmEsIHRoaXMuYikuY2xvc2VzdFBvaW50KHBvaW50KSFcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChiY3MgPCBjYXMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJjXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpbmVDdXJ2ZTIodGhpcy5iLCB0aGlzLmMpLmNsb3Nlc3RQb2ludChwb2ludCkhXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjYVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaW5lQ3VydmUyKHRoaXMuYywgdGhpcy5hKS5jbG9zZXN0UG9pbnQocG9pbnQpITtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlMyB7XHJcbiAgICBcclxuICAgIGE6IFZlY3RvcjM7XHJcbiAgICBiOiBWZWN0b3IzO1xyXG4gICAgYzogVmVjdG9yMztcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoYTogVmVjdG9yMywgYjogVmVjdG9yMywgYzogVmVjdG9yMykge1xyXG5cclxuICAgICAgICB0aGlzLmEgPSBhO1xyXG4gICAgICAgIHRoaXMuYiA9IGI7XHJcbiAgICAgICAgdGhpcy5jID0gYztcclxuICAgIH1cclxuXHJcblxyXG4gICAgcG9pbnRzKCkgOiBWZWN0b3IzW10ge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5hLCB0aGlzLmIsIHRoaXMuY107XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldFBsYW5lKCkgOiBQbGFuZSB7XHJcbiAgICAgICAgcmV0dXJuIFBsYW5lLmZyb20zcHQodGhpcy5hLCB0aGlzLmIsIHRoaXMuYyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRvMkQocGxhbmU6IFBsYW5lID0gUGxhbmUuV29ybGRYWSgpKSA6IFRyaWFuZ2xlMiB7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVHJpYW5nbGUyKFxyXG4gICAgICAgICAgICBwbGFuZS5wdWxsVG9QbGFuZSh0aGlzLmEpLnRvMkQoKSxcclxuICAgICAgICAgICAgcGxhbmUucHVsbFRvUGxhbmUodGhpcy5iKS50bzJEKCksXHJcbiAgICAgICAgICAgIHBsYW5lLnB1bGxUb1BsYW5lKHRoaXMuYykudG8yRCgpLFxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcblxyXG4gICAgY2xvc2VzdFBvaW50KHBvaW50OiBWZWN0b3IzKSA6IFZlY3RvcjMge1xyXG5cclxuICAgICAgICBsZXQgcGxhbmUgPSB0aGlzLmdldFBsYW5lKCk7XHJcbiAgICAgICAgbGV0IFtjcCwgX10gPSBwbGFuZS5jbG9zZXN0UG9pbnQocG9pbnQpO1xyXG4gICAgICAgIGxldCBwbGFuZUNQID0gcGxhbmUucHVsbFRvUGxhbmUoY3ApO1xyXG4gICAgICAgIGxldCBwbGFuZVRyaWFuZ2xlID0gdGhpcy50bzJEKHBsYW5lKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRyYW5zY3JpYmVkIGZyb20gQ2hyaXN0ZXIgRXJpY3NvbidzIFJlYWwtVGltZSBDb2xsaXNpb24gRGV0ZWN0aW9uOlxyXG4gICAgLy8gaHR0cDovL3JlYWx0aW1lY29sbGlzaW9uZGV0ZWN0aW9uLm5ldC9cclxuICAgIHRvQmFyeWNlbnRyaWMocG9pbnQ6IFZlY3RvcjMpIDogVmVjdG9yMyB7XHJcblxyXG4gICAgICAgIGxldCB2MCA9IHRoaXMuYi5zdWJiZWQodGhpcy5hKTtcclxuICAgICAgICBsZXQgdjEgPSB0aGlzLmMuc3ViYmVkKHRoaXMuYSk7XHJcbiAgICAgICAgbGV0IHYyID0gcG9pbnQuc3ViYmVkKHRoaXMuYSk7XHJcbiAgICAgICAgbGV0IGQwMCA9IHYwLmRvdCh2MCk7XHJcbiAgICAgICAgbGV0IGQwMSA9IHYwLmRvdCh2MSk7XHJcbiAgICAgICAgbGV0IGQxMSA9IHYxLmRvdCh2MSk7XHJcbiAgICAgICAgbGV0IGQyMCA9IHYyLmRvdCh2MCk7XHJcbiAgICAgICAgbGV0IGQyMSA9IHYyLmRvdCh2MSk7XHJcbiAgICAgICAgbGV0IGRlbm9tID0gZDAwICogZDExIC0gZDAxICogZDAxO1xyXG4gICAgICAgIGxldCB2ID0gKGQxMSAqIGQyMCAtIGQwMSAqIGQyMSkgLyBkZW5vbTtcclxuICAgICAgICBsZXQgdyA9IChkMDAgKiBkMjEgLSBkMDEgKiBkMjApIC8gZGVub207XHJcbiAgICAgICAgbGV0IHUgPSAxLjAgLSB2IC0gdztcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHUsIHYsIHcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmcm9tQmFyeWNlbnRyaWMoYmFyaTogVmVjdG9yMykgOiBWZWN0b3IzIHtcclxuXHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmEuY2xvbmUoKS5zY2FsZShiYXJpLngpO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5iLmNsb25lKCkuc2NhbGUoYmFyaS55KTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuYy5jbG9uZSgpLnNjYWxlKGJhcmkueik7XHJcblxyXG4gICAgICAgIHJldHVybiBhLmFkZGVkKGIpLmFkZChjKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geo/triangle.ts\n");

/***/ }),

/***/ "./src/img/Image.ts":
/*!**************************!*\
  !*** ./src/img/Image.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GeonImage\": () => /* binding */ GeonImage\n/* harmony export */ });\n// image.ts\r\n// author: Jos Feenstra\r\n// purpose: wrapper around the ImageData class, \r\n// - in order to get more functionality out of it\r\n// \r\n// note: named GeonImage to not collide with Image classes.\r\n// TODO : x and y are not the same as i and j, and used inconsistently.\r\n// fix this. \r\nconst acceptedKernels = [3, 5, 7, 9];\r\nclass GeonImage {\r\n    constructor(width, height, pixelSize = 4) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.pixelSize = pixelSize;\r\n        this.data = new Uint8ClampedArray(this.width * this.height * this.pixelSize);\r\n        this.data.fill(0);\r\n    }\r\n    static fromImageData(id) {\r\n        let image = new GeonImage(id.width, id.height);\r\n        image.setData(id.data);\r\n        return image;\r\n    }\r\n    toImageData() {\r\n        // imagedata requires pixelsize of 4.\r\n        if (this.pixelSize != 4)\r\n            throw \"pixelsize must be 4 for toImageData to work\";\r\n        return new ImageData(this.data, this.width, this.height);\r\n    }\r\n    setData(data) {\r\n        if (data.length != (this.height * this.width * this.pixelSize))\r\n            throw \"data.length does not match width * height \";\r\n        this.data = data;\r\n    }\r\n    clone() {\r\n        let image = new GeonImage(this.width, this.height, this.pixelSize);\r\n        image.setData(this.data);\r\n        return image;\r\n    }\r\n    fill(pixel) {\r\n        for (let i = 0; i < this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                this.set(j, i, pixel);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    fillEvery(filler) {\r\n        for (let i = 0; i < this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                this.set(j, i, filler());\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    includes(x, y) {\r\n        return (x < this.width && x >= 0 && y < this.height && y >= 0);\r\n    }\r\n    set(i, j, pixel) {\r\n        this.data[4 * ((j * this.width + i))] = pixel[0];\r\n        this.data[4 * ((j * this.width + i)) + 1] = pixel[1];\r\n        this.data[4 * ((j * this.width + i)) + 2] = pixel[2];\r\n        this.data[4 * ((j * this.width + i)) + 3] = pixel[3];\r\n    }\r\n    get(i, j) {\r\n        return [\r\n            this.data[4 * (j * this.width + i)],\r\n            this.data[4 * (j * this.width + i) + 1],\r\n            this.data[4 * (j * this.width + i) + 2],\r\n            this.data[4 * (j * this.width + i) + 3]\r\n        ];\r\n    }\r\n    flipHor() {\r\n        let image = new GeonImage(this.width, this.height, this.pixelSize);\r\n        for (let i = 0; i < this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                let jMirror = this.width - 1 - j;\r\n                image.set(j, i, this.get(jMirror, i));\r\n            }\r\n        }\r\n        return image;\r\n    }\r\n    flipVer() {\r\n        let image = new GeonImage(this.width, this.height, this.pixelSize);\r\n        for (let i = 0; i < this.height; i++) {\r\n            let iMirror = this.height - 1 - i;\r\n            for (let j = 0; j < this.width; j++) {\r\n                image.set(j, i, this.get(j, iMirror));\r\n            }\r\n        }\r\n        return image;\r\n    }\r\n    applyKernel(kernel) {\r\n        // determine kernel size\r\n        let size = kernel.count();\r\n        let radius = (size / 2) - 0.5;\r\n        let image = new GeonImage(this.width - radius * 2, this.height - radius * 2, this.pixelSize);\r\n        // old image space\r\n        for (let i = radius; i < this.width - radius; i++) {\r\n            for (let j = radius; j < this.height - radius; j++) {\r\n                let pixel = this.getWithKernel(i, j, kernel, radius);\r\n                image.set(i - radius, j - radius, pixel);\r\n            }\r\n        }\r\n        return image; // succes \r\n    }\r\n    getMinMax() {\r\n        // get the minimum and maximum pixel value\r\n        // assumes pixelsize = 1\r\n        let min = Infinity;\r\n        let max = 0;\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            if (this.data[i] < min) {\r\n                min = this.data[i];\r\n            }\r\n            else if (this.data[i] > max) {\r\n                max = this.data[i];\r\n            }\r\n        }\r\n        return [min, max];\r\n    }\r\n    applyThreshold(lower, upper) {\r\n        return this.apply((x, y) => {\r\n            let pixel = this.get(x, y);\r\n            if (pixel[0] < lower) {\r\n                return [0, 0, 0, 0];\r\n            }\r\n            else if (pixel[0] > upper) {\r\n                return [255, 255, 255, 255];\r\n            }\r\n            else {\r\n                return pixel;\r\n            }\r\n        });\r\n    }\r\n    apply(filler) {\r\n        let copy = new GeonImage(this.width, this.height, this.pixelSize);\r\n        for (let y = 0; y < this.height; y++) {\r\n            for (let x = 0; x < this.width; x++) {\r\n                copy.set(x, y, filler(x, y));\r\n            }\r\n        }\r\n        return copy;\r\n    }\r\n    applyNMS() {\r\n        // determine kernel size\r\n        let size = 3;\r\n        let radius = (size / 2) - 0.5;\r\n        let copy = new GeonImage(this.width - radius * 2, this.height - radius * 2, this.pixelSize);\r\n        // old image space\r\n        for (let i = radius; i < this.width - radius; i++) {\r\n            for (let j = radius; j < this.height - radius; j++) {\r\n                // let pixel = this.getWithKernel(i, j, kernel, radius)\r\n                // copy.set(i-radius, j-radius, pixel);\r\n            }\r\n        }\r\n        // img.eachPixel(3, function(x, y, c, n) {\r\n        //     if (n[1][1] > n[0][1] && n[1][1] > n[2][1]) {\r\n        //         copy.data[x][y] = n[1][1];\r\n        //     } else {\r\n        //         copy.data[x][y] = 0;\r\n        //     }\r\n        //     if (n[1][1] > n[0][2] && n[1][1] > n[2][0]) {\r\n        //         copy.data[x][y] = n[1][1];\r\n        //     } else {\r\n        //         copy.data[x][y] = 0;\r\n        //     }\r\n        //     if (n[1][1] > n[1][0] && n[1][1] > n[1][2]) {\r\n        //         copy.data[x][y] = n[1][1];\r\n        //     } else {\r\n        //         copy.data[x][y] = 0;\r\n        //     }\r\n        //     if (n[1][1] > n[0][0] && n[1][1] > n[2][2]) {\r\n        //         return copy.data[x][y] = n[1][1];\r\n        //     } else {\r\n        //         return copy.data[x][y] = 0;\r\n        //     }\r\n        // });\r\n        return copy;\r\n    }\r\n    getWithKernel(i, j, kernel, radius) {\r\n        // kernel space\r\n        let sum = [0, 0, 0, 255];\r\n        let [dimx, dimy] = kernel.getDimensions();\r\n        for (let ki = 0; ki < dimx; ki++) {\r\n            for (let kj = 0; kj < dimy; kj++) {\r\n                let weight = kernel.get(ki, kj);\r\n                let pixel = this.get(i + ki - radius, j + kj - radius);\r\n                for (let i = 0; i < 3; i++) {\r\n                    sum[i] += pixel[i] * weight;\r\n                }\r\n            }\r\n        }\r\n        return sum;\r\n    }\r\n    setAplha(a) {\r\n        for (let y = 0; y < this.height; y++) {\r\n            for (let x = 0; x < this.width; x++) {\r\n                let pixel = this.get(x, y);\r\n                this.set(x, y, [pixel[0], pixel[1], pixel[2], a]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    scale(scaleX, scaleY) {\r\n        // scale the image to a new width and height, using nearest neighbour\r\n        return this.resize(Math.round(this.width * scaleX), Math.round(this.height * scaleY));\r\n    }\r\n    resize(width, height) {\r\n        // resize the image to a new width and height, using nearest neighbour\r\n        const image = new GeonImage(width, height, this.pixelSize);\r\n        const old = this;\r\n        const x_factor = (1 / image.width) * old.width;\r\n        const y_factor = (1 / image.height) * old.height;\r\n        for (let y = 0; y < image.height; y++) {\r\n            for (let x = 0; x < image.width; x++) {\r\n                let pixel = old.get(Math.round(x * x_factor), Math.round(y * y_factor));\r\n                image.set(x, y, pixel);\r\n            }\r\n        }\r\n        return image;\r\n    }\r\n    // add borders till this size is achieved\r\n    buffer(width, height) {\r\n        // resize the image to a new width and height, using nearest neighbour\r\n        const image = new GeonImage(width, height, this.pixelSize);\r\n        const old = this;\r\n        for (let y = 0; y < height; y++) {\r\n            for (let x = 0; x < width; x++) {\r\n                // console.log(x, y);\r\n                let pixel = old.includes(x, y) ? old.get(x, y) : [0, 0, 0, 255];\r\n                image.set(x, y, pixel);\r\n            }\r\n        }\r\n        // for (let y = 0; y < height; y++) {\r\n        //     for (let x = 0; x < width; x++) {\r\n        //         image.set(x, y, [x,0,0,255]);\r\n        //     }\r\n        // }\r\n        // build some simple image instead to test\r\n        // for (let i = 0; i < image.data.length / 4; i++) {\r\n        //     image.data[i*4 + 0] = i % 255;\r\n        //     image.data[i*4 + 1] = 0;\r\n        //     image.data[i*4 + 2] = 0;\r\n        //     image.data[i*4 + 3] = 255;\r\n        // }\r\n        return image;\r\n    }\r\n    trimWithDomain(dom) {\r\n        const x1 = Math.round(dom.x.t0);\r\n        const x2 = Math.round(dom.x.t1);\r\n        const y1 = Math.round(dom.y.t0);\r\n        const y2 = Math.round(dom.y.t1);\r\n        return this.trim(x1, y1, x2, y2);\r\n    }\r\n    trim(x1, y1, x2, y2) {\r\n        // return a hardcopy of this particular window\r\n        const imageWidth = x2 - x1;\r\n        const imageHeight = y2 - y1;\r\n        const image = new GeonImage(imageWidth, imageHeight, this.pixelSize);\r\n        for (let y = 0; y < imageHeight; y++) {\r\n            for (let x = 0; x < imageWidth; x++) {\r\n                let pixel = this.get(x + x1, y + y1);\r\n                image.set(x, y, pixel);\r\n            }\r\n        }\r\n        return image;\r\n    }\r\n    toGreyscale() {\r\n        if (this.pixelSize != 4)\r\n            throw \"please, only use this when pixelsize is 4\";\r\n        let image = new GeonImage(this.width, this.height, 4);\r\n        for (let y = 0; y < this.height; y++) {\r\n            for (let x = 0; x < this.width; x++) {\r\n                let pixel = this.get(x, y);\r\n                let avg = (pixel[0] + pixel[1] + pixel[2]) / 3;\r\n                image.set(x, y, [avg, avg, avg, 255]);\r\n            }\r\n        }\r\n        return image;\r\n    }\r\n    toRGBA() {\r\n        // if (this.pixelSize != 1) throw \"please, only use this when pixelsize is 1\"\r\n        return this;\r\n        // let image = new GeonImage(this.width, this.height, 4);\r\n        // for (let y = 0; y < this.height; y++) {\r\n        //     for (let x = 0; x < this.width; x++) {\r\n        //         let pixel = this.get(x,y);\r\n        //         let val = pixel[0];\r\n        //         image.set(x, y, [val, val, val, 255]);\r\n        //     }\r\n        // }\r\n        // return image;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2ltZy9JbWFnZS50cz9iMWM4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxXQUFXO0FBQ1gsdUJBQXVCO0FBQ3ZCLGdEQUFnRDtBQUNoRCxpREFBaUQ7QUFDakQsR0FBRztBQUNILDJEQUEyRDtBQU0zRCx1RUFBdUU7QUFDdkUsYUFBYTtBQUNiLE1BQU0sZUFBZSxHQUFjLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEMsTUFBTSxTQUFTO0lBT2xCLFlBQVksS0FBYSxFQUFFLE1BQWMsRUFBRSxZQUFrQixDQUFDO1FBQzFELElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQWE7UUFDOUIsSUFBSSxLQUFLLEdBQUcsSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDL0MsS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkIsT0FBTyxLQUFLO0lBQ2hCLENBQUM7SUFFRCxXQUFXO1FBQ1AscUNBQXFDO1FBQ3JDLElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxDQUFDO1lBQUUsTUFBTSw2Q0FBNkMsQ0FBQztRQUM3RSxPQUFPLElBQUksU0FBUyxDQUFD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R0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2pDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUMvQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQ3pDO1NBQ0o7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRUQsTUFBTTtRQUVGLDZFQUE2RTtRQUU3RSxPQUFPLElBQUksQ0FBQztRQUVaLHlEQUF5RDtRQUN6RCwwQ0FBMEM7UUFDMUMsNkNBQTZDO1FBQzdDLHFDQUFxQztRQUNyQyw4QkFBOEI7UUFDOUIsaURBQWlEO1FBQ2pELFFBQVE7UUFDUixJQUFJO1FBQ0osZ0JBQWdCO0lBQ3BCLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9pbWcvSW1hZ2UudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbWFnZS50c1xyXG4vLyBhdXRob3I6IEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiB3cmFwcGVyIGFyb3VuZCB0aGUgSW1hZ2VEYXRhIGNsYXNzLCBcclxuLy8gLSBpbiBvcmRlciB0byBnZXQgbW9yZSBmdW5jdGlvbmFsaXR5IG91dCBvZiBpdFxyXG4vLyBcclxuLy8gbm90ZTogbmFtZWQgR2VvbkltYWdlIHRvIG5vdCBjb2xsaWRlIHdpdGggSW1hZ2UgY2xhc3Nlcy5cclxuXHJcbmltcG9ydCB7IERvbWFpbjIgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi4vZGF0YS9mbG9hdC1tYXRyaXhcIjtcclxuXHJcblxyXG4vLyBUT0RPIDogeCBhbmQgeSBhcmUgbm90IHRoZSBzYW1lIGFzIGkgYW5kIGosIGFuZCB1c2VkIGluY29uc2lzdGVudGx5LlxyXG4vLyBmaXggdGhpcy4gXHJcbmNvbnN0IGFjY2VwdGVkS2VybmVscyA6IG51bWJlcltdID0gWzMsNSw3LDldO1xyXG5leHBvcnQgY2xhc3MgR2VvbkltYWdlIHtcclxuXHJcbiAgICBwcml2YXRlIGRhdGE6IFVpbnQ4Q2xhbXBlZEFycmF5O1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHdpZHRoOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGl4ZWxTaXplOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHBpeGVsU2l6ZTogbnVtYmVyPTQpIHtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5waXhlbFNpemUgPSBwaXhlbFNpemU7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGggKiB0aGlzLmhlaWdodCAqIHRoaXMucGl4ZWxTaXplKTtcclxuICAgICAgICB0aGlzLmRhdGEuZmlsbCgwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZnJvbUltYWdlRGF0YShpZDogSW1hZ2VEYXRhKSA6IEdlb25JbWFnZSB7XHJcbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEdlb25JbWFnZShpZC53aWR0aCwgaWQuaGVpZ2h0KTtcclxuICAgICAgICBpbWFnZS5zZXREYXRhKGlkLmRhdGEpO1xyXG4gICAgICAgIHJldHVybiBpbWFnZVxyXG4gICAgfVxyXG5cclxuICAgIHRvSW1hZ2VEYXRhKCkgOiBJbWFnZURhdGEge1xyXG4gICAgICAgIC8vIGltYWdlZGF0YSByZXF1aXJlcyBwaXhlbHNpemUgb2YgNC5cclxuICAgICAgICBpZiAodGhpcy5waXhlbFNpemUgIT0gNCkgdGhyb3cgXCJwaXhlbHNpemUgbXVzdCBiZSA0IGZvciB0b0ltYWdlRGF0YSB0byB3b3JrXCI7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbWFnZURhdGEodGhpcy5kYXRhLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGF0YShkYXRhOiBVaW50OENsYW1wZWRBcnJheSkge1xyXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCAhPSAodGhpcy5oZWlnaHQgKiB0aGlzLndpZHRoICogdGhpcy5waXhlbFNpemUpKVxyXG4gICAgICAgICAgICB0aHJvdyBcImRhdGEubGVuZ3RoIGRvZXMgbm90IG1hdGNoIHdpZHRoICogaGVpZ2h0IFwiO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBHZW9uSW1hZ2UodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRoaXMucGl4ZWxTaXplKVxyXG4gICAgICAgIGltYWdlLnNldERhdGEodGhpcy5kYXRhKTtcclxuICAgICAgICByZXR1cm4gaW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbChwaXhlbDogbnVtYmVyW10pIDogR2VvbkltYWdlIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGVpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLndpZHRoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGosIGksIHBpeGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBmaWxsRXZlcnkoZmlsbGVyOiBGdW5jdGlvbikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMud2lkdGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoaiwgaSwgZmlsbGVyKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpbmNsdWRlcyh4OiBudW1iZXIsIHk6IG51bWJlcikgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHggPCB0aGlzLndpZHRoICYmIHggPj0gMCAmJiB5IDwgdGhpcy5oZWlnaHQgJiYgeSA+PSAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQoaTogbnVtYmVyLCBqOiBudW1iZXIsIHBpeGVsOiBudW1iZXJbXSkge1xyXG5cclxuICAgICAgICB0aGlzLmRhdGFbNCAqICgoaiAqIHRoaXMud2lkdGggKyBpKSldID0gcGl4ZWxbMF07XHJcbiAgICAgICAgdGhpcy5kYXRhWzQgKiAoKGogKiB0aGlzLndpZHRoICsgaSkpICsgMV0gPSBwaXhlbFsxXTtcclxuICAgICAgICB0aGlzLmRhdGFbNCAqICgoaiAqIHRoaXMud2lkdGggKyBpKSkgKyAyXSA9IHBpeGVsWzJdO1xyXG4gICAgICAgIHRoaXMuZGF0YVs0ICogKChqICogdGhpcy53aWR0aCArIGkpKSArIDNdID0gcGl4ZWxbM107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KGk6IG51bWJlciwgajogbnVtYmVyKSA6IG51bWJlcltdIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgdGhpcy5kYXRhWzQgKiAoaiAqIHRoaXMud2lkdGggKyBpKV0sXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVs0ICogKGogKiB0aGlzLndpZHRoICsgaSkgKyAxXSxcclxuICAgICAgICAgICAgdGhpcy5kYXRhWzQgKiAoaiAqIHRoaXMud2lkdGggKyBpKSArIDJdLFxyXG4gICAgICAgICAgICB0aGlzLmRhdGFbNCAqIChqICogdGhpcy53aWR0aCArIGkpICsgM11cclxuICAgICAgICBdXHJcbiAgICB9XHJcblxyXG4gICAgZmxpcEhvcigpIDogR2VvbkltYWdlIHtcclxuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgR2VvbkltYWdlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnBpeGVsU2l6ZSlcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGVpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLndpZHRoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBqTWlycm9yID0gdGhpcy53aWR0aCAtIDEgLSBqO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uuc2V0KGosIGksIHRoaXMuZ2V0KGpNaXJyb3IsIGkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZmxpcFZlcigpIDogR2VvbkltYWdlIHtcclxuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgR2VvbkltYWdlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnBpeGVsU2l6ZSlcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGVpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGlNaXJyb3IgPSB0aGlzLmhlaWdodCAtIDEgLSBpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMud2lkdGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uuc2V0KGosIGksIHRoaXMuZ2V0KGosIGlNaXJyb3IpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFwcGx5S2VybmVsKGtlcm5lbDogRmxvYXRNYXRyaXgpIDogR2VvbkltYWdlIHtcclxuXHJcbiAgICAgICAgLy8gZGV0ZXJtaW5lIGtlcm5lbCBzaXplXHJcbiAgICAgICAgbGV0IHNpemUgPSBrZXJuZWwuY291bnQoKTtcclxuICAgICAgICBsZXQgcmFkaXVzID0gKHNpemUgLyAyKSAtIDAuNTtcclxuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgR2VvbkltYWdlKHRoaXMud2lkdGggLSByYWRpdXMgKiAyLCB0aGlzLmhlaWdodCAtIHJhZGl1cyAqIDIsIHRoaXMucGl4ZWxTaXplKTtcclxuXHJcbiAgICAgICAgLy8gb2xkIGltYWdlIHNwYWNlXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHJhZGl1cyA7IGkgPCB0aGlzLndpZHRoIC0gcmFkaXVzOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IHJhZGl1czsgaiA8IHRoaXMuaGVpZ2h0IC0gcmFkaXVzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHBpeGVsID0gdGhpcy5nZXRXaXRoS2VybmVsKGksIGosIGtlcm5lbCwgcmFkaXVzKVxyXG4gICAgICAgICAgICAgICAgaW1hZ2Uuc2V0KGktcmFkaXVzLCBqLXJhZGl1cywgcGl4ZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW1hZ2U7IC8vIHN1Y2NlcyBcclxuICAgIH1cclxuXHJcbiAgICBnZXRNaW5NYXgoKSA6IFtudW1iZXIsIG51bWJlcl0ge1xyXG4gICAgICAgIC8vIGdldCB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBwaXhlbCB2YWx1ZVxyXG4gICAgICAgIC8vIGFzc3VtZXMgcGl4ZWxzaXplID0gMVxyXG5cclxuICAgICAgICBsZXQgbWluID0gSW5maW5pdHk7XHJcbiAgICAgICAgbGV0IG1heCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaV0gPCBtaW4pIHtcclxuICAgICAgICAgICAgICAgIG1pbiA9IHRoaXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGFbaV0gPiBtYXgpIHtcclxuICAgICAgICAgICAgICAgIG1heCA9IHRoaXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFsgbWluLCBtYXhdXHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUaHJlc2hvbGQobG93ZXI6IG51bWJlciwgdXBwZXI6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5KCh4OiBudW1iZXIseTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgcGl4ZWwgPSB0aGlzLmdldCh4LHkpO1xyXG5cclxuICAgICAgICAgICAgaWYocGl4ZWxbMF0gPCBsb3dlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFswLDAsMCwwXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwaXhlbFswXSA+IHVwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzI1NSwyNTUsMjU1LDI1NV07IFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBpeGVsO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhcHBseShmaWxsZXI6IEZ1bmN0aW9uKSA6IEdlb25JbWFnZSB7XHJcbiAgICAgICAgbGV0IGNvcHkgPSBuZXcgR2VvbkltYWdlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnBpeGVsU2l6ZSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgY29weS5zZXQoeCwgeSwgZmlsbGVyKHgsIHkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29weTtcclxuICAgIH1cclxuICAgIGFwcGx5Tk1TKCkgOiBHZW9uSW1hZ2Uge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGRldGVybWluZSBrZXJuZWwgc2l6ZVxyXG4gICAgICAgIGxldCBzaXplID0gMztcclxuICAgICAgICBsZXQgcmFkaXVzID0gKHNpemUgLyAyKSAtIDAuNTtcclxuICAgICAgICBsZXQgY29weSA9IG5ldyBHZW9uSW1hZ2UodGhpcy53aWR0aCAtIHJhZGl1cyAqIDIsIHRoaXMuaGVpZ2h0IC0gcmFkaXVzICogMiwgdGhpcy5waXhlbFNpemUpO1xyXG5cclxuICAgICAgICAvLyBvbGQgaW1hZ2Ugc3BhY2VcclxuICAgICAgICBmb3IgKGxldCBpID0gcmFkaXVzIDsgaSA8IHRoaXMud2lkdGggLSByYWRpdXM7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gcmFkaXVzOyBqIDwgdGhpcy5oZWlnaHQgLSByYWRpdXM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgcGl4ZWwgPSB0aGlzLmdldFdpdGhLZXJuZWwoaSwgaiwga2VybmVsLCByYWRpdXMpXHJcbiAgICAgICAgICAgICAgICAvLyBjb3B5LnNldChpLXJhZGl1cywgai1yYWRpdXMsIHBpeGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaW1nLmVhY2hQaXhlbCgzLCBmdW5jdGlvbih4LCB5LCBjLCBuKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChuWzFdWzFdID4gblswXVsxXSAmJiBuWzFdWzFdID4gblsyXVsxXSkge1xyXG4gICAgICAgIC8vICAgICAgICAgY29weS5kYXRhW3hdW3ldID0gblsxXVsxXTtcclxuICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgICAgIGNvcHkuZGF0YVt4XVt5XSA9IDA7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgaWYgKG5bMV1bMV0gPiBuWzBdWzJdICYmIG5bMV1bMV0gPiBuWzJdWzBdKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb3B5LmRhdGFbeF1beV0gPSBuWzFdWzFdO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgY29weS5kYXRhW3hdW3ldID0gMDtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBpZiAoblsxXVsxXSA+IG5bMV1bMF0gJiYgblsxXVsxXSA+IG5bMV1bMl0pIHtcclxuICAgICAgICAvLyAgICAgICAgIGNvcHkuZGF0YVt4XVt5XSA9IG5bMV1bMV07XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb3B5LmRhdGFbeF1beV0gPSAwO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIGlmIChuWzFdWzFdID4gblswXVswXSAmJiBuWzFdWzFdID4gblsyXVsyXSkge1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIGNvcHkuZGF0YVt4XVt5XSA9IG5bMV1bMV07XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gY29weS5kYXRhW3hdW3ldID0gMDtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldFdpdGhLZXJuZWwoaTogbnVtYmVyLCBqOiBudW1iZXIsIGtlcm5lbDogRmxvYXRNYXRyaXgsIHJhZGl1czogbnVtYmVyKSA6IG51bWJlcltdIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBrZXJuZWwgc3BhY2VcclxuICAgICAgICBsZXQgc3VtID0gWzAsIDAsIDAsIDI1NV07XHJcbiAgICAgICAgbGV0IFtkaW14LCBkaW15XSA9IGtlcm5lbC5nZXREaW1lbnNpb25zKCk7XHJcbiAgICAgICAgZm9yIChsZXQga2kgPSAwIDsga2kgPCBkaW14OyBraSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGtqID0gMDsga2ogPCBkaW15OyBraisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHdlaWdodCA9IGtlcm5lbC5nZXQoa2ksIGtqKTtcclxuICAgICAgICAgICAgICAgIGxldCBwaXhlbCA9IHRoaXMuZ2V0KGkgKyBraSAtIHJhZGl1cywgaiArIGtqIC0gcmFkaXVzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtW2ldICs9IHBpeGVsW2ldICogd2VpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdW07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QXBsaGEoYTogbnVtYmVyKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGl4ZWwgPSB0aGlzLmdldCh4LCB5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHgsIHksIFtwaXhlbFswXSwgcGl4ZWxbMV0sIHBpeGVsWzJdLCBhXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2NhbGUoc2NhbGVYOiBudW1iZXIsIHNjYWxlWTogbnVtYmVyKSA6IEdlb25JbWFnZSB7XHJcblxyXG4gICAgICAgIC8vIHNjYWxlIHRoZSBpbWFnZSB0byBhIG5ldyB3aWR0aCBhbmQgaGVpZ2h0LCB1c2luZyBuZWFyZXN0IG5laWdoYm91clxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc2l6ZShcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLndpZHRoICogc2NhbGVYKSwgXHJcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5oZWlnaHQgKiBzY2FsZVkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA6IEdlb25JbWFnZSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVzaXplIHRoZSBpbWFnZSB0byBhIG5ldyB3aWR0aCBhbmQgaGVpZ2h0LCB1c2luZyBuZWFyZXN0IG5laWdoYm91clxyXG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEdlb25JbWFnZSh3aWR0aCwgaGVpZ2h0LCB0aGlzLnBpeGVsU2l6ZSk7XHJcbiAgICAgICAgY29uc3Qgb2xkID0gdGhpcztcclxuXHJcbiAgICAgICAgY29uc3QgeF9mYWN0b3IgPSAoIDEgLyBpbWFnZS53aWR0aCApICogb2xkLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHlfZmFjdG9yID0gKCAxIC8gaW1hZ2UuaGVpZ2h0KSAqIG9sZC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaW1hZ2UuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBpbWFnZS53aWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGl4ZWwgPSBvbGQuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQoeCAqIHhfZmFjdG9yKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZCh5ICogeV9mYWN0b3IpKTtcclxuICAgICAgICAgICAgICAgIGltYWdlLnNldCh4LCB5LCBwaXhlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbWFnZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhZGQgYm9yZGVycyB0aWxsIHRoaXMgc2l6ZSBpcyBhY2hpZXZlZFxyXG4gICAgYnVmZmVyKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA6IEdlb25JbWFnZSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVzaXplIHRoZSBpbWFnZSB0byBhIG5ldyB3aWR0aCBhbmQgaGVpZ2h0LCB1c2luZyBuZWFyZXN0IG5laWdoYm91clxyXG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEdlb25JbWFnZSh3aWR0aCwgaGVpZ2h0LCB0aGlzLnBpeGVsU2l6ZSk7XHJcbiAgICAgICAgY29uc3Qgb2xkID0gdGhpcztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh4LCB5KTtcclxuICAgICAgICAgICAgICAgIGxldCBwaXhlbCA9IG9sZC5pbmNsdWRlcyh4LCB5KSA/IG9sZC5nZXQoeCwgeSkgOiBbMCwwLDAsMjU1XTtcclxuICAgICAgICAgICAgICAgIGltYWdlLnNldCh4LCB5LCBwaXhlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xyXG4gICAgICAgIC8vICAgICAgICAgaW1hZ2Uuc2V0KHgsIHksIFt4LDAsMCwyNTVdKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuXHJcblxyXG4gICAgICAgIC8vIGJ1aWxkIHNvbWUgc2ltcGxlIGltYWdlIGluc3RlYWQgdG8gdGVzdFxyXG4gICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2UuZGF0YS5sZW5ndGggLyA0OyBpKyspIHtcclxuICAgICAgICAvLyAgICAgaW1hZ2UuZGF0YVtpKjQgKyAwXSA9IGkgJSAyNTU7XHJcbiAgICAgICAgLy8gICAgIGltYWdlLmRhdGFbaSo0ICsgMV0gPSAwO1xyXG4gICAgICAgIC8vICAgICBpbWFnZS5kYXRhW2kqNCArIDJdID0gMDtcclxuICAgICAgICAvLyAgICAgaW1hZ2UuZGF0YVtpKjQgKyAzXSA9IDI1NTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbWFnZTtcclxuICAgIH1cclxuXHJcbiAgICB0cmltV2l0aERvbWFpbihkb206IERvbWFpbjIpIHtcclxuICAgICAgICBjb25zdCB4MSA9IE1hdGgucm91bmQoZG9tLngudDApO1xyXG4gICAgICAgIGNvbnN0IHgyID0gTWF0aC5yb3VuZChkb20ueC50MSk7XHJcbiAgICAgICAgY29uc3QgeTEgPSBNYXRoLnJvdW5kKGRvbS55LnQwKTtcclxuICAgICAgICBjb25zdCB5MiA9IE1hdGgucm91bmQoZG9tLnkudDEpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy50cmltKHgxLCB5MSwgeDIseTIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyaW0oeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcikgOiBHZW9uSW1hZ2Uge1xyXG5cclxuICAgICAgICAvLyByZXR1cm4gYSBoYXJkY29weSBvZiB0aGlzIHBhcnRpY3VsYXIgd2luZG93XHJcbiAgICAgICAgY29uc3QgaW1hZ2VXaWR0aCA9IHgyIC0geDE7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VIZWlnaHQgPSB5MiAtIHkxO1xyXG5cclxuICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBHZW9uSW1hZ2UoaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQsIHRoaXMucGl4ZWxTaXplKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBpbWFnZUhlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgaW1hZ2VXaWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGl4ZWwgPSB0aGlzLmdldCh4ICsgeDEsIHkgKyB5MSk7XHJcbiAgICAgICAgICAgICAgICBpbWFnZS5zZXQoeCwgeSwgcGl4ZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgdG9HcmV5c2NhbGUoKSA6IEdlb25JbWFnZSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBpeGVsU2l6ZSAhPSA0KSB0aHJvdyBcInBsZWFzZSwgb25seSB1c2UgdGhpcyB3aGVuIHBpeGVsc2l6ZSBpcyA0XCJcclxuXHJcbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEdlb25JbWFnZSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgNCk7XHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGl4ZWwgPSB0aGlzLmdldCh4LHkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGF2ZyA9IChwaXhlbFswXSArIHBpeGVsWzFdICsgcGl4ZWxbMl0pIC8gMztcclxuICAgICAgICAgICAgICAgIGltYWdlLnNldCh4LCB5LCBbYXZnLCBhdmcsIGF2ZywgMjU1XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHRvUkdCQSgpIDogR2VvbkltYWdlIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBpZiAodGhpcy5waXhlbFNpemUgIT0gMSkgdGhyb3cgXCJwbGVhc2UsIG9ubHkgdXNlIHRoaXMgd2hlbiBwaXhlbHNpemUgaXMgMVwiXHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgICAgICAvLyBsZXQgaW1hZ2UgPSBuZXcgR2VvbkltYWdlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCA0KTtcclxuICAgICAgICAvLyBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcclxuICAgICAgICAvLyAgICAgICAgIGxldCBwaXhlbCA9IHRoaXMuZ2V0KHgseSk7XHJcbiAgICAgICAgLy8gICAgICAgICBsZXQgdmFsID0gcGl4ZWxbMF07XHJcbiAgICAgICAgLy8gICAgICAgICBpbWFnZS5zZXQoeCwgeSwgW3ZhbCwgdmFsLCB2YWwsIDI1NV0pO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIHJldHVybiBpbWFnZTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/img/Image.ts\n");

/***/ }),

/***/ "./src/img/kernels.ts":
/*!****************************!*\
  !*** ./src/img/kernels.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Kernels\": () => /* binding */ Kernels\n/* harmony export */ });\n/* harmony import */ var _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/float-matrix */ \"./src/data/float-matrix.ts\");\n\r\n// kernels\r\nclass Kernels {\r\n    // inspired from https://github.com/yuta1984/CannyJS/blob/master/canny.js\r\n    static generateGaussianKernel(sigmma, size) {\r\n        // messy, probably auto-generated \r\n        var e, gaussian, i, j, kernel, s, sum, x, y, _i, _j, _k, _l, _ref, _ref1, _ref2, _ref3;\r\n        s = sigmma;\r\n        e = 2.718;\r\n        kernel = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(size, size);\r\n        sum = 0;\r\n        for (i = _i = 0, _ref = size - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n            x = -(size - 1) / 2 + i;\r\n            for (j = _j = 0, _ref1 = size - 1; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; j = 0 <= _ref1 ? ++_j : --_j) {\r\n                y = -(size - 1) / 2 + j;\r\n                gaussian = (1 / (2 * Math.PI * s * s)) * Math.pow(e, -(x * x + y * y) / (2 * s * s));\r\n                kernel.set(i, j, gaussian);\r\n                sum += gaussian;\r\n            }\r\n        }\r\n        for (i = _k = 0, _ref2 = size - 1; 0 <= _ref2 ? _k <= _ref2 : _k >= _ref2; i = 0 <= _ref2 ? ++_k : --_k) {\r\n            for (j = _l = 0, _ref3 = size - 1; 0 <= _ref3 ? _l <= _ref3 : _l >= _ref3; j = 0 <= _ref3 ? ++_l : --_l) {\r\n                kernel.set(i, j, (kernel.get(i, j) / sum));\r\n            }\r\n        }\r\n        return kernel;\r\n    }\r\n}\r\nKernels.SmoothKernel = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(3, 3, [\r\n    1, 1, 1,\r\n    1, 1, 1,\r\n    1, 1, 1\r\n]).forEachValue((i) => i * 1 / 9);\r\nKernels.SmoothKernel5 = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(5, 5, [\r\n    1, 1, 1, 1, 1,\r\n    1, 1, 1, 1, 1,\r\n    1, 1, 1, 1, 1,\r\n    1, 1, 1, 1, 1,\r\n    1, 1, 1, 1, 1\r\n]).forEachValue((v) => v * 1 / 25);\r\nKernels.Gauss5 = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(5, 5, [\r\n    2, 4, 5, 4, 2,\r\n    4, 9, 12, 9, 4,\r\n    5, 12, 15, 12, 5,\r\n    4, 9, 12, 9, 4,\r\n    2, 4, 5, 4, 2,\r\n]).forEachValue((v) => v * 1 / 159);\r\nKernels.TestKernel = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(3, 3, [\r\n    1, 0, -1,\r\n    0, 0, 0,\r\n    -1, 0, 1,\r\n]);\r\nKernels.SobelLeft = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(3, 3, [\r\n    1, 2, 1,\r\n    0, 0, 0,\r\n    -1, -2, -1,\r\n]);\r\nKernels.SobelRight = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(3, 3, [\r\n    -1, -2, -1,\r\n    0, 0, 0,\r\n    1, 2, 1,\r\n]);\r\nKernels.SobelUp = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(3, 3, [\r\n    1, 0, -1,\r\n    2, 0, -2,\r\n    1, 0, -1,\r\n]);\r\nKernels.SobelDown = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(3, 3, [\r\n    -1, 0, 1,\r\n    -2, 0, 2,\r\n    -1, 0, 1,\r\n]);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2ltZy9rZXJuZWxzLnRzPzM2ZjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0Q7QUFFbEQsVUFBVTtBQUVILE1BQU0sT0FBTztJQXNEaEIseUVBQXlFO0lBQ3pFLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxNQUFjLEVBQUUsSUFBWTtRQUV0RCxrQ0FBa0M7UUFDbEMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDO1FBQ3ZGLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDWCxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBQ1YsTUFBTSxHQUFHLElBQUksMkRBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDckMsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNSLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFO1lBQ2hHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEIsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUU7Z0JBQ3pHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3hCLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDckYsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQztnQkFDMUIsR0FBRyxJQUFJLFFBQVEsQ0FBQzthQUNmO1NBQ0o7UUFDRCxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRTtZQUNyRyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxLQUFLLENBQUMs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TyxHQUFHLElBQUksMkRBQVcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFO0lBQzNDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ1IsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDUixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUNYLENBQUMsQ0FBQztBQUVhLGlCQUFTLEdBQUcsSUFBSSwyREFBVyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUU7SUFDN0MsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztJQUNSLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0NBQ1gsQ0FBQyxDQUFDIiwiZmlsZSI6Ii4vc3JjL2ltZy9rZXJuZWxzLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi4vZGF0YS9mbG9hdC1tYXRyaXhcIlxyXG5cclxuLy8ga2VybmVsc1xyXG5cclxuZXhwb3J0IGNsYXNzIEtlcm5lbHNcclxue1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFNtb290aEtlcm5lbCA9IG5ldyBGbG9hdE1hdHJpeCgzLDMsIFtcclxuICAgICAgICAxLDEsMSxcclxuICAgICAgICAxLDEsMSxcclxuICAgICAgICAxLDEsMVxyXG4gICAgXSkuZm9yRWFjaFZhbHVlKChpKSA9PiBpICogMS85KTtcclxuICAgICBcclxuICAgIHN0YXRpYyByZWFkb25seSBTbW9vdGhLZXJuZWw1ID0gbmV3IEZsb2F0TWF0cml4KDUsNSwgW1xyXG4gICAgICAgIDEsMSwxLDEsMSxcclxuICAgICAgICAxLDEsMSwxLDEsXHJcbiAgICAgICAgMSwxLDEsMSwxLFxyXG4gICAgICAgIDEsMSwxLDEsMSxcclxuICAgICAgICAxLDEsMSwxLDFcclxuICAgIF0pLmZvckVhY2hWYWx1ZSgodikgPT4gdiAqIDEvMjUpO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBHYXVzczUgPSBuZXcgRmxvYXRNYXRyaXgoNSw1LCBbXHJcbiAgICAgICAgMiwgNCwgNSwgNCwgMixcclxuICAgICAgICA0LCA5LDEyLCA5LCA0LFxyXG4gICAgICAgIDUsMTIsMTUsMTIsIDUsXHJcbiAgICAgICAgNCwgOSwxMiwgOSwgNCxcclxuICAgICAgICAyLCA0LCA1LCA0LCAyLFxyXG4gICAgXSkuZm9yRWFjaFZhbHVlKCh2KSA9PiB2ICogMS8xNTkpO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBUZXN0S2VybmVsID0gbmV3IEZsb2F0TWF0cml4KDMsMywgW1xyXG4gICAgICAgICAgMSwgMCwtMSxcclxuICAgICAgICAgIDAsIDAsIDAsXHJcbiAgICAgICAgIC0xLCAwLCAxLFxyXG4gICAgXSk7XHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IFNvYmVsTGVmdCA9IG5ldyBGbG9hdE1hdHJpeCgzLDMsIFtcclxuICAgICAgICAgMSwgMiwgMSxcclxuICAgICAgICAgMCwgMCwgMCxcclxuICAgICAgICAgLTEsIC0yLCAtMSxcclxuICAgIF0pO1xyXG4gICAgXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgU29iZWxSaWdodCA9IG5ldyBGbG9hdE1hdHJpeCgzLDMsIFtcclxuICAgICAgICAtMSwgLTIsIC0xLFxyXG4gICAgICAgIDAsIDAsIDAsXHJcbiAgICAgICAgMSwgMiwgMSxcclxuICAgXSk7XHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IFNvYmVsVXAgPSBuZXcgRmxvYXRNYXRyaXgoMywzLCBbXHJcbiAgICAgICAgMSwgMCwgLTEsXHJcbiAgICAgICAgMiwgMCwgLTIsXHJcbiAgICAgICAgMSwgMCwgLTEsXHJcbiAgICBdKTtcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgU29iZWxEb3duID0gbmV3IEZsb2F0TWF0cml4KDMsMywgW1xyXG4gICAgICAgIC0xLCAwLCAxLFxyXG4gICAgICAgIC0yLCAwLCAyLFxyXG4gICAgICAgIC0xLCAwLCAxLFxyXG4gICAgXSk7XHJcblxyXG4gICAgLy8gaW5zcGlyZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20veXV0YTE5ODQvQ2FubnlKUy9ibG9iL21hc3Rlci9jYW5ueS5qc1xyXG4gICAgc3RhdGljIGdlbmVyYXRlR2F1c3NpYW5LZXJuZWwoc2lnbW1hOiBudW1iZXIsIHNpemU6IG51bWJlcikge1xyXG5cclxuICAgICAgICAvLyBtZXNzeSwgcHJvYmFibHkgYXV0by1nZW5lcmF0ZWQgXHJcbiAgICAgICAgdmFyIGUsIGdhdXNzaWFuLCBpLCBqLCBrZXJuZWwsIHMsIHN1bSwgeCwgeSwgX2ksIF9qLCBfaywgX2wsIF9yZWYsIF9yZWYxLCBfcmVmMiwgX3JlZjM7XHJcbiAgICAgICAgcyA9IHNpZ21tYTtcclxuICAgICAgICBlID0gMi43MTg7XHJcbiAgICAgICAga2VybmVsID0gbmV3IEZsb2F0TWF0cml4KHNpemUsIHNpemUpO1xyXG4gICAgICAgIHN1bSA9IDA7XHJcbiAgICAgICAgZm9yIChpID0gX2kgPSAwLCBfcmVmID0gc2l6ZSAtIDE7IDAgPD0gX3JlZiA/IF9pIDw9IF9yZWYgOiBfaSA+PSBfcmVmOyBpID0gMCA8PSBfcmVmID8gKytfaSA6IC0tX2kpIHtcclxuICAgICAgICAgICAgeCA9IC0oc2l6ZSAtIDEpIC8gMiArIGk7XHJcbiAgICAgICAgICAgIGZvciAoaiA9IF9qID0gMCwgX3JlZjEgPSBzaXplIC0gMTsgMCA8PSBfcmVmMSA/IF9qIDw9IF9yZWYxIDogX2ogPj0gX3JlZjE7IGogPSAwIDw9IF9yZWYxID8gKytfaiA6IC0tX2opIHtcclxuICAgICAgICAgICAgeSA9IC0oc2l6ZSAtIDEpIC8gMiArIGo7XHJcbiAgICAgICAgICAgIGdhdXNzaWFuID0gKDEgLyAoMiAqIE1hdGguUEkgKiBzICogcykpICogTWF0aC5wb3coZSwgLSh4ICogeCArIHkgKiB5KSAvICgyICogcyAqIHMpKTtcclxuICAgICAgICAgICAga2VybmVsLnNldChpLCBqLCBnYXVzc2lhbilcclxuICAgICAgICAgICAgc3VtICs9IGdhdXNzaWFuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoaSA9IF9rID0gMCwgX3JlZjIgPSBzaXplIC0gMTsgMCA8PSBfcmVmMiA/IF9rIDw9IF9yZWYyIDogX2sgPj0gX3JlZjI7IGkgPSAwIDw9IF9yZWYyID8gKytfayA6IC0tX2spIHtcclxuICAgICAgICAgICAgZm9yIChqID0gX2wgPSAwLCBfcmVmMyA9IHNpemUgLSAxOyAwIDw9IF9yZWYzID8gX2wgPD0gX3JlZjMgOiBfbCA+PSBfcmVmMzsgaiA9IDAgPD0gX3JlZjMgPyArK19sIDogLS1fbCkge1xyXG4gICAgICAgICAgICBrZXJuZWwuc2V0KGksIGosIChrZXJuZWwuZ2V0KGksaikgLyBzdW0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2VybmVsO1xyXG4gICAgfVxyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/img/kernels.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sfered_eye_finder_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sfered/eye-finder-app */ \"./src/sfered/eye-finder-app.ts\");\n/* harmony import */ var _render_renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./render/renderer */ \"./src/render/renderer.ts\");\n/* harmony import */ var _app_demos_dot_app3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app-demos/dot-app3 */ \"./src/app-demos/dot-app3.ts\");\n/* harmony import */ var _app_obj_loader_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/obj-loader-app */ \"./src/app/obj-loader-app.ts\");\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core */ \"./src/core.ts\");\n/* harmony import */ var _app_stat_app__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./app/stat-app */ \"./src/app/stat-app.ts\");\n/* harmony import */ var _app_geometry_app__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./app/geometry-app */ \"./src/app/geometry-app.ts\");\n/* harmony import */ var _app_mesh_inspector_app__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./app/mesh-inspector-app */ \"./src/app/mesh-inspector-app.ts\");\n/* harmony import */ var _app_swap_app__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./app/swap-app */ \"./src/app/swap-app.ts\");\n// Name:    index.ts\r\n// Author:  Jos Feenstra\r\n// Purpose: Entry point\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar core;\r\nfunction main() {\r\n    // get references of all items on the canvas\r\n    let canvas = document.getElementById(\"canvas\");\r\n    let video = document.getElementById(\"camera\");\r\n    let ui = document.getElementById(\"interface\");\r\n    let cameraOn = document.getElementById(\"camera-on\");\r\n    let cameraStop = document.getElementById(\"camera-off\");\r\n    let buttonPredict = document.getElementById(\"predict\");\r\n    // init core \r\n    let gl = _render_renderer__WEBPACK_IMPORTED_MODULE_1__.Renderer.initWebglContext(canvas);\r\n    core = new _core__WEBPACK_IMPORTED_MODULE_4__.Core(canvas, gl, ui);\r\n    // init swap app\r\n    let appCollection = [\r\n        _app_mesh_inspector_app__WEBPACK_IMPORTED_MODULE_7__.MeshInspectorApp,\r\n        _sfered_eye_finder_app__WEBPACK_IMPORTED_MODULE_0__.EyeFinderApp,\r\n        _app_geometry_app__WEBPACK_IMPORTED_MODULE_6__.GeometryApp,\r\n        _app_demos_dot_app3__WEBPACK_IMPORTED_MODULE_2__.DotApp3,\r\n        _app_obj_loader_app__WEBPACK_IMPORTED_MODULE_3__.ObjLoaderApp,\r\n        _app_stat_app__WEBPACK_IMPORTED_MODULE_5__.StatApp,\r\n    ];\r\n    let swapApp = new _app_swap_app__WEBPACK_IMPORTED_MODULE_8__.SwapApp(gl, core, appCollection);\r\n    core.addApp(swapApp);\r\n    swapApp.swap(0);\r\n    // a specific app dealing with webcams & other things\r\n    // addWebcamAppWhenReady(core, canvas, video);\r\n    // infinite loop\r\n    function loop() {\r\n        if (core.STOP) {\r\n            // TODO : notify the User that we have stopped running...\r\n            return;\r\n        }\r\n        core.update();\r\n        core.draw();\r\n        requestAnimationFrame(loop);\r\n    }\r\n    requestAnimationFrame(loop);\r\n}\r\nwindow.addEventListener(\"load\", function () {\r\n    main();\r\n}, false);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL2luZGV4LnRzP2ZmYjQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLG9CQUFvQjtBQUNwQix3QkFBd0I7QUFDeEIsdUJBQXVCO0FBRzhCO0FBR1I7QUFFRTtBQUNLO0FBQ3RCO0FBQ1c7QUFDUTtBQUVXO0FBQ25CO0FBRXpDLElBQUksSUFBVSxDQUFDO0FBRWYsU0FBUyxJQUFJO0lBRVQsNENBQTRDO0lBQzVDLElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUF1QixDQUFDO0lBQ3JFLElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFzQixDQUFDO0lBQ25FLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFvQixDQUFDO0lBQ2pFLElBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUF1QixDQUFDO0lBQzFFLElBQUksVUFBVSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUF1QixDQUFDO0lBQzdFLElBQUksYUFBYSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUF1QixDQUFDO0lBRTdFLGFBQWE7SUFDYixJQUFJLEVBQUUsR0FBRyx1RUFBeUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzQyxJQUFJLEdBQUcsSUFBSSx1Q0FBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFaEMsZ0JBQWdCO0lBQ2hCLElBQUksYUFBYSxHQUFHO1FBQ2hCLHFFQUFnQjtRQUNoQixnRUFBWTtRQUNaLDBEQUFXO1FBQ1gsd0RBQU87UUFDUCw2REFBWTtRQUNaLGtEQUFPO0tBQ1Y7SUFFRCxJQUFJLE9BQU8sR0FBRyxJQUFJLGtEQUFPLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNuRCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFaEIscURBQXFEO0lBQ3JELDhDQUE4QztJQUU5QyxnQkFBZ0I7SUFDaEIsU0FBUyxJQUFJO1FBQ1QsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ1gseURBQXlEO1lBQ3pELE9BQU87U0FDVjtRQUNELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNkLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNaLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFDRCxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoQyxDQUFDO0FBQ0QsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtJQUM1QixJQUFJLEVBQUUsQ0FBQztBQUNYLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyIsImZpbGUiOiIuL3NyYy9pbmRleC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE5hbWU6ICAgIGluZGV4LnRzXHJcbi8vIEF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBQdXJwb3NlOiBFbnRyeSBwb2ludFxyXG5cclxuaW1wb3J0IHthZGRXZWJjYW1BcHBXaGVuUmVhZHksIFdlYmNhbUFwcH0gZnJvbSBcIi4vYXBwL3dlYmNhbS1hcHBcIjtcclxuaW1wb3J0IHtFeWVGaW5kZXJBcHB9IGZyb20gXCIuL3NmZXJlZC9leWUtZmluZGVyLWFwcFwiO1xyXG5pbXBvcnQgeyBJbnB1dFN0YXRlIH0gZnJvbSBcIi4vc3lzdGVtL2lucHV0LXN0YXRlXCI7XHJcbmltcG9ydCB7IEFwcCB9IGZyb20gXCIuL2FwcC9hcHBcIjtcclxuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tIFwiLi9yZW5kZXIvcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgRG90QXBwMiB9IGZyb20gXCIuL2FwcC1kZW1vcy9kb3QtYXBwMlwiO1xyXG5pbXBvcnQgeyBEb3RBcHAzIH0gZnJvbSBcIi4vYXBwLWRlbW9zL2RvdC1hcHAzXCI7XHJcbmltcG9ydCB7IE9iakxvYWRlckFwcCB9IGZyb20gXCIuL2FwcC9vYmotbG9hZGVyLWFwcFwiO1xyXG5pbXBvcnQgeyBDb3JlIH0gZnJvbSBcIi4vY29yZVwiO1xyXG5pbXBvcnQgeyBTdGF0QXBwIH0gZnJvbSBcIi4vYXBwL3N0YXQtYXBwXCI7XHJcbmltcG9ydCB7IEdlb21ldHJ5QXBwIH0gZnJvbSBcIi4vYXBwL2dlb21ldHJ5LWFwcFwiO1xyXG5pbXBvcnQgeyBNYXJjaGluZ0N1YmVBcHAgfSBmcm9tIFwiLi9hcHAvbWFyY2hpbmctY3ViZS1hcHBcIjtcclxuaW1wb3J0IHsgTWVzaEluc3BlY3RvckFwcCB9IGZyb20gXCIuL2FwcC9tZXNoLWluc3BlY3Rvci1hcHBcIjtcclxuaW1wb3J0IHsgU3dhcEFwcCB9IGZyb20gXCIuL2FwcC9zd2FwLWFwcFwiO1xyXG5cclxudmFyIGNvcmU6IENvcmU7XHJcblxyXG5mdW5jdGlvbiBtYWluKCkge1xyXG5cclxuICAgIC8vIGdldCByZWZlcmVuY2VzIG9mIGFsbCBpdGVtcyBvbiB0aGUgY2FudmFzXHJcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikhIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgbGV0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW1lcmFcIikhIGFzIEhUTUxWaWRlb0VsZW1lbnQ7XHJcbiAgICBsZXQgdWkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImludGVyZmFjZVwiKSAgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBsZXQgY2FtZXJhT24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbWVyYS1vblwiKSEgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBsZXQgY2FtZXJhU3RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FtZXJhLW9mZlwiKSEgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBsZXQgYnV0dG9uUHJlZGljdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJlZGljdFwiKSEgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBcclxuICAgIC8vIGluaXQgY29yZSBcclxuICAgIGxldCBnbCA9IFJlbmRlcmVyLmluaXRXZWJnbENvbnRleHQoY2FudmFzKTtcclxuICAgIGNvcmUgPSBuZXcgQ29yZShjYW52YXMsIGdsLCB1aSk7XHJcblxyXG4gICAgLy8gaW5pdCBzd2FwIGFwcFxyXG4gICAgbGV0IGFwcENvbGxlY3Rpb24gPSBbXHJcbiAgICAgICAgTWVzaEluc3BlY3RvckFwcCxcclxuICAgICAgICBFeWVGaW5kZXJBcHAsXHJcbiAgICAgICAgR2VvbWV0cnlBcHAsXHJcbiAgICAgICAgRG90QXBwMyxcclxuICAgICAgICBPYmpMb2FkZXJBcHAsXHJcbiAgICAgICAgU3RhdEFwcCxcclxuICAgIF1cclxuXHJcbiAgICBsZXQgc3dhcEFwcCA9IG5ldyBTd2FwQXBwKGdsLCBjb3JlLCBhcHBDb2xsZWN0aW9uKTtcclxuICAgIGNvcmUuYWRkQXBwKHN3YXBBcHApO1xyXG4gICAgc3dhcEFwcC5zd2FwKDApO1xyXG5cclxuICAgIC8vIGEgc3BlY2lmaWMgYXBwIGRlYWxpbmcgd2l0aCB3ZWJjYW1zICYgb3RoZXIgdGhpbmdzXHJcbiAgICAvLyBhZGRXZWJjYW1BcHBXaGVuUmVhZHkoY29yZSwgY2FudmFzLCB2aWRlbyk7XHJcblxyXG4gICAgLy8gaW5maW5pdGUgbG9vcFxyXG4gICAgZnVuY3Rpb24gbG9vcCgpIHtcclxuICAgICAgICBpZiAoY29yZS5TVE9QKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8gOiBub3RpZnkgdGhlIFVzZXIgdGhhdCB3ZSBoYXZlIHN0b3BwZWQgcnVubmluZy4uLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvcmUudXBkYXRlKCk7XHJcbiAgICAgICAgY29yZS5kcmF3KCk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG4gICAgfVxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcclxuICAgIG1haW4oKTtcclxufSwgZmFsc2UpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/math/const.ts":
/*!***************************!*\
  !*** ./src/math/const.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Const\": () => /* binding */ Const\n/* harmony export */ });\n// name:    const.ts\r\n// author:  Jos Feenstra\r\n// purpose: Certain math constances\r\n// todo:    These are somewhat like the settings of the entire application. This could be expanded upon (json's, in-app functionalitiy)\r\nclass Const {\r\n    static IsRouglyZero(value) {\r\n        return Math.abs(value) < this.TOLERANCE;\r\n    }\r\n}\r\nConst.TOLERANCE = 0.0001; // tolerance used for determining if 1 value is the same as some other value, relatively speaking\r\nConst.TOL_SQUARED = Math.pow(Const.TOLERANCE, 2);\r\n// ----- Line Render Settings ----- \r\nConst.PLANE_RENDER_LINECOUNT = 9;\r\nConst.PLANE_RENDER_LINEDISTANCE = .3;\r\nConst.CIRCLE_SEGMENTS = 100;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21hdGgvY29uc3QudHM/ZjY0MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsb0JBQW9CO0FBQ3BCLHdCQUF3QjtBQUN4QixtQ0FBbUM7QUFDbkMsdUlBQXVJO0FBRWhJLE1BQU0sS0FBSztJQVdkLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBYTtRQUM3QixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUM1QyxDQUFDOztBQVpNLGVBQVMsR0FBRyxNQUFNLENBQUMsQ0FBQyxpR0FBaUc7QUFDckgsaUJBQVcsR0FBRyxjQUFLLENBQUMsU0FBUyxFQUFJLENBQUMsRUFBQztBQUUxQyxvQ0FBb0M7QUFDN0IsNEJBQXNCLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLCtCQUF5QixHQUFHLEVBQUUsQ0FBQztBQUUvQixxQkFBZSxHQUFHLEdBQUcsQ0FBQyIsImZpbGUiOiIuL3NyYy9tYXRoL2NvbnN0LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgY29uc3QudHNcclxuLy8gYXV0aG9yOiAgSm9zIEZlZW5zdHJhXHJcbi8vIHB1cnBvc2U6IENlcnRhaW4gbWF0aCBjb25zdGFuY2VzXHJcbi8vIHRvZG86ICAgIFRoZXNlIGFyZSBzb21ld2hhdCBsaWtlIHRoZSBzZXR0aW5ncyBvZiB0aGUgZW50aXJlIGFwcGxpY2F0aW9uLiBUaGlzIGNvdWxkIGJlIGV4cGFuZGVkIHVwb24gKGpzb24ncywgaW4tYXBwIGZ1bmN0aW9uYWxpdGl5KVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnN0IHtcclxuICAgIHN0YXRpYyBUT0xFUkFOQ0UgPSAwLjAwMDE7IC8vIHRvbGVyYW5jZSB1c2VkIGZvciBkZXRlcm1pbmluZyBpZiAxIHZhbHVlIGlzIHRoZSBzYW1lIGFzIHNvbWUgb3RoZXIgdmFsdWUsIHJlbGF0aXZlbHkgc3BlYWtpbmdcclxuICAgIHN0YXRpYyBUT0xfU1FVQVJFRCA9IENvbnN0LlRPTEVSQU5DRSAqKiAyO1xyXG5cclxuICAgIC8vIC0tLS0tIExpbmUgUmVuZGVyIFNldHRpbmdzIC0tLS0tIFxyXG4gICAgc3RhdGljIFBMQU5FX1JFTkRFUl9MSU5FQ09VTlQgPSA5O1xyXG4gICAgc3RhdGljIFBMQU5FX1JFTkRFUl9MSU5FRElTVEFOQ0UgPSAuMztcclxuXHJcbiAgICBzdGF0aWMgQ0lSQ0xFX1NFR01FTlRTID0gMTAwO1xyXG5cclxuXHJcbiAgICBzdGF0aWMgSXNSb3VnbHlaZXJvKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5hYnModmFsdWUpIDwgdGhpcy5UT0xFUkFOQ0U7XHJcbiAgICB9XHJcbn0gXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/math/const.ts\n");

/***/ }),

/***/ "./src/math/domain.ts":
/*!****************************!*\
  !*** ./src/math/domain.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Domain\": () => /* binding */ Domain,\n/* harmony export */   \"Domain2\": () => /* binding */ Domain2,\n/* harmony export */   \"Domain3\": () => /* binding */ Domain3\n/* harmony export */ });\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vector */ \"./src/math/vector.ts\");\n// domain.ts\r\n// \r\n// author: Jos Feenstra\r\n// purpose: general representation of a domain / range / bound of numbers\r\n//          \r\n\r\n\r\nclass Domain {\r\n    constructor(t0 = 0.0, t1 = 1.0) {\r\n        // if (t0 > t1) console.error(\"created a domain with negative size.\");\r\n        // if (t0 == t1) console.warn(\"created a domain with size is 0.0. could cause problems\");\r\n        this.t0 = t0;\r\n        this.t1 = t1;\r\n    }\r\n    static fromRadius(r) {\r\n        return new Domain(-r, r);\r\n    }\r\n    static fromInclude(data) {\r\n        // create a new domain which bounds all parsed values\r\n        let min = Number.MAX_VALUE;\r\n        let max = Number.MIN_VALUE;\r\n        for (let i = 0; i < data.length; i++) {\r\n            if (data[i] < min)\r\n                min = data[i];\r\n            if (data[i] > max)\r\n                max = data[i];\r\n        }\r\n        return new Domain(min, max);\r\n    }\r\n    offset(t0Offset, t1Offset) {\r\n        this.t0 += t0Offset;\r\n        this.t1 += t1Offset;\r\n        return this;\r\n    }\r\n    includes(value) {\r\n        // note: including t0, including t1\r\n        return value >= this.t0 && value <= this.t1;\r\n    }\r\n    size() {\r\n        // the size or length of this domain\r\n        return this.t1 - this.t0;\r\n    }\r\n    normalize(value) {\r\n        // normalize a parameter\r\n        return (value - this.t0) / this.size();\r\n    }\r\n    elevate(t) {\r\n        // elevate a normalized parameter to the parameter space of this domain\r\n        return t * this.size() + this.t0;\r\n    }\r\n    remap(value, other = new Domain()) {\r\n        // normalize a value, then elevate it to a new domain\r\n        let norm = this.normalize(value);\r\n        return other.elevate(norm);\r\n    }\r\n    *iter(count) {\r\n        // iterate over this Domain 'count' number of times \r\n        let step = this.size() / count;\r\n        for (let i = this.t0; i < this.t1; i += step) {\r\n            yield i;\r\n        }\r\n    }\r\n    *iterStep(step) {\r\n        // iterate over this domain with a stepsize of 'step'\r\n        for (let i = this.t0; i < this.t1; i += step) {\r\n            yield i;\r\n        }\r\n    }\r\n    // comform a number to the bound\r\n    comform(value) {\r\n        if (value < this.t0) {\r\n            return this.t0;\r\n        }\r\n        else if (value > this.t1) {\r\n            return this.t1;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n}\r\nclass Domain2 {\r\n    constructor(x = new Domain(), y = new Domain()) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    static fromRadius(r) {\r\n        return new Domain2(Domain.fromRadius(r), Domain.fromRadius(r));\r\n    }\r\n    static fromBounds(x0, x1, y0, y1) {\r\n        return new Domain2(new Domain(x0, x1), new Domain(y0, y1));\r\n    }\r\n    static fromInclude(data) {\r\n        // note : could be quicker by going verbose, this now iterates over data 4 times\r\n        return new Domain2(Domain.fromInclude(data.getColumn(0)), Domain.fromInclude(data.getColumn(1)));\r\n    }\r\n    offset(xXyYoffset) {\r\n        let off = xXyYoffset;\r\n        if (off.length != 4)\r\n            throw \"need 4 values\";\r\n        this.x.offset(off[0], off[1]);\r\n        this.y.offset(off[2], off[3]);\r\n        return this;\r\n    }\r\n    includes(value) {\r\n        // note: including t0, including t1\r\n        return this.x.includes(value.x) && this.y.includes(value.y);\r\n    }\r\n    size() {\r\n        // the size or length of this domain\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector2(this.x.size(), this.y.size());\r\n    }\r\n    normalize(value) {\r\n        // normalize a parameter\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector2(this.x.normalize(value.x), this.y.normalize(value.y));\r\n    }\r\n    elevate(t) {\r\n        // elevate a normalized parameter to the parameter space of this domain\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector2(this.x.elevate(t.x), this.y.elevate(t.y));\r\n    }\r\n    remap(value, other = new Domain2()) {\r\n        // normalize a value, then elevate it to a new domain\r\n        let norm = this.normalize(value);\r\n        return other.elevate(norm);\r\n    }\r\n    corners() {\r\n        // render the extends of this boundary / domain\r\n        let dim = 2;\r\n        let corners = Math.pow(2, dim);\r\n        let data = [];\r\n        for (let x of [this.x.t0, this.x.t1]) {\r\n            for (let y of [this.y.t0, this.y.t1]) {\r\n                data.push(new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector2(x, y));\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n}\r\nclass Domain3 {\r\n    constructor(x = new Domain(), y = new Domain(), z = new Domain()) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    static fromBounds(x0, x1, y0, y1, z0, z1) {\r\n        return new Domain3(new Domain(x0, x1), new Domain(y0, y1), new Domain(z0, z1));\r\n    }\r\n    static fromRadius(r) {\r\n        return new Domain3(Domain.fromRadius(r), Domain.fromRadius(r), Domain.fromRadius(r));\r\n    }\r\n    static fromRadii(rx, ry, rz) {\r\n        return new Domain3(Domain.fromRadius(rx), Domain.fromRadius(ry), Domain.fromRadius(rz));\r\n    }\r\n    static fromInclude(data) {\r\n        // note : could be quicker by going verbose, this now iterates over data 6 times\r\n        return new Domain3(Domain.fromInclude(data.getColumn(0)), Domain.fromInclude(data.getColumn(1)), Domain.fromInclude(data.getColumn(2)));\r\n    }\r\n    offset(xXyYoffset) {\r\n        let off = xXyYoffset;\r\n        if (off.length != 6)\r\n            throw \"need 6 values\";\r\n        this.x.offset(off[0], off[1]);\r\n        this.y.offset(off[2], off[3]);\r\n        this.z.offset(off[4], off[5]);\r\n        return this;\r\n    }\r\n    includes(value) {\r\n        // note: including t0, including t1\r\n        return this.x.includes(value.x) && this.y.includes(value.y) && this.z.includes(value.z);\r\n    }\r\n    size() {\r\n        // the size or length of this domain\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector3(this.x.size(), this.y.size(), this.z.size());\r\n    }\r\n    normalize(value) {\r\n        // normalize a parameter\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector3(this.x.normalize(value.x), this.y.normalize(value.y), this.z.normalize(value.z));\r\n    }\r\n    elevate(t) {\r\n        // elevate a normalized parameter to the parameter space of this domain\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector3(this.x.elevate(t.x), this.y.elevate(t.y), this.z.elevate(t.z));\r\n    }\r\n    remap(value, other = new Domain3()) {\r\n        // normalize a value, then elevate it to a new domain\r\n        let norm = this.normalize(value);\r\n        return other.elevate(norm);\r\n    }\r\n    remapAll(values, other = new Domain3()) {\r\n        // normalize a value, then elevate it to a new domain\r\n        let newValues = new _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array(values.count());\r\n        for (let i = 0; i < values.count(); i++) {\r\n            let norm = this.normalize(values.getVector(i));\r\n            newValues.setVector(i, other.elevate(norm));\r\n        }\r\n        return newValues;\r\n    }\r\n    corners(matrix) {\r\n        // render the extends of this boundary / domain\r\n        let dim = 3;\r\n        let corners = 2 ^ dim;\r\n        let data = [];\r\n        for (let x of [this.x.t0, this.x.t1]) {\r\n            for (let y of [this.y.t0, this.y.t1]) {\r\n                for (let z of [this.z.t0, this.z.t1]) {\r\n                    data.push(matrix.multiplyVector(new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector3(x, y, z)));\r\n                }\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21hdGgvZG9tYWluLnRzPzhhMDYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxZQUFZO0FBQ1osR0FBRztBQUNILHVCQUF1QjtBQUN2Qix5RUFBeUU7QUFDekUsWUFBWTtBQUdzRDtBQUV0QjtBQUVyQyxNQUFNLE1BQU07SUFPZixZQUFZLEtBQWEsR0FBRyxFQUFFLEtBQWEsR0FBRztRQUMxQyxzRUFBc0U7UUFDdEUseUZBQXlGO1FBQ3pGLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVELE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBUztRQUN2QixPQUFPLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxNQUFNLENBQUMsV0FBVyxDQUFDLElBQWtCO1FBQ2pDLHFEQUFxRDtRQUNyRCxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQzNCLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7UUFFM0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRztnQkFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUc7Z0JBQ2IsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNyQjtRQUNELE9BQU8sSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxNQUFNLENBQUMsUUFBZ0IsRUFBRSxR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Ly8gZG9tYWluLnRzXHJcbi8vIFxyXG4vLyBhdXRob3I6IEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiBnZW5lcmFsIHJlcHJlc2VudGF0aW9uIG9mIGEgZG9tYWluIC8gcmFuZ2UgLyBib3VuZCBvZiBudW1iZXJzXHJcbi8vICAgICAgICAgIFxyXG5cclxuaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi4vZGF0YS9mbG9hdC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgVmVjdG9yMkFycmF5LCBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgTWF0cml4NCB9IGZyb20gXCIuL21hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIi4vdmVjdG9yXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9tYWluIHtcclxuXHJcbiAgICAvLyBub3RlOiBpbmNsdWRpbmcgdDAsIGluY2x1ZGluZyB0MVxyXG5cclxuICAgIHQwOiBudW1iZXI7XHJcbiAgICB0MTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHQwOiBudW1iZXIgPSAwLjAsIHQxOiBudW1iZXIgPSAxLjApIHtcclxuICAgICAgICAvLyBpZiAodDAgPiB0MSkgY29uc29sZS5lcnJvcihcImNyZWF0ZWQgYSBkb21haW4gd2l0aCBuZWdhdGl2ZSBzaXplLlwiKTtcclxuICAgICAgICAvLyBpZiAodDAgPT0gdDEpIGNvbnNvbGUud2FybihcImNyZWF0ZWQgYSBkb21haW4gd2l0aCBzaXplIGlzIDAuMC4gY291bGQgY2F1c2UgcHJvYmxlbXNcIik7XHJcbiAgICAgICAgdGhpcy50MCA9IHQwO1xyXG4gICAgICAgIHRoaXMudDEgPSB0MTtcclxuICAgIH0gICAgXHJcblxyXG4gICAgc3RhdGljIGZyb21SYWRpdXMocjogbnVtYmVyKSA6IERvbWFpbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb21haW4oLXIsIHIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tSW5jbHVkZShkYXRhOiBGbG9hdDMyQXJyYXkpIDogRG9tYWlue1xyXG4gICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBkb21haW4gd2hpY2ggYm91bmRzIGFsbCBwYXJzZWQgdmFsdWVzXHJcbiAgICAgICAgbGV0IG1pbiA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICAgICAgbGV0IG1heCA9IE51bWJlci5NSU5fVkFMVUU7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGRhdGFbaV0gPCBtaW4pXHJcbiAgICAgICAgICAgICAgICBtaW4gPSBkYXRhW2ldO1xyXG4gICAgICAgICAgICBpZiAoZGF0YVtpXSA+IG1heClcclxuICAgICAgICAgICAgICAgIG1heCA9IGRhdGFbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRG9tYWluKG1pbiwgbWF4KTtcclxuICAgIH1cclxuXHJcbiAgICBvZmZzZXQodDBPZmZzZXQ6IG51bWJlciwgdDFPZmZzZXQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudDAgKz0gdDBPZmZzZXQ7XHJcbiAgICAgICAgdGhpcy50MSArPSB0MU9mZnNldDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBpbmNsdWRlcyh2YWx1ZTogbnVtYmVyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIG5vdGU6IGluY2x1ZGluZyB0MCwgaW5jbHVkaW5nIHQxXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID49IHRoaXMudDAgJiYgdmFsdWUgPD0gdGhpcy50MTtcclxuICAgIH1cclxuXHJcbiAgICBzaXplKCkgOiBudW1iZXIge1xyXG4gICAgICAgIC8vIHRoZSBzaXplIG9yIGxlbmd0aCBvZiB0aGlzIGRvbWFpblxyXG4gICAgICAgIHJldHVybiB0aGlzLnQxIC0gdGhpcy50MDtcclxuICAgIH1cclxuXHJcbiAgICBub3JtYWxpemUodmFsdWU6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBhIHBhcmFtZXRlclxyXG4gICAgICAgIHJldHVybiAodmFsdWUgLSB0aGlzLnQwKSAvIHRoaXMuc2l6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsZXZhdGUodDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgLy8gZWxldmF0ZSBhIG5vcm1hbGl6ZWQgcGFyYW1ldGVyIHRvIHRoZSBwYXJhbWV0ZXIgc3BhY2Ugb2YgdGhpcyBkb21haW5cclxuICAgICAgICByZXR1cm4gdCAqIHRoaXMuc2l6ZSgpICsgdGhpcy50MFxyXG4gICAgfVxyXG5cclxuICAgIHJlbWFwKHZhbHVlOiBudW1iZXIsIG90aGVyOiBEb21haW4gPSBuZXcgRG9tYWluKCkpIDogbnVtYmVyIHtcclxuICAgICAgICAvLyBub3JtYWxpemUgYSB2YWx1ZSwgdGhlbiBlbGV2YXRlIGl0IHRvIGEgbmV3IGRvbWFpblxyXG4gICAgICAgIGxldCBub3JtID0gdGhpcy5ub3JtYWxpemUodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBvdGhlci5lbGV2YXRlKG5vcm0pO1xyXG4gICAgfVxyXG5cclxuICAgICppdGVyKGNvdW50OiBudW1iZXIpIDogR2VuZXJhdG9yPG51bWJlcj4ge1xyXG4gICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGlzIERvbWFpbiAnY291bnQnIG51bWJlciBvZiB0aW1lcyBcclxuICAgICAgICBsZXQgc3RlcCA9IHRoaXMuc2l6ZSgpIC8gY291bnQ7IFxyXG4gICAgICAgIGZvcihsZXQgaSA9IHRoaXMudDA7IGkgPCB0aGlzLnQxOyBpICs9IHN0ZXApIHtcclxuICAgICAgICAgICAgeWllbGQgaTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAqaXRlclN0ZXAoc3RlcDogbnVtYmVyKSA6IEdlbmVyYXRvcjxudW1iZXI+IHtcclxuICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhpcyBkb21haW4gd2l0aCBhIHN0ZXBzaXplIG9mICdzdGVwJ1xyXG4gICAgICAgIGZvcihsZXQgaSA9IHRoaXMudDA7IGkgPCB0aGlzLnQxOyBpICs9IHN0ZXApIHtcclxuICAgICAgICAgICAgeWllbGQgaTtcclxuICAgICAgICB9ICAgICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGNvbWZvcm0gYSBudW1iZXIgdG8gdGhlIGJvdW5kXHJcbiAgICBjb21mb3JtKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodmFsdWUgPCB0aGlzLnQwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnQwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPiB0aGlzLnQxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnQxXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERvbWFpbjIge1xyXG5cclxuICAgIC8vIDJEIGRvbWFpbi4gbG9naWMgY2FzY2FkZXMgZG93biB0byB0aGUgMSBkaW1lbnRpb25hbCBEb21haW4uIFxyXG5cclxuICAgIHg6IERvbWFpbjtcclxuICAgIHk6IERvbWFpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih4OiBEb21haW4gPSBuZXcgRG9tYWluKCksIHk6IERvbWFpbiA9IG5ldyBEb21haW4oKSkge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZnJvbVJhZGl1cyhyOiBudW1iZXIpIDogRG9tYWluMiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb21haW4yKERvbWFpbi5mcm9tUmFkaXVzKHIpLCBEb21haW4uZnJvbVJhZGl1cyhyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21Cb3VuZHMoeDA6IG51bWJlciwgeDE6IG51bWJlciwgeTA6IG51bWJlciwgeTE6IG51bWJlcikgOiBEb21haW4yIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvbWFpbjIobmV3IERvbWFpbih4MCwgeDEpLCBuZXcgRG9tYWluKHkwLCB5MSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tSW5jbHVkZShkYXRhOiBWZWN0b3IyQXJyYXkgfCBGbG9hdE1hdHJpeCkgOiBEb21haW4yIHtcclxuICAgICAgICAvLyBub3RlIDogY291bGQgYmUgcXVpY2tlciBieSBnb2luZyB2ZXJib3NlLCB0aGlzIG5vdyBpdGVyYXRlcyBvdmVyIGRhdGEgNCB0aW1lc1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9tYWluMihcclxuICAgICAgICAgICAgRG9tYWluLmZyb21JbmNsdWRlKGRhdGEuZ2V0Q29sdW1uKDApKSxcclxuICAgICAgICAgICAgRG9tYWluLmZyb21JbmNsdWRlKGRhdGEuZ2V0Q29sdW1uKDEpKSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9mZnNldCh4WHlZb2Zmc2V0OiBudW1iZXJbXSkge1xyXG4gICAgICAgIGxldCBvZmYgPSB4WHlZb2Zmc2V0XHJcbiAgICAgICAgaWYgKG9mZi5sZW5ndGggIT0gNCkgdGhyb3cgXCJuZWVkIDQgdmFsdWVzXCI7XHJcblxyXG4gICAgICAgIHRoaXMueC5vZmZzZXQob2ZmWzBdLCBvZmZbMV0pO1xyXG4gICAgICAgIHRoaXMueS5vZmZzZXQob2ZmWzJdLCBvZmZbM10pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGluY2x1ZGVzKHZhbHVlOiBWZWN0b3IyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIG5vdGU6IGluY2x1ZGluZyB0MCwgaW5jbHVkaW5nIHQxXHJcbiAgICAgICAgcmV0dXJuIHRoaXMueC5pbmNsdWRlcyh2YWx1ZS54KSAmJiB0aGlzLnkuaW5jbHVkZXModmFsdWUueSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2l6ZSgpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgLy8gdGhlIHNpemUgb3IgbGVuZ3RoIG9mIHRoaXMgZG9tYWluXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueC5zaXplKCksIHRoaXMueS5zaXplKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG5vcm1hbGl6ZSh2YWx1ZTogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuICAgICAgICAvLyBub3JtYWxpemUgYSBwYXJhbWV0ZXJcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54Lm5vcm1hbGl6ZSh2YWx1ZS54KSwgdGhpcy55Lm5vcm1hbGl6ZSh2YWx1ZS55KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZWxldmF0ZSh0OiBWZWN0b3IyKSA6IFZlY3RvcjIge1xyXG4gICAgICAgIC8vIGVsZXZhdGUgYSBub3JtYWxpemVkIHBhcmFtZXRlciB0byB0aGUgcGFyYW1ldGVyIHNwYWNlIG9mIHRoaXMgZG9tYWluXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueC5lbGV2YXRlKHQueCksIHRoaXMueS5lbGV2YXRlKHQueSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbWFwKHZhbHVlOiBWZWN0b3IyLCBvdGhlcjogRG9tYWluMiA9IG5ldyBEb21haW4yKCkpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgLy8gbm9ybWFsaXplIGEgdmFsdWUsIHRoZW4gZWxldmF0ZSBpdCB0byBhIG5ldyBkb21haW5cclxuICAgICAgICBsZXQgbm9ybSA9IHRoaXMubm9ybWFsaXplKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gb3RoZXIuZWxldmF0ZShub3JtKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29ybmVycygpIDogVmVjdG9yMltdIHtcclxuICAgICAgICAvLyByZW5kZXIgdGhlIGV4dGVuZHMgb2YgdGhpcyBib3VuZGFyeSAvIGRvbWFpblxyXG4gICAgICAgIGxldCBkaW0gPSAyO1xyXG4gICAgICAgIGxldCBjb3JuZXJzID0gMioqZGltO1xyXG4gICAgICAgIGxldCBkYXRhID0gW107XHJcbiAgICAgICAgZm9yKGxldCB4IG9mIFt0aGlzLngudDAsIHRoaXMueC50MV0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IobGV0IHkgb2YgW3RoaXMueS50MCwgdGhpcy55LnQxXSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5wdXNoKG5ldyBWZWN0b3IyKHgseSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICppdGVyKGNvdW50WDogbnVtYmVyLCBjb3VudFk6IG51bWJlcikgOiBHZW5lcmF0b3I8VmVjdG9yMiwgdm9pZCwgdW5rbm93bj4ge1xyXG4gICAgLy8gICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGlzIERvbWFpbiAnY291bnQnIG51bWJlciBvZiB0aW1lcyBcclxuICAgIC8vICAgICBmb3IgKGNvbnN0IHkgaW4gdGhpcy55Lml0ZXIoY291bnRZKSkge1xyXG4gICAgLy8gICAgICAgICBmb3IgKGNvbnN0IHggaW4gdGhpcy54Lml0ZXIoY291bnRYKSkge1xyXG4gICAgLy8gICAgICAgICAgICAgLy8geWllbGQgbmV3IFZlY3RvcjIoeCwgeSk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gKml0ZXJTdGVwKHNpemVYOiBudW1iZXIsIHNpemVZOiBudW1iZXIpIDogR2VuZXJhdG9yPFZlY3RvcjIsIHZvaWQsIHVua25vd24+IHtcclxuICAgIC8vICAgICAvLyBpdGVyYXRlIG92ZXIgdGhpcyBkb21haW4gd2l0aCBhIHN0ZXBzaXplIG9mICdzdGVwJ1xyXG4gICAgLy8gICAgIGZvciAobGV0IHkgaW4gdGhpcy55Lml0ZXJTdGVwKHNpemVZKSkge1xyXG4gICAgLy8gICAgICAgICBmb3IgKGxldCB4IGluIHRoaXMueC5pdGVyU3RlcChzaXplWCkpIHtcclxuICAgIC8vICAgICAgICAgICAgIC8vIHlpZWxkIG5ldyBWZWN0b3IyKHgsIHkpO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfSAgICBcclxuICAgIC8vIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERvbWFpbjMge1xyXG5cclxuICAgIHg6IERvbWFpbjtcclxuICAgIHk6IERvbWFpbjtcclxuICAgIHo6IERvbWFpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih4OiBEb21haW4gPSBuZXcgRG9tYWluKCksIHk6IERvbWFpbiA9IG5ldyBEb21haW4oKSwgejogRG9tYWluID0gbmV3IERvbWFpbigpKSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMueiA9IHo7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21Cb3VuZHMoeDA6IG51bWJlciwgeDE6IG51bWJlciwgeTA6IG51bWJlciwgeTE6IG51bWJlciwgejA6IG51bWJlciwgejE6IG51bWJlcikgOiBEb21haW4zIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvbWFpbjMobmV3IERvbWFpbih4MCwgeDEpLCBuZXcgRG9tYWluKHkwLCB5MSksIG5ldyBEb21haW4oejAsIHoxKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21SYWRpdXMocjogbnVtYmVyKSA6IERvbWFpbjMge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9tYWluMyhEb21haW4uZnJvbVJhZGl1cyhyKSwgRG9tYWluLmZyb21SYWRpdXMociksIERvbWFpbi5mcm9tUmFkaXVzKHIpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZnJvbVJhZGlpKHJ4OiBudW1iZXIsIHJ5OiBudW1iZXIsIHJ6OiBudW1iZXIpIDogRG9tYWluMyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb21haW4zKFxyXG4gICAgICAgICAgICBEb21haW4uZnJvbVJhZGl1cyhyeCksIFxyXG4gICAgICAgICAgICBEb21haW4uZnJvbVJhZGl1cyhyeSksIFxyXG4gICAgICAgICAgICBEb21haW4uZnJvbVJhZGl1cyhyeilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tSW5jbHVkZShkYXRhOiBWZWN0b3IzQXJyYXkpIDogRG9tYWluMyB7XHJcbiAgICAgICAgLy8gbm90ZSA6IGNvdWxkIGJlIHF1aWNrZXIgYnkgZ29pbmcgdmVyYm9zZSwgdGhpcyBub3cgaXRlcmF0ZXMgb3ZlciBkYXRhIDYgdGltZXNcclxuICAgICAgICByZXR1cm4gbmV3IERvbWFpbjMoXHJcbiAgICAgICAgICAgIERvbWFpbi5mcm9tSW5jbHVkZShkYXRhLmdldENvbHVtbigwKSksXHJcbiAgICAgICAgICAgIERvbWFpbi5mcm9tSW5jbHVkZShkYXRhLmdldENvbHVtbigxKSksXHJcbiAgICAgICAgICAgIERvbWFpbi5mcm9tSW5jbHVkZShkYXRhLmdldENvbHVtbigyKSksXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmZzZXQoeFh5WW9mZnNldDogbnVtYmVyW10pIHtcclxuICAgICAgICBsZXQgb2ZmID0geFh5WW9mZnNldFxyXG4gICAgICAgIGlmIChvZmYubGVuZ3RoICE9IDYpIHRocm93IFwibmVlZCA2IHZhbHVlc1wiO1xyXG5cclxuICAgICAgICB0aGlzLngub2Zmc2V0KG9mZlswXSwgb2ZmWzFdKTtcclxuICAgICAgICB0aGlzLnkub2Zmc2V0KG9mZlsyXSwgb2ZmWzNdKTtcclxuICAgICAgICB0aGlzLnoub2Zmc2V0KG9mZls0XSwgb2ZmWzVdKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBpbmNsdWRlcyh2YWx1ZTogVmVjdG9yMykgOiBib29sZWFuIHtcclxuICAgICAgICAvLyBub3RlOiBpbmNsdWRpbmcgdDAsIGluY2x1ZGluZyB0MVxyXG4gICAgICAgIHJldHVybiB0aGlzLnguaW5jbHVkZXModmFsdWUueCkgJiYgdGhpcy55LmluY2x1ZGVzKHZhbHVlLnkpICYmIHRoaXMuei5pbmNsdWRlcyh2YWx1ZS56KTtcclxuICAgIH1cclxuXHJcbiAgICBzaXplKCkgOiBWZWN0b3IzIHtcclxuICAgICAgICAvLyB0aGUgc2l6ZSBvciBsZW5ndGggb2YgdGhpcyBkb21haW5cclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy54LnNpemUoKSwgdGhpcy55LnNpemUoKSwgdGhpcy56LnNpemUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbm9ybWFsaXplKHZhbHVlOiBWZWN0b3IzKSA6IFZlY3RvcjMge1xyXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBhIHBhcmFtZXRlclxyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLngubm9ybWFsaXplKHZhbHVlLngpLCB0aGlzLnkubm9ybWFsaXplKHZhbHVlLnkpLCB0aGlzLnoubm9ybWFsaXplKHZhbHVlLnopKTtcclxuICAgIH1cclxuXHJcbiAgICBlbGV2YXRlKHQ6IFZlY3RvcjMpIDogVmVjdG9yMyB7XHJcbiAgICAgICAgLy8gZWxldmF0ZSBhIG5vcm1hbGl6ZWQgcGFyYW1ldGVyIHRvIHRoZSBwYXJhbWV0ZXIgc3BhY2Ugb2YgdGhpcyBkb21haW5cclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy54LmVsZXZhdGUodC54KSwgdGhpcy55LmVsZXZhdGUodC55KSwgdGhpcy56LmVsZXZhdGUodC56KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtYXAodmFsdWU6IFZlY3RvcjMsIG90aGVyOiBEb21haW4zID0gbmV3IERvbWFpbjMoKSkgOiBWZWN0b3IzIHtcclxuICAgICAgICAvLyBub3JtYWxpemUgYSB2YWx1ZSwgdGhlbiBlbGV2YXRlIGl0IHRvIGEgbmV3IGRvbWFpblxyXG4gICAgICAgIGxldCBub3JtID0gdGhpcy5ub3JtYWxpemUodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBvdGhlci5lbGV2YXRlKG5vcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbWFwQWxsKHZhbHVlczogVmVjdG9yM0FycmF5LCBvdGhlcjogRG9tYWluMyA9IG5ldyBEb21haW4zKCkpIDogVmVjdG9yM0FycmF5IHtcclxuICAgICAgICAvLyBub3JtYWxpemUgYSB2YWx1ZSwgdGhlbiBlbGV2YXRlIGl0IHRvIGEgbmV3IGRvbWFpblxyXG4gICAgICAgIGxldCBuZXdWYWx1ZXMgPSBuZXcgVmVjdG9yM0FycmF5KHZhbHVlcy5jb3VudCgpKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHZhbHVlcy5jb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IG5vcm0gPSB0aGlzLm5vcm1hbGl6ZSh2YWx1ZXMuZ2V0VmVjdG9yKGkpKTtcclxuICAgICAgICAgICAgbmV3VmFsdWVzLnNldFZlY3RvcihpLCBvdGhlci5lbGV2YXRlKG5vcm0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBjb3JuZXJzKG1hdHJpeDogTWF0cml4NCkgOiBWZWN0b3IzW10ge1xyXG4gICAgICAgIC8vIHJlbmRlciB0aGUgZXh0ZW5kcyBvZiB0aGlzIGJvdW5kYXJ5IC8gZG9tYWluXHJcbiAgICAgICAgbGV0IGRpbSA9IDM7XHJcbiAgICAgICAgbGV0IGNvcm5lcnMgPSAyIF4gZGltO1xyXG4gICAgICAgIGxldCBkYXRhID0gW107XHJcbiAgICAgICAgZm9yKGxldCB4IG9mIFt0aGlzLngudDAsIHRoaXMueC50MV0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IobGV0IHkgb2YgW3RoaXMueS50MCwgdGhpcy55LnQxXSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCB6IG9mIFt0aGlzLnoudDAsIHRoaXMuei50MV0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKG1hdHJpeC5tdWx0aXBseVZlY3RvcihuZXcgVmVjdG9yMyh4LHkseikpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/math/domain.ts\n");

/***/ }),

/***/ "./src/math/math.ts":
/*!**************************!*\
  !*** ./src/math/math.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GMath\": () => /* binding */ GMath\n/* harmony export */ });\n// purpose: simple operations with only numbers\r\nclass GMath {\r\n    // make sure 'value' is more than 'lower', and less than 'upper'\r\n    static clamp(value, lower, upper) {\r\n        return Math.min(Math.max(value, lower), upper);\r\n    }\r\n    static fade(t) {\r\n        // Fade function as defined by Ken Perlin.  This eases coordinate values\r\n        // so that they will ease towards integral values.  This ends up smoothing\r\n        // the final output.\r\n        return t * t * t * (t * (t * 6 - 15) + 10); // 6t^5 - 15t^4 + 10t^3\r\n    }\r\n    static lerp(a, b, x) {\r\n        return a + x * (b - a);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21hdGgvbWF0aC50cz8wN2RjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSwrQ0FBK0M7QUFLeEMsTUFBTSxLQUFLO0lBRWQsZ0VBQWdFO0lBQ2hFLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBYSxFQUFFLEtBQWEsRUFBRSxLQUFhO1FBQ3BELE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFTO1FBRXZCLHdFQUF3RTtRQUN4RSwwRUFBMEU7UUFDMUUsb0JBQW9CO1FBQ3BCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQVMsdUJBQXVCO0lBQzVFLENBQUM7SUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsQ0FBUztRQUUxQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDeEIsQ0FBQztDQUdEIiwiZmlsZSI6Ii4vc3JjL21hdGgvbWF0aC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHB1cnBvc2U6IHNpbXBsZSBvcGVyYXRpb25zIHdpdGggb25seSBudW1iZXJzXHJcbiBcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEdNYXRoIHtcclxuICAgIFxyXG4gICAgLy8gbWFrZSBzdXJlICd2YWx1ZScgaXMgbW9yZSB0aGFuICdsb3dlcicsIGFuZCBsZXNzIHRoYW4gJ3VwcGVyJ1xyXG4gICAgc3RhdGljIGNsYW1wKHZhbHVlOiBudW1iZXIsIGxvd2VyOiBudW1iZXIsIHVwcGVyOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIGxvd2VyKSwgdXBwZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmYWRlKHQ6IG51bWJlcikgOiBudW1iZXJcclxuXHR7XHJcblx0XHQvLyBGYWRlIGZ1bmN0aW9uIGFzIGRlZmluZWQgYnkgS2VuIFBlcmxpbi4gIFRoaXMgZWFzZXMgY29vcmRpbmF0ZSB2YWx1ZXNcclxuXHRcdC8vIHNvIHRoYXQgdGhleSB3aWxsIGVhc2UgdG93YXJkcyBpbnRlZ3JhbCB2YWx1ZXMuICBUaGlzIGVuZHMgdXAgc21vb3RoaW5nXHJcblx0XHQvLyB0aGUgZmluYWwgb3V0cHV0LlxyXG5cdFx0cmV0dXJuIHQgKiB0ICogdCAqICh0ICogKHQgKiA2IC0gMTUpICsgMTApOyAgICAgICAgIC8vIDZ0XjUgLSAxNXReNCArIDEwdF4zXHJcblx0fVxyXG5cclxuXHRzdGF0aWMgbGVycChhOiBudW1iZXIsIGI6IG51bWJlciwgeDogbnVtYmVyKSA6IG51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiBhICsgeCAqIChiIC0gYSk7XHJcblx0fVxyXG5cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/math/math.ts\n");

/***/ }),

/***/ "./src/math/matrix.ts":
/*!****************************!*\
  !*** ./src/math/matrix.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Matrix3\": () => /* binding */ Matrix3,\n/* harmony export */   \"Matrix4\": () => /* binding */ Matrix4\n/* harmony export */ });\n/* harmony import */ var _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/float-matrix */ \"./src/data/float-matrix.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vector */ \"./src/math/vector.ts\");\n// matrix\r\n// author: Jos Feenstra\r\n// TODO: FIX MATRIX4 !!!\r\n// NOTE: \r\n\r\n\r\n// 3x3 matrix of floats used for 2d math\r\n// inspired by Gregg Tavares. \r\nclass Matrix3 extends _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix {\r\n    constructor(data = []) {\r\n        super(3, 3, data);\r\n    }\r\n    static newIdentity() {\r\n        return new Matrix3([\r\n            1, 0, 0,\r\n            0, 1, 0,\r\n            0, 0, 1,\r\n        ]);\r\n    }\r\n    static newProjection(width, height) {\r\n        // Note: This matrix flips the Y axis so 0 is at the top.\r\n        return new Matrix3([\r\n            2 / width, 0, 0,\r\n            0, -2 / height, 0,\r\n            -1, 1, 1,\r\n        ]);\r\n    }\r\n    static newTranslation(dx, dy) {\r\n        return new Matrix3([\r\n            1, 0, 0,\r\n            0, 1, 0,\r\n            dx, dy, 1,\r\n        ]);\r\n    }\r\n    // angle in radians\r\n    static newRotation(r) {\r\n        var c = Math.cos(r);\r\n        var s = Math.sin(r);\r\n        return new Matrix3([\r\n            c, -s, 0,\r\n            s, c, 0,\r\n            0, 0, 1,\r\n        ]);\r\n    }\r\n    static newScalar(sx, sy) {\r\n        return new Matrix3([\r\n            sx, 0, 0,\r\n            0, sy, 0,\r\n            0, 0, 1,\r\n        ]);\r\n    }\r\n    toMat4() {\r\n        let d = this.data;\r\n        return new Matrix4([\r\n            d[0], d[1], 0, d[2],\r\n            d[3], d[4], 0, d[5],\r\n            0, 0, 1, 0,\r\n            d[6], d[7], 0, d[8],\r\n        ]);\r\n    }\r\n    project(width, height) {\r\n        return this.multiply(Matrix3.newProjection(width, height));\r\n    }\r\n    translateN(dx, dy) {\r\n        return this.multiply(Matrix3.newTranslation(dx, dy));\r\n    }\r\n    translate(v) {\r\n        return this.multiply(Matrix3.newTranslation(v.x, v.y));\r\n    }\r\n    rotate(r) {\r\n        return this.multiply(Matrix3.newRotation(r));\r\n    }\r\n    scale(sx, sy) {\r\n        return this.multiply(Matrix3.newScalar(sx, sy));\r\n    }\r\n    // multiply two m3's \r\n    multiply(other) {\r\n        let a = this.data;\r\n        let b = other.data;\r\n        var a00 = a[0 * 3 + 0];\r\n        var a01 = a[0 * 3 + 1];\r\n        var a02 = a[0 * 3 + 2];\r\n        var a10 = a[1 * 3 + 0];\r\n        var a11 = a[1 * 3 + 1];\r\n        var a12 = a[1 * 3 + 2];\r\n        var a20 = a[2 * 3 + 0];\r\n        var a21 = a[2 * 3 + 1];\r\n        var a22 = a[2 * 3 + 2];\r\n        var b00 = b[0 * 3 + 0];\r\n        var b01 = b[0 * 3 + 1];\r\n        var b02 = b[0 * 3 + 2];\r\n        var b10 = b[1 * 3 + 0];\r\n        var b11 = b[1 * 3 + 1];\r\n        var b12 = b[1 * 3 + 2];\r\n        var b20 = b[2 * 3 + 0];\r\n        var b21 = b[2 * 3 + 1];\r\n        var b22 = b[2 * 3 + 2];\r\n        return new Matrix3([\r\n            b00 * a00 + b01 * a10 + b02 * a20,\r\n            b00 * a01 + b01 * a11 + b02 * a21,\r\n            b00 * a02 + b01 * a12 + b02 * a22,\r\n            b10 * a00 + b11 * a10 + b12 * a20,\r\n            b10 * a01 + b11 * a11 + b12 * a21,\r\n            b10 * a02 + b11 * a12 + b12 * a22,\r\n            b20 * a00 + b21 * a10 + b22 * a20,\r\n            b20 * a01 + b21 * a11 + b22 * a21,\r\n            b20 * a02 + b21 * a12 + b22 * a22,\r\n        ]);\r\n    }\r\n    // transform a vector. RECYCLE IT\r\n    transformVector(v) {\r\n        let m = this.data;\r\n        let v0 = v.x;\r\n        let v1 = v.y;\r\n        let d = v0 * m[0 * 3 + 2] + v1 * m[1 * 3 + 2] + m[2 * 3 + 2];\r\n        v.x = (v0 * m[0 * 3 + 0] + v1 * m[1 * 3 + 0] + m[2 * 3 + 0]) / d;\r\n        v.y = (v0 * m[0 * 3 + 1] + v1 * m[1 * 3 + 1] + m[2 * 3 + 1]) / d;\r\n        return v;\r\n    }\r\n    // return the inverse of this matrix\r\n    inverse() {\r\n        // ive got no idea what is happening here, \r\n        // but apparantly, this is how you inverse a 3x3 matrix.\r\n        let m = this.data;\r\n        var t00 = m[1 * 3 + 1] * m[2 * 3 + 2] - m[1 * 3 + 2] * m[2 * 3 + 1];\r\n        var t10 = m[0 * 3 + 1] * m[2 * 3 + 2] - m[0 * 3 + 2] * m[2 * 3 + 1];\r\n        var t20 = m[0 * 3 + 1] * m[1 * 3 + 2] - m[0 * 3 + 2] * m[1 * 3 + 1];\r\n        // discriminant\r\n        var d = 1.0 / (m[0 * 3 + 0] * t00 - m[1 * 3 + 0] * t10 + m[2 * 3 + 0] * t20);\r\n        this.setData([\r\n            d * t00, -d * t10, d * t20,\r\n            -d * (m[1 * 3 + 0] * m[2 * 3 + 2] - m[1 * 3 + 2] * m[2 * 3 + 0]),\r\n            d * (m[0 * 3 + 0] * m[2 * 3 + 2] - m[0 * 3 + 2] * m[2 * 3 + 0]),\r\n            -d * (m[0 * 3 + 0] * m[1 * 3 + 2] - m[0 * 3 + 2] * m[1 * 3 + 0]),\r\n            d * (m[1 * 3 + 0] * m[2 * 3 + 1] - m[1 * 3 + 1] * m[2 * 3 + 0]),\r\n            -d * (m[0 * 3 + 0] * m[2 * 3 + 1] - m[0 * 3 + 1] * m[2 * 3 + 0]),\r\n            d * (m[0 * 3 + 0] * m[1 * 3 + 1] - m[0 * 3 + 1] * m[1 * 3 + 0]),\r\n        ]);\r\n        return this;\r\n    }\r\n}\r\n// 4x4 matrix of floats used for 3d math\r\n// inspired by Gregg Tavares. \r\nclass Matrix4 extends _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix {\r\n    constructor(data = []) {\r\n        super(4, 4, data);\r\n    }\r\n    static newIdentity() {\r\n        return new Matrix4([\r\n            1, 0, 0, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n    static newCopy(other) {\r\n        let result = new Matrix4();\r\n        for (let i = 0; i < 16; i++) {\r\n            result.data[i] = other.data[i];\r\n        }\r\n        return result;\r\n    }\r\n    clone() {\r\n        return Matrix4.newCopy(this);\r\n    }\r\n    multiplied(other) {\r\n        // NOTE: i swapped a and b, this makes more sense to me, but i could be wrong about it...\r\n        const a = other.data;\r\n        const b = this.data;\r\n        var b00 = b[0 * 4 + 0];\r\n        var b01 = b[0 * 4 + 1];\r\n        var b02 = b[0 * 4 + 2];\r\n        var b03 = b[0 * 4 + 3];\r\n        var b10 = b[1 * 4 + 0];\r\n        var b11 = b[1 * 4 + 1];\r\n        var b12 = b[1 * 4 + 2];\r\n        var b13 = b[1 * 4 + 3];\r\n        var b20 = b[2 * 4 + 0];\r\n        var b21 = b[2 * 4 + 1];\r\n        var b22 = b[2 * 4 + 2];\r\n        var b23 = b[2 * 4 + 3];\r\n        var b30 = b[3 * 4 + 0];\r\n        var b31 = b[3 * 4 + 1];\r\n        var b32 = b[3 * 4 + 2];\r\n        var b33 = b[3 * 4 + 3];\r\n        var a00 = a[0 * 4 + 0];\r\n        var a01 = a[0 * 4 + 1];\r\n        var a02 = a[0 * 4 + 2];\r\n        var a03 = a[0 * 4 + 3];\r\n        var a10 = a[1 * 4 + 0];\r\n        var a11 = a[1 * 4 + 1];\r\n        var a12 = a[1 * 4 + 2];\r\n        var a13 = a[1 * 4 + 3];\r\n        var a20 = a[2 * 4 + 0];\r\n        var a21 = a[2 * 4 + 1];\r\n        var a22 = a[2 * 4 + 2];\r\n        var a23 = a[2 * 4 + 3];\r\n        var a30 = a[3 * 4 + 0];\r\n        var a31 = a[3 * 4 + 1];\r\n        var a32 = a[3 * 4 + 2];\r\n        var a33 = a[3 * 4 + 3];\r\n        return new Matrix4([\r\n            b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\r\n            b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\r\n            b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\r\n            b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\r\n            b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\r\n            b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\r\n            b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\r\n            b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\r\n            b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\r\n            b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\r\n            b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\r\n            b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\r\n            b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\r\n            b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\r\n            b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\r\n            b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\r\n        ]);\r\n    }\r\n    multiply(other) {\r\n        this.data = this.multiplied(other).data;\r\n        return this;\r\n    }\r\n    transpose() {\r\n        let matrix = new Matrix4();\r\n        let res = matrix.data;\r\n        let old = this.data;\r\n        res[0] = old[0];\r\n        res[1] = old[4];\r\n        res[2] = old[8];\r\n        res[3] = old[12];\r\n        res[4] = old[1];\r\n        res[5] = old[5];\r\n        res[6] = old[9];\r\n        res[7] = old[13];\r\n        res[8] = old[2];\r\n        res[9] = old[6];\r\n        res[10] = old[10];\r\n        res[11] = old[14];\r\n        res[12] = old[3];\r\n        res[13] = old[7];\r\n        res[14] = old[11];\r\n        res[15] = old[15];\r\n        return matrix;\r\n    }\r\n    static newLookAt(cameraPosition, target, up) {\r\n        let matrix = new Matrix4();\r\n        let data = matrix.data;\r\n        let zAxis = cameraPosition.clone().sub(target).normalize();\r\n        let xAxis = up.clone().cross(up).normalize();\r\n        let yAxis = zAxis.clone().cross(xAxis).normalize();\r\n        data[0] = xAxis.x;\r\n        data[1] = xAxis.y;\r\n        data[2] = xAxis.z;\r\n        data[3] = 0;\r\n        data[4] = yAxis.x;\r\n        data[5] = yAxis.y;\r\n        data[6] = yAxis.z;\r\n        data[7] = 0;\r\n        data[8] = zAxis.x;\r\n        data[9] = zAxis.y;\r\n        data[10] = zAxis.z;\r\n        data[11] = 0;\r\n        data[12] = cameraPosition.x;\r\n        data[13] = cameraPosition.y;\r\n        data[14] = cameraPosition.z;\r\n        data[15] = 1;\r\n        return matrix;\r\n    }\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the angular height\r\n     * of the frustum, the aspect ratio, and the near and far clipping planes.  The\r\n     * arguments define a frustum extending in the negative z direction.  The given\r\n     * angle is the vertical angle of the frustum, and the horizontal angle is\r\n     * determined to produce the given aspect ratio.  The arguments near and far are\r\n     * the distances to the near and far clipping planes.  Note that near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  The matrix generated sends the viewing frustum to the unit box.\r\n     * We assume a unit box extending from -1 to 1 in the x and y dimensions and\r\n     * from -1 to 1 in the z dimension.\r\n     * @param {number} fieldOfViewInRadians field of view in y axis.\r\n     * @param {number} aspect aspect of viewport (width / height)\r\n     * @param {number} near near Z clipping plane\r\n     * @param {number} far far Z clipping plane\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    static newPerspective(fov, aspect, near, far) {\r\n        let matrix = new Matrix4();\r\n        let data = matrix.data;\r\n        var f = Math.tan(Math.PI * 0.5 - 0.5 * fov);\r\n        var rangeInv = 1.0 / (near - far);\r\n        data[0] = f / aspect;\r\n        data[1] = 0;\r\n        data[2] = 0;\r\n        data[3] = 0;\r\n        data[4] = 0;\r\n        data[5] = f;\r\n        data[6] = 0;\r\n        data[7] = 0;\r\n        data[8] = 0;\r\n        data[9] = 0;\r\n        data[10] = (near + far) * rangeInv;\r\n        data[11] = -1;\r\n        data[12] = 0;\r\n        data[13] = 0;\r\n        data[14] = near * far * rangeInv * 2;\r\n        data[15] = 0;\r\n        return matrix;\r\n    }\r\n    /**\r\n     * Computes a 4-by-4 orthographic projection matrix given the coordinates of the\r\n     * planes defining the axis-aligned, box-shaped viewing volume.  The matrix\r\n     * generated sends that box to the unit box.  Note that although left and right\r\n     * are x coordinates and bottom and top are y coordinates, near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  We assume a unit box extending from -1 to 1 in the x and y\r\n     * dimensions and from -1 to 1 in the z dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    static newOrthographic(left, right, bottom, top, near, far) {\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        dst[0] = 2 / (right - left);\r\n        dst[1] = 0;\r\n        dst[2] = 0;\r\n        dst[3] = 0;\r\n        dst[4] = 0;\r\n        dst[5] = 2 / (top - bottom);\r\n        dst[6] = 0;\r\n        dst[7] = 0;\r\n        dst[8] = 0;\r\n        dst[9] = 0;\r\n        dst[10] = 2 / (near - far);\r\n        dst[11] = 0;\r\n        dst[12] = (left + right) / (left - right);\r\n        dst[13] = (bottom + top) / (bottom - top);\r\n        dst[14] = (near + far) / (near - far);\r\n        dst[15] = 1;\r\n        return matrix;\r\n    }\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the left, right,\r\n     * top, bottom, near and far clipping planes. The arguments define a frustum\r\n     * extending in the negative z direction. The arguments near and far are the\r\n     * distances to the near and far clipping planes. Note that near and far are not\r\n     * z coordinates, but rather they are distances along the negative z-axis. The\r\n     * matrix generated sends the viewing frustum to the unit box. We assume a unit\r\n     * box extending from -1 to 1 in the x and y dimensions and from -1 to 1 in the z\r\n     * dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    static newFrustum(left, right, bottom, top, near, far) {\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        var dx = right - left;\r\n        var dy = top - bottom;\r\n        var dz = far - near;\r\n        dst[0] = 2 * near / dx;\r\n        dst[1] = 0;\r\n        dst[2] = 0;\r\n        dst[3] = 0;\r\n        dst[4] = 0;\r\n        dst[5] = 2 * near / dy;\r\n        dst[6] = 0;\r\n        dst[7] = 0;\r\n        dst[8] = (left + right) / dx;\r\n        dst[9] = (top + bottom) / dy;\r\n        dst[10] = -(far + near) / dz;\r\n        dst[11] = -1;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = -2 * near * far / dz;\r\n        dst[15] = 0;\r\n        return matrix;\r\n    }\r\n    static newTranslation(tx, ty, tz) {\r\n        return new Matrix4([\r\n            1, 0, 0, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 1, 0,\r\n            tx, ty, tz, 1\r\n        ]);\r\n    }\r\n    static newXRotation(angleInRadians) {\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        return new Matrix4([\r\n            1, 0, 0, 0,\r\n            0, c, -s, 0,\r\n            0, s, c, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n    static newYRotation(angleInRadians) {\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        return new Matrix4([\r\n            c, 0, s, 0,\r\n            0, 1, 0, 0,\r\n            -s, 0, c, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n    static newZRotation(angleInRadians) {\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        dst[0] = c;\r\n        dst[1] = s;\r\n        dst[2] = 0;\r\n        dst[3] = 0;\r\n        dst[4] = -s;\r\n        dst[5] = c;\r\n        dst[6] = 0;\r\n        dst[7] = 0;\r\n        dst[8] = 0;\r\n        dst[9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n        return matrix;\r\n    }\r\n    /**\r\n     * Makes an rotation matrix around an arbitrary axis\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    static newAxisRotation(axis, angleInRadians) {\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        let x = axis.x;\r\n        let y = axis.y;\r\n        let z = axis.z;\r\n        let n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        let xx = x * x;\r\n        let yy = y * y;\r\n        let zz = z * z;\r\n        let c = Math.cos(angleInRadians);\r\n        let s = Math.sin(angleInRadians);\r\n        let oneMinusCosine = 1 - c;\r\n        dst[0] = xx + (1 - xx) * c;\r\n        dst[1] = x * y * oneMinusCosine + z * s;\r\n        dst[2] = x * z * oneMinusCosine - y * s;\r\n        dst[3] = 0;\r\n        dst[4] = x * y * oneMinusCosine - z * s;\r\n        dst[5] = yy + (1 - yy) * c;\r\n        dst[6] = y * z * oneMinusCosine + x * s;\r\n        dst[7] = 0;\r\n        dst[8] = x * z * oneMinusCosine + y * s;\r\n        dst[9] = y * z * oneMinusCosine - x * s;\r\n        dst[10] = zz + (1 - zz) * c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n        return matrix;\r\n    }\r\n    /**\r\n     * Multiply by an axis rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    axisRotate(axis, angleInRadians) {\r\n        // This is the optimized version of\r\n        // return multiply(m, axisRotation(axis, angleInRadians), dst);\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        let m = this.data;\r\n        var x = axis.x;\r\n        var y = axis.y;\r\n        var z = axis.z;\r\n        var n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        var xx = x * x;\r\n        var yy = y * y;\r\n        var zz = z * z;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        var oneMinusCosine = 1 - c;\r\n        var r00 = xx + (1 - xx) * c;\r\n        var r01 = x * y * oneMinusCosine + z * s;\r\n        var r02 = x * z * oneMinusCosine - y * s;\r\n        var r10 = x * y * oneMinusCosine - z * s;\r\n        var r11 = yy + (1 - yy) * c;\r\n        var r12 = y * z * oneMinusCosine + x * s;\r\n        var r20 = x * z * oneMinusCosine + y * s;\r\n        var r21 = y * z * oneMinusCosine - x * s;\r\n        var r22 = zz + (1 - zz) * c;\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[4];\r\n        var m11 = m[5];\r\n        var m12 = m[6];\r\n        var m13 = m[7];\r\n        var m20 = m[8];\r\n        var m21 = m[9];\r\n        var m22 = m[10];\r\n        var m23 = m[11];\r\n        dst[0] = r00 * m00 + r01 * m10 + r02 * m20;\r\n        dst[1] = r00 * m01 + r01 * m11 + r02 * m21;\r\n        dst[2] = r00 * m02 + r01 * m12 + r02 * m22;\r\n        dst[3] = r00 * m03 + r01 * m13 + r02 * m23;\r\n        dst[4] = r10 * m00 + r11 * m10 + r12 * m20;\r\n        dst[5] = r10 * m01 + r11 * m11 + r12 * m21;\r\n        dst[6] = r10 * m02 + r11 * m12 + r12 * m22;\r\n        dst[7] = r10 * m03 + r11 * m13 + r12 * m23;\r\n        dst[8] = r20 * m00 + r21 * m10 + r22 * m20;\r\n        dst[9] = r20 * m01 + r21 * m11 + r22 * m21;\r\n        dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\r\n        dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n        return matrix;\r\n    }\r\n    // make a scaling matrix \r\n    static newScaler(sx, sy, sz) {\r\n        return new Matrix4([\r\n            sx, 0, 0, 0,\r\n            0, sy, 0, 0,\r\n            0, 0, sz, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n    }\r\n    /**\r\n     * Multiply by a scaling matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} sx x scale.\r\n     * @param {number} sy y scale.\r\n     * @param {number} sz z scale.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    scale(sx, sy, sz) {\r\n        // This is the optimized version of\r\n        // return multiply(m, scaling(sx, sy, sz), dst);\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        let m = this.data;\r\n        dst[0] = sx * m[0 * 4 + 0];\r\n        dst[1] = sx * m[0 * 4 + 1];\r\n        dst[2] = sx * m[0 * 4 + 2];\r\n        dst[3] = sx * m[0 * 4 + 3];\r\n        dst[4] = sy * m[1 * 4 + 0];\r\n        dst[5] = sy * m[1 * 4 + 1];\r\n        dst[6] = sy * m[1 * 4 + 2];\r\n        dst[7] = sy * m[1 * 4 + 3];\r\n        dst[8] = sz * m[2 * 4 + 0];\r\n        dst[9] = sz * m[2 * 4 + 1];\r\n        dst[10] = sz * m[2 * 4 + 2];\r\n        dst[11] = sz * m[2 * 4 + 3];\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n        return matrix;\r\n    }\r\n    /**\r\n     * creates a matrix from translation, quaternion, scale\r\n     * @param {Number[]} translation [x, y, z] translation\r\n     * @param {Number[]} quaternion [x, y, z, z] quaternion rotation\r\n     * @param {Number[]} scale [x, y, z] scale\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    newCompose(translation, quaternion, scale) {\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        const x = quaternion.x;\r\n        const y = quaternion.y;\r\n        const z = quaternion.z;\r\n        const w = quaternion.w;\r\n        const x2 = x + x;\r\n        const y2 = y + y;\r\n        const z2 = z + z;\r\n        const xx = x * x2;\r\n        const xy = x * y2;\r\n        const xz = x * z2;\r\n        const yy = y * y2;\r\n        const yz = y * z2;\r\n        const zz = z * z2;\r\n        const wx = w * x2;\r\n        const wy = w * y2;\r\n        const wz = w * z2;\r\n        const sx = scale.x;\r\n        const sy = scale.y;\r\n        const sz = scale.z;\r\n        dst[0] = (1 - (yy + zz)) * sx;\r\n        dst[1] = (xy + wz) * sx;\r\n        dst[2] = (xz - wy) * sx;\r\n        dst[3] = 0;\r\n        dst[4] = (xy - wz) * sy;\r\n        dst[5] = (1 - (xx + zz)) * sy;\r\n        dst[6] = (yz + wx) * sy;\r\n        dst[7] = 0;\r\n        dst[8] = (xz + wy) * sz;\r\n        dst[9] = (yz - wx) * sz;\r\n        dst[10] = (1 - (xx + yy)) * sz;\r\n        dst[11] = 0;\r\n        dst[12] = translation.x;\r\n        dst[13] = translation.y;\r\n        dst[14] = translation.z;\r\n        dst[15] = 1;\r\n        return matrix;\r\n    }\r\n    // quatFromRotationMatrix() {\r\n    //     // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n    //     // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n    //     const m11 = m[0];\r\n    //     const m12 = m[4];\r\n    //     const m13 = m[8];\r\n    //     const m21 = m[1];\r\n    //     const m22 = m[5];\r\n    //     const m23 = m[9];\r\n    //     const m31 = m[2];\r\n    //     const m32 = m[6];\r\n    //     const m33 = m[10];\r\n    //     const trace = m11 + m22 + m33;\r\n    //     if (trace > 0) {\r\n    //         const s = 0.5 / Math.sqrt(trace + 1);\r\n    //         dst[3] = 0.25 / s;\r\n    //         dst[0] = (m32 - m23) * s;\r\n    //         dst[1] = (m13 - m31) * s;\r\n    //         dst[2] = (m21 - m12) * s;\r\n    //     } else if (m11 > m22 && m11 > m33) {\r\n    //         const s = 2 * Math.sqrt(1 + m11 - m22 - m33);\r\n    //         dst[3] = (m32 - m23) / s;\r\n    //         dst[0] = 0.25 * s;\r\n    //         dst[1] = (m12 + m21) / s;\r\n    //         dst[2] = (m13 + m31) / s;\r\n    //     } else if (m22 > m33) {\r\n    //         const s = 2 * Math.sqrt(1 + m22 - m11 - m33);\r\n    //         dst[3] = (m13 - m31) / s;\r\n    //         dst[0] = (m12 + m21) / s;\r\n    //         dst[1] = 0.25 * s;\r\n    //         dst[2] = (m23 + m32) / s;\r\n    //     } else {\r\n    //         const s = 2 * Math.sqrt(1 + m33 - m11 - m22);\r\n    //         dst[3] = (m21 - m12) / s;\r\n    //         dst[0] = (m13 + m31) / s;\r\n    //         dst[1] = (m23 + m32) / s;\r\n    //         dst[2] = 0.25 * s;\r\n    //     }\r\n    // }\r\n    // decompose(mat, translation, quaternion, scale) {\r\n    //     let sx = m4.length(mat.slice(0, 3));\r\n    //     const sy = m4.length(mat.slice(4, 7));\r\n    //     const sz = m4.length(mat.slice(8, 11));\r\n    //     // if determinate is negative, we need to invert one scale\r\n    //     const det = determinate(mat);\r\n    //     if (det < 0) {\r\n    //         sx = -sx;\r\n    //     }\r\n    //     translation[0] = mat[12];\r\n    //     translation[1] = mat[13];\r\n    //     translation[2] = mat[14];\r\n    //     // scale the rotation part\r\n    //     const matrix = m4.copy(mat);\r\n    //     const invSX = 1 / sx;\r\n    //     const invSY = 1 / sy;\r\n    //     const invSZ = 1 / sz;\r\n    //     matrix[0] *= invSX;\r\n    //     matrix[1] *= invSX;\r\n    //     matrix[2] *= invSX;\r\n    //     matrix[4] *= invSY;\r\n    //     matrix[5] *= invSY;\r\n    //     matrix[6] *= invSY;\r\n    //     matrix[8] *= invSZ;\r\n    //     matrix[9] *= invSZ;\r\n    //     matrix[10] *= invSZ;\r\n    //     quatFromRotationMatrix(matrix, quaternion);\r\n    //     scale[0] = sx;\r\n    //     scale[1] = sy;\r\n    //     scale[2] = sz;\r\n    // }\r\n    determinate() {\r\n        let m = this.data;\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0 = m22 * m33;\r\n        var tmp_1 = m32 * m23;\r\n        var tmp_2 = m12 * m33;\r\n        var tmp_3 = m32 * m13;\r\n        var tmp_4 = m12 * m23;\r\n        var tmp_5 = m22 * m13;\r\n        var tmp_6 = m02 * m33;\r\n        var tmp_7 = m32 * m03;\r\n        var tmp_8 = m02 * m23;\r\n        var tmp_9 = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n        return 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n    }\r\n    inverse() {\r\n        let matrix = new Matrix4();\r\n        let dst = matrix.data;\r\n        let m = this.data;\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0 = m22 * m33;\r\n        var tmp_1 = m32 * m23;\r\n        var tmp_2 = m12 * m33;\r\n        var tmp_3 = m32 * m13;\r\n        var tmp_4 = m12 * m23;\r\n        var tmp_5 = m22 * m13;\r\n        var tmp_6 = m02 * m33;\r\n        var tmp_7 = m32 * m03;\r\n        var tmp_8 = m02 * m23;\r\n        var tmp_9 = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n        var tmp_12 = m20 * m31;\r\n        var tmp_13 = m30 * m21;\r\n        var tmp_14 = m10 * m31;\r\n        var tmp_15 = m30 * m11;\r\n        var tmp_16 = m10 * m21;\r\n        var tmp_17 = m20 * m11;\r\n        var tmp_18 = m00 * m31;\r\n        var tmp_19 = m30 * m01;\r\n        var tmp_20 = m00 * m21;\r\n        var tmp_21 = m20 * m01;\r\n        var tmp_22 = m00 * m11;\r\n        var tmp_23 = m10 * m01;\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n        var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n        dst[0] = d * t0;\r\n        dst[1] = d * t1;\r\n        dst[2] = d * t2;\r\n        dst[3] = d * t3;\r\n        dst[4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\r\n            (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\r\n        dst[5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\r\n            (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\r\n        dst[6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\r\n            (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\r\n        dst[7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\r\n            (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\r\n        dst[8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\r\n            (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\r\n        dst[9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\r\n            (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\r\n        dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\r\n            (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\r\n        dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\r\n            (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\r\n        dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\r\n            (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\r\n        dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\r\n            (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\r\n        dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\r\n            (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\r\n        dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\r\n            (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\r\n        return matrix;\r\n    }\r\n    multiplyVector(v) {\r\n        let data = new Array(3);\r\n        for (var i = 0; i < 3; ++i) {\r\n            data[i] = 0.0;\r\n            for (var j = 0; j < 4; ++j) {\r\n                data[i] += v.item(j) * this.get(j, i);\r\n            }\r\n        }\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_1__.Vector3(data[0], data[1], data[2]);\r\n    }\r\n    multiplyVectors(other) {\r\n        // dumb way\r\n        for (let i = 0; i < this.count(); i++) {\r\n            let vec = other.getVector(i);\r\n            vec = this.multiplyVector(vec);\r\n            other.setVector(i, vec);\r\n        }\r\n        return other;\r\n        // smart way\r\n        // let matrix = new Vector3Array(other.count());\r\n        // // for every row\r\n        // for (var r = 0; r < other.count(); r++) {\r\n        //     // for every item in row\r\n        //     for (var c = 0; c < 3; ++c) {\r\n        //         let item = 0.0;\r\n        //         for (var j = 0; j < 4; ++j) {\r\n        //             item += other.get(r, c) * this.get(j, c);\r\n        //         }\r\n        //         matrix.set(r, c, item);\r\n        //     }\r\n        // }\r\n        // other.data = matrix.data;\r\n        return other;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21hdGgvbWF0cml4LnRzPzVhMzgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLFNBQVM7QUFDVCx1QkFBdUI7QUFDdkIsd0JBQXdCO0FBQ3hCLFNBQVM7QUFJMEM7QUFFUDtBQUc1Qyx3Q0FBd0M7QUFDeEMsOEJBQThCO0FBQ3ZCLE1BQU0sT0FBUSxTQUFRLDJEQUFXO0lBRXBDLFlBQVksT0FBaUIsRUFBRTtRQUMzQixLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRUQsTUFBTSxDQUFDLFdBQVc7UUFDZCxPQUFPLElBQUksT0FBTyxDQUFDO1lBQ2YsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ1AsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ1AsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1NBQ1YsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBYSxFQUFFLE1BQWM7UUFDOUMseURBQXlEO1FBQ3pELE9BQU8sSUFBSSxPQUFPLENBQUM7WUFDZixDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ2YsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDO1lBQ2pCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1NBQ1gsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBVSxFQUFFLEVBQVU7UUFDeEMsT0FBTyxJQUFJLE9BQU8sQ0FBQztZQUNmLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNQLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNQLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQztTQUNaLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxtQkFBbUI7SUFDbkIsTUFBTSxDQUFDLFdB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Q0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxH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QUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRXBFLGVBQWU7UUFDZixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWixDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsR0FBRztZQUMzQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9ELENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0QsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDaEUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvRCxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUMvRCxDQUFDLENBQUM7UUFDSCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0NBQ0o7QUFFRCx3Q0FBd0M7QUFDeEMsOEJBQThCO0FBQ3ZCLE1BQU0sT0FBUSxTQUFRLDJEQUFXO0lBRXBDLFlBQVksT0FBaUIsRUFBRTtRQUMzQixLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRUQsTUFBTSxDQUFDLFdBQVc7UUFDZCxPQUFPLElBQUksT0FBTyxDQUFDO1lBQ2YsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztZQUNQLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7WUFDUCxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1lBQ1AsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztTQUNWLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQWM7UUFFekIsSUFBSSxNQUFNLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUMzQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUM1QjtZQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNsQztRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFRCxLQUFLO1FBQ0QsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxVQUFVLENBQUMsS0FBYztRQUVyQix5RkFBeUY7UUFDekYsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztRQUNyQixNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBRXBCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRXZCLE9BQU8sSUFBSSxPQUFPLENBQUM7WUFDZixHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztZQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztTQUNoRCxDQUFDLENBQUM7SUFDUCxDQUFDO0lBR0QsUUFBUSxDQUFDLEtBQWM7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQztRQUN4QyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBR0QsU0FBUztRQUNMLElBQUksTUFBTSxHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7UUFFM0IsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUN0QixJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBRXBCLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pCLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbEIsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pCLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsQixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pCLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsQixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xCLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xCLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFbEIsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVELE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBdUIsRUFBRSxNQUFlLEVBQUUsRUFBVztRQUVsRSxJQUFJLE1BQU0sR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQzNCLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUcsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUMzRCxJQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzdDLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFFbkQsSUFBSSxDQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNiLElBQUksQ0FBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBRSxDQUFDLENBQUMsR0FBRyxDQUFD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LENBQUMsY0FBYyxDQUFDLENBQUM7UUFDakMsSUFBSSxjQUFjLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUUzQixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxjQUFjLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QyxHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxjQUFjLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QyxHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1osR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsY0FBYyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekMsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUIsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsY0FBYyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekMsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNaLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLGNBQWMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLGNBQWMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FB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QUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRWhCLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUM1QyxHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDNUMsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQzVDLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUM1QyxHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDNUMsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFD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Q0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM1QixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzVCLEdBQUcsQ0FBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUIsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM1QixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzVCLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUU1QixJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUU7WUFDWCxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2hCLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDaEIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNoQixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ25CO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCxVQUFVLENBQUMsV0FBb0IsRUFBRSxVQUFzQixFQUFFLEtBQWM7UUFFbkUsSUFBSSxNQUFNLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUMzQixJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBRXRCLE1BQU0sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDdkIsTUFBTSxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQztRQUN2QixNQUFNLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLE1BQU0sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFFdkIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQixNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFakIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNsQixNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFbEIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNsQixNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFbEIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNsQixNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFbEIsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNuQixNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25CLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFFbkIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzlCLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDeEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN4QixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRVgsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN4QixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDOUIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN4QixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRVgsR0FBRyxDQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN6QixHQUFHLENBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMvQixHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRVosR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDeEIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDeEIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDeEIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVaLE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFRCw2QkFBNkI7SUFDN0IseUdBQXlHO0lBRXpHLDhFQUE4RTtJQUM5RSx3QkFBd0I7SUFDeEIsd0JBQXdCO0lBQ3hCLHdCQUF3QjtJQUN4Qix3QkFBd0I7SUFDeEIsd0JBQXdCO0lBQ3hCLHdCQUF3QjtJQUN4Qix3QkFBd0I7SUFDeEIsd0JBQXdCO0lBQ3hCLHlCQUF5QjtJQUV6QixxQ0FBcUM7SUFFckMsdUJBQXVCO0lBQ3ZCLGdEQUFnRDtJQUNoRCw2QkFBNkI7SUFDN0Isb0NBQW9DO0lBQ3BDLG9DQUFvQztJQUNwQyxvQ0FBb0M7SUFDcEMsMkNBQTJDO0lBQzNDLHdEQUF3RDtJQUN4RCxvQ0FBb0M7SUFDcEMsNkJBQTZCO0lBQzdCLG9DQUFvQztJQUNwQyxvQ0FBb0M7SUFDcEMsOEJBQThCO0lBQzlCLHdEQUF3RDtJQUN4RCxvQ0FBb0M7SUFDcEMsb0NBQW9DO0lBQ3BDLDZCQUE2QjtJQUM3QixvQ0FBb0M7SUFDcEMsZUFBZTtJQUNmLHdEQUF3RDtJQUN4RCxvQ0FBb0M7SUFDcEMsb0NBQW9DO0lBQ3BDLG9DQUFvQztJQUNwQyw2QkFBNkI7SUFDN0IsUUFBUTtJQUNSLElBQUk7SUFFSixtREFBbUQ7SUFDbkQsMkNBQTJDO0lBQzNDLDZDQUE2QztJQUM3Qyw4Q0FBOEM7SUFFOUMsaUVBQWlFO0lBQ2pFLG9DQUFvQztJQUNwQyxxQkFBcUI7SUFDckIsb0JBQW9CO0lBQ3BCLFFBQVE7SUFFUixnQ0FBZ0M7SUFDaEMsZ0NBQWdDO0lBQ2hDLGdDQUFnQztJQUVoQyxpQ0FBaUM7SUFDakMsbUNBQW1DO0lBRW5DLDRCQUE0QjtJQUM1Qiw0QkFBNEI7SUFDNUIsNEJBQTRCO0lBRTVCLDBCQUEwQjtJQUMxQiwwQkFBMEI7SUFDMUIsMEJBQTBCO0lBRTFCLDBCQUEwQjtJQUMxQiwwQkFBMEI7SUFDMUIsMEJBQTBCO0lBRTFCLDBCQUEwQjtJQUMxQiwwQkFBMEI7SUFDMUIsMkJBQTJCO0lBRTNCLGtEQUFrRDtJQUVsRCxxQkFBcUI7SUFDckIscUJBQXFCO0lBQ3JCLHFCQUFxQjtJQUNyQixJQUFJO0lBRUosV0FBVztRQUVQLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFbEIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLEtBQUssR0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLEtBQUssR0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLEtBQUssR0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFFdkIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQztZQUM5QyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDOUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQztZQUM5QyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDOUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQztZQUMvQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDL0MsSUFBSSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQztZQUMvQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFFL0MsT0FBTyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVELE9BQU87UUFFSCxJQUFJLE1BQU0sR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQzNCLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDdEIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUVsQixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFJLEtBQUssR0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLEtBQUssR0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLEtBQUssR0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLEtBQUssR0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2QixJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdkIsSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUV2QixJQUFJLEVBQUUsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDO1lBQzlDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztRQUM5QyxJQUFJLEVBQUUsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDO1lBQzlDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztRQUM5QyxJQUFJLEVBQUUsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDO1lBQy9DLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztRQUMvQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDO1lBQy9DLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztRQUUvQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFFMUQsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDaEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDaEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDaEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDaEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUM7WUFDL0MsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkQsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUM7WUFDL0MsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkQsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDaEQsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEQsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDaEQsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEQsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbEQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbEQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbkQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbkQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbkQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbkQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbkQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbkQsQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFFdEQsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVELGNBQWMsQ0FBQyxDQUFVO1FBRXJCLElBQUksSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7WUFDeEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUNkLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7Z0JBQ3hCLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ3pDO1NBQ0o7UUFDRCxPQUFPLElBQUksNENBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFRCxlQUFlLENBQUMsS0FBbUI7UUFFL0IsV0FBVztRQUNYLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QixHQUFHLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMvQixLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUMzQjtRQUNELE9BQU8sS0FBSyxDQUFDO1FBRWIsWUFBWTtRQUNaLGdEQUFnRDtRQUNoRCxtQkFBbUI7UUFDbkIsNENBQTRDO1FBRTVDLCtCQUErQjtRQUMvQixvQ0FBb0M7UUFFcEMsMEJBQTBCO1FBQzFCLHdDQUF3QztRQUN4Qyx3REFBd0Q7UUFDeEQsWUFBWTtRQUNaLGtDQUFrQztRQUNsQyxRQUFRO1FBQ1IsSUFBSTtRQUVKLDRCQUE0QjtRQUM1QixPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0NBaUZKIiwiZmlsZSI6Ii4vc3JjL21hdGgvbWF0cml4LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbWF0cml4XHJcbi8vIGF1dGhvcjogSm9zIEZlZW5zdHJhXHJcbi8vIFRPRE86IEZJWCBNQVRSSVg0ICEhIVxyXG4vLyBOT1RFOiBcclxuXHJcbmltcG9ydCB7IGFycmF5QnVmZmVyVG9CYXNlNjRTdHJpbmcgfSBmcm9tIFwiQHRlbnNvcmZsb3cvdGZqcy1jb3JlL2Rpc3QvaW8vaW9fdXRpbHNcIjtcclxuaW1wb3J0IHsgVmVjdG9yM0FycmF5IH0gZnJvbSBcIi4uL2RhdGEvdmVjdG9yLWFycmF5XCI7XHJcbmltcG9ydCB7IEZsb2F0TWF0cml4IH0gZnJvbSBcIi4uL2RhdGEvZmxvYXQtbWF0cml4XCI7XHJcbmltcG9ydCB7IFF1YXRlcm5pb24gfSBmcm9tIFwiLi9xdWF0ZXJuaW9uXCI7XHJcbmltcG9ydCB7IFZlY3RvcjIsIFZlY3RvcjMgfSBmcm9tIFwiLi92ZWN0b3JcIjtcclxuXHJcblxyXG4vLyAzeDMgbWF0cml4IG9mIGZsb2F0cyB1c2VkIGZvciAyZCBtYXRoXHJcbi8vIGluc3BpcmVkIGJ5IEdyZWdnIFRhdmFyZXMuIFxyXG5leHBvcnQgY2xhc3MgTWF0cml4MyBleHRlbmRzIEZsb2F0TWF0cml4IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBudW1iZXJbXSA9IFtdKSB7XHJcbiAgICAgICAgc3VwZXIoMywgMywgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG5ld0lkZW50aXR5KCkgOiBNYXRyaXgzIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDMoW1xyXG4gICAgICAgICAgICAxLCAwLCAwLFxyXG4gICAgICAgICAgICAwLCAxLCAwLCBcclxuICAgICAgICAgICAgMCwgMCwgMSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbmV3UHJvamVjdGlvbih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgOiBNYXRyaXgzIHtcclxuICAgICAgICAvLyBOb3RlOiBUaGlzIG1hdHJpeCBmbGlwcyB0aGUgWSBheGlzIHNvIDAgaXMgYXQgdGhlIHRvcC5cclxuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDMoW1xyXG4gICAgICAgICAgICAyIC8gd2lkdGgsIDAsIDAsIFxyXG4gICAgICAgICAgICAwLCAtMiAvIGhlaWdodCwgMCxcclxuICAgICAgICAgICAgLTEsIDEsIDEsXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG5ld1RyYW5zbGF0aW9uKGR4OiBudW1iZXIsIGR5OiBudW1iZXIpIDogTWF0cml4M3tcclxuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDMoW1xyXG4gICAgICAgICAgICAxLCAwLCAwLFxyXG4gICAgICAgICAgICAwLCAxLCAwLFxyXG4gICAgICAgICAgICBkeCwgZHksIDEsXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYW5nbGUgaW4gcmFkaWFuc1xyXG4gICAgc3RhdGljIG5ld1JvdGF0aW9uKHI6IG51bWJlcikgOiBNYXRyaXgzIHtcclxuICAgICAgICB2YXIgYyA9IE1hdGguY29zKHIpO1xyXG4gICAgICAgIHZhciBzID0gTWF0aC5zaW4ocik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXgzKFtcclxuICAgICAgICAgICAgYywgLXMsIDAsXHJcbiAgICAgICAgICAgIHMsIGMsIDAsXHJcbiAgICAgICAgICAgIDAsIDAsIDEsXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG5ld1NjYWxhcihzeDogbnVtYmVyLCBzeTogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXgzKFtcclxuICAgICAgICAgICAgc3gsIDAsIDAsXHJcbiAgICAgICAgICAgIDAsIHN5LCAwLFxyXG4gICAgICAgICAgICAwLCAwLCAxLFxyXG4gICAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9NYXQ0KCkgOiBNYXRyaXg0IHtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuZGF0YTtcclxuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDQoW1xyXG4gICAgICAgICAgICBkWzBdLCBkWzFdLCAgICAwLCAgICBkWzJdLFxyXG4gICAgICAgICAgICBkWzNdLCBkWzRdLCAgICAwLCAgICBkWzVdLFxyXG4gICAgICAgICAgICAwICAgLCAgMCAsICAgICAxLCAgICAwLFxyXG4gICAgICAgICAgICBkWzZdLCBkWzddLCAgICAwLCAgICBkWzhdLFxyXG4gICAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvamVjdCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgOiBNYXRyaXgzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseShNYXRyaXgzLm5ld1Byb2plY3Rpb24od2lkdGgsIGhlaWdodCkpXHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNsYXRlTihkeDogbnVtYmVyLCBkeTogbnVtYmVyKSA6IE1hdHJpeDMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5KE1hdHJpeDMubmV3VHJhbnNsYXRpb24oZHgsIGR5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNsYXRlKHY6IFZlY3RvcjIpIDogTWF0cml4MyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHkoTWF0cml4My5uZXdUcmFuc2xhdGlvbih2LngsIHYueSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJvdGF0ZShyOiBudW1iZXIpIDogTWF0cml4MyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHkoTWF0cml4My5uZXdSb3RhdGlvbihyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2NhbGUoc3g6IG51bWJlciwgc3k6IG51bWJlcikgOiBNYXRyaXgzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseShNYXRyaXgzLm5ld1NjYWxhcihzeCwgc3kpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtdWx0aXBseSB0d28gbTMncyBcclxuICAgIG11bHRpcGx5KG90aGVyOiBNYXRyaXgzKSA6IE1hdHJpeDMge1xyXG4gICAgICAgIGxldCBhID0gdGhpcy5kYXRhO1xyXG4gICAgICAgIGxldCBiID0gb3RoZXIuZGF0YTtcclxuXHJcbiAgICAgICAgdmFyIGEwMCA9IGFbMCAqIDMgKyAwXTtcclxuICAgICAgICB2YXIgYTAxID0gYVswICogMyArIDFdO1xyXG4gICAgICAgIHZhciBhMDIgPSBhWzAgKiAzICsgMl07XHJcbiAgICAgICAgdmFyIGExMCA9IGFbMSAqIDMgKyAwXTtcclxuICAgICAgICB2YXIgYTExID0gYVsxICogMyArIDFdO1xyXG4gICAgICAgIHZhciBhMTIgPSBhWzEgKiAzICsgMl07XHJcbiAgICAgICAgdmFyIGEyMCA9IGFbMiAqIDMgKyAwXTtcclxuICAgICAgICB2YXIgYTIxID0gYVsyICogMyArIDFdO1xyXG4gICAgICAgIHZhciBhMjIgPSBhWzIgKiAzICsgMl07XHJcbiAgICAgICAgdmFyIGIwMCA9IGJbMCAqIDMgKyAwXTtcclxuICAgICAgICB2YXIgYjAxID0gYlswICogMyArIDFdO1xyXG4gICAgICAgIHZhciBiMDIgPSBiWzAgKiAzICsgMl07XHJcbiAgICAgICAgdmFyIGIxMCA9IGJbMSAqIDMgKyAwXTtcclxuICAgICAgICB2YXIgYjExID0gYlsxICogMyArIDFdO1xyXG4gICAgICAgIHZhciBiMTIgPSBiWzEgKiAzICsgMl07XHJcbiAgICAgICAgdmFyIGIyMCA9IGJbMiAqIDMgKyAwXTtcclxuICAgICAgICB2YXIgYjIxID0gYlsyICogMyArIDFdO1xyXG4gICAgICAgIHZhciBiMjIgPSBiWzIgKiAzICsgMl07XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4MyhbXHJcbiAgICAgICAgICAgIGIwMCAqIGEwMCArIGIwMSAqIGExMCArIGIwMiAqIGEyMCxcclxuICAgICAgICAgICAgYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxLFxyXG4gICAgICAgICAgICBiMDAgKiBhMDIgKyBiMDEgKiBhMTIgKyBiMDIgKiBhMjIsXHJcbiAgICAgICAgICAgIGIxMCAqIGEwMCArIGIxMSAqIGExMCArIGIxMiAqIGEyMCxcclxuICAgICAgICAgICAgYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxLFxyXG4gICAgICAgICAgICBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjIsXHJcbiAgICAgICAgICAgIGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMCxcclxuICAgICAgICAgICAgYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxLFxyXG4gICAgICAgICAgICBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjIsXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdHJhbnNmb3JtIGEgdmVjdG9yLiBSRUNZQ0xFIElUXHJcbiAgICB0cmFuc2Zvcm1WZWN0b3IodjogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuICAgICAgICBsZXQgbSA9IHRoaXMuZGF0YTtcclxuICAgICAgICBsZXQgdjAgPSB2Lng7XHJcbiAgICAgICAgbGV0IHYxID0gdi55O1xyXG4gICAgICAgIGxldCBkID0gdjAgKiBtWzAgKiAzICsgMl0gKyB2MSAqIG1bMSAqIDMgKyAyXSArIG1bMiAqIDMgKyAyXTtcclxuICAgICAgICB2LnggPSAodjAgKiBtWzAgKiAzICsgMF0gKyB2MSAqIG1bMSAqIDMgKyAwXSArIG1bMiAqIDMgKyAwXSkgLyBkO1xyXG4gICAgICAgIHYueSA9ICh2MCAqIG1bMCAqIDMgKyAxXSArIHYxICogbVsxICogMyArIDFdICsgbVsyICogMyArIDFdKSAvIGQ7XHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHJldHVybiB0aGUgaW52ZXJzZSBvZiB0aGlzIG1hdHJpeFxyXG4gICAgaW52ZXJzZSgpIDogTWF0cml4MyB7XHJcblxyXG4gICAgICAgIC8vIGl2ZSBnb3Qgbm8gaWRlYSB3aGF0IGlzIGhhcHBlbmluZyBoZXJlLCBcclxuICAgICAgICAvLyBidXQgYXBwYXJhbnRseSwgdGhpcyBpcyBob3cgeW91IGludmVyc2UgYSAzeDMgbWF0cml4LlxyXG4gICAgICAgIGxldCBtID0gdGhpcy5kYXRhO1xyXG4gICAgICAgIHZhciB0MDAgPSBtWzEgKiAzICsgMV0gKiBtWzIgKiAzICsgMl0gLSBtWzEgKiAzICsgMl0gKiBtWzIgKiAzICsgMV07XHJcbiAgICAgICAgdmFyIHQxMCA9IG1bMCAqIDMgKyAxXSAqIG1bMiAqIDMgKyAyXSAtIG1bMCAqIDMgKyAyXSAqIG1bMiAqIDMgKyAxXTtcclxuICAgICAgICB2YXIgdDIwID0gbVswICogMyArIDFdICogbVsxICogMyArIDJdIC0gbVswICogMyArIDJdICogbVsxICogMyArIDFdO1xyXG5cclxuICAgICAgICAvLyBkaXNjcmltaW5hbnRcclxuICAgICAgICB2YXIgZCA9IDEuMCAvIChtWzAgKiAzICsgMF0gKiB0MDAgLSBtWzEgKiAzICsgMF0gKiB0MTAgKyBtWzIgKiAzICsgMF0gKiB0MjApO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YShbXHJcbiAgICAgICAgIGQgKiB0MDAsIC1kICogdDEwLCBkICogdDIwLFxyXG4gICAgICAgIC1kICogKG1bMSAqIDMgKyAwXSAqIG1bMiAqIDMgKyAyXSAtIG1bMSAqIDMgKyAyXSAqIG1bMiAqIDMgKyAwXSksXHJcbiAgICAgICAgIGQgKiAobVswICogMyArIDBdICogbVsyICogMyArIDJdIC0gbVswICogMyArIDJdICogbVsyICogMyArIDBdKSxcclxuICAgICAgICAtZCAqIChtWzAgKiAzICsgMF0gKiBtWzEgKiAzICsgMl0gLSBtWzAgKiAzICsgMl0gKiBtWzEgKiAzICsgMF0pLFxyXG4gICAgICAgICBkICogKG1bMSAqIDMgKyAwXSAqIG1bMiAqIDMgKyAxXSAtIG1bMSAqIDMgKyAxXSAqIG1bMiAqIDMgKyAwXSksXHJcbiAgICAgICAgLWQgKiAobVswICogMyArIDBdICogbVsyICogMyArIDFdIC0gbVswICogMyArIDFdICogbVsyICogMyArIDBdKSxcclxuICAgICAgICAgZCAqIChtWzAgKiAzICsgMF0gKiBtWzEgKiAzICsgMV0gLSBtWzAgKiAzICsgMV0gKiBtWzEgKiAzICsgMF0pLFxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyA0eDQgbWF0cml4IG9mIGZsb2F0cyB1c2VkIGZvciAzZCBtYXRoXHJcbi8vIGluc3BpcmVkIGJ5IEdyZWdnIFRhdmFyZXMuIFxyXG5leHBvcnQgY2xhc3MgTWF0cml4NCBleHRlbmRzIEZsb2F0TWF0cml4IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBudW1iZXJbXSA9IFtdKSB7XHJcbiAgICAgICAgc3VwZXIoNCwgNCwgZGF0YSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHN0YXRpYyBuZXdJZGVudGl0eSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDQoW1xyXG4gICAgICAgICAgICAxLDAsMCwwLFxyXG4gICAgICAgICAgICAwLDEsMCwwLFxyXG4gICAgICAgICAgICAwLDAsMSwwLFxyXG4gICAgICAgICAgICAwLDAsMCwxLFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBuZXdDb3B5KG90aGVyOiBNYXRyaXg0KSA6IE1hdHJpeDQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IDE2OyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQuZGF0YVtpXSA9IG90aGVyLmRhdGFbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKSA6IE1hdHJpeDQge1xyXG4gICAgICAgIHJldHVybiBNYXRyaXg0Lm5ld0NvcHkodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbXVsdGlwbGllZChvdGhlcjogTWF0cml4NCkge1xyXG4gIFxyXG4gICAgICAgIC8vIE5PVEU6IGkgc3dhcHBlZCBhIGFuZCBiLCB0aGlzIG1ha2VzIG1vcmUgc2Vuc2UgdG8gbWUsIGJ1dCBpIGNvdWxkIGJlIHdyb25nIGFib3V0IGl0Li4uXHJcbiAgICAgICAgY29uc3QgYSA9IG90aGVyLmRhdGE7XHJcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuZGF0YTsgXHJcblxyXG4gICAgICAgIHZhciBiMDAgPSBiWzAgKiA0ICsgMF07XHJcbiAgICAgICAgdmFyIGIwMSA9IGJbMCAqIDQgKyAxXTtcclxuICAgICAgICB2YXIgYjAyID0gYlswICogNCArIDJdO1xyXG4gICAgICAgIHZhciBiMDMgPSBiWzAgKiA0ICsgM107XHJcbiAgICAgICAgdmFyIGIxMCA9IGJbMSAqIDQgKyAwXTtcclxuICAgICAgICB2YXIgYjExID0gYlsxICogNCArIDFdO1xyXG4gICAgICAgIHZhciBiMTIgPSBiWzEgKiA0ICsgMl07XHJcbiAgICAgICAgdmFyIGIxMyA9IGJbMSAqIDQgKyAzXTtcclxuICAgICAgICB2YXIgYjIwID0gYlsyICogNCArIDBdO1xyXG4gICAgICAgIHZhciBiMjEgPSBiWzIgKiA0ICsgMV07XHJcbiAgICAgICAgdmFyIGIyMiA9IGJbMiAqIDQgKyAyXTtcclxuICAgICAgICB2YXIgYjIzID0gYlsyICogNCArIDNdO1xyXG4gICAgICAgIHZhciBiMzAgPSBiWzMgKiA0ICsgMF07XHJcbiAgICAgICAgdmFyIGIzMSA9IGJbMyAqIDQgKyAxXTtcclxuICAgICAgICB2YXIgYjMyID0gYlszICogNCArIDJdO1xyXG4gICAgICAgIHZhciBiMzMgPSBiWzMgKiA0ICsgM107XHJcbiAgICAgICAgdmFyIGEwMCA9IGFbMCAqIDQgKyAwXTtcclxuICAgICAgICB2YXIgYTAxID0gYVswICogNCArIDFdO1xyXG4gICAgICAgIHZhciBhMDIgPSBhWzAgKiA0ICsgMl07XHJcbiAgICAgICAgdmFyIGEwMyA9IGFbMCAqIDQgKyAzXTtcclxuICAgICAgICB2YXIgYTEwID0gYVsxICogNCArIDBdO1xyXG4gICAgICAgIHZhciBhMTEgPSBhWzEgKiA0ICsgMV07XHJcbiAgICAgICAgdmFyIGExMiA9IGFbMSAqIDQgKyAyXTtcclxuICAgICAgICB2YXIgYTEzID0gYVsxICogNCArIDNdO1xyXG4gICAgICAgIHZhciBhMjAgPSBhWzIgKiA0ICsgMF07XHJcbiAgICAgICAgdmFyIGEyMSA9IGFbMiAqIDQgKyAxXTtcclxuICAgICAgICB2YXIgYTIyID0gYVsyICogNCArIDJdO1xyXG4gICAgICAgIHZhciBhMjMgPSBhWzIgKiA0ICsgM107XHJcbiAgICAgICAgdmFyIGEzMCA9IGFbMyAqIDQgKyAwXTtcclxuICAgICAgICB2YXIgYTMxID0gYVszICogNCArIDFdO1xyXG4gICAgICAgIHZhciBhMzIgPSBhWzMgKiA0ICsgMl07XHJcbiAgICAgICAgdmFyIGEzMyA9IGFbMyAqIDQgKyAzXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXg0KFtcclxuICAgICAgICAgICAgYjAwICogYTAwICsgYjAxICogYTEwICsgYjAyICogYTIwICsgYjAzICogYTMwLFxyXG4gICAgICAgICAgICBiMDAgKiBhMDEgKyBiMDEgKiBhMTEgKyBiMDIgKiBhMjEgKyBiMDMgKiBhMzEsXHJcbiAgICAgICAgICAgIGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMiAqIGEyMiArIGIwMyAqIGEzMixcclxuICAgICAgICAgICAgYjAwICogYTAzICsgYjAxICogYTEzICsgYjAyICogYTIzICsgYjAzICogYTMzLFxyXG4gICAgICAgICAgICBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjAgKyBiMTMgKiBhMzAsXHJcbiAgICAgICAgICAgIGIxMCAqIGEwMSArIGIxMSAqIGExMSArIGIxMiAqIGEyMSArIGIxMyAqIGEzMSxcclxuICAgICAgICAgICAgYjEwICogYTAyICsgYjExICogYTEyICsgYjEyICogYTIyICsgYjEzICogYTMyLFxyXG4gICAgICAgICAgICBiMTAgKiBhMDMgKyBiMTEgKiBhMTMgKyBiMTIgKiBhMjMgKyBiMTMgKiBhMzMsXHJcbiAgICAgICAgICAgIGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMCArIGIyMyAqIGEzMCxcclxuICAgICAgICAgICAgYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxICsgYjIzICogYTMxLFxyXG4gICAgICAgICAgICBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjIgKyBiMjMgKiBhMzIsXHJcbiAgICAgICAgICAgIGIyMCAqIGEwMyArIGIyMSAqIGExMyArIGIyMiAqIGEyMyArIGIyMyAqIGEzMyxcclxuICAgICAgICAgICAgYjMwICogYTAwICsgYjMxICogYTEwICsgYjMyICogYTIwICsgYjMzICogYTMwLFxyXG4gICAgICAgICAgICBiMzAgKiBhMDEgKyBiMzEgKiBhMTEgKyBiMzIgKiBhMjEgKyBiMzMgKiBhMzEsXHJcbiAgICAgICAgICAgIGIzMCAqIGEwMiArIGIzMSAqIGExMiArIGIzMiAqIGEyMiArIGIzMyAqIGEzMixcclxuICAgICAgICAgICAgYjMwICogYTAzICsgYjMxICogYTEzICsgYjMyICogYTIzICsgYjMzICogYTMzLFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICBcclxuICAgIFxyXG4gICAgbXVsdGlwbHkob3RoZXI6IE1hdHJpeDQpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLm11bHRpcGxpZWQob3RoZXIpLmRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICB0cmFuc3Bvc2UoKSA6IE1hdHJpeDQge1xyXG4gICAgICAgIGxldCBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCByZXMgPSBtYXRyaXguZGF0YTtcclxuICAgICAgICBsZXQgb2xkID0gdGhpcy5kYXRhO1xyXG5cclxuICAgICAgICByZXNbIDBdID0gb2xkWzBdO1xyXG4gICAgICAgIHJlc1sgMV0gPSBvbGRbNF07XHJcbiAgICAgICAgcmVzWyAyXSA9IG9sZFs4XTtcclxuICAgICAgICByZXNbIDNdID0gb2xkWzEyXTtcclxuICAgICAgICByZXNbIDRdID0gb2xkWzFdO1xyXG4gICAgICAgIHJlc1sgNV0gPSBvbGRbNV07XHJcbiAgICAgICAgcmVzWyA2XSA9IG9sZFs5XTtcclxuICAgICAgICByZXNbIDddID0gb2xkWzEzXTtcclxuICAgICAgICByZXNbIDhdID0gb2xkWzJdO1xyXG4gICAgICAgIHJlc1sgOV0gPSBvbGRbNl07XHJcbiAgICAgICAgcmVzWzEwXSA9IG9sZFsxMF07XHJcbiAgICAgICAgcmVzWzExXSA9IG9sZFsxNF07XHJcbiAgICAgICAgcmVzWzEyXSA9IG9sZFszXTtcclxuICAgICAgICByZXNbMTNdID0gb2xkWzddO1xyXG4gICAgICAgIHJlc1sxNF0gPSBvbGRbMTFdO1xyXG4gICAgICAgIHJlc1sxNV0gPSBvbGRbMTVdO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc3RhdGljIG5ld0xvb2tBdChjYW1lcmFQb3NpdGlvbjogVmVjdG9yMywgdGFyZ2V0OiBWZWN0b3IzLCB1cDogVmVjdG9yMykgOiBNYXRyaXg0IHtcclxuXHJcbiAgICAgICAgbGV0IG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBtYXRyaXguZGF0YTtcclxuICAgICAgICBsZXQgekF4aXMgPSBjYW1lcmFQb3NpdGlvbi5jbG9uZSgpLnN1Yih0YXJnZXQpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIGxldCB4QXhpcyA9IHVwLmNsb25lKCkuY3Jvc3ModXApLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIGxldCB5QXhpcyA9IHpBeGlzLmNsb25lKCkuY3Jvc3MoeEF4aXMpLm5vcm1hbGl6ZSgpO1xyXG4gICAgXHJcbiAgICAgICAgZGF0YVsgMF0gPSB4QXhpcy54O1xyXG4gICAgICAgIGRhdGFbIDFdID0geEF4aXMueTtcclxuICAgICAgICBkYXRhWyAyXSA9IHhBeGlzLno7XHJcbiAgICAgICAgZGF0YVsgM10gPSAwO1xyXG4gICAgICAgIGRhdGFbIDRdID0geUF4aXMueDtcclxuICAgICAgICBkYXRhWyA1XSA9IHlBeGlzLnk7XHJcbiAgICAgICAgZGF0YVsgNl0gPSB5QXhpcy56O1xyXG4gICAgICAgIGRhdGFbIDddID0gMDtcclxuICAgICAgICBkYXRhWyA4XSA9IHpBeGlzLng7XHJcbiAgICAgICAgZGF0YVsgOV0gPSB6QXhpcy55O1xyXG4gICAgICAgIGRhdGFbMTBdID0gekF4aXMuejtcclxuICAgICAgICBkYXRhWzExXSA9IDA7XHJcbiAgICAgICAgZGF0YVsxMl0gPSBjYW1lcmFQb3NpdGlvbi54O1xyXG4gICAgICAgIGRhdGFbMTNdID0gY2FtZXJhUG9zaXRpb24ueTtcclxuICAgICAgICBkYXRhWzE0XSA9IGNhbWVyYVBvc2l0aW9uLno7XHJcbiAgICAgICAgZGF0YVsxNV0gPSAxO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhIDQtYnktNCBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggZ2l2ZW4gdGhlIGFuZ3VsYXIgaGVpZ2h0XHJcbiAgICAgKiBvZiB0aGUgZnJ1c3R1bSwgdGhlIGFzcGVjdCByYXRpbywgYW5kIHRoZSBuZWFyIGFuZCBmYXIgY2xpcHBpbmcgcGxhbmVzLiAgVGhlXHJcbiAgICAgKiBhcmd1bWVudHMgZGVmaW5lIGEgZnJ1c3R1bSBleHRlbmRpbmcgaW4gdGhlIG5lZ2F0aXZlIHogZGlyZWN0aW9uLiAgVGhlIGdpdmVuXHJcbiAgICAgKiBhbmdsZSBpcyB0aGUgdmVydGljYWwgYW5nbGUgb2YgdGhlIGZydXN0dW0sIGFuZCB0aGUgaG9yaXpvbnRhbCBhbmdsZSBpc1xyXG4gICAgICogZGV0ZXJtaW5lZCB0byBwcm9kdWNlIHRoZSBnaXZlbiBhc3BlY3QgcmF0aW8uICBUaGUgYXJndW1lbnRzIG5lYXIgYW5kIGZhciBhcmVcclxuICAgICAqIHRoZSBkaXN0YW5jZXMgdG8gdGhlIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuICBOb3RlIHRoYXQgbmVhciBhbmQgZmFyXHJcbiAgICAgKiBhcmUgbm90IHogY29vcmRpbmF0ZXMsIGJ1dCByYXRoZXIgdGhleSBhcmUgZGlzdGFuY2VzIGFsb25nIHRoZSBuZWdhdGl2ZVxyXG4gICAgICogei1heGlzLiAgVGhlIG1hdHJpeCBnZW5lcmF0ZWQgc2VuZHMgdGhlIHZpZXdpbmcgZnJ1c3R1bSB0byB0aGUgdW5pdCBib3guXHJcbiAgICAgKiBXZSBhc3N1bWUgYSB1bml0IGJveCBleHRlbmRpbmcgZnJvbSAtMSB0byAxIGluIHRoZSB4IGFuZCB5IGRpbWVuc2lvbnMgYW5kXHJcbiAgICAgKiBmcm9tIC0xIHRvIDEgaW4gdGhlIHogZGltZW5zaW9uLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZpZWxkT2ZWaWV3SW5SYWRpYW5zIGZpZWxkIG9mIHZpZXcgaW4geSBheGlzLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBhc3BlY3Qgb2Ygdmlld3BvcnQgKHdpZHRoIC8gaGVpZ2h0KVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgbmVhciBaIGNsaXBwaW5nIHBsYW5lXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmFyIGZhciBaIGNsaXBwaW5nIHBsYW5lXHJcbiAgICAgKiBAcGFyYW0ge01hdHJpeDR9IFtkc3RdIG9wdGlvbmFsIG1hdHJpeCB0byBzdG9yZSByZXN1bHRcclxuICAgICAqIEByZXR1cm4ge01hdHJpeDR9IGRzdCBvciBhIG5ldyBtYXRyaXggaWYgbm9uZSBwcm92aWRlZFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbmV3UGVyc3BlY3RpdmUoZm92OiBudW1iZXIsIGFzcGVjdDogbnVtYmVyLCBuZWFyOiBudW1iZXIsIGZhcjogbnVtYmVyKSA6IE1hdHJpeDQge1xyXG5cclxuICAgICAgICBsZXQgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBsZXQgZGF0YSA9IG1hdHJpeC5kYXRhO1xyXG5cclxuICAgICAgICB2YXIgZiA9IE1hdGgudGFuKE1hdGguUEkgKiAwLjUgLSAwLjUgKiBmb3YpO1xyXG4gICAgICAgIHZhciByYW5nZUludiA9IDEuMCAvIChuZWFyIC0gZmFyKTtcclxuICAgIFxyXG4gICAgICAgIGRhdGFbIDBdID0gZiAvIGFzcGVjdDtcclxuICAgICAgICBkYXRhWyAxXSA9IDA7XHJcbiAgICAgICAgZGF0YVsgMl0gPSAwO1xyXG4gICAgICAgIGRhdGFbIDNdID0gMDtcclxuICAgICAgICBkYXRhWyA0XSA9IDA7XHJcbiAgICAgICAgZGF0YVsgNV0gPSBmO1xyXG4gICAgICAgIGRhdGFbIDZdID0gMDtcclxuICAgICAgICBkYXRhWyA3XSA9IDA7XHJcbiAgICAgICAgZGF0YVsgOF0gPSAwO1xyXG4gICAgICAgIGRhdGFbIDldID0gMDtcclxuICAgICAgICBkYXRhWzEwXSA9IChuZWFyICsgZmFyKSAqIHJhbmdlSW52O1xyXG4gICAgICAgIGRhdGFbMTFdID0gLTE7XHJcbiAgICAgICAgZGF0YVsxMl0gPSAwO1xyXG4gICAgICAgIGRhdGFbMTNdID0gMDtcclxuICAgICAgICBkYXRhWzE0XSA9IG5lYXIgKiBmYXIgKiByYW5nZUludiAqIDI7XHJcbiAgICAgICAgZGF0YVsxNV0gPSAwO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhIDQtYnktNCBvcnRob2dyYXBoaWMgcHJvamVjdGlvbiBtYXRyaXggZ2l2ZW4gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZVxyXG4gICAgICogcGxhbmVzIGRlZmluaW5nIHRoZSBheGlzLWFsaWduZWQsIGJveC1zaGFwZWQgdmlld2luZyB2b2x1bWUuICBUaGUgbWF0cml4XHJcbiAgICAgKiBnZW5lcmF0ZWQgc2VuZHMgdGhhdCBib3ggdG8gdGhlIHVuaXQgYm94LiAgTm90ZSB0aGF0IGFsdGhvdWdoIGxlZnQgYW5kIHJpZ2h0XHJcbiAgICAgKiBhcmUgeCBjb29yZGluYXRlcyBhbmQgYm90dG9tIGFuZCB0b3AgYXJlIHkgY29vcmRpbmF0ZXMsIG5lYXIgYW5kIGZhclxyXG4gICAgICogYXJlIG5vdCB6IGNvb3JkaW5hdGVzLCBidXQgcmF0aGVyIHRoZXkgYXJlIGRpc3RhbmNlcyBhbG9uZyB0aGUgbmVnYXRpdmVcclxuICAgICAqIHotYXhpcy4gIFdlIGFzc3VtZSBhIHVuaXQgYm94IGV4dGVuZGluZyBmcm9tIC0xIHRvIDEgaW4gdGhlIHggYW5kIHlcclxuICAgICAqIGRpbWVuc2lvbnMgYW5kIGZyb20gLTEgdG8gMSBpbiB0aGUgeiBkaW1lbnNpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVmdCBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgcGxhbmUgb2YgdGhlIGJveC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgYm90dG9tIHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9wIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbmVhciBUaGUgbmVnYXRpdmUgeiBjb29yZGluYXRlIG9mIHRoZSBuZWFyIHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmFyIFRoZSBuZWdhdGl2ZSB6IGNvb3JkaW5hdGUgb2YgdGhlIGZhciBwbGFuZSBvZiB0aGUgYm94LlxyXG4gICAgICogQHBhcmFtIHtNYXRyaXg0fSBbZHN0XSBvcHRpb25hbCBtYXRyaXggdG8gc3RvcmUgcmVzdWx0XHJcbiAgICAgKiBAcmV0dXJuIHtNYXRyaXg0fSBkc3Qgb3IgYSBuZXcgbWF0cml4IGlmIG5vbmUgcHJvdmlkZWRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG5ld09ydGhvZ3JhcGhpYyhsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIsIGJvdHRvbTogbnVtYmVyLCB0b3A6IG51bWJlciwgbmVhcjogbnVtYmVyLCBmYXI6IG51bWJlcikgOiBNYXRyaXg0IHtcclxuICAgIFxyXG4gICAgICAgIGxldCBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGxldCBkc3QgPSBtYXRyaXguZGF0YTtcclxuICAgIFxyXG4gICAgICAgIGRzdFsgMF0gPSAyIC8gKHJpZ2h0IC0gbGVmdCk7XHJcbiAgICAgICAgZHN0WyAxXSA9IDA7XHJcbiAgICAgICAgZHN0WyAyXSA9IDA7XHJcbiAgICAgICAgZHN0WyAzXSA9IDA7XHJcbiAgICAgICAgZHN0WyA0XSA9IDA7XHJcbiAgICAgICAgZHN0WyA1XSA9IDIgLyAodG9wIC0gYm90dG9tKTtcclxuICAgICAgICBkc3RbIDZdID0gMDtcclxuICAgICAgICBkc3RbIDddID0gMDtcclxuICAgICAgICBkc3RbIDhdID0gMDtcclxuICAgICAgICBkc3RbIDldID0gMDtcclxuICAgICAgICBkc3RbMTBdID0gMiAvIChuZWFyIC0gZmFyKTtcclxuICAgICAgICBkc3RbMTFdID0gMDtcclxuICAgICAgICBkc3RbMTJdID0gKGxlZnQgKyByaWdodCkgLyAobGVmdCAtIHJpZ2h0KTtcclxuICAgICAgICBkc3RbMTNdID0gKGJvdHRvbSArIHRvcCkgLyAoYm90dG9tIC0gdG9wKTtcclxuICAgICAgICBkc3RbMTRdID0gKG5lYXIgKyBmYXIpIC8gKG5lYXIgLSBmYXIpO1xyXG4gICAgICAgIGRzdFsxNV0gPSAxO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhIDQtYnktNCBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggZ2l2ZW4gdGhlIGxlZnQsIHJpZ2h0LFxyXG4gICAgICogdG9wLCBib3R0b20sIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuIFRoZSBhcmd1bWVudHMgZGVmaW5lIGEgZnJ1c3R1bVxyXG4gICAgICogZXh0ZW5kaW5nIGluIHRoZSBuZWdhdGl2ZSB6IGRpcmVjdGlvbi4gVGhlIGFyZ3VtZW50cyBuZWFyIGFuZCBmYXIgYXJlIHRoZVxyXG4gICAgICogZGlzdGFuY2VzIHRvIHRoZSBuZWFyIGFuZCBmYXIgY2xpcHBpbmcgcGxhbmVzLiBOb3RlIHRoYXQgbmVhciBhbmQgZmFyIGFyZSBub3RcclxuICAgICAqIHogY29vcmRpbmF0ZXMsIGJ1dCByYXRoZXIgdGhleSBhcmUgZGlzdGFuY2VzIGFsb25nIHRoZSBuZWdhdGl2ZSB6LWF4aXMuIFRoZVxyXG4gICAgICogbWF0cml4IGdlbmVyYXRlZCBzZW5kcyB0aGUgdmlld2luZyBmcnVzdHVtIHRvIHRoZSB1bml0IGJveC4gV2UgYXNzdW1lIGEgdW5pdFxyXG4gICAgICogYm94IGV4dGVuZGluZyBmcm9tIC0xIHRvIDEgaW4gdGhlIHggYW5kIHkgZGltZW5zaW9ucyBhbmQgZnJvbSAtMSB0byAxIGluIHRoZSB6XHJcbiAgICAgKiBkaW1lbnNpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVmdCBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgcGxhbmUgb2YgdGhlIGJveC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgYm90dG9tIHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9wIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbmVhciBUaGUgbmVnYXRpdmUgeiBjb29yZGluYXRlIG9mIHRoZSBuZWFyIHBsYW5lIG9mIHRoZSBib3guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmFyIFRoZSBuZWdhdGl2ZSB6IGNvb3JkaW5hdGUgb2YgdGhlIGZhciBwbGFuZSBvZiB0aGUgYm94LlxyXG4gICAgICogQHBhcmFtIHtNYXRyaXg0fSBbZHN0XSBvcHRpb25hbCBtYXRyaXggdG8gc3RvcmUgcmVzdWx0XHJcbiAgICAgKiBAcmV0dXJuIHtNYXRyaXg0fSBkc3Qgb3IgYSBuZXcgbWF0cml4IGlmIG5vbmUgcHJvdmlkZWRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG5ld0ZydXN0dW0obGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyLCBib3R0b206IG51bWJlciwgdG9wOiBudW1iZXIsIG5lYXI6IG51bWJlciwgZmFyOiBudW1iZXIpIDogTWF0cml4NCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgbGV0IGRzdCA9IG1hdHJpeC5kYXRhO1xyXG4gICAgXHJcbiAgICAgICAgdmFyIGR4ID0gcmlnaHQgLSBsZWZ0O1xyXG4gICAgICAgIHZhciBkeSA9IHRvcCAtIGJvdHRvbTtcclxuICAgICAgICB2YXIgZHogPSBmYXIgLSBuZWFyO1xyXG4gICAgXHJcbiAgICAgICAgZHN0WyAwXSA9IDIgKiBuZWFyIC8gZHg7XHJcbiAgICAgICAgZHN0WyAxXSA9IDA7XHJcbiAgICAgICAgZHN0WyAyXSA9IDA7XHJcbiAgICAgICAgZHN0WyAzXSA9IDA7XHJcbiAgICAgICAgZHN0WyA0XSA9IDA7XHJcbiAgICAgICAgZHN0WyA1XSA9IDIgKiBuZWFyIC8gZHk7XHJcbiAgICAgICAgZHN0WyA2XSA9IDA7XHJcbiAgICAgICAgZHN0WyA3XSA9IDA7XHJcbiAgICAgICAgZHN0WyA4XSA9IChsZWZ0ICsgcmlnaHQpIC8gZHg7XHJcbiAgICAgICAgZHN0WyA5XSA9ICh0b3AgKyBib3R0b20pIC8gZHk7XHJcbiAgICAgICAgZHN0WzEwXSA9IC0oZmFyICsgbmVhcikgLyBkejtcclxuICAgICAgICBkc3RbMTFdID0gLTE7XHJcbiAgICAgICAgZHN0WzEyXSA9IDA7XHJcbiAgICAgICAgZHN0WzEzXSA9IDA7XHJcbiAgICAgICAgZHN0WzE0XSA9IC0yICogbmVhciAqIGZhciAvIGR6O1xyXG4gICAgICAgIGRzdFsxNV0gPSAwO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc3RhdGljIG5ld1RyYW5zbGF0aW9uKHR4OiBudW1iZXIsIHR5OiBudW1iZXIsIHR6OiBudW1iZXIpIDogTWF0cml4NCB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDQoW1xyXG4gICAgICAgICAgICAxLDAsMCwwLFxyXG4gICAgICAgICAgICAwLDEsMCwwLFxyXG4gICAgICAgICAgICAwLDAsMSwwLFxyXG4gICAgICAgICAgICB0eCx0eSx0eiwxXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHN0YXRpYyBuZXdYUm90YXRpb24oYW5nbGVJblJhZGlhbnM6IG51bWJlcikgOiBNYXRyaXg0IHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgICB2YXIgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXg0KFtcclxuICAgICAgICAgICAgMSwwLDAsMCxcclxuICAgICAgICAgICAgMCxjLC1zLDAsXHJcbiAgICAgICAgICAgIDAscyxjLDAsXHJcbiAgICAgICAgICAgIDAsMCwwLDEsXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHN0YXRpYyBuZXdZUm90YXRpb24oYW5nbGVJblJhZGlhbnM6IG51bWJlcikgOiBNYXRyaXg0IHtcclxuXHJcbiAgICAgICAgdmFyIGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgICAgdmFyIHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDQoW1xyXG4gICAgICAgICAgICBjLDAscywwLFxyXG4gICAgICAgICAgICAwLDEsMCwwLFxyXG4gICAgICAgICAgICAtcywwLGMsMCxcclxuICAgICAgICAgICAgMCwwLDAsMSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc3RhdGljIG5ld1pSb3RhdGlvbihhbmdsZUluUmFkaWFuczogbnVtYmVyKSB7XHJcbiAgICBcclxuICAgICAgICBsZXQgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBsZXQgZHN0ID0gbWF0cml4LmRhdGE7XHJcbiAgICBcclxuICAgICAgICB2YXIgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgICB2YXIgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgIFxyXG4gICAgICAgIGRzdFsgMF0gPSBjO1xyXG4gICAgICAgIGRzdFsgMV0gPSBzO1xyXG4gICAgICAgIGRzdFsgMl0gPSAwO1xyXG4gICAgICAgIGRzdFsgM10gPSAwO1xyXG4gICAgICAgIGRzdFsgNF0gPSAtcztcclxuICAgICAgICBkc3RbIDVdID0gYztcclxuICAgICAgICBkc3RbIDZdID0gMDtcclxuICAgICAgICBkc3RbIDddID0gMDtcclxuICAgICAgICBkc3RbIDhdID0gMDtcclxuICAgICAgICBkc3RbIDldID0gMDtcclxuICAgICAgICBkc3RbMTBdID0gMTtcclxuICAgICAgICBkc3RbMTFdID0gMDtcclxuICAgICAgICBkc3RbMTJdID0gMDtcclxuICAgICAgICBkc3RbMTNdID0gMDtcclxuICAgICAgICBkc3RbMTRdID0gMDtcclxuICAgICAgICBkc3RbMTVdID0gMTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBtYXRyaXg7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIE1ha2VzIGFuIHJvdGF0aW9uIG1hdHJpeCBhcm91bmQgYW4gYXJiaXRyYXJ5IGF4aXNcclxuICAgICAqIEBwYXJhbSB7VmVjdG9yM30gYXhpcyBheGlzIHRvIHJvdGF0ZSBhcm91bmRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBhbW91bnQgdG8gcm90YXRlXHJcbiAgICAgKiBAcmV0dXJuIHtNYXRyaXg0fSBkc3Qgb3IgYSBuZXcgbWF0cml4IGlmIG5vbmUgcHJvdmlkZWRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG5ld0F4aXNSb3RhdGlvbihheGlzOiBWZWN0b3IzLCBhbmdsZUluUmFkaWFuczogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGxldCBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGxldCBkc3QgPSBtYXRyaXguZGF0YTtcclxuICAgIFxyXG4gICAgICAgIGxldCB4ID0gYXhpcy54O1xyXG4gICAgICAgIGxldCB5ID0gYXhpcy55O1xyXG4gICAgICAgIGxldCB6ID0gYXhpcy56O1xyXG4gICAgICAgIGxldCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XHJcbiAgICAgICAgeCAvPSBuO1xyXG4gICAgICAgIHkgLz0gbjtcclxuICAgICAgICB6IC89IG47XHJcbiAgICAgICAgbGV0IHh4ID0geCAqIHg7XHJcbiAgICAgICAgbGV0IHl5ID0geSAqIHk7XHJcbiAgICAgICAgbGV0IHp6ID0geiAqIHo7XHJcbiAgICAgICAgbGV0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgICAgbGV0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgICAgbGV0IG9uZU1pbnVzQ29zaW5lID0gMSAtIGM7XHJcbiAgICBcclxuICAgICAgICBkc3RbIDBdID0geHggKyAoMSAtIHh4KSAqIGM7XHJcbiAgICAgICAgZHN0WyAxXSA9IHggKiB5ICogb25lTWludXNDb3NpbmUgKyB6ICogcztcclxuICAgICAgICBkc3RbIDJdID0geCAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHkgKiBzO1xyXG4gICAgICAgIGRzdFsgM10gPSAwO1xyXG4gICAgICAgIGRzdFsgNF0gPSB4ICogeSAqIG9uZU1pbnVzQ29zaW5lIC0geiAqIHM7XHJcbiAgICAgICAgZHN0WyA1XSA9IHl5ICsgKDEgLSB5eSkgKiBjO1xyXG4gICAgICAgIGRzdFsgNl0gPSB5ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeCAqIHM7XHJcbiAgICAgICAgZHN0WyA3XSA9IDA7XHJcbiAgICAgICAgZHN0WyA4XSA9IHggKiB6ICogb25lTWludXNDb3NpbmUgKyB5ICogcztcclxuICAgICAgICBkc3RbIDldID0geSAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHggKiBzO1xyXG4gICAgICAgIGRzdFsxMF0gPSB6eiArICgxIC0genopICogYztcclxuICAgICAgICBkc3RbMTFdID0gMDtcclxuICAgICAgICBkc3RbMTJdID0gMDtcclxuICAgICAgICBkc3RbMTNdID0gMDtcclxuICAgICAgICBkc3RbMTRdID0gMDtcclxuICAgICAgICBkc3RbMTVdID0gMTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBtYXRyaXg7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogTXVsdGlwbHkgYnkgYW4gYXhpcyByb3RhdGlvbiBtYXRyaXhcclxuICAgICAqIEBwYXJhbSB7TWF0cml4NH0gbSBtYXRyaXggdG8gbXVsdGlwbHlcclxuICAgICAqIEBwYXJhbSB7VmVjdG9yM30gYXhpcyBheGlzIHRvIHJvdGF0ZSBhcm91bmRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBhbW91bnQgdG8gcm90YXRlXHJcbiAgICAgKiBAcGFyYW0ge01hdHJpeDR9IFtkc3RdIG9wdGlvbmFsIG1hdHJpeCB0byBzdG9yZSByZXN1bHRcclxuICAgICAqIEByZXR1cm4ge01hdHJpeDR9IGRzdCBvciBhIG5ldyBtYXRyaXggaWYgbm9uZSBwcm92aWRlZFxyXG4gICAgICogQG1lbWJlck9mIG1vZHVsZTp3ZWJnbC0zZC1tYXRoXHJcbiAgICAgKi9cclxuICAgIGF4aXNSb3RhdGUoYXhpczogVmVjdG9yMywgYW5nbGVJblJhZGlhbnM6IG51bWJlcikgOiBNYXRyaXg0IHtcclxuXHJcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgb3B0aW1pemVkIHZlcnNpb24gb2ZcclxuICAgICAgICAvLyByZXR1cm4gbXVsdGlwbHkobSwgYXhpc1JvdGF0aW9uKGF4aXMsIGFuZ2xlSW5SYWRpYW5zKSwgZHN0KTtcclxuICAgICAgICBsZXQgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBsZXQgZHN0ID0gbWF0cml4LmRhdGE7XHJcbiAgICAgICAgbGV0IG0gPSB0aGlzLmRhdGE7XHJcblxyXG4gICAgICAgIHZhciB4ID0gYXhpcy54O1xyXG4gICAgICAgIHZhciB5ID0gYXhpcy55O1xyXG4gICAgICAgIHZhciB6ID0gYXhpcy56O1xyXG4gICAgICAgIHZhciBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XHJcbiAgICAgICAgeCAvPSBuO1xyXG4gICAgICAgIHkgLz0gbjtcclxuICAgICAgICB6IC89IG47XHJcbiAgICAgICAgdmFyIHh4ID0geCAqIHg7XHJcbiAgICAgICAgdmFyIHl5ID0geSAqIHk7XHJcbiAgICAgICAgdmFyIHp6ID0geiAqIHo7XHJcbiAgICAgICAgdmFyIGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgICAgdmFyIHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgICAgdmFyIG9uZU1pbnVzQ29zaW5lID0gMSAtIGM7XHJcbiAgICBcclxuICAgICAgICB2YXIgcjAwID0geHggKyAoMSAtIHh4KSAqIGM7XHJcbiAgICAgICAgdmFyIHIwMSA9IHggKiB5ICogb25lTWludXNDb3NpbmUgKyB6ICogcztcclxuICAgICAgICB2YXIgcjAyID0geCAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHkgKiBzO1xyXG4gICAgICAgIHZhciByMTAgPSB4ICogeSAqIG9uZU1pbnVzQ29zaW5lIC0geiAqIHM7XHJcbiAgICAgICAgdmFyIHIxMSA9IHl5ICsgKDEgLSB5eSkgKiBjO1xyXG4gICAgICAgIHZhciByMTIgPSB5ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeCAqIHM7XHJcbiAgICAgICAgdmFyIHIyMCA9IHggKiB6ICogb25lTWludXNDb3NpbmUgKyB5ICogcztcclxuICAgICAgICB2YXIgcjIxID0geSAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHggKiBzO1xyXG4gICAgICAgIHZhciByMjIgPSB6eiArICgxIC0genopICogYztcclxuICAgIFxyXG4gICAgICAgIHZhciBtMDAgPSBtWzBdO1xyXG4gICAgICAgIHZhciBtMDEgPSBtWzFdO1xyXG4gICAgICAgIHZhciBtMDIgPSBtWzJdO1xyXG4gICAgICAgIHZhciBtMDMgPSBtWzNdO1xyXG4gICAgICAgIHZhciBtMTAgPSBtWzRdO1xyXG4gICAgICAgIHZhciBtMTEgPSBtWzVdO1xyXG4gICAgICAgIHZhciBtMTIgPSBtWzZdO1xyXG4gICAgICAgIHZhciBtMTMgPSBtWzddO1xyXG4gICAgICAgIHZhciBtMjAgPSBtWzhdO1xyXG4gICAgICAgIHZhciBtMjEgPSBtWzldO1xyXG4gICAgICAgIHZhciBtMjIgPSBtWzEwXTtcclxuICAgICAgICB2YXIgbTIzID0gbVsxMV07XHJcbiAgICBcclxuICAgICAgICBkc3RbIDBdID0gcjAwICogbTAwICsgcjAxICogbTEwICsgcjAyICogbTIwO1xyXG4gICAgICAgIGRzdFsgMV0gPSByMDAgKiBtMDEgKyByMDEgKiBtMTEgKyByMDIgKiBtMjE7XHJcbiAgICAgICAgZHN0WyAyXSA9IHIwMCAqIG0wMiArIHIwMSAqIG0xMiArIHIwMiAqIG0yMjtcclxuICAgICAgICBkc3RbIDNdID0gcjAwICogbTAzICsgcjAxICogbTEzICsgcjAyICogbTIzO1xyXG4gICAgICAgIGRzdFsgNF0gPSByMTAgKiBtMDAgKyByMTEgKiBtMTAgKyByMTIgKiBtMjA7XHJcbiAgICAgICAgZHN0WyA1XSA9IHIxMCAqIG0wMSArIHIxMSAqIG0xMSArIHIxMiAqIG0yMTtcclxuICAgICAgICBkc3RbIDZdID0gcjEwICogbTAyICsgcjExICogbTEyICsgcjEyICogbTIyO1xyXG4gICAgICAgIGRzdFsgN10gPSByMTAgKiBtMDMgKyByMTEgKiBtMTMgKyByMTIgKiBtMjM7XHJcbiAgICAgICAgZHN0WyA4XSA9IHIyMCAqIG0wMCArIHIyMSAqIG0xMCArIHIyMiAqIG0yMDtcclxuICAgICAgICBkc3RbIDldID0gcjIwICogbTAxICsgcjIxICogbTExICsgcjIyICogbTIxO1xyXG4gICAgICAgIGRzdFsxMF0gPSByMjAgKiBtMDIgKyByMjEgKiBtMTIgKyByMjIgKiBtMjI7XHJcbiAgICAgICAgZHN0WzExXSA9IHIyMCAqIG0wMyArIHIyMSAqIG0xMyArIHIyMiAqIG0yMztcclxuICAgIFxyXG4gICAgICAgIGlmIChtICE9PSBkc3QpIHtcclxuICAgICAgICAgICAgZHN0WzEyXSA9IG1bMTJdO1xyXG4gICAgICAgICAgICBkc3RbMTNdID0gbVsxM107XHJcbiAgICAgICAgICAgIGRzdFsxNF0gPSBtWzE0XTtcclxuICAgICAgICAgICAgZHN0WzE1XSA9IG1bMTVdO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBtYXRyaXg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWFrZSBhIHNjYWxpbmcgbWF0cml4IFxyXG4gICAgc3RhdGljIG5ld1NjYWxlcihzeDogbnVtYmVyLCBzeTogbnVtYmVyLCBzejogbnVtYmVyKSA6IE1hdHJpeDQge1xyXG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4NChbXHJcbiAgICAgICAgICAgIHN4LDAsMCwwLFxyXG4gICAgICAgICAgICAwLHN5LDAsMCxcclxuICAgICAgICAgICAgMCwwLHN6LDAsXHJcbiAgICAgICAgICAgIDAsMCwwLCAxLFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTXVsdGlwbHkgYnkgYSBzY2FsaW5nIG1hdHJpeFxyXG4gICAgICAgICAqIEBwYXJhbSB7TWF0cml4NH0gbSBtYXRyaXggdG8gbXVsdGlwbHlcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3ggeCBzY2FsZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3kgeSBzY2FsZS5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3ogeiBzY2FsZS5cclxuICAgICAgICAgKiBAcGFyYW0ge01hdHJpeDR9IFtkc3RdIG9wdGlvbmFsIG1hdHJpeCB0byBzdG9yZSByZXN1bHRcclxuICAgICAgICAgKiBAcmV0dXJuIHtNYXRyaXg0fSBkc3Qgb3IgYSBuZXcgbWF0cml4IGlmIG5vbmUgcHJvdmlkZWRcclxuICAgICAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOndlYmdsLTNkLW1hdGhcclxuICAgICAgICAgKi9cclxuICAgIHNjYWxlKHN4OiBudW1iZXIsIHN5OiBudW1iZXIsIHN6OiBudW1iZXIpIDogTWF0cml4NCB7XHJcbiAgICBcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBvcHRpbWl6ZWQgdmVyc2lvbiBvZlxyXG4gICAgICAgIC8vIHJldHVybiBtdWx0aXBseShtLCBzY2FsaW5nKHN4LCBzeSwgc3opLCBkc3QpO1xyXG4gICAgXHJcbiAgICAgICAgbGV0IG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgbGV0IGRzdCA9IG1hdHJpeC5kYXRhO1xyXG4gICAgICAgIGxldCBtID0gdGhpcy5kYXRhO1xyXG5cclxuICAgICAgICBkc3RbIDBdID0gc3ggKiBtWzAgKiA0ICsgMF07XHJcbiAgICAgICAgZHN0WyAxXSA9IHN4ICogbVswICogNCArIDFdO1xyXG4gICAgICAgIGRzdFsgMl0gPSBzeCAqIG1bMCAqIDQgKyAyXTtcclxuICAgICAgICBkc3RbIDNdID0gc3ggKiBtWzAgKiA0ICsgM107XHJcbiAgICAgICAgZHN0WyA0XSA9IHN5ICogbVsxICogNCArIDBdO1xyXG4gICAgICAgIGRzdFsgNV0gPSBzeSAqIG1bMSAqIDQgKyAxXTtcclxuICAgICAgICBkc3RbIDZdID0gc3kgKiBtWzEgKiA0ICsgMl07XHJcbiAgICAgICAgZHN0WyA3XSA9IHN5ICogbVsxICogNCArIDNdO1xyXG4gICAgICAgIGRzdFsgOF0gPSBzeiAqIG1bMiAqIDQgKyAwXTtcclxuICAgICAgICBkc3RbIDldID0gc3ogKiBtWzIgKiA0ICsgMV07XHJcbiAgICAgICAgZHN0WzEwXSA9IHN6ICogbVsyICogNCArIDJdO1xyXG4gICAgICAgIGRzdFsxMV0gPSBzeiAqIG1bMiAqIDQgKyAzXTtcclxuICAgIFxyXG4gICAgICAgIGlmIChtICE9PSBkc3QpIHtcclxuICAgICAgICAgICAgZHN0WzEyXSA9IG1bMTJdO1xyXG4gICAgICAgICAgICBkc3RbMTNdID0gbVsxM107XHJcbiAgICAgICAgICAgIGRzdFsxNF0gPSBtWzE0XTtcclxuICAgICAgICAgICAgZHN0WzE1XSA9IG1bMTVdO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiBtYXRyaXg7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogY3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRyYW5zbGF0aW9uLCBxdWF0ZXJuaW9uLCBzY2FsZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJbXX0gdHJhbnNsYXRpb24gW3gsIHksIHpdIHRyYW5zbGF0aW9uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSBxdWF0ZXJuaW9uIFt4LCB5LCB6LCB6XSBxdWF0ZXJuaW9uIHJvdGF0aW9uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSBzY2FsZSBbeCwgeSwgel0gc2NhbGVcclxuICAgICAqIEBwYXJhbSB7TWF0cml4NH0gW2RzdF0gb3B0aW9uYWwgbWF0cml4IHRvIHN0b3JlIHJlc3VsdFxyXG4gICAgICogQHJldHVybiB7TWF0cml4NH0gZHN0IG9yIGEgbmV3IG1hdHJpeCBpZiBub25lIHByb3ZpZGVkXHJcbiAgICAgKi9cclxuICAgIG5ld0NvbXBvc2UodHJhbnNsYXRpb246IFZlY3RvcjMsIHF1YXRlcm5pb246IFF1YXRlcm5pb24sIHNjYWxlOiBWZWN0b3IzKSA6IE1hdHJpeDQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGxldCBkc3QgPSBtYXRyaXguZGF0YTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHggPSBxdWF0ZXJuaW9uLng7XHJcbiAgICAgICAgY29uc3QgeSA9IHF1YXRlcm5pb24ueTtcclxuICAgICAgICBjb25zdCB6ID0gcXVhdGVybmlvbi56O1xyXG4gICAgICAgIGNvbnN0IHcgPSBxdWF0ZXJuaW9uLnc7XHJcbiAgICBcclxuICAgICAgICBjb25zdCB4MiA9IHggKyB4O1xyXG4gICAgICAgIGNvbnN0IHkyID0geSArIHk7XHJcbiAgICAgICAgY29uc3QgejIgPSB6ICsgejtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHh4ID0geCAqIHgyO1xyXG4gICAgICAgIGNvbnN0IHh5ID0geCAqIHkyO1xyXG4gICAgICAgIGNvbnN0IHh6ID0geCAqIHoyO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgeXkgPSB5ICogeTI7XHJcbiAgICAgICAgY29uc3QgeXogPSB5ICogejI7XHJcbiAgICAgICAgY29uc3QgenogPSB6ICogejI7XHJcbiAgICBcclxuICAgICAgICBjb25zdCB3eCA9IHcgKiB4MjtcclxuICAgICAgICBjb25zdCB3eSA9IHcgKiB5MjtcclxuICAgICAgICBjb25zdCB3eiA9IHcgKiB6MjtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHN4ID0gc2NhbGUueDtcclxuICAgICAgICBjb25zdCBzeSA9IHNjYWxlLnk7XHJcbiAgICAgICAgY29uc3Qgc3ogPSBzY2FsZS56O1xyXG4gICAgXHJcbiAgICAgICAgZHN0WzBdID0gKDEgLSAoeXkgKyB6eikpICogc3g7XHJcbiAgICAgICAgZHN0WzFdID0gKHh5ICsgd3opICogc3g7XHJcbiAgICAgICAgZHN0WzJdID0gKHh6IC0gd3kpICogc3g7XHJcbiAgICAgICAgZHN0WzNdID0gMDtcclxuICAgIFxyXG4gICAgICAgIGRzdFs0XSA9ICh4eSAtIHd6KSAqIHN5O1xyXG4gICAgICAgIGRzdFs1XSA9ICgxIC0gKHh4ICsgenopKSAqIHN5O1xyXG4gICAgICAgIGRzdFs2XSA9ICh5eiArIHd4KSAqIHN5O1xyXG4gICAgICAgIGRzdFs3XSA9IDA7XHJcbiAgICBcclxuICAgICAgICBkc3RbIDhdID0gKHh6ICsgd3kpICogc3o7XHJcbiAgICAgICAgZHN0WyA5XSA9ICh5eiAtIHd4KSAqIHN6O1xyXG4gICAgICAgIGRzdFsxMF0gPSAoMSAtICh4eCArIHl5KSkgKiBzejtcclxuICAgICAgICBkc3RbMTFdID0gMDtcclxuICAgIFxyXG4gICAgICAgIGRzdFsxMl0gPSB0cmFuc2xhdGlvbi54O1xyXG4gICAgICAgIGRzdFsxM10gPSB0cmFuc2xhdGlvbi55O1xyXG4gICAgICAgIGRzdFsxNF0gPSB0cmFuc2xhdGlvbi56O1xyXG4gICAgICAgIGRzdFsxNV0gPSAxO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gcXVhdEZyb21Sb3RhdGlvbk1hdHJpeCgpIHtcclxuICAgIC8vICAgICAvLyBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9nZW9tZXRyeS9yb3RhdGlvbnMvY29udmVyc2lvbnMvbWF0cml4VG9RdWF0ZXJuaW9uL2luZGV4Lmh0bVxyXG4gICAgXHJcbiAgICAvLyAgICAgLy8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZClcclxuICAgIC8vICAgICBjb25zdCBtMTEgPSBtWzBdO1xyXG4gICAgLy8gICAgIGNvbnN0IG0xMiA9IG1bNF07XHJcbiAgICAvLyAgICAgY29uc3QgbTEzID0gbVs4XTtcclxuICAgIC8vICAgICBjb25zdCBtMjEgPSBtWzFdO1xyXG4gICAgLy8gICAgIGNvbnN0IG0yMiA9IG1bNV07XHJcbiAgICAvLyAgICAgY29uc3QgbTIzID0gbVs5XTtcclxuICAgIC8vICAgICBjb25zdCBtMzEgPSBtWzJdO1xyXG4gICAgLy8gICAgIGNvbnN0IG0zMiA9IG1bNl07XHJcbiAgICAvLyAgICAgY29uc3QgbTMzID0gbVsxMF07XHJcbiAgICBcclxuICAgIC8vICAgICBjb25zdCB0cmFjZSA9IG0xMSArIG0yMiArIG0zMztcclxuICAgIFxyXG4gICAgLy8gICAgIGlmICh0cmFjZSA+IDApIHtcclxuICAgIC8vICAgICAgICAgY29uc3QgcyA9IDAuNSAvIE1hdGguc3FydCh0cmFjZSArIDEpO1xyXG4gICAgLy8gICAgICAgICBkc3RbM10gPSAwLjI1IC8gcztcclxuICAgIC8vICAgICAgICAgZHN0WzBdID0gKG0zMiAtIG0yMykgKiBzO1xyXG4gICAgLy8gICAgICAgICBkc3RbMV0gPSAobTEzIC0gbTMxKSAqIHM7XHJcbiAgICAvLyAgICAgICAgIGRzdFsyXSA9IChtMjEgLSBtMTIpICogcztcclxuICAgIC8vICAgICB9IGVsc2UgaWYgKG0xMSA+IG0yMiAmJiBtMTEgPiBtMzMpIHtcclxuICAgIC8vICAgICAgICAgY29uc3QgcyA9IDIgKiBNYXRoLnNxcnQoMSArIG0xMSAtIG0yMiAtIG0zMyk7XHJcbiAgICAvLyAgICAgICAgIGRzdFszXSA9IChtMzIgLSBtMjMpIC8gcztcclxuICAgIC8vICAgICAgICAgZHN0WzBdID0gMC4yNSAqIHM7XHJcbiAgICAvLyAgICAgICAgIGRzdFsxXSA9IChtMTIgKyBtMjEpIC8gcztcclxuICAgIC8vICAgICAgICAgZHN0WzJdID0gKG0xMyArIG0zMSkgLyBzO1xyXG4gICAgLy8gICAgIH0gZWxzZSBpZiAobTIyID4gbTMzKSB7XHJcbiAgICAvLyAgICAgICAgIGNvbnN0IHMgPSAyICogTWF0aC5zcXJ0KDEgKyBtMjIgLSBtMTEgLSBtMzMpO1xyXG4gICAgLy8gICAgICAgICBkc3RbM10gPSAobTEzIC0gbTMxKSAvIHM7XHJcbiAgICAvLyAgICAgICAgIGRzdFswXSA9IChtMTIgKyBtMjEpIC8gcztcclxuICAgIC8vICAgICAgICAgZHN0WzFdID0gMC4yNSAqIHM7XHJcbiAgICAvLyAgICAgICAgIGRzdFsyXSA9IChtMjMgKyBtMzIpIC8gcztcclxuICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICBjb25zdCBzID0gMiAqIE1hdGguc3FydCgxICsgbTMzIC0gbTExIC0gbTIyKTtcclxuICAgIC8vICAgICAgICAgZHN0WzNdID0gKG0yMSAtIG0xMikgLyBzO1xyXG4gICAgLy8gICAgICAgICBkc3RbMF0gPSAobTEzICsgbTMxKSAvIHM7XHJcbiAgICAvLyAgICAgICAgIGRzdFsxXSA9IChtMjMgKyBtMzIpIC8gcztcclxuICAgIC8vICAgICAgICAgZHN0WzJdID0gMC4yNSAqIHM7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICAvLyBkZWNvbXBvc2UobWF0LCB0cmFuc2xhdGlvbiwgcXVhdGVybmlvbiwgc2NhbGUpIHtcclxuICAgIC8vICAgICBsZXQgc3ggPSBtNC5sZW5ndGgobWF0LnNsaWNlKDAsIDMpKTtcclxuICAgIC8vICAgICBjb25zdCBzeSA9IG00Lmxlbmd0aChtYXQuc2xpY2UoNCwgNykpO1xyXG4gICAgLy8gICAgIGNvbnN0IHN6ID0gbTQubGVuZ3RoKG1hdC5zbGljZSg4LCAxMSkpO1xyXG4gICAgXHJcbiAgICAvLyAgICAgLy8gaWYgZGV0ZXJtaW5hdGUgaXMgbmVnYXRpdmUsIHdlIG5lZWQgdG8gaW52ZXJ0IG9uZSBzY2FsZVxyXG4gICAgLy8gICAgIGNvbnN0IGRldCA9IGRldGVybWluYXRlKG1hdCk7XHJcbiAgICAvLyAgICAgaWYgKGRldCA8IDApIHtcclxuICAgIC8vICAgICAgICAgc3ggPSAtc3g7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgXHJcbiAgICAvLyAgICAgdHJhbnNsYXRpb25bMF0gPSBtYXRbMTJdO1xyXG4gICAgLy8gICAgIHRyYW5zbGF0aW9uWzFdID0gbWF0WzEzXTtcclxuICAgIC8vICAgICB0cmFuc2xhdGlvblsyXSA9IG1hdFsxNF07XHJcbiAgICBcclxuICAgIC8vICAgICAvLyBzY2FsZSB0aGUgcm90YXRpb24gcGFydFxyXG4gICAgLy8gICAgIGNvbnN0IG1hdHJpeCA9IG00LmNvcHkobWF0KTtcclxuICAgIFxyXG4gICAgLy8gICAgIGNvbnN0IGludlNYID0gMSAvIHN4O1xyXG4gICAgLy8gICAgIGNvbnN0IGludlNZID0gMSAvIHN5O1xyXG4gICAgLy8gICAgIGNvbnN0IGludlNaID0gMSAvIHN6O1xyXG4gICAgXHJcbiAgICAvLyAgICAgbWF0cml4WzBdICo9IGludlNYO1xyXG4gICAgLy8gICAgIG1hdHJpeFsxXSAqPSBpbnZTWDtcclxuICAgIC8vICAgICBtYXRyaXhbMl0gKj0gaW52U1g7XHJcbiAgICBcclxuICAgIC8vICAgICBtYXRyaXhbNF0gKj0gaW52U1k7XHJcbiAgICAvLyAgICAgbWF0cml4WzVdICo9IGludlNZO1xyXG4gICAgLy8gICAgIG1hdHJpeFs2XSAqPSBpbnZTWTtcclxuICAgIFxyXG4gICAgLy8gICAgIG1hdHJpeFs4XSAqPSBpbnZTWjtcclxuICAgIC8vICAgICBtYXRyaXhbOV0gKj0gaW52U1o7XHJcbiAgICAvLyAgICAgbWF0cml4WzEwXSAqPSBpbnZTWjtcclxuICAgIFxyXG4gICAgLy8gICAgIHF1YXRGcm9tUm90YXRpb25NYXRyaXgobWF0cml4LCBxdWF0ZXJuaW9uKTtcclxuICAgIFxyXG4gICAgLy8gICAgIHNjYWxlWzBdID0gc3g7XHJcbiAgICAvLyAgICAgc2NhbGVbMV0gPSBzeTtcclxuICAgIC8vICAgICBzY2FsZVsyXSA9IHN6O1xyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICBkZXRlcm1pbmF0ZSgpIDogbnVtYmVyIHtcclxuXHJcbiAgICAgICAgbGV0IG0gPSB0aGlzLmRhdGE7XHJcblxyXG4gICAgICAgIHZhciBtMDAgPSBtWzAgKiA0ICsgMF07XHJcbiAgICAgICAgdmFyIG0wMSA9IG1bMCAqIDQgKyAxXTtcclxuICAgICAgICB2YXIgbTAyID0gbVswICogNCArIDJdO1xyXG4gICAgICAgIHZhciBtMDMgPSBtWzAgKiA0ICsgM107XHJcbiAgICAgICAgdmFyIG0xMCA9IG1bMSAqIDQgKyAwXTtcclxuICAgICAgICB2YXIgbTExID0gbVsxICogNCArIDFdO1xyXG4gICAgICAgIHZhciBtMTIgPSBtWzEgKiA0ICsgMl07XHJcbiAgICAgICAgdmFyIG0xMyA9IG1bMSAqIDQgKyAzXTtcclxuICAgICAgICB2YXIgbTIwID0gbVsyICogNCArIDBdO1xyXG4gICAgICAgIHZhciBtMjEgPSBtWzIgKiA0ICsgMV07XHJcbiAgICAgICAgdmFyIG0yMiA9IG1bMiAqIDQgKyAyXTtcclxuICAgICAgICB2YXIgbTIzID0gbVsyICogNCArIDNdO1xyXG4gICAgICAgIHZhciBtMzAgPSBtWzMgKiA0ICsgMF07XHJcbiAgICAgICAgdmFyIG0zMSA9IG1bMyAqIDQgKyAxXTtcclxuICAgICAgICB2YXIgbTMyID0gbVszICogNCArIDJdO1xyXG4gICAgICAgIHZhciBtMzMgPSBtWzMgKiA0ICsgM107XHJcbiAgICAgICAgdmFyIHRtcF8wICA9IG0yMiAqIG0zMztcclxuICAgICAgICB2YXIgdG1wXzEgID0gbTMyICogbTIzO1xyXG4gICAgICAgIHZhciB0bXBfMiAgPSBtMTIgKiBtMzM7XHJcbiAgICAgICAgdmFyIHRtcF8zICA9IG0zMiAqIG0xMztcclxuICAgICAgICB2YXIgdG1wXzQgID0gbTEyICogbTIzO1xyXG4gICAgICAgIHZhciB0bXBfNSAgPSBtMjIgKiBtMTM7XHJcbiAgICAgICAgdmFyIHRtcF82ICA9IG0wMiAqIG0zMztcclxuICAgICAgICB2YXIgdG1wXzcgID0gbTMyICogbTAzO1xyXG4gICAgICAgIHZhciB0bXBfOCAgPSBtMDIgKiBtMjM7XHJcbiAgICAgICAgdmFyIHRtcF85ICA9IG0yMiAqIG0wMztcclxuICAgICAgICB2YXIgdG1wXzEwID0gbTAyICogbTEzO1xyXG4gICAgICAgIHZhciB0bXBfMTEgPSBtMTIgKiBtMDM7XHJcbiAgICBcclxuICAgICAgICB2YXIgdDAgPSAodG1wXzAgKiBtMTEgKyB0bXBfMyAqIG0yMSArIHRtcF80ICogbTMxKSAtXHJcbiAgICAgICAgICAgICh0bXBfMSAqIG0xMSArIHRtcF8yICogbTIxICsgdG1wXzUgKiBtMzEpO1xyXG4gICAgICAgIHZhciB0MSA9ICh0bXBfMSAqIG0wMSArIHRtcF82ICogbTIxICsgdG1wXzkgKiBtMzEpIC1cclxuICAgICAgICAgICAgKHRtcF8wICogbTAxICsgdG1wXzcgKiBtMjEgKyB0bXBfOCAqIG0zMSk7XHJcbiAgICAgICAgdmFyIHQyID0gKHRtcF8yICogbTAxICsgdG1wXzcgKiBtMTEgKyB0bXBfMTAgKiBtMzEpIC1cclxuICAgICAgICAgICAgKHRtcF8zICogbTAxICsgdG1wXzYgKiBtMTEgKyB0bXBfMTEgKiBtMzEpO1xyXG4gICAgICAgIHZhciB0MyA9ICh0bXBfNSAqIG0wMSArIHRtcF84ICogbTExICsgdG1wXzExICogbTIxKSAtXHJcbiAgICAgICAgICAgICh0bXBfNCAqIG0wMSArIHRtcF85ICogbTExICsgdG1wXzEwICogbTIxKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiAxLjAgLyAobTAwICogdDAgKyBtMTAgKiB0MSArIG0yMCAqIHQyICsgbTMwICogdDMpO1xyXG4gICAgfVxyXG5cclxuICAgIGludmVyc2UoKSA6IE1hdHJpeDQge1xyXG5cclxuICAgICAgICBsZXQgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBsZXQgZHN0ID0gbWF0cml4LmRhdGE7XHJcbiAgICAgICAgbGV0IG0gPSB0aGlzLmRhdGE7XHJcblxyXG4gICAgICAgIHZhciBtMDAgPSBtWzAgKiA0ICsgMF07XHJcbiAgICAgICAgdmFyIG0wMSA9IG1bMCAqIDQgKyAxXTtcclxuICAgICAgICB2YXIgbTAyID0gbVswICogNCArIDJdO1xyXG4gICAgICAgIHZhciBtMDMgPSBtWzAgKiA0ICsgM107XHJcbiAgICAgICAgdmFyIG0xMCA9IG1bMSAqIDQgKyAwXTtcclxuICAgICAgICB2YXIgbTExID0gbVsxICogNCArIDFdO1xyXG4gICAgICAgIHZhciBtMTIgPSBtWzEgKiA0ICsgMl07XHJcbiAgICAgICAgdmFyIG0xMyA9IG1bMSAqIDQgKyAzXTtcclxuICAgICAgICB2YXIgbTIwID0gbVsyICogNCArIDBdO1xyXG4gICAgICAgIHZhciBtMjEgPSBtWzIgKiA0ICsgMV07XHJcbiAgICAgICAgdmFyIG0yMiA9IG1bMiAqIDQgKyAyXTtcclxuICAgICAgICB2YXIgbTIzID0gbVsyICogNCArIDNdO1xyXG4gICAgICAgIHZhciBtMzAgPSBtWzMgKiA0ICsgMF07XHJcbiAgICAgICAgdmFyIG0zMSA9IG1bMyAqIDQgKyAxXTtcclxuICAgICAgICB2YXIgbTMyID0gbVszICogNCArIDJdO1xyXG4gICAgICAgIHZhciBtMzMgPSBtWzMgKiA0ICsgM107XHJcbiAgICAgICAgdmFyIHRtcF8wICA9IG0yMiAqIG0zMztcclxuICAgICAgICB2YXIgdG1wXzEgID0gbTMyICogbTIzO1xyXG4gICAgICAgIHZhciB0bXBfMiAgPSBtMTIgKiBtMzM7XHJcbiAgICAgICAgdmFyIHRtcF8zICA9IG0zMiAqIG0xMztcclxuICAgICAgICB2YXIgdG1wXzQgID0gbTEyICogbTIzO1xyXG4gICAgICAgIHZhciB0bXBfNSAgPSBtMjIgKiBtMTM7XHJcbiAgICAgICAgdmFyIHRtcF82ICA9IG0wMiAqIG0zMztcclxuICAgICAgICB2YXIgdG1wXzcgID0gbTMyICogbTAzO1xyXG4gICAgICAgIHZhciB0bXBfOCAgPSBtMDIgKiBtMjM7XHJcbiAgICAgICAgdmFyIHRtcF85ICA9IG0yMiAqIG0wMztcclxuICAgICAgICB2YXIgdG1wXzEwID0gbTAyICogbTEzO1xyXG4gICAgICAgIHZhciB0bXBfMTEgPSBtMTIgKiBtMDM7XHJcbiAgICAgICAgdmFyIHRtcF8xMiA9IG0yMCAqIG0zMTtcclxuICAgICAgICB2YXIgdG1wXzEzID0gbTMwICogbTIxO1xyXG4gICAgICAgIHZhciB0bXBfMTQgPSBtMTAgKiBtMzE7XHJcbiAgICAgICAgdmFyIHRtcF8xNSA9IG0zMCAqIG0xMTtcclxuICAgICAgICB2YXIgdG1wXzE2ID0gbTEwICogbTIxO1xyXG4gICAgICAgIHZhciB0bXBfMTcgPSBtMjAgKiBtMTE7XHJcbiAgICAgICAgdmFyIHRtcF8xOCA9IG0wMCAqIG0zMTtcclxuICAgICAgICB2YXIgdG1wXzE5ID0gbTMwICogbTAxO1xyXG4gICAgICAgIHZhciB0bXBfMjAgPSBtMDAgKiBtMjE7XHJcbiAgICAgICAgdmFyIHRtcF8yMSA9IG0yMCAqIG0wMTtcclxuICAgICAgICB2YXIgdG1wXzIyID0gbTAwICogbTExO1xyXG4gICAgICAgIHZhciB0bXBfMjMgPSBtMTAgKiBtMDE7XHJcbiAgICBcclxuICAgICAgICB2YXIgdDAgPSAodG1wXzAgKiBtMTEgKyB0bXBfMyAqIG0yMSArIHRtcF80ICogbTMxKSAtXHJcbiAgICAgICAgICAgICh0bXBfMSAqIG0xMSArIHRtcF8yICogbTIxICsgdG1wXzUgKiBtMzEpO1xyXG4gICAgICAgIHZhciB0MSA9ICh0bXBfMSAqIG0wMSArIHRtcF82ICogbTIxICsgdG1wXzkgKiBtMzEpIC1cclxuICAgICAgICAgICAgKHRtcF8wICogbTAxICsgdG1wXzcgKiBtMjEgKyB0bXBfOCAqIG0zMSk7XHJcbiAgICAgICAgdmFyIHQyID0gKHRtcF8yICogbTAxICsgdG1wXzcgKiBtMTEgKyB0bXBfMTAgKiBtMzEpIC1cclxuICAgICAgICAgICAgKHRtcF8zICogbTAxICsgdG1wXzYgKiBtMTEgKyB0bXBfMTEgKiBtMzEpO1xyXG4gICAgICAgIHZhciB0MyA9ICh0bXBfNSAqIG0wMSArIHRtcF84ICogbTExICsgdG1wXzExICogbTIxKSAtXHJcbiAgICAgICAgICAgICh0bXBfNCAqIG0wMSArIHRtcF85ICogbTExICsgdG1wXzEwICogbTIxKTtcclxuICAgIFxyXG4gICAgICAgIHZhciBkID0gMS4wIC8gKG0wMCAqIHQwICsgbTEwICogdDEgKyBtMjAgKiB0MiArIG0zMCAqIHQzKTtcclxuICAgIFxyXG4gICAgICAgIGRzdFswXSA9IGQgKiB0MDtcclxuICAgICAgICBkc3RbMV0gPSBkICogdDE7XHJcbiAgICAgICAgZHN0WzJdID0gZCAqIHQyO1xyXG4gICAgICAgIGRzdFszXSA9IGQgKiB0MztcclxuICAgICAgICBkc3RbNF0gPSBkICogKCh0bXBfMSAqIG0xMCArIHRtcF8yICogbTIwICsgdG1wXzUgKiBtMzApIC1cclxuICAgICAgICAgICAgICAgICh0bXBfMCAqIG0xMCArIHRtcF8zICogbTIwICsgdG1wXzQgKiBtMzApKTtcclxuICAgICAgICBkc3RbNV0gPSBkICogKCh0bXBfMCAqIG0wMCArIHRtcF83ICogbTIwICsgdG1wXzggKiBtMzApIC1cclxuICAgICAgICAgICAgICAgICh0bXBfMSAqIG0wMCArIHRtcF82ICogbTIwICsgdG1wXzkgKiBtMzApKTtcclxuICAgICAgICBkc3RbNl0gPSBkICogKCh0bXBfMyAqIG0wMCArIHRtcF82ICogbTEwICsgdG1wXzExICogbTMwKSAtXHJcbiAgICAgICAgICAgICAgICAodG1wXzIgKiBtMDAgKyB0bXBfNyAqIG0xMCArIHRtcF8xMCAqIG0zMCkpO1xyXG4gICAgICAgIGRzdFs3XSA9IGQgKiAoKHRtcF80ICogbTAwICsgdG1wXzkgKiBtMTAgKyB0bXBfMTAgKiBtMjApIC1cclxuICAgICAgICAgICAgICAgICh0bXBfNSAqIG0wMCArIHRtcF84ICogbTEwICsgdG1wXzExICogbTIwKSk7XHJcbiAgICAgICAgZHN0WzhdID0gZCAqICgodG1wXzEyICogbTEzICsgdG1wXzE1ICogbTIzICsgdG1wXzE2ICogbTMzKSAtXHJcbiAgICAgICAgICAgICAgICAodG1wXzEzICogbTEzICsgdG1wXzE0ICogbTIzICsgdG1wXzE3ICogbTMzKSk7XHJcbiAgICAgICAgZHN0WzldID0gZCAqICgodG1wXzEzICogbTAzICsgdG1wXzE4ICogbTIzICsgdG1wXzIxICogbTMzKSAtXHJcbiAgICAgICAgICAgICAgICAodG1wXzEyICogbTAzICsgdG1wXzE5ICogbTIzICsgdG1wXzIwICogbTMzKSk7XHJcbiAgICAgICAgZHN0WzEwXSA9IGQgKiAoKHRtcF8xNCAqIG0wMyArIHRtcF8xOSAqIG0xMyArIHRtcF8yMiAqIG0zMykgLVxyXG4gICAgICAgICAgICAgICAgKHRtcF8xNSAqIG0wMyArIHRtcF8xOCAqIG0xMyArIHRtcF8yMyAqIG0zMykpO1xyXG4gICAgICAgIGRzdFsxMV0gPSBkICogKCh0bXBfMTcgKiBtMDMgKyB0bXBfMjAgKiBtMTMgKyB0bXBfMjMgKiBtMjMpIC1cclxuICAgICAgICAgICAgICAgICh0bXBfMTYgKiBtMDMgKyB0bXBfMjEgKiBtMTMgKyB0bXBfMjIgKiBtMjMpKTtcclxuICAgICAgICBkc3RbMTJdID0gZCAqICgodG1wXzE0ICogbTIyICsgdG1wXzE3ICogbTMyICsgdG1wXzEzICogbTEyKSAtXHJcbiAgICAgICAgICAgICAgICAodG1wXzE2ICogbTMyICsgdG1wXzEyICogbTEyICsgdG1wXzE1ICogbTIyKSk7XHJcbiAgICAgICAgZHN0WzEzXSA9IGQgKiAoKHRtcF8yMCAqIG0zMiArIHRtcF8xMiAqIG0wMiArIHRtcF8xOSAqIG0yMikgLVxyXG4gICAgICAgICAgICAgICAgKHRtcF8xOCAqIG0yMiArIHRtcF8yMSAqIG0zMiArIHRtcF8xMyAqIG0wMikpO1xyXG4gICAgICAgIGRzdFsxNF0gPSBkICogKCh0bXBfMTggKiBtMTIgKyB0bXBfMjMgKiBtMzIgKyB0bXBfMTUgKiBtMDIpIC1cclxuICAgICAgICAgICAgICAgICh0bXBfMjIgKiBtMzIgKyB0bXBfMTQgKiBtMDIgKyB0bXBfMTkgKiBtMTIpKTtcclxuICAgICAgICBkc3RbMTVdID0gZCAqICgodG1wXzIyICogbTIyICsgdG1wXzE2ICogbTAyICsgdG1wXzIxICogbTEyKSAtXHJcbiAgICAgICAgICAgICAgICAodG1wXzIwICogbTEyICsgdG1wXzIzICogbTIyICsgdG1wXzE3ICogbTAyKSk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gbWF0cml4O1xyXG4gICAgfVxyXG5cclxuICAgIG11bHRpcGx5VmVjdG9yKHY6IFZlY3RvcjMpIDogVmVjdG9yMyB7XHJcblxyXG4gICAgICAgIGxldCBkYXRhID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgKytpKSB7XHJcbiAgICAgICAgICAgIGRhdGFbaV0gPSAwLjA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldICs9IHYuaXRlbShqKSAqIHRoaXMuZ2V0KGosIGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyhkYXRhWzBdLCBkYXRhWzFdLCBkYXRhWzJdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbXVsdGlwbHlWZWN0b3JzKG90aGVyOiBWZWN0b3IzQXJyYXkpIDogVmVjdG9yM0FycmF5IHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBkdW1iIHdheVxyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5jb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHZlYyA9IG90aGVyLmdldFZlY3RvcihpKTtcclxuICAgICAgICAgICAgdmVjID0gdGhpcy5tdWx0aXBseVZlY3Rvcih2ZWMpO1xyXG4gICAgICAgICAgICBvdGhlci5zZXRWZWN0b3IoaSwgdmVjKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG90aGVyO1xyXG5cclxuICAgICAgICAvLyBzbWFydCB3YXlcclxuICAgICAgICAvLyBsZXQgbWF0cml4ID0gbmV3IFZlY3RvcjNBcnJheShvdGhlci5jb3VudCgpKTtcclxuICAgICAgICAvLyAvLyBmb3IgZXZlcnkgcm93XHJcbiAgICAgICAgLy8gZm9yICh2YXIgciA9IDA7IHIgPCBvdGhlci5jb3VudCgpOyByKyspIHtcclxuXHJcbiAgICAgICAgLy8gICAgIC8vIGZvciBldmVyeSBpdGVtIGluIHJvd1xyXG4gICAgICAgIC8vICAgICBmb3IgKHZhciBjID0gMDsgYyA8IDM7ICsrYykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgICAgICBsZXQgaXRlbSA9IDAuMDtcclxuICAgICAgICAvLyAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNDsgKytqKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaXRlbSArPSBvdGhlci5nZXQociwgYykgKiB0aGlzLmdldChqLCBjKTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgIG1hdHJpeC5zZXQociwgYywgaXRlbSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIG90aGVyLmRhdGEgPSBtYXRyaXguZGF0YTtcclxuICAgICAgICByZXR1cm4gb3RoZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLyoqXHJcbiAgICAvLyAgKiBUYWtlcyBhIDQtYnktNCBtYXRyaXggYW5kIGEgdmVjdG9yIHdpdGggMyBlbnRyaWVzLFxyXG4gICAgLy8gICogaW50ZXJwcmV0cyB0aGUgdmVjdG9yIGFzIGEgcG9pbnQsIHRyYW5zZm9ybXMgdGhhdCBwb2ludCBieSB0aGUgbWF0cml4LCBhbmRcclxuICAgIC8vICAqIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIHZlY3RvciB3aXRoIDMgZW50cmllcy5cclxuICAgIC8vICAqIEBwYXJhbSB7TWF0cml4NH0gbSBUaGUgbWF0cml4LlxyXG4gICAgLy8gICogQHBhcmFtIHtWZWN0b3IzfSB2IFRoZSBwb2ludC5cclxuICAgIC8vICAqIEBwYXJhbSB7VmVjdG9yNH0gZHN0IG9wdGlvbmFsIHZlY3RvcjQgdG8gc3RvcmUgcmVzdWx0XHJcbiAgICAvLyAgKiBAcmV0dXJuIHtWZWN0b3I0fSBkc3Qgb3IgbmV3IFZlY3RvcjQgaWYgbm90IHByb3ZpZGVkXHJcbiAgICAvLyAgKiBAbWVtYmVyT2YgbW9kdWxlOndlYmdsLTNkLW1hdGhcclxuICAgIC8vICAqL1xyXG4gICAgLy8gZnVuY3Rpb24gdHJhbnNmb3JtUG9pbnQobSwgdiwgZHN0KSB7XHJcbiAgICAvLyAgICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDMpO1xyXG4gICAgLy8gICAgIHZhciB2MCA9IHZbMF07XHJcbiAgICAvLyAgICAgdmFyIHYxID0gdlsxXTtcclxuICAgIC8vICAgICB2YXIgdjIgPSB2WzJdO1xyXG4gICAgLy8gICAgIHZhciBkID0gdjAgKiBtWzAgKiA0ICsgM10gKyB2MSAqIG1bMSAqIDQgKyAzXSArIHYyICogbVsyICogNCArIDNdICsgbVszICogNCArIDNdO1xyXG4gICAgXHJcbiAgICAvLyAgICAgZHN0WzBdID0gKHYwICogbVswICogNCArIDBdICsgdjEgKiBtWzEgKiA0ICsgMF0gKyB2MiAqIG1bMiAqIDQgKyAwXSArIG1bMyAqIDQgKyAwXSkgLyBkO1xyXG4gICAgLy8gICAgIGRzdFsxXSA9ICh2MCAqIG1bMCAqIDQgKyAxXSArIHYxICogbVsxICogNCArIDFdICsgdjIgKiBtWzIgKiA0ICsgMV0gKyBtWzMgKiA0ICsgMV0pIC8gZDtcclxuICAgIC8vICAgICBkc3RbMl0gPSAodjAgKiBtWzAgKiA0ICsgMl0gKyB2MSAqIG1bMSAqIDQgKyAyXSArIHYyICogbVsyICogNCArIDJdICsgbVszICogNCArIDJdKSAvIGQ7XHJcbiAgICBcclxuICAgIC8vICAgICByZXR1cm4gZHN0O1xyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICAvLyAvKipcclxuICAgIC8vICAqIFRha2VzIGEgNC1ieS00IG1hdHJpeCBhbmQgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXMsIGludGVycHJldHMgdGhlIHZlY3RvciBhcyBhXHJcbiAgICAvLyAgKiBkaXJlY3Rpb24sIHRyYW5zZm9ybXMgdGhhdCBkaXJlY3Rpb24gYnkgdGhlIG1hdHJpeCwgYW5kIHJldHVybnMgdGhlIHJlc3VsdDtcclxuICAgIC8vICAqIGFzc3VtZXMgdGhlIHRyYW5zZm9ybWF0aW9uIG9mIDMtZGltZW5zaW9uYWwgc3BhY2UgcmVwcmVzZW50ZWQgYnkgdGhlIG1hdHJpeFxyXG4gICAgLy8gICogaXMgcGFyYWxsZWwtcHJlc2VydmluZywgaS5lLiBhbnkgY29tYmluYXRpb24gb2Ygcm90YXRpb24sIHNjYWxpbmcgYW5kXHJcbiAgICAvLyAgKiB0cmFuc2xhdGlvbiwgYnV0IG5vdCBhIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIFJldHVybnMgYSB2ZWN0b3Igd2l0aCAzXHJcbiAgICAvLyAgKiBlbnRyaWVzLlxyXG4gICAgLy8gICogQHBhcmFtIHtNYXRyaXg0fSBtIFRoZSBtYXRyaXguXHJcbiAgICAvLyAgKiBAcGFyYW0ge1ZlY3RvcjN9IHYgVGhlIGRpcmVjdGlvbi5cclxuICAgIC8vICAqIEBwYXJhbSB7VmVjdG9yNH0gZHN0IG9wdGlvbmFsIHZlY3RvcjQgdG8gc3RvcmUgcmVzdWx0XHJcbiAgICAvLyAgKiBAcmV0dXJuIHtWZWN0b3I0fSBkc3Qgb3IgbmV3IFZlY3RvcjQgaWYgbm90IHByb3ZpZGVkXHJcbiAgICAvLyAgKiBAbWVtYmVyT2YgbW9kdWxlOndlYmdsLTNkLW1hdGhcclxuICAgIC8vICAqL1xyXG4gICAgLy8gZnVuY3Rpb24gdHJhbnNmb3JtRGlyZWN0aW9uKG0sIHYsIGRzdCkge1xyXG4gICAgLy8gICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgzKTtcclxuICAgIFxyXG4gICAgLy8gICAgIHZhciB2MCA9IHZbMF07XHJcbiAgICAvLyAgICAgdmFyIHYxID0gdlsxXTtcclxuICAgIC8vICAgICB2YXIgdjIgPSB2WzJdO1xyXG4gICAgXHJcbiAgICAvLyAgICAgZHN0WzBdID0gdjAgKiBtWzAgKiA0ICsgMF0gKyB2MSAqIG1bMSAqIDQgKyAwXSArIHYyICogbVsyICogNCArIDBdO1xyXG4gICAgLy8gICAgIGRzdFsxXSA9IHYwICogbVswICogNCArIDFdICsgdjEgKiBtWzEgKiA0ICsgMV0gKyB2MiAqIG1bMiAqIDQgKyAxXTtcclxuICAgIC8vICAgICBkc3RbMl0gPSB2MCAqIG1bMCAqIDQgKyAyXSArIHYxICogbVsxICogNCArIDJdICsgdjIgKiBtWzIgKiA0ICsgMl07XHJcbiAgICBcclxuICAgIC8vICAgICByZXR1cm4gZHN0O1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIC8qKlxyXG4gICAgLy8gICogVGFrZXMgYSA0LWJ5LTQgbWF0cml4IG0gYW5kIGEgdmVjdG9yIHYgd2l0aCAzIGVudHJpZXMsIGludGVycHJldHMgdGhlIHZlY3RvclxyXG4gICAgLy8gICogYXMgYSBub3JtYWwgdG8gYSBzdXJmYWNlLCBhbmQgY29tcHV0ZXMgYSB2ZWN0b3Igd2hpY2ggaXMgbm9ybWFsIHVwb25cclxuICAgIC8vICAqIHRyYW5zZm9ybWluZyB0aGF0IHN1cmZhY2UgYnkgdGhlIG1hdHJpeC4gVGhlIGVmZmVjdCBvZiB0aGlzIGZ1bmN0aW9uIGlzIHRoZVxyXG4gICAgLy8gICogc2FtZSBhcyB0cmFuc2Zvcm1pbmcgdiAoYXMgYSBkaXJlY3Rpb24pIGJ5IHRoZSBpbnZlcnNlLXRyYW5zcG9zZSBvZiBtLiAgVGhpc1xyXG4gICAgLy8gICogZnVuY3Rpb24gYXNzdW1lcyB0aGUgdHJhbnNmb3JtYXRpb24gb2YgMy1kaW1lbnNpb25hbCBzcGFjZSByZXByZXNlbnRlZCBieSB0aGVcclxuICAgIC8vICAqIG1hdHJpeCBpcyBwYXJhbGxlbC1wcmVzZXJ2aW5nLCBpLmUuIGFueSBjb21iaW5hdGlvbiBvZiByb3RhdGlvbiwgc2NhbGluZyBhbmRcclxuICAgIC8vICAqIHRyYW5zbGF0aW9uLCBidXQgbm90IGEgcGVyc3BlY3RpdmUgZGlzdG9ydGlvbi4gIFJldHVybnMgYSB2ZWN0b3Igd2l0aCAzXHJcbiAgICAvLyAgKiBlbnRyaWVzLlxyXG4gICAgLy8gICogQHBhcmFtIHtNYXRyaXg0fSBtIFRoZSBtYXRyaXguXHJcbiAgICAvLyAgKiBAcGFyYW0ge1ZlY3RvcjN9IHYgVGhlIG5vcm1hbC5cclxuICAgIC8vICAqIEBwYXJhbSB7VmVjdG9yM30gW2RzdF0gVGhlIGRpcmVjdGlvbi5cclxuICAgIC8vICAqIEByZXR1cm4ge1ZlY3RvcjN9IFRoZSB0cmFuc2Zvcm1lZCBkaXJlY3Rpb24uXHJcbiAgICAvLyAgKiBAbWVtYmVyT2YgbW9kdWxlOndlYmdsLTNkLW1hdGhcclxuICAgIC8vICAqL1xyXG4gICAgLy8gZnVuY3Rpb24gdHJhbnNmb3JtTm9ybWFsKG0sIHYsIGRzdCkge1xyXG4gICAgLy8gICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgzKTtcclxuICAgIC8vICAgICB2YXIgbWkgPSBpbnZlcnNlKG0pO1xyXG4gICAgLy8gICAgIHZhciB2MCA9IHZbMF07XHJcbiAgICAvLyAgICAgdmFyIHYxID0gdlsxXTtcclxuICAgIC8vICAgICB2YXIgdjIgPSB2WzJdO1xyXG4gICAgXHJcbiAgICAvLyAgICAgZHN0WzBdID0gdjAgKiBtaVswICogNCArIDBdICsgdjEgKiBtaVswICogNCArIDFdICsgdjIgKiBtaVswICogNCArIDJdO1xyXG4gICAgLy8gICAgIGRzdFsxXSA9IHYwICogbWlbMSAqIDQgKyAwXSArIHYxICogbWlbMSAqIDQgKyAxXSArIHYyICogbWlbMSAqIDQgKyAyXTtcclxuICAgIC8vICAgICBkc3RbMl0gPSB2MCAqIG1pWzIgKiA0ICsgMF0gKyB2MSAqIG1pWzIgKiA0ICsgMV0gKyB2MiAqIG1pWzIgKiA0ICsgMl07XHJcbiAgICBcclxuICAgIC8vICAgICByZXR1cm4gZHN0O1xyXG4gICAgLy8gfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/math/matrix.ts\n");

/***/ }),

/***/ "./src/math/ray.ts":
/*!*************************!*\
  !*** ./src/math/ray.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Ray\": () => /* binding */ Ray\n/* harmony export */ });\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n// author:  Jos Feenstra\r\n// purpose: infinite Ray used for projection and similar actions\r\n// notes:   found some nice examples at https://www.cs.princeton.edu/courses/archive/fall00/cs426/lectures/raycast/sld004.htm\r\n\r\nclass Ray {\r\n    // i do this to force intent : from points, or from normal. Both vector3, so otherwise confusing\r\n    constructor(origin, normal) {\r\n        this.origin = origin;\r\n        this.normal = normal.normalize();\r\n    }\r\n    static fromNormal(origin, normal) {\r\n        return new Ray(origin, normal);\r\n    }\r\n    static fromPoints(origin, through) {\r\n        return new Ray(origin, through.subbed(origin).normalize());\r\n    }\r\n    at(t) {\r\n        return this.origin.added(this.normal.scaled(t));\r\n    }\r\n    xPlane(plane) {\r\n        // ray : pt = rOrigin + t * rNormal\r\n        // plane : a, b, c, d -> pNormal(a, b, c) , d\r\n        // plane : P . N + d = 0;\r\n        // substitute for p: \r\n        // t = -(rOrigin . N + d) / (V . N)\r\n        let ray = this; // to be clear\r\n        return -(ray.origin.dot(plane.normal) + plane.d) / (ray.normal.dot(plane.normal));\r\n    }\r\n    toLine(length) {\r\n        let toPoint = this.at(length);\r\n        return _mesh_line_array__WEBPACK_IMPORTED_MODULE_0__.LineArray.fromLines([this.origin, toPoint]);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21hdGgvcmF5LnRzPzFhODEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx3QkFBd0I7QUFDeEIsZ0VBQWdFO0FBQ2hFLDZIQUE2SDtBQUc5RTtBQUt4QyxNQUFNLEdBQUc7SUFJWixnR0FBZ0c7SUFDaEcsWUFBb0IsTUFBZSxFQUFFLE1BQWU7UUFDaEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDckMsQ0FBQztJQUdELE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBZSxFQUFFLE1BQWU7UUFDOUMsT0FBTyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUdELE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBZSxFQUFFLE9BQWdCO1FBQy9DLE9BQU8sSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBR0QsRUFBRSxDQUFDLENBQVM7UUFDUixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUdELE1BQU0sQ0FBQyxLQUFZO1FBRWYsbUNBQW1DO1FBQ25DLDZDQUE2QztRQUM3Qyx5QkFBeUI7UUFDekIscUJBQXFCO1FBQ3JCLG1DQUFtQztRQUVuQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxjQUFjO1FBQzlCLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN0RixDQUFDO0lBR0QsTUFBTSxDQUFDLE1BQWM7UUFDakIsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QixPQUFPLGlFQUFtQixDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9tYXRoL3JheS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiBpbmZpbml0ZSBSYXkgdXNlZCBmb3IgcHJvamVjdGlvbiBhbmQgc2ltaWxhciBhY3Rpb25zXHJcbi8vIG5vdGVzOiAgIGZvdW5kIHNvbWUgbmljZSBleGFtcGxlcyBhdCBodHRwczovL3d3dy5jcy5wcmluY2V0b24uZWR1L2NvdXJzZXMvYXJjaGl2ZS9mYWxsMDAvY3M0MjYvbGVjdHVyZXMvcmF5Y2FzdC9zbGQwMDQuaHRtXHJcblxyXG5cclxuaW1wb3J0IHsgTGluZUFycmF5IH0gZnJvbSBcIi4uL21lc2gvbGluZS1hcnJheVwiO1xyXG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuLi9nZW8vcGxhbmVcIjtcclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gXCIuL3ZlY3RvclwiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBSYXkge1xyXG4gICAgb3JpZ2luOiBWZWN0b3IzO1xyXG4gICAgbm9ybWFsOiBWZWN0b3IzO1xyXG5cclxuICAgIC8vIGkgZG8gdGhpcyB0byBmb3JjZSBpbnRlbnQgOiBmcm9tIHBvaW50cywgb3IgZnJvbSBub3JtYWwuIEJvdGggdmVjdG9yMywgc28gb3RoZXJ3aXNlIGNvbmZ1c2luZ1xyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihvcmlnaW46IFZlY3RvcjMsIG5vcm1hbDogVmVjdG9yMykge1xyXG4gICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luO1xyXG4gICAgICAgIHRoaXMubm9ybWFsID0gbm9ybWFsLm5vcm1hbGl6ZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgZnJvbU5vcm1hbChvcmlnaW46IFZlY3RvcjMsIG5vcm1hbDogVmVjdG9yMykgOiBSYXkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmF5KG9yaWdpbiwgbm9ybWFsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21Qb2ludHMob3JpZ2luOiBWZWN0b3IzLCB0aHJvdWdoOiBWZWN0b3IzKSA6IFJheSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSYXkob3JpZ2luLCB0aHJvdWdoLnN1YmJlZChvcmlnaW4pLm5vcm1hbGl6ZSgpKTtcclxuICAgIH0gXHJcbiAgICBcclxuXHJcbiAgICBhdCh0OiBudW1iZXIpIDogVmVjdG9yMyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luLmFkZGVkKHRoaXMubm9ybWFsLnNjYWxlZCh0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICB4UGxhbmUocGxhbmU6IFBsYW5lKSA6IG51bWJlciB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmF5IDogcHQgPSByT3JpZ2luICsgdCAqIHJOb3JtYWxcclxuICAgICAgICAvLyBwbGFuZSA6IGEsIGIsIGMsIGQgLT4gcE5vcm1hbChhLCBiLCBjKSAsIGRcclxuICAgICAgICAvLyBwbGFuZSA6IFAgLiBOICsgZCA9IDA7XHJcbiAgICAgICAgLy8gc3Vic3RpdHV0ZSBmb3IgcDogXHJcbiAgICAgICAgLy8gdCA9IC0ock9yaWdpbiAuIE4gKyBkKSAvIChWIC4gTilcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcmF5ID0gdGhpczsgLy8gdG8gYmUgY2xlYXJcclxuICAgICAgICByZXR1cm4gLShyYXkub3JpZ2luLmRvdChwbGFuZS5ub3JtYWwpICsgcGxhbmUuZCkgLyAocmF5Lm5vcm1hbC5kb3QocGxhbmUubm9ybWFsKSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRvTGluZShsZW5ndGg6IG51bWJlcikgOiBMaW5lQXJyYXkge1xyXG4gICAgICAgIGxldCB0b1BvaW50ID0gdGhpcy5hdChsZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiBMaW5lQXJyYXkuZnJvbUxpbmVzKFt0aGlzLm9yaWdpbiwgdG9Qb2ludF0pO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/math/ray.ts\n");

/***/ }),

/***/ "./src/math/statistics.ts":
/*!********************************!*\
  !*** ./src/math/statistics.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Stat\": () => /* binding */ Stat\n/* harmony export */ });\n/* harmony import */ var _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/float-matrix */ \"./src/data/float-matrix.ts\");\n// name:    statistics.ts\r\n// author:  Jos Feenstra\r\n// purpose: functionality and documentation of variance, \r\n//          covariance, eigen vectors, least squares, and other \r\n//          statistical operations.\r\n// source:  been a while since I did this, \r\n//          https://datascienceplus.com/understanding-the-covariance-matrix/ \r\n//          https://wiki.pathmind.com/eigenvector\r\n//          used to make sure the basics are correct :).\r\n// notes:   Whats the difference between a Principal Component and an Eigen vector? \r\n//          \"Because eigenvectors trace the principal lines of force, and the axes of greatest variance and covariance illustrate where the data is most susceptible to change.\"\r\n\r\nclass Stat {\r\n    // calculate sum\r\n    static sum(x) {\r\n        let sum = 0;\r\n        for (let i = 0; i < x.length; i++) {\r\n            sum += x[i];\r\n        }\r\n        return sum;\r\n    }\r\n    // calculate average\r\n    static mean(x) {\r\n        return this.sum(x) / x.length;\r\n    }\r\n    // calculate variance\r\n    static variance(x) {\r\n        //σ^2x = (1/n−1) * n∑i=1 (x[i] – xAvr)^2\r\n        let n = x.length;\r\n        let avr = this.mean(x);\r\n        let sum = 0;\r\n        for (let i = 0; i < n; i++) {\r\n            sum += Math.pow((x[i] - avr), 2);\r\n        }\r\n        return sum / (n - 1);\r\n    }\r\n    // calculate the standard deviation\r\n    static deviation(x) {\r\n        return Math.pow(this.variance(x), 0.5);\r\n    }\r\n    // calculate covariance\r\n    static covariance(x, y) {\r\n        if (x.length != y.length)\r\n            throw \"this is not how covariance works...\";\r\n        let n = x.length;\r\n        let xAvr = this.mean(x);\r\n        let yAvr = this.mean(y);\r\n        let sum = 0;\r\n        for (let i = 0; i < n; i++) {\r\n            sum += (x[i] - xAvr) * (y[i] - yAvr);\r\n        }\r\n        return sum / (n - 1); // losing one degree of freedom\r\n    }\r\n    // calculate variance / covariance matrix\r\n    static cov(matrix) {\r\n        let size = matrix._width;\r\n        let cov = new _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix(size, size);\r\n        let columns = Array(size);\r\n        for (let i = 0; i < size; i++) {\r\n            columns[i] = matrix.getColumn(i);\r\n        }\r\n        // matrix is symmertical, so only run through one half\r\n        for (let i = 0; i < size; i++) {\r\n            for (let j = i; j < size; j++) {\r\n                let value = this.covariance(columns[i], columns[j]);\r\n                cov.set(i, j, value);\r\n                cov.set(j, i, value);\r\n            }\r\n        }\r\n        return cov;\r\n    }\r\n    static eig(A) {\r\n        let results = this.svd(A);\r\n        return [results[1], results[2]];\r\n    }\r\n    /**\r\n     * Single Value Decomposition.\r\n     * Can be used for Eigen Value Decomposition\r\n     * from G. H. Golub and C. Reinsch, Numer. Math. 14, 403-420 (1970).\r\n     * Taken from numeric.js. not yet cleaned & optimized.\r\n     * https://en.wikipedia.org/wiki/Singular_value_decomposition\r\n     * @param  {FloatMatrix} A matrix to decompose, such as a covariance matrix\r\n     * @returns [U, ∑, V]\r\n     * U -> during EVD, these are the eigen vectors of A transposed, if im not mistaken\r\n     * ∑ -> during EVD, this are the eigen values\r\n     * V -> during EVD, the columns are eigen vectors\r\n     */\r\n    static svd(A) {\r\n        var prec = Math.pow(2, -52); // assumes double prec\r\n        var tolerance = 1.e-64 / prec;\r\n        var itmax = 50;\r\n        var c = 0;\r\n        var i = 0;\r\n        var j = 0;\r\n        var k = 0;\r\n        var l = 0;\r\n        var u = A.clone().toNative();\r\n        var m = u.length;\r\n        var n = u[0].length;\r\n        if (m < n)\r\n            throw \"Need more rows than columns\";\r\n        var e = new Array(n);\r\n        var q = new Array(n);\r\n        for (i = 0; i < n; i++)\r\n            e[i] = q[i] = 0.0;\r\n        var v = rep([n, n], 0);\r\n        function pythag(a, b) {\r\n            a = Math.abs(a);\r\n            b = Math.abs(b);\r\n            if (a > b)\r\n                return a * Math.sqrt(1.0 + (b * b / a / a));\r\n            else if (b == 0.0)\r\n                return a;\r\n            return b * Math.sqrt(1.0 + (a * a / b / b));\r\n        }\r\n        //rep function, [JF] : dont know what this does exactly...\r\n        function rep(s, v, k = 0) {\r\n            let n = s[k];\r\n            let ret = Array(n);\r\n            let i;\r\n            if (k === s.length - 1) {\r\n                for (i = n - 2; i >= 0; i -= 2) {\r\n                    ret[i + 1] = v;\r\n                    ret[i] = v;\r\n                }\r\n                if (i === -1) {\r\n                    ret[0] = v;\r\n                }\r\n                return ret;\r\n            }\r\n            for (i = n - 1; i >= 0; i--) {\r\n                ret[i] = rep(s, v, k + 1);\r\n            }\r\n            return ret;\r\n        }\r\n        //Householder's reduction to bidiagonal form\r\n        var f = 0.0;\r\n        var g = 0.0;\r\n        var h = 0.0;\r\n        var x = 0.0;\r\n        var y = 0.0;\r\n        var z = 0.0;\r\n        var s = 0.0;\r\n        for (i = 0; i < n; i++) {\r\n            e[i] = g;\r\n            s = 0.0;\r\n            l = i + 1;\r\n            for (j = i; j < m; j++)\r\n                s += (u[j][i] * u[j][i]);\r\n            if (s <= tolerance)\r\n                g = 0.0;\r\n            else {\r\n                f = u[i][i];\r\n                g = Math.sqrt(s);\r\n                if (f >= 0.0)\r\n                    g = -g;\r\n                h = f * g - s;\r\n                u[i][i] = f - g;\r\n                for (j = l; j < n; j++) {\r\n                    s = 0.0;\r\n                    for (k = i; k < m; k++)\r\n                        s += u[k][i] * u[k][j];\r\n                    f = s / h;\r\n                    for (k = i; k < m; k++)\r\n                        u[k][j] += f * u[k][i];\r\n                }\r\n            }\r\n            q[i] = g;\r\n            s = 0.0;\r\n            for (j = l; j < n; j++)\r\n                s = s + u[i][j] * u[i][j];\r\n            if (s <= tolerance)\r\n                g = 0.0;\r\n            else {\r\n                f = u[i][i + 1];\r\n                g = Math.sqrt(s);\r\n                if (f >= 0.0)\r\n                    g = -g;\r\n                h = f * g - s;\r\n                u[i][i + 1] = f - g;\r\n                for (j = l; j < n; j++)\r\n                    e[j] = u[i][j] / h;\r\n                for (j = l; j < m; j++) {\r\n                    s = 0.0;\r\n                    for (k = l; k < n; k++)\r\n                        s += (u[j][k] * u[i][k]);\r\n                    for (k = l; k < n; k++)\r\n                        u[j][k] += s * e[k];\r\n                }\r\n            }\r\n            y = Math.abs(q[i]) + Math.abs(e[i]);\r\n            if (y > x)\r\n                x = y;\r\n        }\r\n        // accumulation of right hand gtransformations\r\n        for (i = n - 1; i != -1; i += -1) {\r\n            if (g != 0.0) {\r\n                h = g * u[i][i + 1];\r\n                for (j = l; j < n; j++)\r\n                    v[j][i] = u[i][j] / h;\r\n                for (j = l; j < n; j++) {\r\n                    s = 0.0;\r\n                    for (k = l; k < n; k++)\r\n                        s += u[i][k] * v[k][j];\r\n                    for (k = l; k < n; k++)\r\n                        v[k][j] += (s * v[k][i]);\r\n                }\r\n            }\r\n            for (j = l; j < n; j++) {\r\n                v[i][j] = 0;\r\n                v[j][i] = 0;\r\n            }\r\n            v[i][i] = 1;\r\n            g = e[i];\r\n            l = i;\r\n        }\r\n        // accumulation of left hand transformations\r\n        for (i = n - 1; i != -1; i += -1) {\r\n            l = i + 1;\r\n            g = q[i];\r\n            for (j = l; j < n; j++)\r\n                u[i][j] = 0;\r\n            if (g != 0.0) {\r\n                h = u[i][i] * g;\r\n                for (j = l; j < n; j++) {\r\n                    s = 0.0;\r\n                    for (k = l; k < m; k++)\r\n                        s += u[k][i] * u[k][j];\r\n                    f = s / h;\r\n                    for (k = i; k < m; k++)\r\n                        u[k][j] += f * u[k][i];\r\n                }\r\n                for (j = i; j < m; j++)\r\n                    u[j][i] = u[j][i] / g;\r\n            }\r\n            else\r\n                for (j = i; j < m; j++)\r\n                    u[j][i] = 0;\r\n            u[i][i] += 1;\r\n        }\r\n        // diagonalization of the bidiagonal form\r\n        prec = prec * x;\r\n        for (k = n - 1; k != -1; k += -1) {\r\n            for (var iteration = 0; iteration < itmax; iteration++) { // test f splitting\r\n                var test_convergence = false;\r\n                for (l = k; l != -1; l += -1) {\r\n                    if (Math.abs(e[l]) <= prec) {\r\n                        test_convergence = true;\r\n                        break;\r\n                    }\r\n                    if (Math.abs(q[l - 1]) <= prec)\r\n                        break;\r\n                }\r\n                if (!test_convergence) { // cancellation of e[l] if l>0\r\n                    c = 0.0;\r\n                    s = 1.0;\r\n                    var l1 = l - 1;\r\n                    for (i = l; i < k + 1; i++) {\r\n                        f = s * e[i];\r\n                        e[i] = c * e[i];\r\n                        if (Math.abs(f) <= prec)\r\n                            break;\r\n                        g = q[i];\r\n                        h = pythag(f, g);\r\n                        q[i] = h;\r\n                        c = g / h;\r\n                        s = -f / h;\r\n                        for (j = 0; j < m; j++) {\r\n                            y = u[j][l1];\r\n                            z = u[j][i];\r\n                            u[j][l1] = y * c + (z * s);\r\n                            u[j][i] = -y * s + (z * c);\r\n                        }\r\n                    }\r\n                }\r\n                // test f convergence\r\n                z = q[k];\r\n                if (l == k) { //convergence\r\n                    if (z < 0.0) { //q[k] is made non-negative\r\n                        q[k] = -z;\r\n                        for (j = 0; j < n; j++)\r\n                            v[j][k] = -v[j][k];\r\n                    }\r\n                    break; //break out of iteration loop and move on to next k value\r\n                }\r\n                if (iteration >= itmax - 1)\r\n                    throw 'Error: no convergence.';\r\n                // shift from bottom 2x2 minor\r\n                x = q[l];\r\n                y = q[k - 1];\r\n                g = e[k - 1];\r\n                h = e[k];\r\n                f = ((y - z) * (y + z) + (g - h) * (g + h)) / (2.0 * h * y);\r\n                g = pythag(f, 1.0);\r\n                if (f < 0.0)\r\n                    f = ((x - z) * (x + z) + h * (y / (f - g) - h)) / x;\r\n                else\r\n                    f = ((x - z) * (x + z) + h * (y / (f + g) - h)) / x;\r\n                // next QR transformation\r\n                c = 1.0;\r\n                s = 1.0;\r\n                for (i = l + 1; i < k + 1; i++) {\r\n                    g = e[i];\r\n                    y = q[i];\r\n                    h = s * g;\r\n                    g = c * g;\r\n                    z = pythag(f, h);\r\n                    e[i - 1] = z;\r\n                    c = f / z;\r\n                    s = h / z;\r\n                    f = x * c + g * s;\r\n                    g = -x * s + g * c;\r\n                    h = y * s;\r\n                    y = y * c;\r\n                    for (j = 0; j < n; j++) {\r\n                        x = v[j][i - 1];\r\n                        z = v[j][i];\r\n                        v[j][i - 1] = x * c + z * s;\r\n                        v[j][i] = -x * s + z * c;\r\n                    }\r\n                    z = pythag(f, h);\r\n                    q[i - 1] = z;\r\n                    c = f / z;\r\n                    s = h / z;\r\n                    f = c * g + s * y;\r\n                    x = -s * g + c * y;\r\n                    for (j = 0; j < m; j++) {\r\n                        y = u[j][i - 1];\r\n                        z = u[j][i];\r\n                        u[j][i - 1] = y * c + z * s;\r\n                        u[j][i] = -y * s + z * c;\r\n                    }\r\n                }\r\n                e[l] = 0.0;\r\n                e[k] = f;\r\n                q[k] = x;\r\n            }\r\n        }\r\n        for (i = 0; i < q.length; i++)\r\n            if (q[i] < prec)\r\n                q[i] = 0;\r\n        //sort eigenvalues\t\r\n        var temp;\r\n        for (i = 0; i < n; i++) {\r\n            for (j = i - 1; j >= 0; j--) {\r\n                if (q[j] < q[i]) {\r\n                    c = q[j];\r\n                    q[j] = q[i];\r\n                    q[i] = c;\r\n                    for (k = 0; k < u.length; k++) {\r\n                        temp = u[k][i];\r\n                        u[k][i] = u[k][j];\r\n                        u[k][j] = temp;\r\n                    }\r\n                    for (k = 0; k < v.length; k++) {\r\n                        temp = v[k][i];\r\n                        v[k][i] = v[k][j];\r\n                        v[k][j] = temp;\r\n                    }\r\n                    i = j;\r\n                }\r\n            }\r\n        }\r\n        return [_data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix.fromNative(u),\r\n            new Float32Array(q),\r\n            _data_float_matrix__WEBPACK_IMPORTED_MODULE_0__.FloatMatrix.fromNative(v),\r\n        ];\r\n    }\r\n    ;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21hdGgvc3RhdGlzdGljcy50cz8zNGI2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEseUJBQXlCO0FBQ3pCLHdCQUF3QjtBQUN4Qix5REFBeUQ7QUFDekQsZ0VBQWdFO0FBQ2hFLG1DQUFtQztBQUVuQywyQ0FBMkM7QUFDM0MsNkVBQTZFO0FBQzdFLGlEQUFpRDtBQUNqRCx3REFBd0Q7QUFDeEQsb0ZBQW9GO0FBQ3BGLGdMQUFnTDtBQUU3SDtBQUU1QyxNQUFNLElBQUk7SUFFYixnQkFBZ0I7SUFDaEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUEwQjtRQUNqQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDWixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMvQixHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2Y7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFHRCxvQkFBb0I7SUFDcEIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUEwQjtRQUNsQyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNsQyxDQUFDO0lBR0QscUJBQXFCO0lBQ3JCLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBMEI7UUFFdEMsd0NBQXdDO1FBQ3hDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7UUFDakIsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2QixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDWixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3hCLEdBQUcsSUFBSSxV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QUFDLEdBQUMsQ0FBQztvQkFDTixLQUFLLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFDcEI7d0JBQ0ksQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDO3dCQUNaLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUNWLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQzt3QkFDbkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQztxQkFDckI7b0JBQ0QsQ0FBQyxHQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO29CQUNkLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUUsQ0FBQztvQkFDVCxDQUFDLEdBQUUsQ0FBQyxHQUFDLENBQUM7b0JBQ04sQ0FBQyxHQUFFLENBQUMsR0FBQyxDQUFDO29CQUNOLENBQUMsR0FBRSxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDO29CQUNWLENBQUMsR0FBRSxDQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUM7b0JBQ1gsS0FBSyxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQ3BCO3dCQUNJLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQzt3QkFDWixDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDVixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUM7d0JBQ25CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUM7cUJBQ3JCO2lCQUNKO2dCQUNELENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxHQUFHO2dCQUNULENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDO2dCQUNQLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRSxDQUFDO2FBQ1Y7U0FDSjtRQUVELEtBQUssQ0FBQyxHQUFDLENBQUMsRUFBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUU7WUFDcEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSTtnQkFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUU3QixtQkFBbUI7UUFDbkIsSUFBSSxJQUFJLENBQUM7UUFDVCxLQUFLLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNqQixLQUFLLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3JCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDYixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDUixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDWCxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztvQkFDUixLQUFJLENBQUMsR0FBQyxDQUFDLEVBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUMsQ0FBQyxFQUFFLEVBQUU7d0JBQ3BCLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO3FCQUNyRDtvQkFDRCxLQUFJLENBQUMsR0FBQyxDQUFDLEVBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUMsQ0FBQyxFQUFFLEVBQUU7d0JBQ3BCLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO3FCQUNyRDtvQkFDRCxDQUFDLEdBQUcsQ0FBQztpQkFDUjthQUNKO1NBQ0o7UUFFRCxPQUFPLENBQUMsc0VBQXNCLENBQUMsQ0FBQyxDQUFDO1lBQzdCLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQztZQUNuQixzRUFBc0IsQ0FBQyxDQUFDLENBQUM7U0FDNUIsQ0FBQztJQUNOLENBQUM7SUFBQSxDQUFDO0NBQ0wiLCJmaWxlIjoiLi9zcmMvbWF0aC9zdGF0aXN0aWNzLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgc3RhdGlzdGljcy50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogZnVuY3Rpb25hbGl0eSBhbmQgZG9jdW1lbnRhdGlvbiBvZiB2YXJpYW5jZSwgXHJcbi8vICAgICAgICAgIGNvdmFyaWFuY2UsIGVpZ2VuIHZlY3RvcnMsIGxlYXN0IHNxdWFyZXMsIGFuZCBvdGhlciBcclxuLy8gICAgICAgICAgc3RhdGlzdGljYWwgb3BlcmF0aW9ucy5cclxuXHJcbi8vIHNvdXJjZTogIGJlZW4gYSB3aGlsZSBzaW5jZSBJIGRpZCB0aGlzLCBcclxuLy8gICAgICAgICAgaHR0cHM6Ly9kYXRhc2NpZW5jZXBsdXMuY29tL3VuZGVyc3RhbmRpbmctdGhlLWNvdmFyaWFuY2UtbWF0cml4LyBcclxuLy8gICAgICAgICAgaHR0cHM6Ly93aWtpLnBhdGhtaW5kLmNvbS9laWdlbnZlY3RvclxyXG4vLyAgICAgICAgICB1c2VkIHRvIG1ha2Ugc3VyZSB0aGUgYmFzaWNzIGFyZSBjb3JyZWN0IDopLlxyXG4vLyBub3RlczogICBXaGF0cyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIGEgUHJpbmNpcGFsIENvbXBvbmVudCBhbmQgYW4gRWlnZW4gdmVjdG9yPyBcclxuLy8gICAgICAgICAgXCJCZWNhdXNlIGVpZ2VudmVjdG9ycyB0cmFjZSB0aGUgcHJpbmNpcGFsIGxpbmVzIG9mIGZvcmNlLCBhbmQgdGhlIGF4ZXMgb2YgZ3JlYXRlc3QgdmFyaWFuY2UgYW5kIGNvdmFyaWFuY2UgaWxsdXN0cmF0ZSB3aGVyZSB0aGUgZGF0YSBpcyBtb3N0IHN1c2NlcHRpYmxlIHRvIGNoYW5nZS5cIlxyXG5cclxuaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi4vZGF0YS9mbG9hdC1tYXRyaXhcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdGF0IHtcclxuXHJcbiAgICAvLyBjYWxjdWxhdGUgc3VtXHJcbiAgICBzdGF0aWMgc3VtKHg6IG51bWJlcltdIHwgRmxvYXQzMkFycmF5KSB7XHJcbiAgICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSB4W2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3VtO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgLy8gY2FsY3VsYXRlIGF2ZXJhZ2VcclxuICAgIHN0YXRpYyBtZWFuKHg6IG51bWJlcltdIHwgRmxvYXQzMkFycmF5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VtKHgpIC8geC5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGNhbGN1bGF0ZSB2YXJpYW5jZVxyXG4gICAgc3RhdGljIHZhcmlhbmNlKHg6IG51bWJlcltdIHwgRmxvYXQzMkFycmF5KSB7XHJcblxyXG4gICAgICAgIC8vz4NeMnggPSAoMS9u4oiSMSkgKiBu4oiRaT0xICh4W2ldIOKAkyB4QXZyKV4yXHJcbiAgICAgICAgbGV0IG4gPSB4Lmxlbmd0aDtcclxuICAgICAgICBsZXQgYXZyID0gdGhpcy5tZWFuKHgpO1xyXG5cclxuICAgICAgICBsZXQgc3VtID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzdW0gKz0gKHhbaV0gLSBhdnIpKioyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdW0gLyAobiAtIDEpOyBcclxuICAgIH1cclxuIFxyXG5cclxuICAgIC8vIGNhbGN1bGF0ZSB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uXHJcbiAgICBzdGF0aWMgZGV2aWF0aW9uKHg6IG51bWJlcltdIHwgRmxvYXQzMkFycmF5KSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnZhcmlhbmNlKHgpKiowLjU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGNhbGN1bGF0ZSBjb3ZhcmlhbmNlXHJcbiAgICBzdGF0aWMgY292YXJpYW5jZSh4OiBudW1iZXJbXSB8IEZsb2F0MzJBcnJheSwgeTogbnVtYmVyW10gfCBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICBpZiAoeC5sZW5ndGggIT0geS5sZW5ndGgpIHRocm93IFwidGhpcyBpcyBub3QgaG93IGNvdmFyaWFuY2Ugd29ya3MuLi5cIlxyXG4gICAgICAgIGxldCBuID0geC5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHhBdnIgPSB0aGlzLm1lYW4oeCk7XHJcbiAgICAgICAgbGV0IHlBdnIgPSB0aGlzLm1lYW4oeSk7XHJcblxyXG4gICAgICAgIGxldCBzdW0gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAoeFtpXSAtIHhBdnIpKih5W2ldIC0geUF2cik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdW0gLyAobiAtIDEpIC8vIGxvc2luZyBvbmUgZGVncmVlIG9mIGZyZWVkb21cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gY2FsY3VsYXRlIHZhcmlhbmNlIC8gY292YXJpYW5jZSBtYXRyaXhcclxuICAgIHN0YXRpYyBjb3YobWF0cml4OiBGbG9hdE1hdHJpeCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzaXplID0gbWF0cml4Ll93aWR0aDtcclxuICAgICAgICBsZXQgY292ID0gbmV3IEZsb2F0TWF0cml4KHNpemUsIHNpemUpO1xyXG5cclxuICAgICAgICBsZXQgY29sdW1ucyA9IEFycmF5PEZsb2F0MzJBcnJheT4oc2l6ZSk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCBzaXplOyBpKyspIHtcclxuICAgICAgICAgICAgY29sdW1uc1tpXSA9IG1hdHJpeC5nZXRDb2x1bW4oaSk7XHJcbiAgICAgICAgfSAgXHJcblxyXG4gICAgICAgIC8vIG1hdHJpeCBpcyBzeW1tZXJ0aWNhbCwgc28gb25seSBydW4gdGhyb3VnaCBvbmUgaGFsZlxyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IGkgOyBqIDwgc2l6ZTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmNvdmFyaWFuY2UoY29sdW1uc1tpXSwgY29sdW1uc1tqXSk7XHJcbiAgICAgICAgICAgICAgICBjb3Yuc2V0KGksIGosIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGNvdi5zZXQoaiwgaSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9ICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb3Y7XHJcbiAgICB9IFxyXG4gICAgXHJcblxyXG4gICAgc3RhdGljIGVpZyhBOiBGbG9hdE1hdHJpeCkgOiBbRmxvYXQzMkFycmF5LCBGbG9hdE1hdHJpeF0ge1xyXG4gICAgICAgIGxldCByZXN1bHRzID0gdGhpcy5zdmQoQSk7XHJcbiAgICAgICAgcmV0dXJuIFtyZXN1bHRzWzFdLCByZXN1bHRzWzJdXVxyXG4gICAgfVxyXG5cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTaW5nbGUgVmFsdWUgRGVjb21wb3NpdGlvbi4gXHJcbiAgICAqIENhbiBiZSB1c2VkIGZvciBFaWdlbiBWYWx1ZSBEZWNvbXBvc2l0aW9uXHJcbiAgICAqIGZyb20gRy4gSC4gR29sdWIgYW5kIEMuIFJlaW5zY2gsIE51bWVyLiBNYXRoLiAxNCwgNDAzLTQyMCAoMTk3MCkuXHJcbiAgICAqIFRha2VuIGZyb20gbnVtZXJpYy5qcy4gbm90IHlldCBjbGVhbmVkICYgb3B0aW1pemVkLlxyXG4gICAgKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaW5ndWxhcl92YWx1ZV9kZWNvbXBvc2l0aW9uXHJcbiAgICAqIEBwYXJhbSAge0Zsb2F0TWF0cml4fSBBIG1hdHJpeCB0byBkZWNvbXBvc2UsIHN1Y2ggYXMgYSBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgKiBAcmV0dXJucyBbVSwg4oiRLCBWXVxyXG4gICAgKiBVIC0+IGR1cmluZyBFVkQsIHRoZXNlIGFyZSB0aGUgZWlnZW4gdmVjdG9ycyBvZiBBIHRyYW5zcG9zZWQsIGlmIGltIG5vdCBtaXN0YWtlblxyXG4gICAgKiDiiJEgLT4gZHVyaW5nIEVWRCwgdGhpcyBhcmUgdGhlIGVpZ2VuIHZhbHVlcyBcclxuICAgICogViAtPiBkdXJpbmcgRVZELCB0aGUgY29sdW1ucyBhcmUgZWlnZW4gdmVjdG9yc1xyXG4gICAgKi9cclxuICAgc3RhdGljIHN2ZChBOiBGbG9hdE1hdHJpeCkgOiBbRmxvYXRNYXRyaXgsIEZsb2F0MzJBcnJheSwgRmxvYXRNYXRyaXhdIHtcclxuXHJcbiAgICAgICAgdmFyIHByZWM9IE1hdGgucG93KDIsLTUyKSAvLyBhc3N1bWVzIGRvdWJsZSBwcmVjXHJcbiAgICAgICAgdmFyIHRvbGVyYW5jZT0gMS5lLTY0L3ByZWM7XHJcbiAgICAgICAgdmFyIGl0bWF4PSA1MDtcclxuICAgICAgICB2YXIgYz0wO1xyXG4gICAgICAgIHZhciBpPTA7XHJcbiAgICAgICAgdmFyIGo9MDtcclxuICAgICAgICB2YXIgaz0wO1xyXG4gICAgICAgIHZhciBsPTA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHU9IEEuY2xvbmUoKS50b05hdGl2ZSgpO1xyXG4gICAgICAgIHZhciBtPSB1Lmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbj0gdVswXS5sZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG0gPCBuKSB0aHJvdyBcIk5lZWQgbW9yZSByb3dzIHRoYW4gY29sdW1uc1wiXHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGUgPSBuZXcgQXJyYXkobik7XHJcbiAgICAgICAgdmFyIHEgPSBuZXcgQXJyYXkobik7XHJcbiAgICAgICAgZm9yIChpPTA7IGk8bjsgaSsrKSBlW2ldID0gcVtpXSA9IDAuMDtcclxuICAgICAgICB2YXIgdiA9IHJlcChbbixuXSwwKTtcclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiBweXRoYWcoYTogbnVtYmVyLGI6IG51bWJlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGEgPSBNYXRoLmFicyhhKVxyXG4gICAgICAgICAgICBiID0gTWF0aC5hYnMoYilcclxuICAgICAgICAgICAgaWYgKGEgPiBiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEqTWF0aC5zcXJ0KDEuMCsoYipiL2EvYSkpXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGIgPT0gMC4wKSBcclxuICAgICAgICAgICAgICAgIHJldHVybiBhXHJcbiAgICAgICAgICAgIHJldHVybiBiKk1hdGguc3FydCgxLjArKGEqYS9iL2IpKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vcmVwIGZ1bmN0aW9uLCBbSkZdIDogZG9udCBrbm93IHdoYXQgdGhpcyBkb2VzIGV4YWN0bHkuLi5cclxuICAgICAgICBmdW5jdGlvbiByZXAoczogQXJyYXk8bnVtYmVyPiwgdjogbnVtYmVyLCBrPTApIHtcclxuICAgICAgICAgICAgbGV0IG4gPSBzW2tdXHJcbiAgICAgICAgICAgIGxldCByZXQgPSBBcnJheShuKVxyXG4gICAgICAgICAgICBsZXQgaTtcclxuICAgICAgICAgICAgaWYgKGsgPT09IHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gbiAtIDI7IGkgPj0gMDsgaSAtPSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0W2kgKyAxXSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0W2ldID0gdjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldFswXSA9IHY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoaSA9IG4gLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgcmV0W2ldID0gcmVwKHMsIHYsIGsgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9Ib3VzZWhvbGRlcidzIHJlZHVjdGlvbiB0byBiaWRpYWdvbmFsIGZvcm1cclxuXHJcbiAgICAgICAgdmFyIGY9IDAuMDtcclxuICAgICAgICB2YXIgZz0gMC4wO1xyXG4gICAgICAgIHZhciBoPSAwLjA7XHJcbiAgICAgICAgdmFyIHg9IDAuMDtcclxuICAgICAgICB2YXIgeT0gMC4wO1xyXG4gICAgICAgIHZhciB6PSAwLjA7XHJcbiAgICAgICAgdmFyIHM9IDAuMDtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGk9MDsgaSA8IG47IGkrKylcclxuICAgICAgICB7XHRcclxuICAgICAgICAgICAgZVtpXT0gZztcclxuICAgICAgICAgICAgcz0gMC4wO1xyXG4gICAgICAgICAgICBsPSBpKzE7XHJcbiAgICAgICAgICAgIGZvciAoaj1pOyBqIDwgbTsgaisrKSBcclxuICAgICAgICAgICAgICAgIHMgKz0gKHVbal1baV0qdVtqXVtpXSk7XHJcbiAgICAgICAgICAgIGlmIChzIDw9IHRvbGVyYW5jZSlcclxuICAgICAgICAgICAgICAgIGc9IDAuMDtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHRcclxuICAgICAgICAgICAgICAgIGY9IHVbaV1baV07XHJcbiAgICAgICAgICAgICAgICBnPSBNYXRoLnNxcnQocyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZiA+PSAwLjApIGc9IC1nO1xyXG4gICAgICAgICAgICAgICAgaD0gZipnLXNcclxuICAgICAgICAgICAgICAgIHVbaV1baV09Zi1nO1xyXG4gICAgICAgICAgICAgICAgZm9yIChqPWw7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcz0gMC4wXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrPWk7IGsgPCBtOyBrKyspIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzICs9IHVba11baV0qdVtrXVtqXVxyXG4gICAgICAgICAgICAgICAgICAgIGY9IHMvaFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaz1pOyBrIDwgbTsgaysrKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdVtrXVtqXSs9Zip1W2tdW2ldXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcVtpXT0gZ1xyXG4gICAgICAgICAgICBzPSAwLjBcclxuICAgICAgICAgICAgZm9yIChqPWw7IGogPCBuOyBqKyspIFxyXG4gICAgICAgICAgICAgICAgcz0gcyArIHVbaV1bal0qdVtpXVtqXVxyXG4gICAgICAgICAgICBpZiAocyA8PSB0b2xlcmFuY2UpXHJcbiAgICAgICAgICAgICAgICBnPSAwLjBcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHRcclxuICAgICAgICAgICAgICAgIGY9IHVbaV1baSsxXVxyXG4gICAgICAgICAgICAgICAgZz0gTWF0aC5zcXJ0KHMpXHJcbiAgICAgICAgICAgICAgICBpZiAoZiA+PSAwLjApIGc9IC1nXHJcbiAgICAgICAgICAgICAgICBoPSBmKmcgLSBzXHJcbiAgICAgICAgICAgICAgICB1W2ldW2krMV0gPSBmLWc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGo9bDsgaiA8IG47IGorKykgZVtqXT0gdVtpXVtqXS9oXHJcbiAgICAgICAgICAgICAgICBmb3IgKGo9bDsgaiA8IG07IGorKylcclxuICAgICAgICAgICAgICAgIHtcdFxyXG4gICAgICAgICAgICAgICAgICAgIHM9MC4wXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrPWw7IGsgPCBuOyBrKyspIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzICs9ICh1W2pdW2tdKnVbaV1ba10pXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrPWw7IGsgPCBuOyBrKyspIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1W2pdW2tdKz1zKmVba11cclxuICAgICAgICAgICAgICAgIH1cdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHk9IE1hdGguYWJzKHFbaV0pK01hdGguYWJzKGVbaV0pXHJcbiAgICAgICAgICAgIGlmICh5PngpIFxyXG4gICAgICAgICAgICAgICAgeD15XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGFjY3VtdWxhdGlvbiBvZiByaWdodCBoYW5kIGd0cmFuc2Zvcm1hdGlvbnNcclxuICAgICAgICBmb3IgKGk9bi0xOyBpICE9IC0xOyBpKz0gLTEpXHJcbiAgICAgICAge1x0XHJcbiAgICAgICAgICAgIGlmIChnICE9IDAuMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaD0gZyp1W2ldW2krMV1cclxuICAgICAgICAgICAgICAgIGZvciAoaj1sOyBqIDwgbjsgaisrKSBcclxuICAgICAgICAgICAgICAgICAgICB2W2pdW2ldPXVbaV1bal0vaFxyXG4gICAgICAgICAgICAgICAgZm9yIChqPWw7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHRcclxuICAgICAgICAgICAgICAgICAgICBzPTAuMFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaz1sOyBrIDwgbjsgaysrKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcyArPSB1W2ldW2tdKnZba11bal1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGs9bDsgayA8IG47IGsrKykgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZba11bal0rPShzKnZba11baV0pXHJcbiAgICAgICAgICAgICAgICB9XHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGo9bDsgaiA8IG47IGorKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdltpXVtqXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2W2pdW2ldID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2W2ldW2ldID0gMTtcclxuICAgICAgICAgICAgZz0gZVtpXVxyXG4gICAgICAgICAgICBsPSBpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGFjY3VtdWxhdGlvbiBvZiBsZWZ0IGhhbmQgdHJhbnNmb3JtYXRpb25zXHJcbiAgICAgICAgZm9yIChpPW4tMTsgaSAhPSAtMTsgaSs9IC0xKVxyXG4gICAgICAgIHtcdFxyXG4gICAgICAgICAgICBsPSBpKzFcclxuICAgICAgICAgICAgZz0gcVtpXVxyXG4gICAgICAgICAgICBmb3IgKGo9bDsgaiA8IG47IGorKykgXHJcbiAgICAgICAgICAgICAgICB1W2ldW2pdID0gMDtcclxuICAgICAgICAgICAgaWYgKGcgIT0gMC4wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoPSB1W2ldW2ldKmdcclxuICAgICAgICAgICAgICAgIGZvciAoaj1sOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHM9MC4wXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrPWw7IGsgPCBtOyBrKyspIHMgKz0gdVtrXVtpXSp1W2tdW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGY9IHMvaFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaz1pOyBrIDwgbTsgaysrKSB1W2tdW2pdKz1mKnVba11baV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKGo9aTsgaiA8IG07IGorKykgdVtqXVtpXSA9IHVbal1baV0vZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBmb3IgKGo9aTsgaiA8IG07IGorKykgdVtqXVtpXSA9IDA7XHJcbiAgICAgICAgICAgIHVbaV1baV0gKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gZGlhZ29uYWxpemF0aW9uIG9mIHRoZSBiaWRpYWdvbmFsIGZvcm1cclxuICAgICAgICBwcmVjPSBwcmVjKnhcclxuICAgICAgICBmb3IgKGs9bi0xOyBrICE9IC0xOyBrKz0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVyYXRpb249MDsgaXRlcmF0aW9uIDwgaXRtYXg7IGl0ZXJhdGlvbisrKVxyXG4gICAgICAgICAgICB7XHQvLyB0ZXN0IGYgc3BsaXR0aW5nXHJcbiAgICAgICAgICAgICAgICB2YXIgdGVzdF9jb252ZXJnZW5jZSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICBmb3IgKGw9azsgbCAhPSAtMTsgbCs9IC0xKVxyXG4gICAgICAgICAgICAgICAge1x0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGVbbF0pIDw9IHByZWMpXHJcbiAgICAgICAgICAgICAgICAgICAge1x0dGVzdF9jb252ZXJnZW5jZT0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHFbbC0xXSkgPD0gcHJlYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRlc3RfY29udmVyZ2VuY2UpXHJcbiAgICAgICAgICAgICAgICB7XHQvLyBjYW5jZWxsYXRpb24gb2YgZVtsXSBpZiBsPjBcclxuICAgICAgICAgICAgICAgICAgICBjPSAwLjBcclxuICAgICAgICAgICAgICAgICAgICBzPSAxLjBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbDE9IGwtMVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9bDsgaTxrKzE7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZj0gcyplW2ldXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVbaV09IGMqZVtpXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZikgPD0gcHJlYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGc9IHFbaV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaD0gcHl0aGFnKGYsZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcVtpXT0gaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjPSBnL2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgcz0gLWYvaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGo9MDsgaiA8IG07IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1x0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PSB1W2pdW2wxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgej0gdVtqXVtpXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdVtqXVtsMV0gPSAgeSpjKyh6KnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1W2pdW2ldID0gLXkqcysoeipjKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGVzdCBmIGNvbnZlcmdlbmNlXHJcbiAgICAgICAgICAgICAgICB6PSBxW2tdXHJcbiAgICAgICAgICAgICAgICBpZiAobD09IGspXHJcbiAgICAgICAgICAgICAgICB7XHQvL2NvbnZlcmdlbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHo8MC4wKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcdC8vcVtrXSBpcyBtYWRlIG5vbi1uZWdhdGl2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxW2tdPSAtelxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGo9MDsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZbal1ba10gPSAtdltqXVtrXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhayAgLy9icmVhayBvdXQgb2YgaXRlcmF0aW9uIGxvb3AgYW5kIG1vdmUgb24gdG8gbmV4dCBrIHZhbHVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0aW9uID49IGl0bWF4LTEpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ0Vycm9yOiBubyBjb252ZXJnZW5jZS4nXHJcbiAgICAgICAgICAgICAgICAvLyBzaGlmdCBmcm9tIGJvdHRvbSAyeDIgbWlub3JcclxuICAgICAgICAgICAgICAgIHg9IHFbbF1cclxuICAgICAgICAgICAgICAgIHk9IHFbay0xXVxyXG4gICAgICAgICAgICAgICAgZz0gZVtrLTFdXHJcbiAgICAgICAgICAgICAgICBoPSBlW2tdXHJcbiAgICAgICAgICAgICAgICBmPSAoKHkteikqKHkreikrKGctaCkqKGcraCkpLygyLjAqaCp5KVxyXG4gICAgICAgICAgICAgICAgZz0gcHl0aGFnKGYsMS4wKVxyXG4gICAgICAgICAgICAgICAgaWYgKGYgPCAwLjApXHJcbiAgICAgICAgICAgICAgICAgICAgZj0gKCh4LXopKih4K3opK2gqKHkvKGYtZyktaCkpL3hcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBmPSAoKHgteikqKHgreikraCooeS8oZitnKS1oKSkveFxyXG4gICAgICAgICAgICAgICAgLy8gbmV4dCBRUiB0cmFuc2Zvcm1hdGlvblxyXG4gICAgICAgICAgICAgICAgYz0gMS4wXHJcbiAgICAgICAgICAgICAgICBzPSAxLjBcclxuICAgICAgICAgICAgICAgIGZvciAoaT1sKzE7IGk8IGsrMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1x0XHJcbiAgICAgICAgICAgICAgICAgICAgZz0gZVtpXVxyXG4gICAgICAgICAgICAgICAgICAgIHk9IHFbaV1cclxuICAgICAgICAgICAgICAgICAgICBoPSBzKmdcclxuICAgICAgICAgICAgICAgICAgICBnPSBjKmdcclxuICAgICAgICAgICAgICAgICAgICB6PSBweXRoYWcoZixoKVxyXG4gICAgICAgICAgICAgICAgICAgIGVbaS0xXT0gelxyXG4gICAgICAgICAgICAgICAgICAgIGM9IGYvelxyXG4gICAgICAgICAgICAgICAgICAgIHM9IGgvelxyXG4gICAgICAgICAgICAgICAgICAgIGY9IHgqYytnKnNcclxuICAgICAgICAgICAgICAgICAgICBnPSAteCpzK2cqY1xyXG4gICAgICAgICAgICAgICAgICAgIGg9IHkqc1xyXG4gICAgICAgICAgICAgICAgICAgIHk9IHkqY1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaj0wOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4PSB2W2pdW2ktMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgej0gdltqXVtpXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2W2pdW2ktMV0gPSB4KmMreipzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZbal1baV0gPSAteCpzK3oqY1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB6PSBweXRoYWcoZixoKVxyXG4gICAgICAgICAgICAgICAgICAgIHFbaS0xXT0gelxyXG4gICAgICAgICAgICAgICAgICAgIGM9IGYvelxyXG4gICAgICAgICAgICAgICAgICAgIHM9IGgvelxyXG4gICAgICAgICAgICAgICAgICAgIGY9IGMqZytzKnlcclxuICAgICAgICAgICAgICAgICAgICB4PSAtcypnK2MqeVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaj0wOyBqIDwgbTsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeT0gdVtqXVtpLTFdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHo9IHVbal1baV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdVtqXVtpLTFdID0geSpjK3oqc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1W2pdW2ldID0gLXkqcyt6KmNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlW2xdPSAwLjBcclxuICAgICAgICAgICAgICAgIGVba109IGZcclxuICAgICAgICAgICAgICAgIHFba109IHhcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGZvciAoaT0wO2k8cS5sZW5ndGg7IGkrKykgXHJcbiAgICAgICAgICAgIGlmIChxW2ldIDwgcHJlYykgcVtpXSA9IDBcclxuICAgICAgICBcclxuICAgICAgICAvL3NvcnQgZWlnZW52YWx1ZXNcdFxyXG4gICAgICAgIHZhciB0ZW1wO1xyXG4gICAgICAgIGZvciAoaT0wOyBpPCBuOyBpKyspIHtcdCBcclxuICAgICAgICAgICAgZm9yIChqPWktMTsgaiA+PSAwOyBqLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChxW2pdIDwgcVtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSBxW2pdXHJcbiAgICAgICAgICAgICAgICAgICAgcVtqXSA9IHFbaV1cclxuICAgICAgICAgICAgICAgICAgICBxW2ldID0gY1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihrPTA7azx1Lmxlbmd0aDtrKyspIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSB1W2tdW2ldOyB1W2tdW2ldID0gdVtrXVtqXTsgdVtrXVtqXSA9IHRlbXA7IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3Ioaz0wO2s8di5sZW5ndGg7aysrKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gdltrXVtpXTsgdltrXVtpXSA9IHZba11bal07IHZba11bal0gPSB0ZW1wOyBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaSA9IGpcdCAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHRcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIFtGbG9hdE1hdHJpeC5mcm9tTmF0aXZlKHUpLFxyXG4gICAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KHEpLFxyXG4gICAgICAgICAgICBGbG9hdE1hdHJpeC5mcm9tTmF0aXZlKHYpLFxyXG4gICAgICAgIF07XHJcbiAgICB9O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/math/statistics.ts\n");

/***/ }),

/***/ "./src/math/vector.ts":
/*!****************************!*\
  !*** ./src/math/vector.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Vector3\": () => /* binding */ Vector3,\n/* harmony export */   \"Vector2\": () => /* binding */ Vector2,\n/* harmony export */   \"radToDeg\": () => /* binding */ radToDeg,\n/* harmony export */   \"degToRad\": () => /* binding */ degToRad\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./const */ \"./src/math/const.ts\");\n/* harmony import */ var _matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrix */ \"./src/math/matrix.ts\");\n// author: \tJos Feenstra\r\n// inspiration from Three.js\r\n// note: \trecycle the class as much as possble, building a new class is expensive,\r\n// \t\t\tespecially in javascript\r\n// todo: \tBIJ NADER INZIEN: dont go the copy route. rewrite this in a more functional way creating new classes is expensive, but we really need immutable vectors. \r\n// \t\t\tthese types of consistent vectors are only useful in niche cases, and complitate a lot of common cases. \r\n\r\n\r\nclass Vector3 {\r\n    constructor(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    static fromLerp(v1, v2, alpha) {\r\n        return new Vector3(v1.x + (v2.x - v1.x) * alpha, v1.y + (v2.y - v1.y) * alpha, v1.z + (v2.z - v1.z) * alpha);\r\n    }\r\n    static fromArray(a) {\r\n        return new Vector3(a[0], a[1], a[2]);\r\n    }\r\n    static fromRandom() {\r\n        return new Vector3(Math.random(), Math.random(), Math.random());\r\n    }\r\n    static fromSphere(radius, theta, phi) {\r\n        const sinPhiRadius = Math.sin(phi) * radius;\r\n        return this.constructor(sinPhiRadius * Math.sin(theta), Math.cos(phi) * radius, sinPhiRadius * Math.cos(theta));\r\n    }\r\n    static fromCylinder(radius, theta, height) {\r\n        return this.constructor(radius * Math.sin(theta), height, radius * Math.cos(theta));\r\n    }\r\n    static fromLerpWeights(p1, p2, tP1, tP2, t) {\r\n        if (Math.abs(t - tP1) < 0.00001)\r\n            return (p1);\r\n        if (Math.abs(t - tP2) < 0.00001)\r\n            return (p2);\r\n        if (Math.abs(tP1 - tP2) < 0.00001)\r\n            return (p1);\r\n        let mu = (t - tP1) / (tP2 - tP1);\r\n        return new Vector3(p1.x + mu * (p2.x - p1.x), p1.y + mu * (p2.y - p1.y), p1.z + mu * (p2.z - p1.z));\r\n    }\r\n    // #endregion\r\n    // #region defaults \r\n    static zero() {\r\n        return new Vector3(0, 0, 0);\r\n    }\r\n    ;\r\n    static unitX() {\r\n        return new Vector3(1, 0, 0);\r\n    }\r\n    ;\r\n    static unitY() {\r\n        return new Vector3(0, 1, 0);\r\n    }\r\n    ;\r\n    static unitZ() {\r\n        return new Vector3(0, 0, 1);\r\n    }\r\n    ;\r\n    // #endregion\r\n    // #region basics\r\n    set(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        return this;\r\n    }\r\n    equals(v) {\r\n        return ((v.x === this.x) && (v.y === this.y) && (v.z === this.z));\r\n    }\r\n    toString() {\r\n        return `Vector3(${this.x}, ${this.y}, ${this.z})`;\r\n    }\r\n    toVector2() {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n    clone() {\r\n        return new Vector3(this.x, this.y, this.z);\r\n    }\r\n    copy(v) {\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n        this.z = v.z;\r\n        return this;\r\n    }\r\n    to2D() {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n    // #endregion\r\n    // #region math like vector2\r\n    largestValue() {\r\n        return Math.max(this.x, this.y, this.z);\r\n    }\r\n    added(v) {\r\n        return new Vector3(this.x + v.x, this.y + v.y, this.z + v.z);\r\n    }\r\n    add(v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        this.z += v.z;\r\n        return this;\r\n    }\r\n    subbed(v) {\r\n        return new Vector3(this.x - v.x, this.y - v.y, this.z - v.z);\r\n    }\r\n    sub(v) {\r\n        this.x -= v.x,\r\n            this.y -= v.y,\r\n            this.z -= v.z;\r\n        return this;\r\n    }\r\n    item(i) {\r\n        switch (i) {\r\n            case (0): return this.x;\r\n            case (1): return this.y;\r\n            case (2): return this.z;\r\n            case (3): return 1;\r\n            default: throw \"nope\";\r\n        }\r\n    }\r\n    scaled(v) {\r\n        return new Vector3(this.x * v, this.y * v, this.z * v);\r\n    }\r\n    scale(v) {\r\n        this.x *= v;\r\n        this.y *= v;\r\n        this.z *= v;\r\n        return this;\r\n    }\r\n    mul(v) {\r\n        this.x *= v.x;\r\n        this.y *= v.y;\r\n        this.z *= v.z;\r\n        return this;\r\n    }\r\n    multiplied(v) {\r\n        return new Vector3(this.x * v.x, this.y * v.y, this.z * v.z);\r\n    }\r\n    divVector(v) {\r\n        return new Vector3(this.x / v.x, this.y / v.y, this.z / v.z);\r\n    }\r\n    divided(value) {\r\n        return new Vector3(this.x / value, this.y / value, this.z / value);\r\n    }\r\n    div(value) {\r\n        this.x /= value,\r\n            this.y /= value,\r\n            this.z /= value;\r\n        return this;\r\n    }\r\n    minimumed(other) {\r\n        return new Vector3(Math.min(this.x, other.x), Math.min(this.y, other.y), Math.min(this.z, other.z));\r\n    }\r\n    maximumed(other) {\r\n        return new Vector3(Math.max(this.x, other.x), Math.max(this.y, other.y), Math.max(this.z, other.z));\r\n    }\r\n    clamped(min, max) {\r\n        return new Vector3(Math.max(min.x, Math.min(max.x, this.x)), Math.max(min.y, Math.min(max.y, this.y)), Math.max(min.z, Math.min(max.z, this.z)));\r\n    }\r\n    clampScalared(min, max) {\r\n        return new Vector3(clamp(this.x, min, max), clamp(this.y, min, max), clamp(this.z, min, max));\r\n    }\r\n    clampLengthed(min, max) {\r\n        const length = this.length();\r\n        return this.div(length || 1).scale(Math.max(min, Math.min(max, length)));\r\n    }\r\n    floored() {\r\n        return new Vector3(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\r\n    }\r\n    ceiled() {\r\n        return new Vector3(Math.ceil(this.x), Math.ceil(this.y), Math.ceil(this.z));\r\n    }\r\n    rounded() {\r\n        return new Vector3(Math.round(this.x), Math.round(this.y), Math.round(this.z));\r\n    }\r\n    roundedToZero() {\r\n        return new Vector3((this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x), (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y), (this.z < 0) ? Math.ceil(this.z) : Math.floor(this.z));\r\n    }\r\n    negate() {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        this.z = -this.z;\r\n        return this;\r\n    }\r\n    negated() {\r\n        return new Vector3(-this.x, -this.y, -this.z);\r\n    }\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y + this.z * v.z;\r\n    }\r\n    cross(other) {\r\n        const ax = this.x, ay = this.y, az = this.z;\r\n        const bx = other.x, by = other.y, bz = other.z;\r\n        return new Vector3(ay * bz - az * by, az * bx - ax * bz, ax * by - ay * bx);\r\n    }\r\n    getLengthSquared() {\r\n        return this.x * this.x + this.y * this.y + this.z * this.z;\r\n    }\r\n    length() {\r\n        return Math.sqrt(this.getLengthSquared());\r\n    }\r\n    manhat() {\r\n        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\r\n    }\r\n    normalize() {\r\n        return this.div(this.length() || 1);\r\n    }\r\n    normalized() {\r\n        return this.divided(this.length() || 1);\r\n    }\r\n    isNormal() {\r\n        return Math.abs(this.length() - 1) < _const__WEBPACK_IMPORTED_MODULE_0__.Const.TOLERANCE;\r\n    }\r\n    disTo(v) {\r\n        return Math.sqrt(this.disToSquared(v));\r\n    }\r\n    disToSquared(v) {\r\n        const dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n        return dx * dx + dy * dy + dz * dz;\r\n    }\r\n    disToManhat(v) {\r\n        return Math.abs(this.x - v.x)\r\n            + Math.abs(this.y - v.y)\r\n            + Math.abs(this.z - v.z);\r\n    }\r\n    setLength(length) {\r\n        return this.normalize().scale(length);\r\n    }\r\n    lerp(other, alpha) {\r\n        return new Vector3((other.x - this.x) * alpha, (other.y - this.y) * alpha, (other.z - this.z) * alpha);\r\n    }\r\n    // #endregion\r\n    // #region math specific \r\n    projectOnVector(other) {\r\n        // use dot product to project this vector on the other vector \r\n        const denominator = other.getLengthSquared();\r\n        if (denominator === 0)\r\n            return this.set(0, 0, 0);\r\n        const scalar = other.dot(this) / denominator;\r\n        return this.copy(other).scale(scalar);\r\n    }\r\n    projectedOnPlane(normal) {\r\n        // project a vector \r\n        _vector.copy(this).projectOnVector(normal);\r\n        return this.minimumed(_vector);\r\n    }\r\n    mirrored(normal) {\r\n        // mirror incident vector off plane orthogonal to normal\r\n        // normal is assumed to have unit length\r\n        return this.minimumed(_vector.copy(normal).scale(2 * this.dot(normal)));\r\n    }\r\n    rotated(axis, angle) {\r\n        let mat = _matrix__WEBPACK_IMPORTED_MODULE_1__.Matrix4.newAxisRotation(axis, angle);\r\n        return mat.multiplyVector(this);\r\n    }\r\n}\r\nconst _vector = new Vector3(0, 0, 0);\r\nclass Vector2 {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    // --- factories & other statics\r\n    static fromArray(a) {\r\n        return new Vector2(a[0], a[1]);\r\n    }\r\n    static fromLerp(v1, v2, alpha) {\r\n        return new Vector2(v1.x + (v2.x - v1.x) * alpha, v1.y + (v2.y - v1.y) * alpha);\r\n    }\r\n    static fromRandom() {\r\n        return new Vector2(Math.random(), Math.random());\r\n    }\r\n    static fromRandomAngle() {\r\n        let alpha = Math.random() * Math.PI * 2;\r\n        return new Vector2(Math.cos(alpha), Math.sin(alpha));\r\n    }\r\n    // static from2Pt(from: Vector2, to: Vector2) : Vector2 {\r\n    // \treturn new Vector2(\r\n    // \t\tfrom.x - to.x,\r\n    // \t\tfrom.y - to.y\r\n    // \t)\r\n    // }\r\n    static fromCircle(center, radius, theta) {\r\n        return new Vector2(center.x + radius * Math.sin(theta), center.y + radius * Math.cos(theta));\r\n    }\r\n    static fromCopy(other) {\r\n        return this.zero().copy(other);\r\n    }\r\n    static zero() { return new Vector2(0, 0); }\r\n    static NaN() { return new Vector2(NaN, NaN); }\r\n    static fromCircumcenter(a, b, c) {\r\n        const asum = a.squareSum();\r\n        const bsum = b.squareSum();\r\n        const csum = c.squareSum();\r\n        // sort of cross product\r\n        let d = 2 * (a.x * (b.y - c.y) +\r\n            b.x * (c.y - a.y) +\r\n            c.x * (a.y - b.y));\r\n        // if this triangle has no circumcenter? \r\n        if (d < 0.000001)\r\n            return Vector2.NaN();\r\n        let x = (asum * (b.y - c.y) +\r\n            bsum * (c.y - a.y) +\r\n            csum * (a.y - b.y)) / d;\r\n        let y = (asum * (c.x - b.x) +\r\n            bsum * (a.x - c.x) +\r\n            csum * (b.x - a.x)) / d;\r\n        return new Vector2(x, y);\r\n    }\r\n    static getSign(a, b, c) {\r\n        // test half plane relationship\r\n        // <0 : point on first half\r\n        // 0  : points collinear\r\n        // >0 : point on second half \r\n        return (a.x - c.x) * (b.y - c.y) -\r\n            (b.x - c.x) * (a.y - c.y);\r\n    }\r\n    // --- basics\r\n    to3D() {\r\n        return new Vector3(this.x, this.y, 0);\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n    roughlyEquals(v, tol) {\r\n        return (Math.abs(this.x - v.x) < tol &&\r\n            Math.abs(this.y - v.y) < tol);\r\n    }\r\n    equals(v) {\r\n        return ((v.x === this.x) && (v.y === this.y));\r\n    }\r\n    toString() {\r\n        return `Vector2(${this.x}, ${this.y})`;\r\n    }\r\n    clone() {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n    copy(v) {\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n        return this;\r\n    }\r\n    // --- math\r\n    add(v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        return this;\r\n    }\r\n    added(v) {\r\n        return new Vector2(this.x + v.x, this.y + v.y);\r\n    }\r\n    addn(arg0, arg1) {\r\n        this.x += arg0;\r\n        this.y += arg1;\r\n        return this;\r\n    }\r\n    sub(v) {\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n        return this;\r\n    }\r\n    subbed(v) {\r\n        return new Vector2(this.x - v.x, this.y - v.y);\r\n    }\r\n    mul(v) {\r\n        this.x *= v.x;\r\n        this.y *= v.y;\r\n        return this;\r\n    }\r\n    scale(v) {\r\n        this.x *= v;\r\n        this.y *= v;\r\n        return this;\r\n    }\r\n    scaled(v) {\r\n        return new Vector2(this.x * v, this.y * v);\r\n    }\r\n    divVector(v) {\r\n        this.x /= v.x;\r\n        this.y /= v.y;\r\n        return this;\r\n    }\r\n    div(v) {\r\n        this.x /= v;\r\n        this.y /= v;\r\n        return this;\r\n    }\r\n    dived(v) {\r\n        return new Vector2(this.x / v, this.y / v);\r\n    }\r\n    minimum(other) {\r\n        this.x = Math.min(this.x, other.x);\r\n        this.y = Math.min(this.y, other.y);\r\n        return this;\r\n    }\r\n    maximum(other) {\r\n        this.x = Math.max(this.x, other.x);\r\n        this.y = Math.max(this.y, other.y);\r\n        return this;\r\n    }\r\n    clamp(min, max) {\r\n        // assumes min < max, componentwise\r\n        this.x = Math.max(min.x, Math.min(max.x, this.x));\r\n        this.y = Math.max(min.y, Math.min(max.y, this.y));\r\n        return this;\r\n    }\r\n    clampScalar(minVal, maxVal) {\r\n        this.x = Math.max(minVal, Math.min(maxVal, this.x));\r\n        this.y = Math.max(minVal, Math.min(maxVal, this.y));\r\n        return this;\r\n    }\r\n    clampLength(min, max) {\r\n        const length = this.length();\r\n        return this.div(length || 1).scale(Math.max(min, Math.min(max, length)));\r\n    }\r\n    floor() {\r\n        this.x = Math.floor(this.x);\r\n        this.y = Math.floor(this.y);\r\n        return this;\r\n    }\r\n    ceil() {\r\n        this.x = Math.ceil(this.x);\r\n        this.y = Math.ceil(this.y);\r\n        return this;\r\n    }\r\n    round() {\r\n        this.x = Math.round(this.x);\r\n        this.y = Math.round(this.y);\r\n        return this;\r\n    }\r\n    roundToZero() {\r\n        this.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\r\n        this.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\r\n        return this;\r\n    }\r\n    negate() {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        return this;\r\n    }\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n    cross(v) {\r\n        return this.x * v.y - this.y * v.x; // ????\r\n    }\r\n    squareSum() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n    length() {\r\n        return Math.sqrt(this.lengthSquared());\r\n    }\r\n    lengthSquared() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n    manhat() {\r\n        return Math.abs(this.x) + Math.abs(this.y);\r\n    }\r\n    normalize() {\r\n        return this.div(this.length() || 1);\r\n    }\r\n    normalized() {\r\n        return this.dived(this.length() || 1);\r\n    }\r\n    angle() {\r\n        // computes the angle in radians with respect to the positive x-axis\r\n        const angle = Math.atan2(-this.y, -this.x) + Math.PI;\r\n        return angle;\r\n    }\r\n    disTo(v) {\r\n        return Math.sqrt(this.disToSquared(v));\r\n    }\r\n    disToSquared(v) {\r\n        let dx = this.x - v.x;\r\n        let dy = this.y - v.y;\r\n        return dx * dx + dy * dy;\r\n    }\r\n    disToManhat(v) {\r\n        return Math.abs(this.x - v.x) + Math.abs(this.y - v.y);\r\n    }\r\n    setLength(length) {\r\n        return this.normalize().scale(length);\r\n    }\r\n    lerp(other, alpha) {\r\n        return new Vector2(this.x + (other.x - this.x) * alpha, this.y + (other.y - this.y) * alpha);\r\n    }\r\n    // calculate the 'triangle sign' of three points. Can be used to determine clockwise & counter clockwise\r\n    sign(b, c) {\r\n        return ((this.x - c.x) * (b.y - c.y)) - ((b.x - c.x) * (this.y - c.y));\r\n    }\r\n    // use dot product to project this vector on the other vector\r\n    projectOnVector(other) {\r\n        const denominator = other.lengthSquared();\r\n        if (denominator === 0)\r\n            return this.set(0, 0);\r\n        const scalar = other.dot(this) / denominator;\r\n        return this.copy(other).scale(scalar);\r\n    }\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.max(min, Math.min(max, value));\r\n}\r\nfunction radToDeg(r) {\r\n    return r * 180 / Math.PI;\r\n}\r\nfunction degToRad(d) {\r\n    return d * Math.PI / 180;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21hdGgvdmVjdG9yLnRzP2RkMTAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsd0JBQXdCO0FBQ3hCLDRCQUE0QjtBQUM1QixrRkFBa0Y7QUFDbEYsOEJBQThCO0FBQzlCLG1LQUFtSztBQUNuSyw4R0FBOEc7QUFFOUU7QUFDRztBQUc1QixNQUFNLE9BQU87SUFNaEIsWUFBWSxDQUFVLEVBQUUsQ0FBVSxFQUFFLENBQVU7UUFFMUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDWCxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUdKLE1BQU0sQ0FBQyxRQUFRLENBQUUsRUFBVSxFQUFFLEVBQVUsRUFBRSxLQUFZO1FBRXBELE9BQU8sSUFBSSxPQUFPLENBQ2pCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUUsR0FBRyxLQUFLLEVBQ3JCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUUsR0FBRyxLQUFLLEVBQzlCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUUsR0FBRyxLQUFLLENBQ3ZDLENBQUM7SUFDSCxDQUFDO0lBR0UsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUEwQztRQUN2RCxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUdELE1BQU0sQ0FBQyxVQUFVO1FBRWIsT0FBTyxJQUFJLE9BQU8sQ0FDcEIsSUFB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QUFDLENBQUM7UUFDckQsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBR0QsV0FBVyxDQUFDLEdBQVUsRUFBRSxHQUFVO1FBQ2pDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUM3QixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUUsTUFBTSxJQUFJLENBQUMsQ0FBRSxDQUFDLEtBQUssQ0FBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUdELEtBQUs7UUFDSixJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBR0QsSUFBSTtRQUNILElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQixPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7SUFHRCxLQUFLO1FBQ0osSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUdELFdBQVc7UUFDVixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxD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QUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0MsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUM7UUFDN0MsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN2QyxDQUFDO0NBQ0Q7QUFFRCxTQUFTLEtBQUssQ0FBQyxLQUFhLEVBQUUsR0FBVyxFQUFFLEdBQVc7SUFDckQsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzVDLENBQUM7QUFHTSxTQUFTLFFBQVEsQ0FBQyxDQUFTO0lBQ2pDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQzFCLENBQUM7QUFFTSxTQUFTLFFBQVEsQ0FBQyxDQUFTO0lBQ2pDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO0FBQzFCLENBQUMiLCJmaWxlIjoiLi9zcmMvbWF0aC92ZWN0b3IudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhdXRob3I6IFx0Sm9zIEZlZW5zdHJhXHJcbi8vIGluc3BpcmF0aW9uIGZyb20gVGhyZWUuanNcclxuLy8gbm90ZTogXHRyZWN5Y2xlIHRoZSBjbGFzcyBhcyBtdWNoIGFzIHBvc3NibGUsIGJ1aWxkaW5nIGEgbmV3IGNsYXNzIGlzIGV4cGVuc2l2ZSxcclxuLy8gXHRcdFx0ZXNwZWNpYWxseSBpbiBqYXZhc2NyaXB0XHJcbi8vIHRvZG86IFx0QklKIE5BREVSIElOWklFTjogZG9udCBnbyB0aGUgY29weSByb3V0ZS4gcmV3cml0ZSB0aGlzIGluIGEgbW9yZSBmdW5jdGlvbmFsIHdheSBjcmVhdGluZyBuZXcgY2xhc3NlcyBpcyBleHBlbnNpdmUsIGJ1dCB3ZSByZWFsbHkgbmVlZCBpbW11dGFibGUgdmVjdG9ycy4gXHJcbi8vIFx0XHRcdHRoZXNlIHR5cGVzIG9mIGNvbnNpc3RlbnQgdmVjdG9ycyBhcmUgb25seSB1c2VmdWwgaW4gbmljaGUgY2FzZXMsIGFuZCBjb21wbGl0YXRlIGEgbG90IG9mIGNvbW1vbiBjYXNlcy4gXHJcblxyXG5pbXBvcnQgeyBDb25zdCB9IGZyb20gXCIuL2NvbnN0XCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi9tYXRyaXhcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgVmVjdG9yM1xyXG57XHJcbiAgICAvLyAjcmVnaW9uIGNvbnN0cnVjdG9yc1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgejogbnVtYmVyO1xyXG4gICAgY29uc3RydWN0b3IoeCA6IG51bWJlciwgeSA6IG51bWJlciwgeiA6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgICAgdGhpcy56ID0gejtcclxuICAgIH1cclxuXHJcblxyXG5cdHN0YXRpYyBmcm9tTGVycCggdjE6VmVjdG9yMywgdjI6VmVjdG9yMywgYWxwaGE6bnVtYmVyICkgOiBWZWN0b3IzIFxyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0djEueCArICggdjIueCAtIHYxLnggKSAqIGFscGhhLFxyXG4gICAgICAgICAgICB2MS55ICsgKCB2Mi55IC0gdjEueSApICogYWxwaGEsXHJcbiAgICAgICAgICAgIHYxLnogKyAoIHYyLnogLSB2MS56ICkgKiBhbHBoYVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cclxuICAgIHN0YXRpYyBmcm9tQXJyYXkoYTogRmxvYXQzMkFycmF5IHwgbnVtYmVyW10gfCBBcnJheTxudW1iZXI+KSA6IFZlY3RvcjMge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyhhWzBdLCBhWzFdLCBhWzJdKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21SYW5kb20oKSA6IFZlY3RvcjMgXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKFxyXG5cdFx0ICAgIE1hdGgucmFuZG9tKCksXHJcblx0XHQgICAgTWF0aC5yYW5kb20oKSxcclxuXHRcdCAgICBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgKVxyXG5cdH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21TcGhlcmUocmFkaXVzOm51bWJlciwgdGhldGE6bnVtYmVyLCBwaGk6bnVtYmVyKSA6IFZlY3RvcjNcclxuICAgIHtcclxuXHRcdGNvbnN0IHNpblBoaVJhZGl1cyA9IE1hdGguc2luKCBwaGkgKSAqIHJhZGl1cztcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgc2luUGhpUmFkaXVzICogTWF0aC5zaW4oIHRoZXRhICksXHJcbiAgICAgICAgICAgIE1hdGguY29zKCBwaGkgKSAqIHJhZGl1cyxcclxuICAgICAgICAgICAgc2luUGhpUmFkaXVzICogTWF0aC5jb3MoIHRoZXRhICksXHJcbiAgICAgICAgKTtcclxuXHR9XHJcblxyXG5cclxuICAgIHN0YXRpYyBmcm9tQ3lsaW5kZXIocmFkaXVzOm51bWJlciwgdGhldGE6bnVtYmVyLCBoZWlnaHQ6bnVtYmVyKSA6IFZlY3RvcjMgXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHJhZGl1cyAqIE1hdGguc2luKCB0aGV0YSApLFxyXG4gICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgIHJhZGl1cyAqIE1hdGguY29zKCB0aGV0YSApXHJcbiAgICAgICAgKTtcclxuXHR9XHJcblxyXG5cclxuXHRzdGF0aWMgZnJvbUxlcnBXZWlnaHRzKHAxOiBWZWN0b3IzLCBwMjogVmVjdG9yMywgdFAxOiBudW1iZXIsIHRQMjogbnVtYmVyLCB0OiBudW1iZXIpIHtcclxuXHRcdFxyXG5cdFx0aWYgKE1hdGguYWJzKHQgLSB0UDEpIDwgMC4wMDAwMSlcclxuXHRcdFx0cmV0dXJuKHAxKTtcclxuXHRcdGlmIChNYXRoLmFicyh0IC0gdFAyKSA8IDAuMDAwMDEpXHJcblx0XHRcdHJldHVybihwMik7XHJcblx0XHRpZiAoTWF0aC5hYnModFAxIC0gdFAyKSA8IDAuMDAwMDEpXHJcblx0XHRcdHJldHVybihwMSk7XHJcblx0XHRsZXQgbXUgPSAodCAtIHRQMSkgLyAodFAyIC0gdFAxKTtcclxuXHJcblx0XHRyZXR1cm4gbmV3IFZlY3RvcjMoXHJcblx0XHRcdHAxLnggKyBtdSAqIChwMi54IC0gcDEueCksXHJcblx0XHRcdHAxLnkgKyBtdSAqIChwMi55IC0gcDEueSksXHJcblx0XHRcdHAxLnogKyBtdSAqIChwMi56IC0gcDEueiksXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblxyXG5cdC8vICNlbmRyZWdpb25cclxuXHQvLyAjcmVnaW9uIGRlZmF1bHRzIFxyXG5cclxuXHRzdGF0aWMgemVybygpICB7XHJcblx0XHRyZXR1cm4gbmV3IFZlY3RvcjMoMCwwLDApO1xyXG5cdH07XHJcblxyXG5cdFxyXG5cdHN0YXRpYyB1bml0WCgpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMygxLDAsMCk7XHJcblx0fTtcclxuXHJcblx0XHJcblx0c3RhdGljIHVuaXRZKCkge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IzKDAsMSwwKTtcclxuXHR9O1xyXG5cclxuXHJcblx0c3RhdGljIHVuaXRaKCkge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IzKDAsMCwxKTtcclxuXHR9O1xyXG5cclxuXHJcblx0Ly8gI2VuZHJlZ2lvblxyXG5cdC8vICNyZWdpb24gYmFzaWNzXHJcblxyXG5cclxuXHRzZXQoeDpudW1iZXIsIHk6bnVtYmVyLCB6Om51bWJlcikgOiBWZWN0b3IzXHJcblx0e1xyXG5cdFx0dGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMueiA9IHo7XHJcblx0XHRyZXR1cm4gdGhpcyBcdFx0XHJcblx0fVxyXG5cclxuXHJcblx0ZXF1YWxzKHY6VmVjdG9yMykgOiBib29sZWFuXHJcblx0e1xyXG5cdFx0cmV0dXJuICggKCB2LnggPT09IHRoaXMueCApICYmICggdi55ID09PSB0aGlzLnkgKSAmJiAoIHYueiA9PT0gdGhpcy56ICkgKTtcclxuXHR9XHJcblxyXG5cclxuICAgIHRvU3RyaW5nKCkgOiBzdHJpbmdcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gYFZlY3RvcjMoJHt0aGlzLnh9LCAke3RoaXMueX0sICR7dGhpcy56fSlgO1xyXG4gICAgfVxyXG5cclxuXHJcblx0dG9WZWN0b3IyKCkgOiBWZWN0b3IyIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMih0aGlzLngsIHRoaXMueSk7XHJcblx0fVxyXG5cclxuXHJcbiAgICBjbG9uZSgpIDogVmVjdG9yM1xyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29weSh2OiBWZWN0b3IzKSA6IFZlY3RvcjNcclxuICAgIHtcclxuICAgICAgICB0aGlzLnggPSB2Lng7XHJcbiAgICAgICAgdGhpcy55ID0gdi55O1xyXG4gICAgICAgIHRoaXMueiA9IHYuejtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblxyXG5cdHRvMkQoKTogVmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gI2VuZHJlZ2lvblxyXG5cdC8vICNyZWdpb24gbWF0aCBsaWtlIHZlY3RvcjJcclxuXHJcblxyXG4gICAgbGFyZ2VzdFZhbHVlKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYWRkZWQodjogVmVjdG9yMykgOiBWZWN0b3IzIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0dGhpcy54ICsgdi54LFxyXG5cdFx0XHR0aGlzLnkgKyB2LnksXHJcblx0XHRcdHRoaXMueiArIHYuelxyXG5cdFx0KTtcclxuICAgIH1cclxuXHJcblxyXG5cdGFkZCh2OiBWZWN0b3IzKSA6IFZlY3RvcjMge1xyXG5cdFx0dGhpcy54ICs9IHYueDtcclxuXHRcdHRoaXMueSArPSB2Lnk7XHJcblx0XHR0aGlzLnogKz0gdi56O1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN1YmJlZCh2OiBWZWN0b3IzKSA6IFZlY3RvcjMge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IzKFxyXG5cdFx0XHR0aGlzLnggLSB2LngsIFxyXG5cdFx0XHR0aGlzLnkgLSB2LnksIFxyXG5cdFx0XHR0aGlzLnogLSB2LnpcclxuXHRcdCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHRzdWIodjogVmVjdG9yMykgOiBWZWN0b3IzIHtcclxuXHRcdHRoaXMueCAtPSB2LngsXHJcblx0XHR0aGlzLnkgLT0gdi55LFxyXG5cdFx0dGhpcy56IC09IHYuelxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG5cclxuXHRpdGVtKGk6IG51bWJlcikge1xyXG5cdFx0c3dpdGNoKGkpIHtcclxuXHRcdFx0Y2FzZSgwKSA6IHJldHVybiB0aGlzLng7XHJcblx0XHRcdGNhc2UoMSkgOiByZXR1cm4gdGhpcy55O1xyXG5cdFx0XHRjYXNlKDIpIDogcmV0dXJuIHRoaXMuejtcclxuXHRcdFx0Y2FzZSgzKSA6IHJldHVybiAxO1xyXG5cdFx0XHRkZWZhdWx0IDogdGhyb3cgXCJub3BlXCI7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHJcbiAgICBzY2FsZWQodjogbnVtYmVyKSA6IFZlY3RvcjNcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoXHJcblx0XHRcdHRoaXMueCAqIHYsIFxyXG5cdFx0XHR0aGlzLnkgKiB2LCBcclxuXHRcdFx0dGhpcy56ICogdlxyXG5cdFx0KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2NhbGUodjogbnVtYmVyKSA6IFZlY3RvcjNcclxuICAgIHtcclxuXHRcdHRoaXMueCAqPSB2O1xyXG5cdFx0dGhpcy55ICo9IHY7XHJcblx0XHR0aGlzLnogKj0gdjtcclxuXHRcdHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtdWwodjogVmVjdG9yMykgOiBWZWN0b3IzIHtcclxuICAgICAgICB0aGlzLnggKj0gdi54O1xyXG4gICAgICAgIHRoaXMueSAqPSB2Lnk7XHJcblx0XHR0aGlzLnogKj0gdi56O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtdWx0aXBsaWVkKHY6IFZlY3RvcjMpIDogVmVjdG9yMyB7XHJcblx0XHRyZXR1cm4gbmV3IFZlY3RvcjMoXHJcblx0XHRcdHRoaXMueCAqIHYueCwgXHJcblx0XHRcdHRoaXMueSAqIHYueSwgXHJcblx0XHRcdHRoaXMueiAqIHYuelxyXG5cdFx0KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZGl2VmVjdG9yKHY6IFZlY3RvcjMpIDogVmVjdG9yM1xyXG4gICAge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IzKFxyXG5cdFx0XHR0aGlzLnggLyB2LngsIFxyXG5cdFx0XHR0aGlzLnkgLyB2LnksIFxyXG5cdFx0XHR0aGlzLnogLyB2LnpcclxuXHRcdCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRpdmlkZWQodmFsdWU6IG51bWJlcikgOiBWZWN0b3IzXHJcbiAgICB7XHJcblx0XHRyZXR1cm4gbmV3IFZlY3RvcjMoXHJcblx0XHRcdHRoaXMueCAvIHZhbHVlLCBcclxuXHRcdFx0dGhpcy55IC8gdmFsdWUsIFxyXG5cdFx0XHR0aGlzLnogLyB2YWx1ZVxyXG5cdFx0KTtcclxuICAgIH1cclxuXHJcblxyXG5cdGRpdih2YWx1ZTogbnVtYmVyKSA6IFZlY3RvcjMge1xyXG5cdFx0dGhpcy54IC89IHZhbHVlLCBcclxuXHRcdHRoaXMueSAvPSB2YWx1ZSwgXHJcblx0XHR0aGlzLnogLz0gdmFsdWVcclxuXHRcdHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtaW5pbXVtZWQob3RoZXI6IFZlY3RvcjMpIDogVmVjdG9yMyBcclxuICAgIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0TWF0aC5taW4odGhpcy54LCBvdGhlci54KSxcclxuXHRcdFx0TWF0aC5taW4odGhpcy55LCBvdGhlci55KSwgXHJcblx0XHRcdE1hdGgubWluKHRoaXMueiwgb3RoZXIueiksXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblxyXG5cdG1heGltdW1lZChvdGhlcjogVmVjdG9yMykgOiBWZWN0b3IzIFxyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0TWF0aC5tYXgodGhpcy54LCBvdGhlci54KSxcclxuXHRcdFx0TWF0aC5tYXgodGhpcy55LCBvdGhlci55KSwgXHJcblx0XHRcdE1hdGgubWF4KHRoaXMueiwgb3RoZXIueilcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHJcblx0Y2xhbXBlZChtaW46IFZlY3RvcjMsIG1heDogVmVjdG9yMykgOiBWZWN0b3IzIFxyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0TWF0aC5tYXgobWluLngsIE1hdGgubWluKG1heC54LCB0aGlzLngpKSxcclxuXHRcdFx0TWF0aC5tYXgobWluLnksIE1hdGgubWluKG1heC55LCB0aGlzLnkpKSwgXHJcblx0XHRcdE1hdGgubWF4KG1pbi56LCBNYXRoLm1pbihtYXgueiwgdGhpcy56KSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHJcblx0Y2xhbXBTY2FsYXJlZChtaW46bnVtYmVyLCBtYXg6bnVtYmVyKSA6IFZlY3RvcjMgXHJcblx0e1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IzKFxyXG5cdFx0XHRjbGFtcCh0aGlzLngsIG1pbiwgbWF4KSxcclxuXHRcdFx0Y2xhbXAodGhpcy55LCBtaW4sIG1heCksXHJcblx0XHRcdGNsYW1wKHRoaXMueiwgbWluLCBtYXgpLFxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cclxuXHRjbGFtcExlbmd0aGVkKG1pbjpudW1iZXIsIG1heDpudW1iZXIpIDogVmVjdG9yM1xyXG5cdHtcclxuXHRcdGNvbnN0IGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XHJcblx0XHRyZXR1cm4gdGhpcy5kaXYobGVuZ3RoIHx8IDEpLnNjYWxlKE1hdGgubWF4KG1pbixNYXRoLm1pbihtYXgsIGxlbmd0aCkpKTtcclxuXHR9XHJcblxyXG5cclxuXHRmbG9vcmVkKCkgOiBWZWN0b3IzIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0TWF0aC5mbG9vcih0aGlzLngpLFxyXG5cdFx0XHRNYXRoLmZsb29yKHRoaXMueSksXHJcblx0XHRcdE1hdGguZmxvb3IodGhpcy56KSxcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHJcblx0Y2VpbGVkKCkgOiBWZWN0b3IzIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0TWF0aC5jZWlsKHRoaXMueCksXHJcblx0XHRcdE1hdGguY2VpbCh0aGlzLnkpLFxyXG5cdFx0XHRNYXRoLmNlaWwodGhpcy56KSxcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHJcblx0cm91bmRlZCgpIDogVmVjdG9yMyB7XHJcblx0XHRyZXR1cm4gbmV3IFZlY3RvcjMoXHJcblx0XHRcdE1hdGgucm91bmQodGhpcy54KSxcclxuXHRcdFx0TWF0aC5yb3VuZCh0aGlzLnkpLFxyXG5cdFx0XHRNYXRoLnJvdW5kKHRoaXMueiksXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblxyXG5cdHJvdW5kZWRUb1plcm8oKSA6IFZlY3RvcjMge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IzKFxyXG5cdFx0XHQodGhpcy54IDwgMCkgPyBNYXRoLmNlaWwoIHRoaXMueCApIDogTWF0aC5mbG9vciggdGhpcy54ICksXHJcblx0XHRcdCh0aGlzLnkgPCAwKSA/IE1hdGguY2VpbCggdGhpcy55ICkgOiBNYXRoLmZsb29yKCB0aGlzLnkgKSxcclxuXHRcdFx0KHRoaXMueiA8IDApID8gTWF0aC5jZWlsKCB0aGlzLnogKSA6IE1hdGguZmxvb3IoIHRoaXMueiApLFxyXG5cdFx0KVxyXG5cdH1cclxuXHJcblxyXG5cdG5lZ2F0ZSgpIDogVmVjdG9yMyB7XHJcblx0XHR0aGlzLnggPSAtdGhpcy54O1xyXG5cdFx0dGhpcy55ID0gLXRoaXMueTtcclxuXHRcdHRoaXMueiA9IC10aGlzLno7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cclxuXHRuZWdhdGVkKCkgOiBWZWN0b3IzIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0LXRoaXMueCxcclxuXHRcdFx0LXRoaXMueSxcclxuXHRcdFx0LXRoaXMueixcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHJcblx0ZG90KHY6VmVjdG9yMykgOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueSArIHRoaXMueiAqIHYuejtcclxuXHR9XHJcblxyXG5cclxuXHRjcm9zcyhvdGhlcjpWZWN0b3IzKSA6IFZlY3RvcjMge1xyXG4gICAgICAgIGNvbnN0IGF4ID0gdGhpcy54LCBheSA9IHRoaXMueSwgYXogPSB0aGlzLno7XHJcblx0XHRjb25zdCBieCA9IG90aGVyLngsIGJ5ID0gb3RoZXIueSwgYnogPSBvdGhlci56O1xyXG5cclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0YXkgKiBieiAtIGF6ICogYnksXHJcblx0XHRcdGF6ICogYnggLSBheCAqIGJ6LFxyXG5cdFx0XHRheCAqIGJ5IC0gYXkgKiBieCxcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHJcblx0Z2V0TGVuZ3RoU3F1YXJlZCgpIDogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLno7XHJcblx0fVxyXG5cclxuXHJcblx0bGVuZ3RoKCkgOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIE1hdGguc3FydCh0aGlzLmdldExlbmd0aFNxdWFyZWQoKSk7XHJcblx0fVxyXG5cclxuXHJcblx0bWFuaGF0KCkgOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIE1hdGguYWJzKHRoaXMueCkgKyBNYXRoLmFicyh0aGlzLnkpICsgTWF0aC5hYnModGhpcy56KTtcclxuXHR9XHJcblxyXG5cclxuXHRub3JtYWxpemUoKSA6IFZlY3RvcjMge1xyXG5cdFx0cmV0dXJuIHRoaXMuZGl2KHRoaXMubGVuZ3RoKCkgfHwgMSk7XHJcblx0fVxyXG5cclxuXHJcblx0bm9ybWFsaXplZCgpIDogVmVjdG9yMyB7XHJcblx0XHRyZXR1cm4gdGhpcy5kaXZpZGVkKHRoaXMubGVuZ3RoKCkgfHwgMSk7XHJcblx0fVxyXG5cclxuXHJcblx0aXNOb3JtYWwoKSA6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIE1hdGguYWJzKHRoaXMubGVuZ3RoKCkgLSAxKSA8IENvbnN0LlRPTEVSQU5DRTtcclxuXHR9XHJcblxyXG5cclxuXHRkaXNUbyh2OiBWZWN0b3IzKSA6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzVG9TcXVhcmVkKHYpKTtcclxuXHR9XHJcblxyXG5cclxuXHRkaXNUb1NxdWFyZWQodjogVmVjdG9yMykgOiBudW1iZXJcclxuXHR7XHJcblx0XHRjb25zdCBkeCA9IHRoaXMueCAtIHYueCwgXHJcbiAgICAgICAgICAgICAgZHkgPSB0aGlzLnkgLSB2LnksXHJcbiAgICAgICAgICAgICAgZHogPSB0aGlzLnogLSB2Lno7XHJcblx0XHRyZXR1cm4gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6O1xyXG5cdH1cclxuXHJcblxyXG5cdGRpc1RvTWFuaGF0KHY6IFZlY3RvcjMpIDogbnVtYmVyXHJcblx0e1xyXG4gICAgICAgIHJldHVybiBNYXRoLmFicyh0aGlzLnggLSB2LngpIFxyXG4gICAgICAgICAgICAgKyBNYXRoLmFicyh0aGlzLnkgLSB2LnkpIFxyXG4gICAgICAgICAgICAgKyBNYXRoLmFicyh0aGlzLnogLSB2LnopO1xyXG5cdH1cclxuXHJcblxyXG5cdHNldExlbmd0aChsZW5ndGg6IG51bWJlcikgOiBWZWN0b3IzXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMubm9ybWFsaXplKCkuc2NhbGUobGVuZ3RoKTtcclxuXHR9XHJcblxyXG5cclxuXHRsZXJwKG90aGVyOiBWZWN0b3IzLCBhbHBoYTpudW1iZXIpIDogVmVjdG9yM1xyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyhcclxuXHRcdFx0KCBvdGhlci54IC0gdGhpcy54ICkgKiBhbHBoYSxcclxuXHRcdFx0KCBvdGhlci55IC0gdGhpcy55ICkgKiBhbHBoYSxcclxuXHRcdFx0KCBvdGhlci56IC0gdGhpcy56ICkgKiBhbHBoYSxcclxuXHRcdCk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICAvLyAjZW5kcmVnaW9uXHJcbiAgICAvLyAjcmVnaW9uIG1hdGggc3BlY2lmaWMgXHJcblxyXG5cclxuICAgIHByb2plY3RPblZlY3RvcihvdGhlcjogVmVjdG9yMykgXHJcbiAgICB7XHJcbiAgICAgICAgLy8gdXNlIGRvdCBwcm9kdWN0IHRvIHByb2plY3QgdGhpcyB2ZWN0b3Igb24gdGhlIG90aGVyIHZlY3RvciBcclxuXHRcdGNvbnN0IGRlbm9taW5hdG9yID0gb3RoZXIuZ2V0TGVuZ3RoU3F1YXJlZCgpO1xyXG5cdFx0aWYgKCBkZW5vbWluYXRvciA9PT0gMCApIHJldHVybiB0aGlzLnNldCggMCwgMCwgMCApO1xyXG5cdFx0Y29uc3Qgc2NhbGFyID0gb3RoZXIuZG90KHRoaXMpIC8gZGVub21pbmF0b3I7XHJcblx0XHRyZXR1cm4gdGhpcy5jb3B5KG90aGVyKS5zY2FsZShzY2FsYXIpO1xyXG5cdH1cclxuXHJcbiAgICBcclxuXHRwcm9qZWN0ZWRPblBsYW5lKG5vcm1hbDogVmVjdG9yMykgXHJcbiAgICB7XHJcbiAgICAgICAgLy8gcHJvamVjdCBhIHZlY3RvciBcclxuXHRcdF92ZWN0b3IuY29weSh0aGlzKS5wcm9qZWN0T25WZWN0b3Iobm9ybWFsKTtcclxuXHRcdHJldHVybiB0aGlzLm1pbmltdW1lZChfdmVjdG9yKTtcclxuXHR9XHJcblxyXG4gICAgXHJcblx0bWlycm9yZWQobm9ybWFsOiBWZWN0b3IzKSBcclxuICAgIHtcclxuXHRcdC8vIG1pcnJvciBpbmNpZGVudCB2ZWN0b3Igb2ZmIHBsYW5lIG9ydGhvZ29uYWwgdG8gbm9ybWFsXHJcblx0XHQvLyBub3JtYWwgaXMgYXNzdW1lZCB0byBoYXZlIHVuaXQgbGVuZ3RoXHJcblx0XHRyZXR1cm4gdGhpcy5taW5pbXVtZWQoX3ZlY3Rvci5jb3B5KG5vcm1hbCkuc2NhbGUoMiAqIHRoaXMuZG90KG5vcm1hbCkpKTtcclxuXHR9XHJcblxyXG5cdFxyXG5cdHJvdGF0ZWQoYXhpczogVmVjdG9yMywgYW5nbGU6IG51bWJlcikgOiBWZWN0b3IzIHtcclxuXHRcdGxldCBtYXQgPSBNYXRyaXg0Lm5ld0F4aXNSb3RhdGlvbihheGlzLCBhbmdsZSk7XHJcblx0XHRyZXR1cm4gbWF0Lm11bHRpcGx5VmVjdG9yKHRoaXMpOyBcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IF92ZWN0b3IgPSBuZXcgVmVjdG9yMygwLDAsMCk7XHJcblxyXG5leHBvcnQgY2xhc3MgVmVjdG9yMlxyXG57XHJcbiAgICB4OiBudW1iZXI7XHJcblx0eTogbnVtYmVyO1xyXG5cdFxyXG4gICAgY29uc3RydWN0b3IoeCA6IG51bWJlciwgeSA6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcblxyXG5cdC8vIC0tLSBmYWN0b3JpZXMgJiBvdGhlciBzdGF0aWNzXHJcblxyXG5cclxuICAgIHN0YXRpYyBmcm9tQXJyYXkoYTogQXJyYXk8bnVtYmVyPikgOiBWZWN0b3IyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoYVswXSwgYVsxXSk7XHJcbiAgICB9XHJcblxyXG5cdHN0YXRpYyBmcm9tTGVycCggdjE6VmVjdG9yMiwgdjI6VmVjdG9yMiwgYWxwaGE6bnVtYmVyICkgOiBWZWN0b3IyIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMihcclxuXHRcdFx0djEueCArICggdjIueCAtIHYxLnggKSAqIGFscGhhLFxyXG5cdFx0XHR2MS55ICsgKCB2Mi55IC0gdjEueSApICogYWxwaGFcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuICAgIHN0YXRpYyBmcm9tUmFuZG9tKCkgOiBWZWN0b3IyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcblx0XHQgICAgTWF0aC5yYW5kb20oKSxcclxuXHRcdCAgICBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgKVxyXG5cdH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21SYW5kb21BbmdsZSgpIDogVmVjdG9yMiB7XHJcblx0XHRsZXQgYWxwaGEgPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDI7XHJcblx0XHRcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcblx0XHRcdE1hdGguY29zKGFscGhhKSxcclxuXHRcdFx0TWF0aC5zaW4oYWxwaGEpXHJcbiAgICAgICAgKVxyXG5cdH1cclxuXHJcblxyXG5cdC8vIHN0YXRpYyBmcm9tMlB0KGZyb206IFZlY3RvcjIsIHRvOiBWZWN0b3IyKSA6IFZlY3RvcjIge1xyXG5cdC8vIFx0cmV0dXJuIG5ldyBWZWN0b3IyKFxyXG5cdC8vIFx0XHRmcm9tLnggLSB0by54LFxyXG5cdC8vIFx0XHRmcm9tLnkgLSB0by55XHJcblx0Ly8gXHQpXHJcblx0Ly8gfVxyXG5cclxuXHJcblx0c3RhdGljIGZyb21DaXJjbGUoY2VudGVyOiBWZWN0b3IyLCByYWRpdXM6IG51bWJlciwgdGhldGE6IG51bWJlcikgOiBWZWN0b3IyXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKFxyXG4gICAgICAgICAgICBjZW50ZXIueCArIHJhZGl1cyAqIE1hdGguc2luKHRoZXRhKSxcclxuICAgICAgICAgICAgY2VudGVyLnkgKyByYWRpdXMgKiBNYXRoLmNvcyh0aGV0YSlcclxuICAgICAgICApO1xyXG5cdH1cclxuXHJcblxyXG5cdHN0YXRpYyBmcm9tQ29weShvdGhlcjogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuXHRcdHJldHVybiB0aGlzLnplcm8oKS5jb3B5KG90aGVyKTtcdFxyXG5cdH1cclxuXHJcblxyXG5cdHN0YXRpYyB6ZXJvKCkgeyByZXR1cm4gbmV3IFZlY3RvcjIoMCwgMCk7IH1cclxuXHJcblxyXG5cdHN0YXRpYyBOYU4oKSB7IHJldHVybiBuZXcgVmVjdG9yMihOYU4sIE5hTik7IH1cclxuXHJcblxyXG5cdHN0YXRpYyBmcm9tQ2lyY3VtY2VudGVyKGE6IFZlY3RvcjIsIGI6IFZlY3RvcjIsIGM6IFZlY3RvcjIpIDogVmVjdG9yMiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGFzdW0gPSBhLnNxdWFyZVN1bSgpO1xyXG4gICAgICAgIGNvbnN0IGJzdW0gPSBiLnNxdWFyZVN1bSgpO1xyXG4gICAgICAgIGNvbnN0IGNzdW0gPSBjLnNxdWFyZVN1bSgpO1xyXG5cclxuICAgICAgICAvLyBzb3J0IG9mIGNyb3NzIHByb2R1Y3RcclxuICAgICAgICBsZXQgZCA9IDIgKiAoYS54ICogKGIueSAtIGMueSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICBiLnggKiAoYy55IC0gYS55KSArIFxyXG4gICAgICAgICAgICAgICAgICAgICBjLnggKiAoYS55IC0gYi55KSk7XHJcblxyXG4gICAgICAgIC8vIGlmIHRoaXMgdHJpYW5nbGUgaGFzIG5vIGNpcmN1bWNlbnRlcj8gXHJcbiAgICAgICAgaWYgKGQgPCAwLjAwMDAwMSlcclxuXHRcdFx0cmV0dXJuIFZlY3RvcjIuTmFOKCk7IFxyXG5cclxuXHRcdGxldCB4ID0gKGFzdW0gKiAoYi55IC0gYy55KSArIFxyXG5cdFx0XHRcdCBic3VtICogKGMueSAtIGEueSkgKyBcclxuXHRcdFx0XHQgY3N1bSAqIChhLnkgLSBiLnkpKSAvIGQ7XHJcblx0XHRsZXQgeSA9IChhc3VtICogKGMueCAtIGIueCkgKyBcclxuXHRcdFx0XHQgYnN1bSAqIChhLnggLSBjLngpICsgXHJcblx0XHRcdFx0IGNzdW0gKiAoYi54IC0gYS54KSkgLyBkO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoeCx5KTtcclxuICAgIH1cclxuXHJcblxyXG5cdHN0YXRpYyBnZXRTaWduKGE6VmVjdG9yMiwgYjpWZWN0b3IyICwgYzpWZWN0b3IyKSA6IG51bWJlciB7XHJcblx0XHQvLyB0ZXN0IGhhbGYgcGxhbmUgcmVsYXRpb25zaGlwXHJcblx0XHQvLyA8MCA6IHBvaW50IG9uIGZpcnN0IGhhbGZcclxuXHRcdC8vIDAgIDogcG9pbnRzIGNvbGxpbmVhclxyXG5cdFx0Ly8gPjAgOiBwb2ludCBvbiBzZWNvbmQgaGFsZiBcclxuXHRcdHJldHVybiAoYS54IC0gYy54KSAqIChiLnkgLSBjLnkpIC0gXHJcblx0XHQgICAgICAgKGIueCAtIGMueCkgKiAoYS55IC0gYy55KTtcclxuXHR9XHJcblxyXG5cclxuXHQvLyAtLS0gYmFzaWNzXHJcblxyXG5cclxuXHR0bzNEKCkgOiBWZWN0b3IzIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLngsIHRoaXMueSwgMCk7XHJcblx0fVxyXG5cclxuXHRcclxuXHRzZXQoeDpudW1iZXIsIHk6bnVtYmVyKSA6IFZlY3RvcjIge1xyXG5cdFx0dGhpcy54ID0geDtcclxuXHRcdHRoaXMueSA9IHk7XHJcblx0XHRyZXR1cm4gdGhpcyBcdFx0XHJcblx0fVxyXG5cclxuXHJcblx0cm91Z2hseUVxdWFscyh2OiBWZWN0b3IyLCB0b2w6bnVtYmVyKSA6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIChNYXRoLmFicyh0aGlzLnggLSB2LngpIDwgdG9sICYmIFxyXG5cdFx0XHRcdE1hdGguYWJzKHRoaXMueSAtIHYueSkgPCB0b2wpXHJcblx0fVxyXG5cclxuXHJcblx0ZXF1YWxzKHY6VmVjdG9yMikgOiBib29sZWFuIHtcclxuXHRcdHJldHVybiAoICggdi54ID09PSB0aGlzLnggKSAmJiAoIHYueSA9PT0gdGhpcy55ICkgKTtcclxuXHR9XHJcblxyXG5cclxuICAgIHRvU3RyaW5nKCkgOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgVmVjdG9yMigke3RoaXMueH0sICR7dGhpcy55fSlgO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjbG9uZSgpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29weSh2OiBWZWN0b3IyKSA6IFZlY3RvcjIge1xyXG4gICAgICAgIHRoaXMueCA9IHYueDtcclxuICAgICAgICB0aGlzLnkgPSB2Lnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG5cdC8vIC0tLSBtYXRoXHJcblxyXG5cdGFkZCh2OiBWZWN0b3IyKSA6IFZlY3RvcjIge1xyXG4gICAgICAgIHRoaXMueCArPSB2Lng7XHJcbiAgICAgICAgdGhpcy55ICs9IHYueTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblxyXG4gICAgYWRkZWQodjogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcblx0XHRcdHRoaXMueCArIHYueCxcclxuXHRcdFx0dGhpcy55ICsgdi55XHJcblx0XHQpO1xyXG4gICAgfVxyXG5cclxuXHJcblx0YWRkbihhcmcwOiBudW1iZXIsIGFyZzE6IG51bWJlcik6IFZlY3RvcjIge1xyXG5cdFx0dGhpcy54ICs9IGFyZzA7XHJcblx0XHR0aGlzLnkgKz0gYXJnMTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcblx0c3ViKHY6IFZlY3RvcjIpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgdGhpcy54IC09IHYueDtcclxuICAgICAgICB0aGlzLnkgLT0gdi55O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdWJiZWQodjogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcblx0XHRcdHRoaXMueCAtIHYueCxcclxuXHRcdFx0dGhpcy55IC0gdi55XHJcblx0XHQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtdWwodjogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuICAgICAgICB0aGlzLnggKj0gdi54O1xyXG4gICAgICAgIHRoaXMueSAqPSB2Lnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNjYWxlKHY6IG51bWJlcikgOiBWZWN0b3IyIHtcclxuICAgICAgICB0aGlzLnggKj0gdjtcclxuICAgICAgICB0aGlzLnkgKj0gdjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblx0XHJcblx0c2NhbGVkKHY6IG51bWJlcikgOiBWZWN0b3IyIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yMihcclxuXHRcdFx0dGhpcy54ICogdixcclxuXHRcdFx0dGhpcy55ICogdixcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHJcbiAgICBkaXZWZWN0b3IodjogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuICAgICAgICB0aGlzLnggLz0gdi54O1xyXG4gICAgICAgIHRoaXMueSAvPSB2Lnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG5cdFxyXG4gICAgZGl2KHY6IG51bWJlcikgOiBWZWN0b3IyIHtcclxuICAgICAgICB0aGlzLnggLz0gdjtcclxuICAgICAgICB0aGlzLnkgLz0gdjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcblxyXG5cdGRpdmVkKHY6IG51bWJlcikgOiBWZWN0b3IyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcblx0XHRcdHRoaXMueCAvIHYsXHJcblx0XHRcdHRoaXMueSAvIHYsXHJcblx0XHQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtaW5pbXVtKG90aGVyOiBWZWN0b3IyKSA6IFZlY3RvcjIge1xyXG5cdFx0dGhpcy54ID0gTWF0aC5taW4oIHRoaXMueCwgb3RoZXIueCApO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5taW4oIHRoaXMueSwgb3RoZXIueSApO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHJcblx0bWF4aW11bShvdGhlcjogVmVjdG9yMikgOiBWZWN0b3IyIHtcclxuXHRcdHRoaXMueCA9IE1hdGgubWF4KCB0aGlzLngsIG90aGVyLnggKTtcclxuXHRcdHRoaXMueSA9IE1hdGgubWF4KCB0aGlzLnksIG90aGVyLnkgKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblxyXG5cdGNsYW1wKG1pbjogVmVjdG9yMiwgbWF4OiBWZWN0b3IyKSA6IFZlY3RvcjIge1xyXG5cdFx0Ly8gYXNzdW1lcyBtaW4gPCBtYXgsIGNvbXBvbmVudHdpc2VcclxuXHRcdHRoaXMueCA9IE1hdGgubWF4KG1pbi54LCBNYXRoLm1pbihtYXgueCwgdGhpcy54KSk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLm1heChtaW4ueSwgTWF0aC5taW4obWF4LnksIHRoaXMueSkpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHJcblx0Y2xhbXBTY2FsYXIobWluVmFsOm51bWJlciwgbWF4VmFsOm51bWJlcikgOiBWZWN0b3IyIHtcclxuXHRcdHRoaXMueCA9IE1hdGgubWF4KCBtaW5WYWwsIE1hdGgubWluKG1heFZhbCwgdGhpcy54KSk7XHJcblx0XHR0aGlzLnkgPSBNYXRoLm1heCggbWluVmFsLCBNYXRoLm1pbihtYXhWYWwsIHRoaXMueSkpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHJcblx0Y2xhbXBMZW5ndGgobWluOm51bWJlciwgbWF4Om51bWJlcikgOiBWZWN0b3IyIHtcclxuXHRcdGNvbnN0IGxlbmd0aCA9IHRoaXMubGVuZ3RoKCk7XHJcblx0XHRyZXR1cm4gdGhpcy5kaXYoIGxlbmd0aCB8fCAxICkuc2NhbGUoIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCBsZW5ndGgpKSk7XHJcblx0fVxyXG5cclxuXHJcblx0Zmxvb3IoKSA6IFZlY3RvcjIge1xyXG5cdFx0dGhpcy54ID0gTWF0aC5mbG9vcih0aGlzLngpO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5mbG9vcih0aGlzLnkpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHJcblx0Y2VpbCgpIDogVmVjdG9yMiB7XHJcblx0XHR0aGlzLnggPSBNYXRoLmNlaWwodGhpcy54KTtcclxuXHRcdHRoaXMueSA9IE1hdGguY2VpbCh0aGlzLnkpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHJcblx0cm91bmQoKSA6IFZlY3RvcjIge1xyXG5cdFx0dGhpcy54ID0gTWF0aC5yb3VuZCh0aGlzLngpO1xyXG5cdFx0dGhpcy55ID0gTWF0aC5yb3VuZCh0aGlzLnkpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHJcblx0cm91bmRUb1plcm8oKSA6IFZlY3RvcjIge1xyXG5cdFx0dGhpcy54ID0gKHRoaXMueCA8IDApID8gTWF0aC5jZWlsKCB0aGlzLnggKSA6IE1hdGguZmxvb3IoIHRoaXMueCApO1xyXG5cdFx0dGhpcy55ID0gKHRoaXMueSA8IDApID8gTWF0aC5jZWlsKCB0aGlzLnkgKSA6IE1hdGguZmxvb3IoIHRoaXMueSApO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHJcblx0bmVnYXRlKCkgOiBWZWN0b3IyIHtcclxuXHRcdHRoaXMueCA9IC0gdGhpcy54O1xyXG5cdFx0dGhpcy55ID0gLSB0aGlzLnk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cclxuXHRkb3QoIHY6VmVjdG9yMiApIDogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2Lnk7XHJcblx0fVxyXG5cclxuXHJcblx0Y3Jvc3MoIHY6VmVjdG9yMiApIDogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLnggKiB2LnkgLSB0aGlzLnkgKiB2Lng7IC8vID8/Pz9cclxuXHR9XHJcblxyXG5cclxuXHRzcXVhcmVTdW0oKSA6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55O1xyXG5cdH1cclxuXHJcblxyXG5cdGxlbmd0aCgpIDogbnVtYmVyIHtcclxuXHRcdHJldHVybiBNYXRoLnNxcnQodGhpcy5sZW5ndGhTcXVhcmVkKCkpO1xyXG5cdH1cclxuXHJcblxyXG5cdGxlbmd0aFNxdWFyZWQoKSA6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55O1xyXG5cdH1cclxuXHJcblxyXG5cdG1hbmhhdCgpIDogbnVtYmVyIHtcclxuXHRcdHJldHVybiBNYXRoLmFicyggdGhpcy54ICkgKyBNYXRoLmFicyggdGhpcy55ICk7XHJcblx0fVxyXG5cclxuXHJcblx0bm9ybWFsaXplKCkgOiBWZWN0b3IyIHtcclxuXHRcdHJldHVybiB0aGlzLmRpdiggdGhpcy5sZW5ndGgoKSB8fCAxICk7XHJcblx0fVxyXG5cclxuXHJcblx0bm9ybWFsaXplZCgpIDogVmVjdG9yMiB7XHJcblx0XHRyZXR1cm4gdGhpcy5kaXZlZCggdGhpcy5sZW5ndGgoKSB8fCAxICk7XHJcblx0fVxyXG5cclxuXHJcblx0YW5nbGUoKSA6IG51bWJlciB7XHJcblx0XHQvLyBjb21wdXRlcyB0aGUgYW5nbGUgaW4gcmFkaWFucyB3aXRoIHJlc3BlY3QgdG8gdGhlIHBvc2l0aXZlIHgtYXhpc1xyXG5cdFx0Y29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKCAtIHRoaXMueSwgLSB0aGlzLnggKSArIE1hdGguUEk7XHJcblx0XHRyZXR1cm4gYW5nbGU7XHJcblx0fVxyXG5cclxuXHJcblx0ZGlzVG8odjogVmVjdG9yMikgOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc1RvU3F1YXJlZCh2KSk7XHJcblx0fVxyXG5cclxuXHJcblx0ZGlzVG9TcXVhcmVkKHY6IFZlY3RvcjIpIDogbnVtYmVyIHtcclxuXHRcdGxldCBkeCA9IHRoaXMueCAtIHYueDtcclxuXHRcdGxldCBkeSA9IHRoaXMueSAtIHYueTtcclxuXHRcdHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcclxuXHR9XHJcblxyXG5cclxuXHRkaXNUb01hbmhhdCh2OiBWZWN0b3IyKSA6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gTWF0aC5hYnModGhpcy54IC0gdi54KSArIE1hdGguYWJzKHRoaXMueSAtIHYueSk7XHJcblx0fVxyXG5cclxuXHJcblx0c2V0TGVuZ3RoKGxlbmd0aDogbnVtYmVyKSA6IFZlY3RvcjIge1xyXG5cdFx0cmV0dXJuIHRoaXMubm9ybWFsaXplKCkuc2NhbGUobGVuZ3RoKTtcclxuXHR9XHJcblxyXG5cclxuXHRsZXJwKG90aGVyOiBWZWN0b3IyLCBhbHBoYTpudW1iZXIpIDogVmVjdG9yMiB7XHJcblx0XHRyZXR1cm4gbmV3IFZlY3RvcjIoXHJcblx0XHRcdHRoaXMueCArICggb3RoZXIueCAtIHRoaXMueCApICogYWxwaGEsXHJcblx0XHRcdHRoaXMueSArICggb3RoZXIueSAtIHRoaXMueSApICogYWxwaGEsXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0Ly8gY2FsY3VsYXRlIHRoZSAndHJpYW5nbGUgc2lnbicgb2YgdGhyZWUgcG9pbnRzLiBDYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgY2xvY2t3aXNlICYgY291bnRlciBjbG9ja3dpc2VcclxuXHRzaWduKGI6IFZlY3RvcjIsIGM6IFZlY3RvcjIpIDogbnVtYmVyIHtcclxuXHRcdHJldHVybiAoKHRoaXMueCAtIGMueCkgKiAoYi55IC0gYy55KSkgLSAoKGIueCAtIGMueCkgKiAodGhpcy55LSBjLnkpKTtcclxuXHR9XHJcblxyXG5cclxuXHQvLyB1c2UgZG90IHByb2R1Y3QgdG8gcHJvamVjdCB0aGlzIHZlY3RvciBvbiB0aGUgb3RoZXIgdmVjdG9yXHJcblx0cHJvamVjdE9uVmVjdG9yKG90aGVyOiBWZWN0b3IyKSBcclxuICAgIHtcclxuXHRcdGNvbnN0IGRlbm9taW5hdG9yID0gb3RoZXIubGVuZ3RoU3F1YXJlZCgpO1xyXG5cdFx0aWYgKGRlbm9taW5hdG9yID09PSAwKSByZXR1cm4gdGhpcy5zZXQoMCwgMCk7XHJcblx0XHRjb25zdCBzY2FsYXIgPSBvdGhlci5kb3QodGhpcykgLyBkZW5vbWluYXRvcjtcclxuXHRcdHJldHVybiB0aGlzLmNvcHkob3RoZXIpLnNjYWxlKHNjYWxhcik7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGFtcCh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIDogbnVtYmVyIHtcclxuXHRyZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmFkVG9EZWcocjogbnVtYmVyKSB7XHJcblx0cmV0dXJuIHIgKiAxODAgLyBNYXRoLlBJO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVnVG9SYWQoZDogbnVtYmVyKSB7XHJcblx0cmV0dXJuIGQgKiBNYXRoLlBJIC8gMTgwO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/math/vector.ts\n");

/***/ }),

/***/ "./src/mesh/line-array.ts":
/*!********************************!*\
  !*** ./src/mesh/line-array.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LineArray\": () => /* binding */ LineArray,\n/* harmony export */   \"getDefaultIndices\": () => /* binding */ getDefaultIndices\n/* harmony export */ });\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _math_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/const */ \"./src/math/const.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n// name:    line-render-data.ts\r\n// author:  Jos Feenstra\r\n// purpose: represents an object which can be fed directly to a linerenderer.\r\n//          use it to not continuously have to calculate these aspects if the underlying object is unchanged.\r\n\r\n\r\n\r\n// represents a collection of multiple lines. These could form 1 polyline, but this is not a requirement\r\nclass LineArray {\r\n    constructor(verts, ids) {\r\n        this.verts = verts;\r\n        if (ids == undefined) {\r\n            this.ids = getDefaultIndices(verts.count());\r\n        }\r\n        else {\r\n            this.ids = ids;\r\n        }\r\n    }\r\n    // this assumes even vectices are 'from' points, and odd vertices are 'to' points\r\n    static fromLines(verts) {\r\n        let data = (0,_data_vector_array__WEBPACK_IMPORTED_MODULE_0__.getGeneralFloatMatrix)(verts);\r\n        return new LineArray(data);\r\n    }\r\n    // get all lines from a mesh\r\n    static fromMesh(mesh, uv = false) {\r\n        // 3 edges per face, 2 indices per edge\r\n        let count = mesh.links.count() * 6;\r\n        let data = new Uint16Array(count);\r\n        for (let i = 0; i < mesh.links.count(); i++) {\r\n            let iData = i * 6;\r\n            data[iData] = mesh.links.get(i, 0);\r\n            data[iData + 1] = mesh.links.get(i, 1);\r\n            data[iData + 2] = mesh.links.get(i, 1);\r\n            data[iData + 3] = mesh.links.get(i, 2);\r\n            data[iData + 4] = mesh.links.get(i, 2);\r\n            data[iData + 5] = mesh.links.get(i, 0);\r\n        }\r\n        if (uv) {\r\n            return new LineArray(mesh.uvs, data);\r\n        }\r\n        else {\r\n            return new LineArray(mesh.verts, data);\r\n        }\r\n    }\r\n    // create lines as a grid centered at a plane \r\n    static fromGrid(plane, count, dis) {\r\n        let halfTotalSize = ((count - 1) * dis) / 2;\r\n        // 2 vectors per line, 2 lines per count\r\n        // plus 5 lines, for ihat and jhat icons \r\n        let lines = new _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array(count * 4);\r\n        // x lines\r\n        for (let i = 0; i < count; i++) {\r\n            let t = -halfTotalSize + dis * i;\r\n            lines.setVector(i * 2, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(t, -halfTotalSize, 0));\r\n            lines.setVector(i * 2 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(t, halfTotalSize, 0));\r\n        }\r\n        // y lines \r\n        for (let i = 0; i < count; i++) {\r\n            let t = -halfTotalSize + dis * i;\r\n            lines.setVector(2 * count + i * 2, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(-halfTotalSize, -halfTotalSize + dis * i, 0));\r\n            lines.setVector(2 * count + i * 2 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(halfTotalSize, -halfTotalSize + dis * i, 0));\r\n        }\r\n        // finally, transform everything to worldspace, and create the linerenderdata object\r\n        lines.forEach((v) => plane.pushToWorld(v));\r\n        return new LineArray(lines);\r\n    }\r\n    // get all lines from a plane\r\n    static fromPlane(plane) {\r\n        let count = _math_const__WEBPACK_IMPORTED_MODULE_1__.Const.PLANE_RENDER_LINECOUNT;\r\n        let dis = _math_const__WEBPACK_IMPORTED_MODULE_1__.Const.PLANE_RENDER_LINEDISTANCE;\r\n        let disSmall = dis / 10;\r\n        let halfTotalSize = ((count - 1) * dis) / 2;\r\n        // 2 vectors per line, 2 lines per count\r\n        // plus 5 lines, for ihat and jhat icons \r\n        let lines = new _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array(count * 4 + 5 * 2);\r\n        // x lines\r\n        for (let i = 0; i < count; i++) {\r\n            let t = -halfTotalSize + dis * i;\r\n            lines.setVector(i * 2, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(t, -halfTotalSize, 0));\r\n            lines.setVector(i * 2 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(t, halfTotalSize, 0));\r\n        }\r\n        // y lines \r\n        for (let i = 0; i < count; i++) {\r\n            let t = -halfTotalSize + dis * i;\r\n            lines.setVector(2 * count + i * 2, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(-halfTotalSize, -halfTotalSize + dis * i, 0));\r\n            lines.setVector(2 * count + i * 2 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(halfTotalSize, -halfTotalSize + dis * i, 0));\r\n        }\r\n        // icon I  to show ihat\r\n        let iconLine1 = lines.count() - 10;\r\n        lines.setVector(iconLine1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(halfTotalSize + disSmall, -disSmall, 0));\r\n        lines.setVector(iconLine1 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(halfTotalSize + disSmall * 4, disSmall, 0));\r\n        let iconLine2 = lines.count() - 8;\r\n        lines.setVector(iconLine2, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(halfTotalSize + disSmall, disSmall, 0));\r\n        lines.setVector(iconLine2 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(halfTotalSize + disSmall * 4, -disSmall, 0));\r\n        // icon II to show jhat\r\n        let iconLine3 = lines.count() - 6;\r\n        lines.setVector(iconLine3, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, halfTotalSize + disSmall * 2.5, 0));\r\n        lines.setVector(iconLine3 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(disSmall, halfTotalSize + disSmall * 4, 0));\r\n        let iconLine4 = lines.count() - 4;\r\n        lines.setVector(iconLine4, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(disSmall, halfTotalSize + disSmall, 0));\r\n        lines.setVector(iconLine4 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(-disSmall, halfTotalSize + disSmall * 4, 0));\r\n        // icon III to show khat / normal direction\r\n        let iconLine5 = lines.count() - 2;\r\n        lines.setVector(iconLine5, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 0));\r\n        lines.setVector(iconLine5 + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, dis));\r\n        // finally, transform everything to worldspace, and create the linerenderdata object\r\n        lines.forEach((v) => plane.pushToWorld(v));\r\n        return new LineArray(lines);\r\n    }\r\n    // get all lines representing a circle in 2d. use an optional matrix to \r\n    static fromCircle(c) {\r\n        let count = _math_const__WEBPACK_IMPORTED_MODULE_1__.Const.CIRCLE_SEGMENTS;\r\n        // let count = 12;\r\n        let verts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array(count);\r\n        // x lines\r\n        for (let i = 0; i < count; i++) {\r\n            // radial fraction of a circle\r\n            let t = (i / count) * (Math.PI * 2);\r\n            verts.setVector(i, c.plane.pushToWorld(new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(Math.cos(t) * c.radius, Math.sin(t) * c.radius, 0)));\r\n        }\r\n        return new LineArray(verts, getPairIndices(count));\r\n    }\r\n    // turn a spline into a polyline, and render it\r\n    static fromSpline() {\r\n        throw \"todo!\";\r\n    }\r\n    static fromCube(cube) {\r\n        let verts = _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array.fromList(cube.getCorners());\r\n        return new LineArray(verts);\r\n    }\r\n    static fromJoin(lines) {\r\n        // join meshes, dont try to look for duplicate vertices\r\n        // TODO : make this the trouble of Matrices and Arrays\r\n        let idsCount = 0;\r\n        let vertCount = 0;\r\n        for (let line of lines) {\r\n            idsCount += line.ids.length;\r\n            vertCount += line.verts.count();\r\n        }\r\n        let verts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array(vertCount);\r\n        let ids = new Uint16Array(idsCount);\r\n        let accVerts = 0;\r\n        let accFaces = 0;\r\n        for (let lineset of lines) {\r\n            for (let i = 0; i < lineset.verts.count(); i++) {\r\n                verts.setRow(accVerts + i, lineset.verts.getRow(i));\r\n            }\r\n            for (let i = 0; i < lineset.ids.length; i++) {\r\n                ids[accFaces + i] = lineset.ids[i] + accVerts;\r\n            }\r\n            accVerts += lineset.verts.count();\r\n            accFaces += lineset.ids.length;\r\n        }\r\n        return new LineArray(verts, ids);\r\n    }\r\n}\r\n// just get an int sequence from 0 to length. \r\nfunction getDefaultIndices(count) {\r\n    let data = new Uint16Array(count);\r\n    for (let i = 0; i < count; i++) {\r\n        data[i] = i;\r\n    }\r\n    return data;\r\n}\r\nfunction getPairIndices(count) {\r\n    // given count of 3 => return 0,1 | 1,2 | 2,0\r\n    let length = count * 2;\r\n    let data = new Uint16Array(length);\r\n    for (let i = 0; i < count; i++) {\r\n        data[i * 2] = i;\r\n        data[i * 2 + 1] = (i + 1) % count;\r\n    }\r\n    return data;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21lc2gvbGluZS1hcnJheS50cz9mNmY1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsK0JBQStCO0FBQy9CLHdCQUF3QjtBQUN4Qiw2RUFBNkU7QUFDN0UsNkdBQTZHO0FBR3JCO0FBTWxEO0FBRVk7QUFFbEQsd0dBQXdHO0FBQ2pHLE1BQU0sU0FBUztJQUtsQixZQUFvQixLQUFrQixFQUFFLEdBQWlCO1FBQ3JELElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksR0FBRyxJQUFJLFNBQVMsRUFBRTtZQUNsQixJQUFJLENBQUMsR0FBRyxHQUFHLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1NBQy9DO2FBQU07WUFDSCxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztTQUNsQjtJQUNMLENBQUM7SUFFRCxpRkFBaUY7SUFDakYsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUEwRDtRQUN2RSxJQUFJLElBQUksR0FBRyx5RUFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4QyxPQUFPLElBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCw0QkFBNEI7SUFDNUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFnQixFQUFFLEVBQUUsR0FBQyxLQUFLO1FBRXRDLHVDQUF1QztRQUN2QyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNuQyxJQUFJLElBQUksR0FBRyxJQUFJLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUUxQyxJQUFJLEtBQUssR0FBRyxDQUFDLEdB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b250ZW50IjpbIi8vIG5hbWU6ICAgIGxpbmUtcmVuZGVyLWRhdGEudHNcclxuLy8gYXV0aG9yOiAgSm9zIEZlZW5zdHJhXHJcbi8vIHB1cnBvc2U6IHJlcHJlc2VudHMgYW4gb2JqZWN0IHdoaWNoIGNhbiBiZSBmZWQgZGlyZWN0bHkgdG8gYSBsaW5lcmVuZGVyZXIuXHJcbi8vICAgICAgICAgIHVzZSBpdCB0byBub3QgY29udGludW91c2x5IGhhdmUgdG8gY2FsY3VsYXRlIHRoZXNlIGFzcGVjdHMgaWYgdGhlIHVuZGVybHlpbmcgb2JqZWN0IGlzIHVuY2hhbmdlZC5cclxuXHJcbmltcG9ydCB7IEZsb2F0TWF0cml4IH0gZnJvbSBcIi4uL2RhdGEvZmxvYXQtbWF0cml4XCI7XHJcbmltcG9ydCB7IGdldEdlbmVyYWxGbG9hdE1hdHJpeCwgVmVjdG9yMkFycmF5LCBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIlxyXG5pbXBvcnQgeyBDaXJjbGUyIH0gZnJvbSBcIi4uL2dlby9jaXJjbGUyXCI7XHJcbmltcG9ydCB7IENpcmNsZTMgfSBmcm9tIFwiLi4vZ2VvL2NpcmNsZTNcIjtcclxuaW1wb3J0IHsgQ3ViZSB9IGZyb20gXCIuLi9nZW8vY3ViZVwiO1xyXG5pbXBvcnQgeyBSZW5kZXJNZXNoIH0gZnJvbSBcIi4vcmVuZGVyLW1lc2hcIjtcclxuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vZ2VvL3BsYW5lXCI7XHJcbmltcG9ydCB7IENvbnN0IH0gZnJvbSBcIi4uL21hdGgvY29uc3RcIjtcclxuaW1wb3J0IHsgTWF0cml4NCB9IGZyb20gXCIuLi9tYXRoL21hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcblxyXG4vLyByZXByZXNlbnRzIGEgY29sbGVjdGlvbiBvZiBtdWx0aXBsZSBsaW5lcy4gVGhlc2UgY291bGQgZm9ybSAxIHBvbHlsaW5lLCBidXQgdGhpcyBpcyBub3QgYSByZXF1aXJlbWVudFxyXG5leHBvcnQgY2xhc3MgTGluZUFycmF5IHtcclxuICAgIFxyXG4gICAgdmVydHM6IEZsb2F0TWF0cml4O1xyXG4gICAgaWRzOiBVaW50MTZBcnJheTtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHZlcnRzOiBGbG9hdE1hdHJpeCwgaWRzPzogVWludDE2QXJyYXkpIHtcclxuICAgICAgICB0aGlzLnZlcnRzID0gdmVydHM7XHJcbiAgICAgICAgaWYgKGlkcyA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pZHMgPSBnZXREZWZhdWx0SW5kaWNlcyh2ZXJ0cy5jb3VudCgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmlkcyA9IGlkcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcyBhc3N1bWVzIGV2ZW4gdmVjdGljZXMgYXJlICdmcm9tJyBwb2ludHMsIGFuZCBvZGQgdmVydGljZXMgYXJlICd0bycgcG9pbnRzXHJcbiAgICBzdGF0aWMgZnJvbUxpbmVzKHZlcnRzOiBWZWN0b3IyW10gfCBWZWN0b3IzW10gfCBWZWN0b3IyQXJyYXkgfCBWZWN0b3IzQXJyYXkpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IGdldEdlbmVyYWxGbG9hdE1hdHJpeCh2ZXJ0cyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lQXJyYXkoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IGFsbCBsaW5lcyBmcm9tIGEgbWVzaFxyXG4gICAgc3RhdGljIGZyb21NZXNoKG1lc2g6IFJlbmRlck1lc2gsIHV2PWZhbHNlKSA6IExpbmVBcnJheSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMyBlZGdlcyBwZXIgZmFjZSwgMiBpbmRpY2VzIHBlciBlZGdlXHJcbiAgICAgICAgbGV0IGNvdW50ID0gbWVzaC5saW5rcy5jb3VudCgpICogNjtcclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50MTZBcnJheShjb3VudCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgbWVzaC5saW5rcy5jb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBpRGF0YSA9IGkgKiA2O1xyXG4gICAgICAgICAgICBkYXRhW2lEYXRhXSAgID0gbWVzaC5saW5rcy5nZXQoaSwgMCk7XHJcbiAgICAgICAgICAgIGRhdGFbaURhdGErMV0gPSBtZXNoLmxpbmtzLmdldChpLCAxKTtcclxuICAgICAgICAgICAgZGF0YVtpRGF0YSsyXSA9IG1lc2gubGlua3MuZ2V0KGksIDEpO1xyXG4gICAgICAgICAgICBkYXRhW2lEYXRhKzNdID0gbWVzaC5saW5rcy5nZXQoaSwgMik7XHJcbiAgICAgICAgICAgIGRhdGFbaURhdGErNF0gPSBtZXNoLmxpbmtzLmdldChpLCAyKTtcclxuICAgICAgICAgICAgZGF0YVtpRGF0YSs1XSA9IG1lc2gubGlua3MuZ2V0KGksIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaW5lQXJyYXkobWVzaC51dnMsIGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGluZUFycmF5KG1lc2gudmVydHMsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gY3JlYXRlIGxpbmVzIGFzIGEgZ3JpZCBjZW50ZXJlZCBhdCBhIHBsYW5lIFxyXG4gICAgc3RhdGljIGZyb21HcmlkKHBsYW5lOiBQbGFuZSwgY291bnQ6IG51bWJlciwgZGlzOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgaGFsZlRvdGFsU2l6ZSA9ICgoY291bnQtMSkgKiBkaXMpIC8gMjtcclxuXHJcbiAgICAgICAgLy8gMiB2ZWN0b3JzIHBlciBsaW5lLCAyIGxpbmVzIHBlciBjb3VudFxyXG4gICAgICAgIC8vIHBsdXMgNSBsaW5lcywgZm9yIGloYXQgYW5kIGpoYXQgaWNvbnMgXHJcbiAgICAgICAgbGV0IGxpbmVzID0gbmV3IFZlY3RvcjNBcnJheShjb3VudCAqIDQpO1xyXG5cclxuICAgICAgICAvLyB4IGxpbmVzXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0ID0gLWhhbGZUb3RhbFNpemUgKyBkaXMgKiBpO1xyXG4gICAgICAgICAgICBsaW5lcy5zZXRWZWN0b3IoaSoyLCAgICAgbmV3IFZlY3RvcjModCwgLWhhbGZUb3RhbFNpemUsIDApKTtcclxuICAgICAgICAgICAgbGluZXMuc2V0VmVjdG9yKGkqMiArIDEsIG5ldyBWZWN0b3IzKHQsICBoYWxmVG90YWxTaXplLCAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB5IGxpbmVzIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdCA9IC1oYWxmVG90YWxTaXplICsgZGlzICogaTtcclxuICAgICAgICAgICAgbGluZXMuc2V0VmVjdG9yKDIqY291bnQgKyBpKjIsICAgICBuZXcgVmVjdG9yMygtaGFsZlRvdGFsU2l6ZSwgLWhhbGZUb3RhbFNpemUgKyBkaXMgKiBpLCAwKSk7XHJcbiAgICAgICAgICAgIGxpbmVzLnNldFZlY3RvcigyKmNvdW50ICsgaSoyICsgMSwgbmV3IFZlY3RvcjMoIGhhbGZUb3RhbFNpemUsIC1oYWxmVG90YWxTaXplICsgZGlzICogaSAsMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmluYWxseSwgdHJhbnNmb3JtIGV2ZXJ5dGhpbmcgdG8gd29ybGRzcGFjZSwgYW5kIGNyZWF0ZSB0aGUgbGluZXJlbmRlcmRhdGEgb2JqZWN0XHJcbiAgICAgICAgbGluZXMuZm9yRWFjaCgodikgPT4gcGxhbmUucHVzaFRvV29ybGQodikpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTGluZUFycmF5KGxpbmVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXQgYWxsIGxpbmVzIGZyb20gYSBwbGFuZVxyXG4gICAgc3RhdGljIGZyb21QbGFuZShwbGFuZTogUGxhbmUpIDogTGluZUFycmF5IHtcclxuXHJcbiAgICAgICAgbGV0IGNvdW50ID0gQ29uc3QuUExBTkVfUkVOREVSX0xJTkVDT1VOVDtcclxuICAgICAgICBsZXQgZGlzID0gQ29uc3QuUExBTkVfUkVOREVSX0xJTkVESVNUQU5DRTtcclxuICAgICAgICBsZXQgZGlzU21hbGwgPSBkaXMgLyAxMDtcclxuICAgICAgICBsZXQgaGFsZlRvdGFsU2l6ZSA9ICgoY291bnQtMSkgKiBkaXMpIC8gMjtcclxuXHJcbiAgICAgICAgLy8gMiB2ZWN0b3JzIHBlciBsaW5lLCAyIGxpbmVzIHBlciBjb3VudFxyXG4gICAgICAgIC8vIHBsdXMgNSBsaW5lcywgZm9yIGloYXQgYW5kIGpoYXQgaWNvbnMgXHJcbiAgICAgICAgbGV0IGxpbmVzID0gbmV3IFZlY3RvcjNBcnJheShjb3VudCAqIDQgKyA1ICogMik7XHJcblxyXG4gICAgICAgIC8vIHggbGluZXNcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHQgPSAtaGFsZlRvdGFsU2l6ZSArIGRpcyAqIGk7XHJcbiAgICAgICAgICAgIGxpbmVzLnNldFZlY3RvcihpKjIsICAgICBuZXcgVmVjdG9yMyh0LCAtaGFsZlRvdGFsU2l6ZSwgMCkpO1xyXG4gICAgICAgICAgICBsaW5lcy5zZXRWZWN0b3IoaSoyICsgMSwgbmV3IFZlY3RvcjModCwgIGhhbGZUb3RhbFNpemUsIDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHkgbGluZXMgXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0ID0gLWhhbGZUb3RhbFNpemUgKyBkaXMgKiBpO1xyXG4gICAgICAgICAgICBsaW5lcy5zZXRWZWN0b3IoMipjb3VudCArIGkqMiwgICAgIG5ldyBWZWN0b3IzKC1oYWxmVG90YWxTaXplLCAtaGFsZlRvdGFsU2l6ZSArIGRpcyAqIGksIDApKTtcclxuICAgICAgICAgICAgbGluZXMuc2V0VmVjdG9yKDIqY291bnQgKyBpKjIgKyAxLCBuZXcgVmVjdG9yMyggaGFsZlRvdGFsU2l6ZSwgLWhhbGZUb3RhbFNpemUgKyBkaXMgKiBpICwwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpY29uIEkgIHRvIHNob3cgaWhhdFxyXG4gICAgICAgIGxldCBpY29uTGluZTEgPSBsaW5lcy5jb3VudCgpIC0gMTA7XHJcbiAgICAgICAgbGluZXMuc2V0VmVjdG9yKGljb25MaW5lMSwgbmV3IFZlY3RvcjMoaGFsZlRvdGFsU2l6ZStkaXNTbWFsbCwtZGlzU21hbGwsIDApKTtcclxuICAgICAgICBsaW5lcy5zZXRWZWN0b3IoaWNvbkxpbmUxKzEsIG5ldyBWZWN0b3IzKGhhbGZUb3RhbFNpemUrZGlzU21hbGwqNCwgZGlzU21hbGwsIDApKTtcclxuXHJcbiAgICAgICAgbGV0IGljb25MaW5lMiA9IGxpbmVzLmNvdW50KCkgLSA4O1xyXG4gICAgICAgIGxpbmVzLnNldFZlY3RvcihpY29uTGluZTIsIG5ldyBWZWN0b3IzKGhhbGZUb3RhbFNpemUrZGlzU21hbGwsIGRpc1NtYWxsLCAwKSk7XHJcbiAgICAgICAgbGluZXMuc2V0VmVjdG9yKGljb25MaW5lMisxLCBuZXcgVmVjdG9yMyhoYWxmVG90YWxTaXplK2Rpc1NtYWxsKjQsIC1kaXNTbWFsbCwgMCkpO1xyXG5cclxuICAgICAgICAvLyBpY29uIElJIHRvIHNob3cgamhhdFxyXG4gICAgICAgIGxldCBpY29uTGluZTMgPSBsaW5lcy5jb3VudCgpIC0gNjtcclxuICAgICAgICBsaW5lcy5zZXRWZWN0b3IoaWNvbkxpbmUzLCBuZXcgVmVjdG9yMygwLCBoYWxmVG90YWxTaXplK2Rpc1NtYWxsKjIuNSwgMCkpO1xyXG4gICAgICAgIGxpbmVzLnNldFZlY3RvcihpY29uTGluZTMrMSwgbmV3IFZlY3RvcjMoZGlzU21hbGwsIGhhbGZUb3RhbFNpemUrZGlzU21hbGwqNCwgMCkpO1xyXG5cclxuICAgICAgICBsZXQgaWNvbkxpbmU0ID0gbGluZXMuY291bnQoKSAtIDQ7XHJcbiAgICAgICAgbGluZXMuc2V0VmVjdG9yKGljb25MaW5lNCwgbmV3IFZlY3RvcjMoZGlzU21hbGwsIGhhbGZUb3RhbFNpemUrZGlzU21hbGwsIDApKTtcclxuICAgICAgICBsaW5lcy5zZXRWZWN0b3IoaWNvbkxpbmU0KzEsIG5ldyBWZWN0b3IzKC1kaXNTbWFsbCwgaGFsZlRvdGFsU2l6ZStkaXNTbWFsbCo0LCAwKSk7XHJcblxyXG4gICAgICAgIC8vIGljb24gSUlJIHRvIHNob3cga2hhdCAvIG5vcm1hbCBkaXJlY3Rpb25cclxuICAgICAgICBsZXQgaWNvbkxpbmU1ID0gbGluZXMuY291bnQoKSAtIDI7XHJcbiAgICAgICAgbGluZXMuc2V0VmVjdG9yKGljb25MaW5lNSwgbmV3IFZlY3RvcjMoMCwgMCwgMCkpO1xyXG4gICAgICAgIGxpbmVzLnNldFZlY3RvcihpY29uTGluZTUrMSwgbmV3IFZlY3RvcjMoMCwgMCwgZGlzKSk7XHJcblxyXG4gICAgICAgIC8vIGZpbmFsbHksIHRyYW5zZm9ybSBldmVyeXRoaW5nIHRvIHdvcmxkc3BhY2UsIGFuZCBjcmVhdGUgdGhlIGxpbmVyZW5kZXJkYXRhIG9iamVjdFxyXG4gICAgICAgIGxpbmVzLmZvckVhY2goKHYpID0+IHBsYW5lLnB1c2hUb1dvcmxkKHYpKTtcclxuICAgICAgICByZXR1cm4gbmV3IExpbmVBcnJheShsaW5lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IGFsbCBsaW5lcyByZXByZXNlbnRpbmcgYSBjaXJjbGUgaW4gMmQuIHVzZSBhbiBvcHRpb25hbCBtYXRyaXggdG8gXHJcbiAgICBzdGF0aWMgZnJvbUNpcmNsZShjOiBDaXJjbGUzKSA6IExpbmVBcnJheSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGNvdW50ID0gQ29uc3QuQ0lSQ0xFX1NFR01FTlRTO1xyXG4gICAgICAgIC8vIGxldCBjb3VudCA9IDEyO1xyXG4gICAgICAgIGxldCB2ZXJ0cyA9IG5ldyBWZWN0b3IzQXJyYXkoY291bnQpO1xyXG5cclxuICAgICAgICAvLyB4IGxpbmVzXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCBjb3VudDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAvLyByYWRpYWwgZnJhY3Rpb24gb2YgYSBjaXJjbGVcclxuICAgICAgICAgICAgbGV0IHQgPSAoaSAvIGNvdW50KSAqIChNYXRoLlBJKjIpO1xyXG4gICAgICAgICAgICB2ZXJ0cy5zZXRWZWN0b3IoaSwgXHJcbiAgICAgICAgICAgICAgICBjLnBsYW5lLnB1c2hUb1dvcmxkKG5ldyBWZWN0b3IzKE1hdGguY29zKHQpICpjLnJhZGl1cywgTWF0aC5zaW4odCkgKiBjLnJhZGl1cywgMCkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgTGluZUFycmF5KHZlcnRzLCBnZXRQYWlySW5kaWNlcyhjb3VudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHR1cm4gYSBzcGxpbmUgaW50byBhIHBvbHlsaW5lLCBhbmQgcmVuZGVyIGl0XHJcbiAgICBzdGF0aWMgZnJvbVNwbGluZSgpIHtcclxuICAgICAgICB0aHJvdyBcInRvZG8hXCI7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21DdWJlKGN1YmU6IEN1YmUpIDogTGluZUFycmF5IHtcclxuXHJcbiAgICAgICAgbGV0IHZlcnRzID0gVmVjdG9yM0FycmF5LmZyb21MaXN0KGN1YmUuZ2V0Q29ybmVycygpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lQXJyYXkodmVydHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tSm9pbihsaW5lczogTGluZUFycmF5W10pIDogTGluZUFycmF5IHtcclxuXHJcbiAgICAgICAgLy8gam9pbiBtZXNoZXMsIGRvbnQgdHJ5IHRvIGxvb2sgZm9yIGR1cGxpY2F0ZSB2ZXJ0aWNlc1xyXG4gICAgICAgIC8vIFRPRE8gOiBtYWtlIHRoaXMgdGhlIHRyb3VibGUgb2YgTWF0cmljZXMgYW5kIEFycmF5c1xyXG4gICAgICAgIGxldCBpZHNDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IHZlcnRDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICBpZHNDb3VudCArPSBsaW5lLmlkcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZlcnRDb3VudCArPSBsaW5lLnZlcnRzLmNvdW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmVydHMgPSBuZXcgVmVjdG9yM0FycmF5KHZlcnRDb3VudCk7XHJcbiAgICAgICAgbGV0IGlkcyA9IG5ldyBVaW50MTZBcnJheShpZHNDb3VudCk7XHJcblxyXG4gICAgICAgIGxldCBhY2NWZXJ0cyA9IDA7XHJcbiAgICAgICAgbGV0IGFjY0ZhY2VzID0gMDtcclxuICAgICAgICBmb3IgKGxldCBsaW5lc2V0IG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGxpbmVzZXQudmVydHMuY291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0cy5zZXRSb3coYWNjVmVydHMgKyBpLCBsaW5lc2V0LnZlcnRzLmdldFJvdyhpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgbGluZXNldC5pZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlkc1thY2NGYWNlcytpXSA9IGxpbmVzZXQuaWRzW2ldICsgYWNjVmVydHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWNjVmVydHMgKz0gbGluZXNldC52ZXJ0cy5jb3VudCgpO1xyXG4gICAgICAgICAgICBhY2NGYWNlcyArPSBsaW5lc2V0Lmlkcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IExpbmVBcnJheSh2ZXJ0cywgaWRzKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8ganVzdCBnZXQgYW4gaW50IHNlcXVlbmNlIGZyb20gMCB0byBsZW5ndGguIFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEluZGljZXMoY291bnQ6IG51bWJlcikgOiBVaW50MTZBcnJheSB7XHJcbiAgICBcclxuICAgIGxldCBkYXRhID0gbmV3IFVpbnQxNkFycmF5KGNvdW50KTtcclxuICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgIGRhdGFbaV0gPSBpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQYWlySW5kaWNlcyhjb3VudDogbnVtYmVyKSA6IFVpbnQxNkFycmF5IHtcclxuXHJcbiAgICAvLyBnaXZlbiBjb3VudCBvZiAzID0+IHJldHVybiAwLDEgfCAxLDIgfCAyLDBcclxuICAgIGxldCBsZW5ndGggPSBjb3VudCAqIDI7XHJcbiAgICBsZXQgZGF0YSA9IG5ldyBVaW50MTZBcnJheShsZW5ndGgpO1xyXG4gICAgZm9yKGxldCBpID0gMCA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgZGF0YVtpKjJdID0gaTtcclxuICAgICAgICBkYXRhW2kqMiArIDFdID0gKGkgKyAxKSAlIGNvdW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IFxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/mesh/line-array.ts\n");

/***/ }),

/***/ "./src/mesh/pure-mesh.ts":
/*!*******************************!*\
  !*** ./src/mesh/pure-mesh.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PureMesh\": () => /* binding */ PureMesh\n/* harmony export */ });\n/* harmony import */ var _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/int-matrix */ \"./src/data/int-matrix.ts\");\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _render_mesh__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./render-mesh */ \"./src/mesh/render-mesh.ts\");\n// Mesh.Ts\r\n// Purpose: obj class for dealing with that specific filetype, and meshes in general\r\n// Author: Jos Feenstra\r\n// import { createUnsignedBytesMatrixTexture } from \"@tensorflow/tfjs-backend-webgl/dist/gpgpu_util\";\r\n// import { browserLocalStorage } from \"@tensorflow/tfjs-core/dist/io/local_storage\";\r\n\r\n\r\n\r\n\r\n// TODO make distinctions between\r\n// - DisplayMesh (PureMesh + uvs, texture, normals, material, etc...)\r\n// a very pure idea of a mesh : Vertices + links between vertices. \r\n// Could be anything with these properties.\r\nclass PureMesh {\r\n    constructor(verts, links) {\r\n        this.verts = verts;\r\n        this.links = links;\r\n    }\r\n    static fromLists(verts, faces) {\r\n        return new PureMesh(_data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array.fromList(verts), _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__.IntMatrix.fromList(faces, 3));\r\n    }\r\n    static fromEmpty() {\r\n        return new PureMesh(new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(0), new _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__.IntMatrix(0, 0));\r\n    }\r\n    static fromJoin(meshes) {\r\n        // join meshes, dont try to look for duplicate vertices\r\n        // TODO : make this the trouble of Matrices and Arrays\r\n        let vertCount = 0;\r\n        let faceCount = 0;\r\n        for (let mesh of meshes) {\r\n            vertCount += mesh.verts.count();\r\n            faceCount += mesh.links.count();\r\n        }\r\n        let verts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(vertCount);\r\n        let links = new _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__.IntMatrix(faceCount, 3);\r\n        let accVerts = 0;\r\n        let accFaces = 0;\r\n        for (let mesh of meshes) {\r\n            for (let i = 0; i < mesh.verts.count(); i++) {\r\n                verts.setVector(accVerts + i, mesh.verts.getVector(i));\r\n            }\r\n            for (let i = 0; i < mesh.links.count(); i++) {\r\n                let face = mesh.links.getRow(i);\r\n                for (let j = 0; j < face.length; j++) {\r\n                    face[j] = face[j] + accVerts;\r\n                }\r\n                links.setRow(accFaces + i, face);\r\n            }\r\n            accVerts += mesh.verts.count();\r\n            accFaces += mesh.links.count();\r\n        }\r\n        return new PureMesh(verts, links);\r\n    }\r\n    static fromRect(rect) {\r\n        let verts = rect.getCorners();\r\n        // we cant handle quads yet \r\n        let faces = [];\r\n        faces.push(...quadToTri(cubeFaces[0]));\r\n        let mesh = new _render_mesh__WEBPACK_IMPORTED_MODULE_3__.RenderMesh(4, 0, 0, 2);\r\n        mesh.verts.fillFromList(verts);\r\n        mesh.links.setData(faces);\r\n        // console.log(mesh.verts);\r\n        // console.log(mesh.links);\r\n        mesh.setUvs(new Float32Array([\r\n            0.0, 0.0,\r\n            0.0, 1.0,\r\n            1.0, 0.0,\r\n            1.0, 1.0\r\n        ]));\r\n        return mesh;\r\n    }\r\n    static fromCube(cube) {\r\n        let verts = cube.getCorners();\r\n        let faces = [];\r\n        for (let face of cubeFaces) {\r\n            faces.push(...quadToTri(face));\r\n        }\r\n        return this.fromLists(verts, faces);\r\n    }\r\n    static fromSphere(center, radius, numRings, numPerRing) {\r\n        // verts\r\n        let vertCount = numRings * numPerRing + 2;\r\n        let verts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(vertCount);\r\n        let setVert = function (i, vector) {\r\n            verts.setVector(i, vector.scale(radius).add(center));\r\n        };\r\n        setVert(0, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 1));\r\n        for (let ring = 0; ring < numRings; ring++) {\r\n            for (let perRing = 0; perRing < numPerRing; perRing++) {\r\n                let alpha = Math.PI * (ring + 1) / (numRings + 1);\r\n                let beta = 2 * Math.PI * perRing / numPerRing;\r\n                let x = Math.sin(alpha)\r\n                    * Math.cos(beta);\r\n                let y = Math.sin(alpha)\r\n                    * Math.sin(beta);\r\n                let z = Math.cos(alpha);\r\n                let index = 1 + ring * numPerRing + perRing;\r\n                setVert(index, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(x, y, z));\r\n            }\r\n        }\r\n        setVert(vertCount - 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, -1));\r\n        // faces \r\n        let faceCount = numPerRing * (numRings) * 2;\r\n        let links = new _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__.IntMatrix(faceCount, 3);\r\n        links.fill(-1);\r\n        let setFace = function (i, row) {\r\n            links.setRow(i, row);\r\n        };\r\n        // faces top\r\n        for (let i = 0; i < numPerRing; i++) {\r\n            setFace(i, [\r\n                0,\r\n                (i + 1) % numPerRing + 1,\r\n                i + 1,\r\n            ]);\r\n        }\r\n        // faces middle\r\n        // we are at this cursor\r\n        // console.log(\"faces\", faceCount);\r\n        for (let ring = 0; ring < numRings - 1; ring++) {\r\n            let vertCursor = numPerRing * ring + 1;\r\n            let vertCursorBelow = vertCursor + numPerRing;\r\n            for (let perRing = 0; perRing < numPerRing; perRing++) {\r\n                let a = vertCursor + perRing;\r\n                let b = vertCursor + ((perRing + 1) % numPerRing);\r\n                let c = vertCursorBelow + perRing;\r\n                let d = vertCursorBelow + ((perRing + 1) % numPerRing);\r\n                let iFace = numPerRing + (numPerRing * ring * 2) + perRing * 2;\r\n                // console.log(iFace);\r\n                setFace(iFace, [a, b, c]);\r\n                setFace(iFace + 1, [c, b, d]);\r\n            }\r\n        }\r\n        // faces bottom \r\n        for (let i = 0; i < numPerRing; i++) {\r\n            let iNext = ((i + 1) % numPerRing);\r\n            let last = vertCount - 1;\r\n            let iFace = faceCount - numPerRing + i;\r\n            let zero = vertCount - numPerRing - 1;\r\n            let vertI = zero + i;\r\n            let vertINext = zero + iNext;\r\n            // console.log(iFace);\r\n            // console.log(\"face\", last, vertINext, vertI);\r\n            setFace(iFace, [\r\n                last,\r\n                vertI,\r\n                vertINext,\r\n            ]);\r\n        }\r\n        return new PureMesh(verts, links);\r\n    }\r\n    static fromCone(center, radius, height, numPerRing) {\r\n        let numVerts = numPerRing + 2;\r\n        let numFaces = numPerRing * 2;\r\n        let verts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(numVerts);\r\n        let setVert = function (i, vector) {\r\n            verts.setVector(i, vector.add(center));\r\n        };\r\n        let links = new _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__.IntMatrix(numFaces, 3);\r\n        links.fill(-1);\r\n        let setFace = function (i, row) {\r\n            links.setRow(i, row);\r\n        };\r\n        // set verts\r\n        setVert(0, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 0));\r\n        for (let i = 0; i < numPerRing; i++) {\r\n            setVert(i + 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(Math.cos(Math.PI * 2 * i / numPerRing), Math.sin(Math.PI * 2 * i / numPerRing), 0).scale(radius));\r\n        }\r\n        setVert(numVerts - 1, new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, height));\r\n        // set faces \r\n        for (let i = 0; i < numPerRing; i++) {\r\n            let a = 0;\r\n            let b = numVerts - 1;\r\n            let c = 1 + i;\r\n            let d = 1 + ((i + 1) % numPerRing);\r\n            setFace(i * 2, [a, c, d]);\r\n            setFace(i * 2 + 1, [c, b, d]);\r\n        }\r\n        return new PureMesh(verts, links);\r\n    }\r\n    // TODO fix this later\r\n    toDisplayMesh() {\r\n        let mesh = new _render_mesh__WEBPACK_IMPORTED_MODULE_3__.RenderMesh(this.verts.count(), 0, 0, this.links.count());\r\n        mesh.verts.data = this.verts.data;\r\n        mesh.links.data = this.links.data;\r\n        return mesh;\r\n    }\r\n}\r\n// ================ Help ==================\r\n// 0 ------- 1\r\n// | \\     / |\r\n// |  4---5  |\r\n// |  |   |  |\r\n// |  6---7  |\r\n// | /     \\ |\r\n// 2 ------- 3\r\nconst cubeFaces = [\r\n    [0, 1, 3, 2],\r\n    [4, 0, 2, 6],\r\n    [1, 0, 4, 5],\r\n    [1, 5, 7, 3],\r\n    [2, 3, 7, 6],\r\n    [5, 4, 6, 7],\r\n];\r\nfunction quadToTri(abcd) {\r\n    return [\r\n        abcd[0], abcd[1], abcd[2],\r\n        abcd[0], abcd[2], abcd[3]\r\n    ];\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21lc2gvcHVyZS1tZXNoLnRzPzhiZDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQSxVQUFVO0FBQ1Ysb0ZBQW9GO0FBQ3BGLHVCQUF1QjtBQUV2QixxR0FBcUc7QUFDckcscUZBQXFGO0FBQ3RDO0FBQ21CO0FBQ2hCO0FBR1A7QUFHM0MsaUNBQWlDO0FBQ2pDLHFFQUFxRTtBQUdyRSxtRUFBbUU7QUFDbkUsMkNBQTJDO0FBQ3BDLE1BQU0sUUFBUTtJQUtqQixZQUFZLEtBQW1CLEVBQUUsS0FBZ0I7UUFDN0MsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDdkIsQ0FBQztJQUdELE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBZ0IsRUFBRSxLQUFlO1FBQzlDLE9BQU8sSUFBSSxRQUFRLENBQ2YscUVBQXFCLENBQUMsS0FBSyxDQUFDLEVBQzVCLGdFQUFrQixDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FDL0IsQ0FBQztJQUNOLENBQUM7SUFHRCxNQUFNLENBQUMsU0FBUztRQUNaLE9BQU8sSUFBSSxRQUFRLENBQUMsSUFBSSw0REFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksdURBQVMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBR0QsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFrQjtRQUU5Qix1REFBdUQ7UUFDdkQsc0RBQXNEO1FBQ3RELElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7UUFFbEIsS0FBSyxJQUFJLElBQUksSUFBSSxNQUFNLEVBQUU7WUFDckIsU0FBUyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDaEMsU0FBUyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDbkM7UUFFRCxJQUFJLEtBQUssR0FBRyxJQUFJLDREQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEMsSUFBSSxLQUFLLEdBQUcsSUFBSSx1REFBUyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUV4QyxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDakIsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO1FBRWpCLEtBQUssSUFBSSxJQUFJLElBQUksTUFBTSxFQUFFO1lBQ3JCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMxQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMxRDtZQUNELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMxQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDaEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ25DLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDO2lCQUNoQztnQkFDRCxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDcEM7WUFDRCxRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUMvQixRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNsQztRQUVELE9BQU8sSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFHRCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQWdCO1FBRTVCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUU5Qiw0QkFBNEI7UUFDNUIsSUFBSSxLQUFLLEdBQWEsRUFBRTtRQUN4QixLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxJQUFJLEdBQUcsSUFBSSxvREFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTFCLDJCQUEyQjtRQUMzQiwyQkFBMkI7UUFFM0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLFlBQVksQ0FBQztZQUN6QixHQUFHLEVBQUcsR0FBRztZQUNULEdBQUcsRUFBRyxHQUFHO1lBQ1QsR0FBRyxFQUFHLEdBQUc7WUFDVCxHQUFHLEVBQUcsR0FBRztTQUFDLENBQUMsQ0FDVixDQUFDO1FBQ04sT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUdELE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBVTtRQUV0QixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDOUIsSUFBSSxLQUFLLEdBQWEsRUFBRTtRQUN4QixLQUFJLElBQUksSUFBSSxJQUFJLFNBQVMsRUFBRTtZQUN2QixLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDbEM7UUFFRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFHRCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQWUsRUFBRSxNQUFjLEVBQUUsUUFBZ0IsRUFBRSxVQUFrQjtRQUduRixRQUFRO1FBQ1IsSUFBSSxTQUFTLEdBQUcsUUFBUSxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUM7UUFDMUMsSUFBSSxLQUFLLEdBQUcsSUFBSSw0REFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3hDLElBQUksT0FBTyxHQUFHLFVBQVMsQ0FBUyxFQUFFLE1BQWU7WUFDN0MsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUN6RCxDQUFDO1FBRUQsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLEtBQUssSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxRQUFRLEVBQUUsSUFBSSxFQUFFLEVBQzFDO1lBQ0ksS0FBSyxJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUUsT0FBTyxHQUFHLFVBQVUsRUFBRSxPQUFPLEVBQUUsRUFDckQ7Z0JBQ0ksSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDOUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsT0FBTyxHQUFDLFVBQVUsQ0FBQztnQkFFNUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7c0JBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDdkIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7c0JBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDdkIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFFeEIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxVQUFVLEdBQUcsT0FBTyxDQUFDO2dCQUM1QyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDeEM7U0FDSjtRQUNELE9BQU8sQ0FBQyxTQUFTLEdBQUMsQ0FBQyxFQUFFLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUxQyxTQUFTO1FBQ1QsSUFBSSxTQUFTLEdBQUcsVUFBVSxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVDLElBQUksS0FBSyxHQUFHLElBQUksdURBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxPQUFPLEdBQUcsVUFBUyxDQUFTLEVBQUUsR0FBYTtZQUMzQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRUQsWUFBWTtRQUNaLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDakMsT0FBTyxDQUFDLENBQUMsRUFBRTtnQkFDUCxDQUFDO2dCQUNELENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsR0FBRyxDQUFDO2dCQUN0QixDQUFDLEdBQUMsQ0FBQzthQUNOLENBQUMsQ0FBQztTQUNOO1FBRUQsZUFBZTtRQUNkLHdCQUF3QjtRQUN6QixtQ0FBbUM7UUFFbkMsS0FBSyxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLFFBQVEsR0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUU7WUFFMUMsSUFBSSxVQUFVLEdBQUcsVUFBVSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUM7WUFDdkMsSUFBSSxlQUFlLEdBQUcsVUFBVSxHQUFHLFVBQVUsQ0FBQztZQUU5QyxLQUFLLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRSxPQUFPLEdBQUcsVUFBVSxFQUFFLE9BQU8sRUFBRSxFQUFFO2dCQUNuRCxJQUFJLENBQUMsR0FBRyxVQUFVLEdBQUcsT0FBTyxDQUFDO2dCQUM3QixJQUFJLENBQUMsR0FBRyxVQUFVLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQztnQkFFbEQsSUFBSSxDQUFDLEdBQUcsZUFBZSxHQUFHLE9BQU8sQ0FBQztnQkFDbEMsSUFBSSxDQUFDLEdBQUcsZUFBZSxHQUFHLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUM7Z0JBRXZELElBQUksS0FBSyxHQUFHLFVBQVUsR0FBRyxDQUFDLFVBQVUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUM7Z0JBRTlELHNCQUFzQjtnQkFDdEIsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDeEIsT0FBTyxDQUFDLEtBQUssR0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDN0I7U0FDSjtRQUVELGdCQUFnQjtRQUNoQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBRWpDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUM7WUFDakMsSUFBSSxJQUFJLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQztZQUV6QixJQUFJLEtBQUssR0FBRyxTQUFTLEdBQUcsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUV2QyxJQUFJLElBQUksR0FBRyxTQUFTLEdBQUcsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUN0QyxJQUFJLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLElBQUksU0FBUyxHQUFHLElBQUksR0FBRyxLQUFLLENBQUM7WUFFN0Isc0JBQXNCO1lBQ3RCLCtDQUErQztZQUUvQyxPQUFPLENBQUMsS0FBSyxFQUFDO2dCQUNWLElBQUk7Z0JBQ0osS0FBSztnQkFDTCxTQUFTO2FBQ1osQ0FBQyxDQUFDO1NBQ047UUFFRCxPQUFPLElBQUksUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBR0QsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFlLEVBQUUsTUFBYyxFQUFFLE1BQWMsRUFBRSxVQUFrQjtRQUUvRSxJQUFJLFFBQVEsR0FBRyxVQUFVLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLElBQUksUUFBUSxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUM7UUFDOUIsSUFBSSxLQUFLLEdBQUcsSUFBSSw0REFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZDLElBQUksT0FBTyxHQUFHLFVBQVMsQ0FBUyxFQUFFLE1BQWU7WUFDN0MsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzNDLENBQUM7UUFDRCxJQUFJLEtBQUssR0FBRyxJQUFJLHVEQUFTLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNmLElBQUksT0FBTyxHQUFHLFVBQVMsQ0FBUyxFQUFFLEdBQWE7WUFDM0MsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDekIsQ0FBQztRQUVELFlBQVk7UUFDWixPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNqQyxPQUFPLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxJQUFJLGlEQUFPLENBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxFQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUMsRUFDMUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ3BCO1FBQ0QsT0FBTyxDQUFDLFFBQVEsR0FBQyxDQUFDLEVBQUUsSUFBSSxpREFBTyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUU3QyxhQUFhO1FBQ2IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUVqQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDVixJQUFJLENBQUMsR0FBRyxRQUFRLEdBQUMsQ0FBQyxDQUFDO1lBQ25CLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7WUFFaEMsT0FBTyxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsT0FBTyxDQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzNCO1FBR0QsT0FBTyxJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVELHNCQUFzQjtJQUN0QixhQUFhO1FBQ1QsSUFBSSxJQUFJLEdBQUcsSUFBSSxvREFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDbEMsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztDQUNKO0FBR0QsMkNBQTJDO0FBRTNDLGNBQWM7QUFDZCxjQUFjO0FBQ2QsY0FBYztBQUNkLGNBQWM7QUFDZCxjQUFjO0FBQ2QsY0FBYztBQUNkLGNBQWM7QUFDZCxNQUFNLFNBQVMsR0FBRztJQUNkLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztDQUNaLENBQUM7QUFFRixTQUFTLFNBQVMsQ0FBQyxJQUFjO0lBQzdCLE9BQU87UUFDSCxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0tBQzVCO0FBQ0wsQ0FBQyIsImZpbGUiOiIuL3NyYy9tZXNoL3B1cmUtbWVzaC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vLyBNZXNoLlRzXHJcbi8vIFB1cnBvc2U6IG9iaiBjbGFzcyBmb3IgZGVhbGluZyB3aXRoIHRoYXQgc3BlY2lmaWMgZmlsZXR5cGUsIGFuZCBtZXNoZXMgaW4gZ2VuZXJhbFxyXG4vLyBBdXRob3I6IEpvcyBGZWVuc3RyYVxyXG5cclxuLy8gaW1wb3J0IHsgY3JlYXRlVW5zaWduZWRCeXRlc01hdHJpeFRleHR1cmUgfSBmcm9tIFwiQHRlbnNvcmZsb3cvdGZqcy1iYWNrZW5kLXdlYmdsL2Rpc3QvZ3BncHVfdXRpbFwiO1xyXG4vLyBpbXBvcnQgeyBicm93c2VyTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkB0ZW5zb3JmbG93L3RmanMtY29yZS9kaXN0L2lvL2xvY2FsX3N0b3JhZ2VcIjtcclxuaW1wb3J0IHsgSW50TWF0cml4IH0gZnJvbSBcIi4uL2RhdGEvaW50LW1hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyQXJyYXksIFZlY3RvcjNBcnJheSB9IGZyb20gXCIuLi9kYXRhL3ZlY3Rvci1hcnJheVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IEN1YmUgfSBmcm9tIFwiLi4vZ2VvL2N1YmVcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlMyB9IGZyb20gXCIuLi9nZW8vcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IFJlbmRlck1lc2ggfSBmcm9tIFwiLi9yZW5kZXItbWVzaFwiO1xyXG5cclxuXHJcbi8vIFRPRE8gbWFrZSBkaXN0aW5jdGlvbnMgYmV0d2VlblxyXG4vLyAtIERpc3BsYXlNZXNoIChQdXJlTWVzaCArIHV2cywgdGV4dHVyZSwgbm9ybWFscywgbWF0ZXJpYWwsIGV0Yy4uLilcclxuXHJcblxyXG4vLyBhIHZlcnkgcHVyZSBpZGVhIG9mIGEgbWVzaCA6IFZlcnRpY2VzICsgbGlua3MgYmV0d2VlbiB2ZXJ0aWNlcy4gXHJcbi8vIENvdWxkIGJlIGFueXRoaW5nIHdpdGggdGhlc2UgcHJvcGVydGllcy5cclxuZXhwb3J0IGNsYXNzIFB1cmVNZXNoIHtcclxuXHJcbiAgICB2ZXJ0czogVmVjdG9yM0FycmF5O1xyXG4gICAgbGlua3M6IEludE1hdHJpeDsgLy8gcmVsYXRpb25zaGlwcywgY2FuIGJlIDIgKGxpbmVzKSB8IDMgKHRyaWFuZ2xlcykgfCA0IChxdWFkcylcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJ0czogVmVjdG9yM0FycmF5LCBsaW5rczogSW50TWF0cml4KSB7XHJcbiAgICAgICAgdGhpcy52ZXJ0cyA9IHZlcnRzO1xyXG4gICAgICAgIHRoaXMubGlua3MgPSBsaW5rcztcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21MaXN0cyh2ZXJ0czogVmVjdG9yM1tdLCBmYWNlczogbnVtYmVyW10pIDogUHVyZU1lc2gge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHVyZU1lc2goXHJcbiAgICAgICAgICAgIFZlY3RvcjNBcnJheS5mcm9tTGlzdCh2ZXJ0cyksIFxyXG4gICAgICAgICAgICBJbnRNYXRyaXguZnJvbUxpc3QoZmFjZXMsIDMpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21FbXB0eSgpIDogUHVyZU1lc2gge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHVyZU1lc2gobmV3IFZlY3RvcjNBcnJheSgwKSwgbmV3IEludE1hdHJpeCgwLDApKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21Kb2luKG1lc2hlczogUHVyZU1lc2hbXSkgOiBQdXJlTWVzaCB7XHJcblxyXG4gICAgICAgIC8vIGpvaW4gbWVzaGVzLCBkb250IHRyeSB0byBsb29rIGZvciBkdXBsaWNhdGUgdmVydGljZXNcclxuICAgICAgICAvLyBUT0RPIDogbWFrZSB0aGlzIHRoZSB0cm91YmxlIG9mIE1hdHJpY2VzIGFuZCBBcnJheXNcclxuICAgICAgICBsZXQgdmVydENvdW50ID0gMDtcclxuICAgICAgICBsZXQgZmFjZUNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbWVzaCBvZiBtZXNoZXMpIHtcclxuICAgICAgICAgICAgdmVydENvdW50ICs9IG1lc2gudmVydHMuY291bnQoKTtcclxuICAgICAgICAgICAgZmFjZUNvdW50ICs9IG1lc2gubGlua3MuY291bnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2ZXJ0cyA9IG5ldyBWZWN0b3IzQXJyYXkodmVydENvdW50KTtcclxuICAgICAgICBsZXQgbGlua3MgPSBuZXcgSW50TWF0cml4KGZhY2VDb3VudCwgMyk7XHJcblxyXG4gICAgICAgIGxldCBhY2NWZXJ0cyA9IDA7XHJcbiAgICAgICAgbGV0IGFjY0ZhY2VzID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbWVzaCBvZiBtZXNoZXMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgbWVzaC52ZXJ0cy5jb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZlcnRzLnNldFZlY3RvcihhY2NWZXJ0cyArIGksIG1lc2gudmVydHMuZ2V0VmVjdG9yKGkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBtZXNoLmxpbmtzLmNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZhY2UgPSBtZXNoLmxpbmtzLmdldFJvdyhpKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwIDsgaiA8IGZhY2UubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNlW2pdID0gZmFjZVtqXSArIGFjY1ZlcnRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGlua3Muc2V0Um93KGFjY0ZhY2VzICsgaSwgZmFjZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWNjVmVydHMgKz0gbWVzaC52ZXJ0cy5jb3VudCgpO1xyXG4gICAgICAgICAgICBhY2NGYWNlcyArPSBtZXNoLmxpbmtzLmNvdW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFB1cmVNZXNoKHZlcnRzLCBsaW5rcyk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBzdGF0aWMgZnJvbVJlY3QocmVjdDogUmVjdGFuZ2xlMykgOiBSZW5kZXJNZXNoIHtcclxuXHJcbiAgICAgICAgbGV0IHZlcnRzID0gcmVjdC5nZXRDb3JuZXJzKCk7XHJcblxyXG4gICAgICAgIC8vIHdlIGNhbnQgaGFuZGxlIHF1YWRzIHlldCBcclxuICAgICAgICBsZXQgZmFjZXM6IG51bWJlcltdID0gW11cclxuICAgICAgICBmYWNlcy5wdXNoKC4uLnF1YWRUb1RyaShjdWJlRmFjZXNbMF0pKTtcclxuICAgICAgICBsZXQgbWVzaCA9IG5ldyBSZW5kZXJNZXNoKDQsIDAsIDAsIDIpO1xyXG4gICAgICAgIG1lc2gudmVydHMuZmlsbEZyb21MaXN0KHZlcnRzKTtcclxuICAgICAgICBtZXNoLmxpbmtzLnNldERhdGEoZmFjZXMpO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhtZXNoLnZlcnRzKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhtZXNoLmxpbmtzKTtcclxuXHJcbiAgICAgICAgbWVzaC5zZXRVdnMobmV3IEZsb2F0MzJBcnJheShbXHJcbiAgICAgICAgICAgIDAuMCwgIDAuMCxcclxuICAgICAgICAgICAgMC4wLCAgMS4wLFxyXG4gICAgICAgICAgICAxLjAsICAwLjAsXHJcbiAgICAgICAgICAgIDEuMCwgIDEuMF0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBmcm9tQ3ViZShjdWJlOiBDdWJlKSA6IFB1cmVNZXNoIHtcclxuXHJcbiAgICAgICAgbGV0IHZlcnRzID0gY3ViZS5nZXRDb3JuZXJzKCk7XHJcbiAgICAgICAgbGV0IGZhY2VzOiBudW1iZXJbXSA9IFtdXHJcbiAgICAgICAgZm9yKGxldCBmYWNlIG9mIGN1YmVGYWNlcykge1xyXG4gICAgICAgICAgICBmYWNlcy5wdXNoKC4uLnF1YWRUb1RyaShmYWNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5mcm9tTGlzdHModmVydHMsIGZhY2VzKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGZyb21TcGhlcmUoY2VudGVyOiBWZWN0b3IzLCByYWRpdXM6IG51bWJlciwgbnVtUmluZ3M6IG51bWJlciwgbnVtUGVyUmluZzogbnVtYmVyKSA6IFB1cmVNZXNoIHtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdmVydHNcclxuICAgICAgICBsZXQgdmVydENvdW50ID0gbnVtUmluZ3MgKiBudW1QZXJSaW5nICsgMjtcclxuICAgICAgICBsZXQgdmVydHMgPSBuZXcgVmVjdG9yM0FycmF5KHZlcnRDb3VudCk7XHJcbiAgICAgICAgbGV0IHNldFZlcnQgPSBmdW5jdGlvbihpOiBudW1iZXIsIHZlY3RvcjogVmVjdG9yMykge1xyXG4gICAgICAgICAgICB2ZXJ0cy5zZXRWZWN0b3IoaSwgdmVjdG9yLnNjYWxlKHJhZGl1cykuYWRkKGNlbnRlcikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0VmVydCgwLCBuZXcgVmVjdG9yMygwLDAsMSkpO1xyXG4gICAgICAgIGZvciAobGV0IHJpbmcgPSAwOyByaW5nIDwgbnVtUmluZ3M7IHJpbmcrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHBlclJpbmcgPSAwOyBwZXJSaW5nIDwgbnVtUGVyUmluZzsgcGVyUmluZysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWxwaGEgPSBNYXRoLlBJICogKHJpbmcrMSkgLyAobnVtUmluZ3MrMSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmV0YSA9IDIgKiBNYXRoLlBJICogcGVyUmluZy9udW1QZXJSaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB4ID0gTWF0aC5zaW4oYWxwaGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAqIE1hdGguY29zKGJldGEpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHkgPSBNYXRoLnNpbihhbHBoYSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAqIE1hdGguc2luKGJldGEpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHogPSBNYXRoLmNvcyhhbHBoYSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMSArIHJpbmcgKiBudW1QZXJSaW5nICsgcGVyUmluZztcclxuICAgICAgICAgICAgICAgIHNldFZlcnQoaW5kZXgsIG5ldyBWZWN0b3IzKHgsIHksIHopKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRWZXJ0KHZlcnRDb3VudC0xLCBuZXcgVmVjdG9yMygwLDAsLTEpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBmYWNlcyBcclxuICAgICAgICBsZXQgZmFjZUNvdW50ID0gbnVtUGVyUmluZyAqIChudW1SaW5ncykgKiAyO1xyXG4gICAgICAgIGxldCBsaW5rcyA9IG5ldyBJbnRNYXRyaXgoZmFjZUNvdW50LCAzKTtcclxuICAgICAgICBsaW5rcy5maWxsKC0xKTtcclxuICAgICAgICBsZXQgc2V0RmFjZSA9IGZ1bmN0aW9uKGk6IG51bWJlciwgcm93OiBudW1iZXJbXSkge1xyXG4gICAgICAgICAgICBsaW5rcy5zZXRSb3coaSwgcm93KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZhY2VzIHRvcFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtUGVyUmluZzsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNldEZhY2UoaSwgW1xyXG4gICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgIChpKzEpICUgbnVtUGVyUmluZyArIDEsXHJcbiAgICAgICAgICAgICAgICBpKzEsXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmFjZXMgbWlkZGxlXHJcbiAgICAgICAgIC8vIHdlIGFyZSBhdCB0aGlzIGN1cnNvclxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZmFjZXNcIiwgZmFjZUNvdW50KTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcmluZyA9IDA7IHJpbmcgPCBudW1SaW5ncy0xOyByaW5nKyspIHtcclxuXHJcbiAgICAgICAgICAgIGxldCB2ZXJ0Q3Vyc29yID0gbnVtUGVyUmluZyAqIHJpbmcgKyAxO1xyXG4gICAgICAgICAgICBsZXQgdmVydEN1cnNvckJlbG93ID0gdmVydEN1cnNvciArIG51bVBlclJpbmc7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBwZXJSaW5nID0gMDsgcGVyUmluZyA8IG51bVBlclJpbmc7IHBlclJpbmcrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGEgPSB2ZXJ0Q3Vyc29yICsgcGVyUmluZztcclxuICAgICAgICAgICAgICAgIGxldCBiID0gdmVydEN1cnNvciArICgocGVyUmluZyArIDEpICUgbnVtUGVyUmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGMgPSB2ZXJ0Q3Vyc29yQmVsb3cgKyBwZXJSaW5nO1xyXG4gICAgICAgICAgICAgICAgbGV0IGQgPSB2ZXJ0Q3Vyc29yQmVsb3cgKyAoKHBlclJpbmcgKyAxKSAlIG51bVBlclJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpRmFjZSA9IG51bVBlclJpbmcgKyAobnVtUGVyUmluZyAqIHJpbmcgKiAyKSArIHBlclJpbmcgKiAyXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlGYWNlKTtcclxuICAgICAgICAgICAgICAgIHNldEZhY2UoaUZhY2UsIFthLGIsY10pO1xyXG4gICAgICAgICAgICAgICAgc2V0RmFjZShpRmFjZSsxLCBbYyxiLGRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmFjZXMgYm90dG9tIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtUGVyUmluZzsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgaU5leHQgPSAoKGkrMSkgJSBudW1QZXJSaW5nKTtcclxuICAgICAgICAgICAgbGV0IGxhc3QgPSB2ZXJ0Q291bnQgLSAxO1xyXG5cclxuICAgICAgICAgICAgbGV0IGlGYWNlID0gZmFjZUNvdW50IC0gbnVtUGVyUmluZyArIGk7XHJcblxyXG4gICAgICAgICAgICBsZXQgemVybyA9IHZlcnRDb3VudCAtIG51bVBlclJpbmcgLSAxO1xyXG4gICAgICAgICAgICBsZXQgdmVydEkgPSB6ZXJvICsgaTtcclxuICAgICAgICAgICAgbGV0IHZlcnRJTmV4dCA9IHplcm8gKyBpTmV4dDtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlGYWNlKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJmYWNlXCIsIGxhc3QsIHZlcnRJTmV4dCwgdmVydEkpO1xyXG5cclxuICAgICAgICAgICAgc2V0RmFjZShpRmFjZSxbXHJcbiAgICAgICAgICAgICAgICBsYXN0LFxyXG4gICAgICAgICAgICAgICAgdmVydEksXHJcbiAgICAgICAgICAgICAgICB2ZXJ0SU5leHQsXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQdXJlTWVzaCh2ZXJ0cywgbGlua3MpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgZnJvbUNvbmUoY2VudGVyOiBWZWN0b3IzLCByYWRpdXM6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIG51bVBlclJpbmc6IG51bWJlcikge1xyXG5cclxuICAgICAgICBsZXQgbnVtVmVydHMgPSBudW1QZXJSaW5nICsgMjtcclxuICAgICAgICBsZXQgbnVtRmFjZXMgPSBudW1QZXJSaW5nICogMjtcclxuICAgICAgICBsZXQgdmVydHMgPSBuZXcgVmVjdG9yM0FycmF5KG51bVZlcnRzKTtcclxuICAgICAgICBsZXQgc2V0VmVydCA9IGZ1bmN0aW9uKGk6IG51bWJlciwgdmVjdG9yOiBWZWN0b3IzKSB7XHJcbiAgICAgICAgICAgIHZlcnRzLnNldFZlY3RvcihpLCB2ZWN0b3IuYWRkKGNlbnRlcikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbGlua3MgPSBuZXcgSW50TWF0cml4KG51bUZhY2VzLCAzKTtcclxuICAgICAgICBsaW5rcy5maWxsKC0xKTtcclxuICAgICAgICBsZXQgc2V0RmFjZSA9IGZ1bmN0aW9uKGk6IG51bWJlciwgcm93OiBudW1iZXJbXSkge1xyXG4gICAgICAgICAgICBsaW5rcy5zZXRSb3coaSwgcm93KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldCB2ZXJ0c1xyXG4gICAgICAgIHNldFZlcnQoMCwgbmV3IFZlY3RvcjMoMCwwLDApKTsgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1QZXJSaW5nOyBpKyspIHtcclxuICAgICAgICAgICAgc2V0VmVydChpKzEsIG5ldyBWZWN0b3IzKFxyXG4gICAgICAgICAgICAgICAgTWF0aC5jb3MoTWF0aC5QSSAqIDIgKiBpIC8gbnVtUGVyUmluZyksXHJcbiAgICAgICAgICAgICAgICBNYXRoLnNpbihNYXRoLlBJICogMiAqIGkgLyBudW1QZXJSaW5nKSxcclxuICAgICAgICAgICAgMCkuc2NhbGUocmFkaXVzKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VmVydChudW1WZXJ0cy0xLCBuZXcgVmVjdG9yMygwLDAsaGVpZ2h0KSk7XHJcblxyXG4gICAgICAgIC8vIHNldCBmYWNlcyBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVBlclJpbmc7IGkrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGEgPSAwO1xyXG4gICAgICAgICAgICBsZXQgYiA9IG51bVZlcnRzLTE7XHJcbiAgICAgICAgICAgIGxldCBjID0gMSArIGk7XHJcbiAgICAgICAgICAgIGxldCBkID0gMSArICgoaSsxKSAlIG51bVBlclJpbmcpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzZXRGYWNlKGkqMiwgW2EsYyxkXSk7XHJcbiAgICAgICAgICAgIHNldEZhY2UoaSoyKzEsIFtjLGIsZF0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUHVyZU1lc2godmVydHMsIGxpbmtzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPIGZpeCB0aGlzIGxhdGVyXHJcbiAgICB0b0Rpc3BsYXlNZXNoKCkgOiBSZW5kZXJNZXNoIHtcclxuICAgICAgICBsZXQgbWVzaCA9IG5ldyBSZW5kZXJNZXNoKHRoaXMudmVydHMuY291bnQoKSwgMCwgMCwgdGhpcy5saW5rcy5jb3VudCgpKTtcclxuICAgICAgICBtZXNoLnZlcnRzLmRhdGEgPSB0aGlzLnZlcnRzLmRhdGE7XHJcbiAgICAgICAgbWVzaC5saW5rcy5kYXRhID0gdGhpcy5saW5rcy5kYXRhO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PSBIZWxwID09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8gMCAtLS0tLS0tIDFcclxuLy8gfCBcXCAgICAgLyB8XHJcbi8vIHwgIDQtLS01ICB8XHJcbi8vIHwgIHwgICB8ICB8XHJcbi8vIHwgIDYtLS03ICB8XHJcbi8vIHwgLyAgICAgXFwgfFxyXG4vLyAyIC0tLS0tLS0gM1xyXG5jb25zdCBjdWJlRmFjZXMgPSBbXHJcbiAgICBbMCwxLDMsMl0sIC8vIGZyb250IFxyXG4gICAgWzQsMCwyLDZdLCAvLyBsZWZ0XHJcbiAgICBbMSwwLDQsNV0sIC8vIHRvcFxyXG4gICAgWzEsNSw3LDNdLCAvLyByaWdodFxyXG4gICAgWzIsMyw3LDZdLCAvLyBib3R0b21cclxuICAgIFs1LDQsNiw3XSwgLy8gYmFja1xyXG5dO1xyXG5cclxuZnVuY3Rpb24gcXVhZFRvVHJpKGFiY2Q6IG51bWJlcltdKSA6IG51bWJlcltdIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYWJjZFswXSwgYWJjZFsxXSwgYWJjZFsyXSwgXHJcbiAgICAgICAgYWJjZFswXSwgYWJjZFsyXSwgYWJjZFszXVxyXG4gICAgXVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/mesh/pure-mesh.ts\n");

/***/ }),

/***/ "./src/mesh/render-mesh.ts":
/*!*********************************!*\
  !*** ./src/mesh/render-mesh.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RenderMeshKind\": () => /* binding */ RenderMeshKind,\n/* harmony export */   \"NormalKind\": () => /* binding */ NormalKind,\n/* harmony export */   \"RenderMesh\": () => /* binding */ RenderMesh,\n/* harmony export */   \"meshFromObj\": () => /* binding */ meshFromObj\n/* harmony export */ });\n/* harmony import */ var _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/int-matrix */ \"./src/data/int-matrix.ts\");\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n// Name: render-mesh.ts \r\n// Author: Jos Feenstra \r\n// Purpose: \r\n// a mesh representation with the sole purpose of to be renderer. \r\n// - fixed length attributes \r\n// - can represent:\r\n//   - pointcloud (links = null)\r\n//   - graph (links.width = 2)\r\n//   - triangles (links.width = 3)\r\n//   - quads (links.width = 4. will need to be converted to triangles)\r\n\r\n\r\nvar RenderMeshKind;\r\n(function (RenderMeshKind) {\r\n    RenderMeshKind[RenderMeshKind[\"Invalid\"] = 0] = \"Invalid\";\r\n    RenderMeshKind[RenderMeshKind[\"Points\"] = 1] = \"Points\";\r\n    RenderMeshKind[RenderMeshKind[\"Lines\"] = 2] = \"Lines\";\r\n    RenderMeshKind[RenderMeshKind[\"Triangles\"] = 3] = \"Triangles\";\r\n    RenderMeshKind[RenderMeshKind[\"Quads\"] = 4] = \"Quads\";\r\n})(RenderMeshKind || (RenderMeshKind = {}));\r\nvar NormalKind;\r\n(function (NormalKind) {\r\n    NormalKind[NormalKind[\"None\"] = 0] = \"None\";\r\n    NormalKind[NormalKind[\"Vertex\"] = 1] = \"Vertex\";\r\n    NormalKind[NormalKind[\"Face\"] = 2] = \"Face\";\r\n    NormalKind[NormalKind[\"MultiVertex\"] = 3] = \"MultiVertex\";\r\n})(NormalKind || (NormalKind = {}));\r\nclass RenderMesh {\r\n    constructor(vertCount, normCount, uvCount, faceCount, texture = undefined) {\r\n        var _a;\r\n        this.verts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(vertCount);\r\n        this.norms = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(normCount);\r\n        this.uvs = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector2Array(uvCount);\r\n        this.links = new _data_int_matrix__WEBPACK_IMPORTED_MODULE_0__.IntMatrix(faceCount, 3);\r\n        (_a = this.links) === null || _a === void 0 ? void 0 : _a.fill(-1);\r\n        this.texture = texture;\r\n    }\r\n    static fromData(verts, norms, uvs, faces) {\r\n        // NOTE : this type of parsing makes my life easy, but is dangerous. This is why i created the \r\n        // Array class. \r\n        let mesh = new RenderMesh(verts.length / 3, norms.length / 3, uvs.length / 2, faces.length / 3);\r\n        mesh.verts.fillWith(verts);\r\n        mesh.norms.fillWith(norms);\r\n        mesh.uvs.fillWith(uvs);\r\n        mesh.links.fillWith(faces);\r\n        return mesh;\r\n    }\r\n    static fromJoin(meshes) {\r\n        // join meshes, dont try to look for duplicate vertices\r\n        // TODO : make this the trouble of Matrices and Arrays\r\n        let vertCount = 0;\r\n        let faceCount = 0;\r\n        for (let mesh of meshes) {\r\n            vertCount += mesh.verts.count();\r\n            if (mesh.links)\r\n                faceCount += mesh.links.count();\r\n        }\r\n        let joined = new RenderMesh(vertCount, 0, 0, faceCount);\r\n        let accVerts = 0;\r\n        let accFaces = 0;\r\n        for (let mesh of meshes) {\r\n            for (let i = 0; i < mesh.verts.count(); i++) {\r\n                joined.verts.setVector(accVerts + i, mesh.verts.getVector(i));\r\n            }\r\n            if (!mesh.links)\r\n                continue;\r\n            for (let i = 0; i < mesh.links.count(); i++) {\r\n                let face = mesh.links.getRow(i);\r\n                for (let j = 0; j < face.length; j++) {\r\n                    face[j] = face[j] + accVerts;\r\n                }\r\n                joined.links.setRow(accFaces + i, face);\r\n            }\r\n            accVerts += mesh.verts.count();\r\n            accFaces += mesh.links.count();\r\n        }\r\n        return joined;\r\n    }\r\n    // getters & selectors \r\n    getAdjacentFaces(v) {\r\n        let faces = [];\r\n        let count = this.links.count();\r\n        for (let i = 0; i < count; i++) {\r\n            if (this.links.getRow(i).includes(v)) {\r\n                faces.push(i);\r\n            }\r\n        }\r\n        return faces;\r\n    }\r\n    getFaceVertices(f) {\r\n        let verts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(this.links._width);\r\n        this.links.getRow(f).forEach((v, i) => {\r\n            verts.setVector(i, (this.verts.getVector(v)));\r\n        });\r\n        return verts;\r\n    }\r\n    getKind() {\r\n        if (this.links._width == RenderMeshKind.Points) {\r\n            return RenderMeshKind.Points;\r\n        }\r\n        else if (this.links._width == RenderMeshKind.Lines) {\r\n            return RenderMeshKind.Lines;\r\n        }\r\n        else if (this.links._width == RenderMeshKind.Triangles) {\r\n            return RenderMeshKind.Triangles;\r\n        }\r\n        else if (this.links._width == RenderMeshKind.Quads) {\r\n            return RenderMeshKind.Quads;\r\n        }\r\n        else {\r\n            return RenderMeshKind.Invalid;\r\n        }\r\n    }\r\n    getNormalType() {\r\n        let count = this.norms.count();\r\n        if (count == this.verts.count()) {\r\n            return NormalKind.Vertex;\r\n        }\r\n        else if (count == this.links.count()) {\r\n            return NormalKind.Face;\r\n        }\r\n        else if (count == this.links.data.length) {\r\n            return NormalKind.MultiVertex;\r\n        }\r\n        else {\r\n            return NormalKind.None;\r\n        }\r\n    }\r\n    // setters \r\n    setTexture(texture) {\r\n        this.texture = texture;\r\n        // recalculate things if needed\r\n    }\r\n    setUvs(uvs) {\r\n        if (uvs instanceof Float32Array) {\r\n            this.uvs.data = uvs;\r\n        }\r\n        else {\r\n            this.uvs = uvs;\r\n        }\r\n        // recalculate if needed\r\n    }\r\n    // convert\r\n    exportToObj(path) {\r\n        throw \"todo\";\r\n    }\r\n    // normals\r\n    calculateFaceNormals() {\r\n        // calculate a normal per face\r\n        if (this.getKind() != RenderMeshKind.Triangles) {\r\n            console.error(\"can only calculate normals from triangular meshes\");\r\n            this.norms = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(0);\r\n            return;\r\n        }\r\n        let faceCount = this.links.count();\r\n        this.norms = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(faceCount);\r\n        for (let f = 0; f < faceCount; f++) {\r\n            let verts = this.getFaceVertices(f).toList();\r\n            let normal = verts[2].subbed(verts[0]).cross(verts[1].subbed(verts[0])).normalize();\r\n            this.norms.setVector(f, normal);\r\n        }\r\n    }\r\n    calculateVertexNormals() {\r\n        this.calculateFaceNormals();\r\n        let vertNormals = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(this.verts.count());\r\n        this.verts.forEach((v, i) => {\r\n            let adjFaces = this.getAdjacentFaces(i);\r\n            let adjNormals = this.norms.takeRows(adjFaces);\r\n            vertNormals.setVector(i, adjNormals.average());\r\n        });\r\n        this.norms = vertNormals;\r\n    }\r\n}\r\n;\r\n// ================ Obj ===================\r\nfunction meshFromObj(text) {\r\n    // This is not a full .obj parser.\r\n    // see http://paulbourke.net/dataformats/obj/\r\n    // INDEXES ORIGINALLY REFER TO LINES, so -1 is needed\r\n    // run through all lines, and temporarely store\r\n    // all data in raw number lists, since we dont know how \r\n    // many vertices or faces well get. \r\n    let verts = []; // 3 long float\r\n    let norms = []; // 3 long float\r\n    let uvs = []; // 2 long float \r\n    let faces = []; // 9 long ints, u16's should suffice. \r\n    // note : this is very inefficient, but it'll have to do for now...\r\n    const keywordRE = /(\\w*)(?: )*(.*)/;\r\n    const lines = text.split('\\n');\r\n    for (let i = 0; i < lines.length; ++i) {\r\n        const line = lines[i].trim();\r\n        // filter out comments\r\n        if (line === '' || line.startsWith('#')) {\r\n            continue;\r\n        }\r\n        const m = keywordRE.exec(line);\r\n        if (!m) {\r\n            continue;\r\n        }\r\n        const [, keyword, unparsedArgs] = m;\r\n        const parts = line.split(/\\s+/).slice(1);\r\n        switch (keyword) {\r\n            case 'v':\r\n                for (const part of parts) {\r\n                    verts.push(parseFloat(part));\r\n                }\r\n                break;\r\n            case 'vn':\r\n                for (const part of parts) {\r\n                    norms.push(parseFloat(part));\r\n                }\r\n                break;\r\n            case 'vt':\r\n                for (const part of parts) {\r\n                    uvs.push(parseFloat(part));\r\n                }\r\n                break;\r\n            case 'f':\r\n                for (const value of ProcessObjFace(parts)) {\r\n                    faces.push(value);\r\n                }\r\n                break;\r\n            default:\r\n                console.warn('unhandled keyword:', keyword); // eslint-disable-line no-console\r\n                continue;\r\n        }\r\n    }\r\n    // console.log(\"number of vertices: \" + verts.length / 3);\r\n    // console.log(\"number of faces: \" + faces.length / 3);\r\n    // console.log(\"number of uvs: \" + uvs.length / 2);\r\n    // console.log(\"number of norms: \" + norms.length / 3);\r\n    let mesh = RenderMesh.fromData(verts, norms, uvs, faces);\r\n    return mesh;\r\n}\r\n// NOTE: for now, uv and normals are completely ignored!!!\r\n// we assume the indices are the same als the vertices!!!\r\n// verbose way of processing one single vertex/normal/uv combination in a face. \r\nfunction ProcessObjFaceVertex(part) {\r\n    // make sure data always has length: 3\r\n    let data = [];\r\n    // cut string apart and process it\r\n    let subparts = part.split('/');\r\n    if (subparts.length == 1) {\r\n        data.push(parseInt(subparts[0]) - 1);\r\n        // data.push(0);\r\n        // data.push(0);\r\n    }\r\n    else if (subparts.length == 3) {\r\n        data.push(parseInt(subparts[0]) - 1);\r\n        // data.push(parseInt(subparts[1])-1);\r\n        // data.push(parseInt(subparts[2])-1);\r\n    }\r\n    else {\r\n        throw \"invalid face found when processing\";\r\n    }\r\n    return data;\r\n}\r\n// process a face entry in an obj file\r\nfunction ProcessObjFace(parts) {\r\n    let data = [];\r\n    if (parts.length == 4) {\r\n        // i dont want to deal with quads for now, create 2 faces from a quad\r\n        let a = ProcessObjFaceVertex(parts[0]);\r\n        let b = ProcessObjFaceVertex(parts[1]);\r\n        let c = ProcessObjFaceVertex(parts[2]);\r\n        let d = ProcessObjFaceVertex(parts[3]);\r\n        data.push(...a, ...b, ...c, ...a, ...c, ...d);\r\n    }\r\n    else if (parts.length == 3) {\r\n        // as normal        \r\n        let a = ProcessObjFaceVertex(parts[0]);\r\n        let b = ProcessObjFaceVertex(parts[1]);\r\n        let c = ProcessObjFaceVertex(parts[2]);\r\n        data.push(...a, ...b, ...c);\r\n    }\r\n    // data always has length 9 or 18\r\n    return data;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21lc2gvcmVuZGVyLW1lc2gudHM/MDNlYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSx3QkFBd0I7QUFDeEIsd0JBQXdCO0FBQ3hCLFlBQVk7QUFDWixrRUFBa0U7QUFDbEUsNkJBQTZCO0FBQzdCLG1CQUFtQjtBQUNuQixnQ0FBZ0M7QUFDaEMsOEJBQThCO0FBQzlCLGtDQUFrQztBQUNsQyxzRUFBc0U7QUFFdkI7QUFDbUI7QUFRbEUsSUFBWSxjQU1YO0FBTkQsV0FBWSxjQUFjO0lBQ3RCLHlEQUFXO0lBQ1gsdURBQVU7SUFDVixxREFBUztJQUNULDZEQUFhO0lBQ2IscURBQVM7QUFDYixDQUFDLEVBTlcsY0FBYyxLQUFkLGNBQWMsUUFNekI7QUFFRCxJQUFZLFVBS1g7QUFMRCxXQUFZLFVBQVU7SUFDbEIsMkNBQUk7SUFDSiwrQ0FBTTtJQUNOLDJDQUFJO0lBQ0oseURBQVc7QUFDZixDQUFDLEVBTFcsVUFBVSxLQUFWLFVBQVUsUUFLckI7QUFFTSxNQUFNLFVBQVU7SUFRbkIsWUFBWSxTQUFpQixFQUFFLFNBQWlCLEVBQUUsT0FBZSxFQUFFLFNBQWlCLEVBQUUsVUFBaUMsU0FBUzs7UUFDNUgsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLDREQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLDREQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLDREQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLHVEQUFTLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLFVBQUksQ0FBQyxLQUFLLDBDQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUMz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QUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLEdBQUcsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLEdBQUcsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBRWpEO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtRQUMxQixvQkFBb0I7UUFDcEIsSUFBSSxDQUFDLEdBQUcsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLEdBQUcsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLEdBQUcsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQy9CO0lBRUQsaUNBQWlDO0lBQ2pDLE9BQU8sSUFBSSxDQUFDO0FBQ2hCLENBQUMiLCJmaWxlIjoiLi9zcmMvbWVzaC9yZW5kZXItbWVzaC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE5hbWU6IHJlbmRlci1tZXNoLnRzIFxyXG4vLyBBdXRob3I6IEpvcyBGZWVuc3RyYSBcclxuLy8gUHVycG9zZTogXHJcbi8vIGEgbWVzaCByZXByZXNlbnRhdGlvbiB3aXRoIHRoZSBzb2xlIHB1cnBvc2Ugb2YgdG8gYmUgcmVuZGVyZXIuIFxyXG4vLyAtIGZpeGVkIGxlbmd0aCBhdHRyaWJ1dGVzIFxyXG4vLyAtIGNhbiByZXByZXNlbnQ6XHJcbi8vICAgLSBwb2ludGNsb3VkIChsaW5rcyA9IG51bGwpXHJcbi8vICAgLSBncmFwaCAobGlua3Mud2lkdGggPSAyKVxyXG4vLyAgIC0gdHJpYW5nbGVzIChsaW5rcy53aWR0aCA9IDMpXHJcbi8vICAgLSBxdWFkcyAobGlua3Mud2lkdGggPSA0LiB3aWxsIG5lZWQgdG8gYmUgY29udmVydGVkIHRvIHRyaWFuZ2xlcylcclxuXHJcbmltcG9ydCB7IEludE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2ludC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgVmVjdG9yMkFycmF5LCBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBDdWJlIH0gZnJvbSBcIi4uL2dlby9jdWJlXCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZTMgfSBmcm9tIFwiLi4vZ2VvL3JlY3RhbmdsZVwiO1xyXG5cclxudHlwZSB2ZXJ0ZXhJRCA9IG51bWJlcjtcclxudHlwZSBmYWNlSUQgPSBudW1iZXI7XHJcblxyXG5leHBvcnQgZW51bSBSZW5kZXJNZXNoS2luZCB7XHJcbiAgICBJbnZhbGlkID0gMCxcclxuICAgIFBvaW50cyA9IDEsXHJcbiAgICBMaW5lcyA9IDIsXHJcbiAgICBUcmlhbmdsZXMgPSAzLFxyXG4gICAgUXVhZHMgPSA0LFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBOb3JtYWxLaW5kIHtcclxuICAgIE5vbmUsXHJcbiAgICBWZXJ0ZXgsXHJcbiAgICBGYWNlLFxyXG4gICAgTXVsdGlWZXJ0ZXgsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJNZXNoIHtcclxuXHJcbiAgICB2ZXJ0czogVmVjdG9yM0FycmF5OyBcclxuICAgIG5vcm1zOiBWZWN0b3IzQXJyYXk7IFxyXG4gICAgdXZzOiAgIFZlY3RvcjJBcnJheTtcclxuICAgIGxpbmtzOiBJbnRNYXRyaXg7IFxyXG4gICAgdGV4dHVyZT86IEltYWdlRGF0YTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJ0Q291bnQ6IG51bWJlciwgbm9ybUNvdW50OiBudW1iZXIsIHV2Q291bnQ6IG51bWJlciwgZmFjZUNvdW50OiBudW1iZXIsIHRleHR1cmU6IEltYWdlRGF0YSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMudmVydHMgPSBuZXcgVmVjdG9yM0FycmF5KHZlcnRDb3VudCk7XHJcbiAgICAgICAgdGhpcy5ub3JtcyA9IG5ldyBWZWN0b3IzQXJyYXkobm9ybUNvdW50KTtcclxuICAgICAgICB0aGlzLnV2cyA9IG5ldyBWZWN0b3IyQXJyYXkodXZDb3VudCk7XHJcbiAgICAgICAgdGhpcy5saW5rcyA9IG5ldyBJbnRNYXRyaXgoZmFjZUNvdW50LCAzKTtcclxuICAgICAgICB0aGlzLmxpbmtzPy5maWxsKC0xKTtcclxuICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgZnJvbURhdGEodmVydHM6IG51bWJlcltdLCBub3JtczogbnVtYmVyW10sIHV2czogbnVtYmVyW10sIGZhY2VzOiBudW1iZXJbXSkgOiBSZW5kZXJNZXNoIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBOT1RFIDogdGhpcyB0eXBlIG9mIHBhcnNpbmcgbWFrZXMgbXkgbGlmZSBlYXN5LCBidXQgaXMgZGFuZ2Vyb3VzLiBUaGlzIGlzIHdoeSBpIGNyZWF0ZWQgdGhlIFxyXG4gICAgICAgIC8vIEFycmF5IGNsYXNzLiBcclxuICAgICAgICBsZXQgbWVzaCA9IG5ldyBSZW5kZXJNZXNoKHZlcnRzLmxlbmd0aCAvIDMsIG5vcm1zLmxlbmd0aCAvIDMsIHV2cy5sZW5ndGggLyAyLCBmYWNlcy5sZW5ndGggLyAzKTtcclxuICAgICAgICBtZXNoLnZlcnRzLmZpbGxXaXRoKHZlcnRzKTtcclxuICAgICAgICBtZXNoLm5vcm1zIS5maWxsV2l0aChub3Jtcyk7XHJcbiAgICAgICAgbWVzaC51dnMhLmZpbGxXaXRoKHV2cyk7XHJcbiAgICAgICAgbWVzaC5saW5rcyEuZmlsbFdpdGgoZmFjZXMpO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgZnJvbUpvaW4obWVzaGVzOiBSZW5kZXJNZXNoW10pIDogUmVuZGVyTWVzaCB7XHJcblxyXG4gICAgICAgIC8vIGpvaW4gbWVzaGVzLCBkb250IHRyeSB0byBsb29rIGZvciBkdXBsaWNhdGUgdmVydGljZXNcclxuICAgICAgICAvLyBUT0RPIDogbWFrZSB0aGlzIHRoZSB0cm91YmxlIG9mIE1hdHJpY2VzIGFuZCBBcnJheXNcclxuICAgICAgICBsZXQgdmVydENvdW50ID0gMDtcclxuICAgICAgICBsZXQgZmFjZUNvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBtZXNoIG9mIG1lc2hlcykge1xyXG4gICAgICAgICAgICB2ZXJ0Q291bnQgKz0gbWVzaC52ZXJ0cy5jb3VudCgpO1xyXG4gICAgICAgICAgICBpZiAobWVzaC5saW5rcykgZmFjZUNvdW50ICs9IG1lc2gubGlua3MuY291bnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBqb2luZWQgPSBuZXcgUmVuZGVyTWVzaCh2ZXJ0Q291bnQsIDAsIDAsIGZhY2VDb3VudCk7XHJcblxyXG4gICAgICAgIGxldCBhY2NWZXJ0cyA9IDA7XHJcbiAgICAgICAgbGV0IGFjY0ZhY2VzID0gMDtcclxuICAgICAgICBmb3IgKGxldCBtZXNoIG9mIG1lc2hlcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBtZXNoLnZlcnRzLmNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgam9pbmVkLnZlcnRzLnNldFZlY3RvcihhY2NWZXJ0cyArIGksIG1lc2gudmVydHMuZ2V0VmVjdG9yKGkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIW1lc2gubGlua3MpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBtZXNoLmxpbmtzLmNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZhY2UgPSBtZXNoLmxpbmtzLmdldFJvdyhpKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwIDsgaiA8IGZhY2UubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNlW2pdID0gZmFjZVtqXSArIGFjY1ZlcnRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgam9pbmVkLmxpbmtzIS5zZXRSb3coYWNjRmFjZXMgKyBpLCBmYWNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhY2NWZXJ0cyArPSBtZXNoLnZlcnRzLmNvdW50KCk7XHJcbiAgICAgICAgICAgIGFjY0ZhY2VzICs9IG1lc2gubGlua3MuY291bnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBqb2luZWQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGdldHRlcnMgJiBzZWxlY3RvcnMgXHJcblxyXG4gICAgZ2V0QWRqYWNlbnRGYWNlcyh2OiB2ZXJ0ZXhJRCkgOiBmYWNlSURbXSB7XHJcbiAgICAgICAgbGV0IGZhY2VzOiBmYWNlSURbXSA9IFtdXHJcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5saW5rcy5jb3VudCgpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmtzLmdldFJvdyhpKS5pbmNsdWRlcyh2KSkge1xyXG4gICAgICAgICAgICAgICAgZmFjZXMucHVzaChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFjZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldEZhY2VWZXJ0aWNlcyhmOiBmYWNlSUQpIDogVmVjdG9yM0FycmF5IHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdmVydHMgPSBuZXcgVmVjdG9yM0FycmF5KHRoaXMubGlua3MuX3dpZHRoKTtcclxuICAgICAgICB0aGlzLmxpbmtzLmdldFJvdyhmKS5mb3JFYWNoKCh2LCBpKSA9PiB7XHJcbiAgICAgICAgICAgIHZlcnRzLnNldFZlY3RvcihpLCAodGhpcy52ZXJ0cy5nZXRWZWN0b3IodikpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdmVydHM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldEtpbmQoKSA6IFJlbmRlck1lc2hLaW5kIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubGlua3MuX3dpZHRoID09IFJlbmRlck1lc2hLaW5kLlBvaW50cykge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVuZGVyTWVzaEtpbmQuUG9pbnRzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5saW5rcy5fd2lkdGggPT0gUmVuZGVyTWVzaEtpbmQuTGluZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlbmRlck1lc2hLaW5kLkxpbmVzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5saW5rcy5fd2lkdGggPT0gUmVuZGVyTWVzaEtpbmQuVHJpYW5nbGVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZW5kZXJNZXNoS2luZC5UcmlhbmdsZXM7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxpbmtzLl93aWR0aCA9PSBSZW5kZXJNZXNoS2luZC5RdWFkcykge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVuZGVyTWVzaEtpbmQuUXVhZHM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlbmRlck1lc2hLaW5kLkludmFsaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldE5vcm1hbFR5cGUoKSA6IE5vcm1hbEtpbmQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjb3VudCA9IHRoaXMubm9ybXMuY291bnQoKTtcclxuICAgICAgICBpZiAoY291bnQgPT0gdGhpcy52ZXJ0cy5jb3VudCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb3JtYWxLaW5kLlZlcnRleDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID09IHRoaXMubGlua3MuY291bnQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9ybWFsS2luZC5GYWNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT0gdGhpcy5saW5rcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9ybWFsS2luZC5NdWx0aVZlcnRleDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9ybWFsS2luZC5Ob25lO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXR0ZXJzIFxyXG5cclxuICAgIHNldFRleHR1cmUodGV4dHVyZTogSW1hZ2VEYXRhKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICAvLyByZWNhbGN1bGF0ZSB0aGluZ3MgaWYgbmVlZGVkXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldFV2cyh1dnM6IFZlY3RvcjJBcnJheSB8IEZsb2F0MzJBcnJheSkge1xyXG4gICAgICAgIGlmICh1dnMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICAgICAgdGhpcy51dnMhLmRhdGEgPSB1dnM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51dnMgPSB1dnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHJlY2FsY3VsYXRlIGlmIG5lZWRlZFxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvbnZlcnRcclxuICAgIGV4cG9ydFRvT2JqKHBhdGg6IHN0cmluZykge1xyXG4gICAgICAgIHRocm93IFwidG9kb1wiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG5vcm1hbHNcclxuICAgIGNhbGN1bGF0ZUZhY2VOb3JtYWxzKCkge1xyXG5cclxuICAgICAgICAvLyBjYWxjdWxhdGUgYSBub3JtYWwgcGVyIGZhY2VcclxuICAgICAgICBpZiAodGhpcy5nZXRLaW5kKCkgIT0gUmVuZGVyTWVzaEtpbmQuVHJpYW5nbGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjYW4gb25seSBjYWxjdWxhdGUgbm9ybWFscyBmcm9tIHRyaWFuZ3VsYXIgbWVzaGVzXCIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1zID0gbmV3IFZlY3RvcjNBcnJheSgwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZhY2VDb3VudCA9IHRoaXMubGlua3MuY291bnQoKTtcclxuICAgICAgICB0aGlzLm5vcm1zID0gbmV3IFZlY3RvcjNBcnJheShmYWNlQ291bnQpO1xyXG4gICAgICAgIGZvciAobGV0IGYgPSAwIDsgZiA8IGZhY2VDb3VudDsgZisrKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgdmVydHMgPSB0aGlzLmdldEZhY2VWZXJ0aWNlcyhmKS50b0xpc3QoKTtcclxuICAgICAgICAgICAgbGV0IG5vcm1hbCA9IHZlcnRzWzJdLnN1YmJlZCh2ZXJ0c1swXSkuY3Jvc3ModmVydHNbMV0uc3ViYmVkKHZlcnRzWzBdKSkubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMubm9ybXMuc2V0VmVjdG9yKGYsIG5vcm1hbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjYWxjdWxhdGVWZXJ0ZXhOb3JtYWxzKCkge1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlRmFjZU5vcm1hbHMoKTtcclxuICAgICAgICBsZXQgdmVydE5vcm1hbHMgPSBuZXcgVmVjdG9yM0FycmF5KHRoaXMudmVydHMuY291bnQoKSk7XHJcblxyXG4gICAgICAgIHRoaXMudmVydHMuZm9yRWFjaCgodiwgaSkgPT4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGFkakZhY2VzID0gdGhpcy5nZXRBZGphY2VudEZhY2VzKGkpO1xyXG4gICAgICAgICAgICBsZXQgYWRqTm9ybWFscyA9IHRoaXMubm9ybXMudGFrZVJvd3MoYWRqRmFjZXMpIGFzIFZlY3RvcjNBcnJheTtcclxuICAgICAgICAgICAgdmVydE5vcm1hbHMuc2V0VmVjdG9yKGksIGFkak5vcm1hbHMuYXZlcmFnZSgpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubm9ybXMgPSB2ZXJ0Tm9ybWFscztcclxuICAgIH1cclxufTtcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09IE9iaiA9PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWVzaEZyb21PYmoodGV4dDogc3RyaW5nKSA6IFJlbmRlck1lc2gge1xyXG5cclxuICAgIC8vIFRoaXMgaXMgbm90IGEgZnVsbCAub2JqIHBhcnNlci5cclxuICAgIC8vIHNlZSBodHRwOi8vcGF1bGJvdXJrZS5uZXQvZGF0YWZvcm1hdHMvb2JqL1xyXG4gICAgLy8gSU5ERVhFUyBPUklHSU5BTExZIFJFRkVSIFRPIExJTkVTLCBzbyAtMSBpcyBuZWVkZWRcclxuXHJcbiAgICAvLyBydW4gdGhyb3VnaCBhbGwgbGluZXMsIGFuZCB0ZW1wb3JhcmVseSBzdG9yZVxyXG4gICAgLy8gYWxsIGRhdGEgaW4gcmF3IG51bWJlciBsaXN0cywgc2luY2Ugd2UgZG9udCBrbm93IGhvdyBcclxuICAgIC8vIG1hbnkgdmVydGljZXMgb3IgZmFjZXMgd2VsbCBnZXQuIFxyXG4gICAgbGV0IHZlcnRzOiBudW1iZXJbXSA9IFtdOyAvLyAzIGxvbmcgZmxvYXRcclxuICAgIGxldCBub3JtczogbnVtYmVyW10gPSBbXTsgLy8gMyBsb25nIGZsb2F0XHJcbiAgICBsZXQgdXZzOiAgIG51bWJlcltdID0gW107IC8vIDIgbG9uZyBmbG9hdCBcclxuICAgIGxldCBmYWNlczogbnVtYmVyW10gPSBbXTsgLy8gOSBsb25nIGludHMsIHUxNidzIHNob3VsZCBzdWZmaWNlLiBcclxuICAgIFxyXG4gICAgLy8gbm90ZSA6IHRoaXMgaXMgdmVyeSBpbmVmZmljaWVudCwgYnV0IGl0J2xsIGhhdmUgdG8gZG8gZm9yIG5vdy4uLlxyXG4gICAgY29uc3Qga2V5d29yZFJFID0gLyhcXHcqKSg/OiApKiguKikvO1xyXG4gICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcclxuXHJcbiAgICAgICAgLy8gZmlsdGVyIG91dCBjb21tZW50c1xyXG4gICAgICAgIGlmIChsaW5lID09PSAnJyB8fCBsaW5lLnN0YXJ0c1dpdGgoJyMnKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbSA9IGtleXdvcmRSRS5leGVjKGxpbmUpO1xyXG4gICAgICAgIGlmICghbSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgWywga2V5d29yZCwgdW5wYXJzZWRBcmdzXSA9IG07XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KC9cXHMrLykuc2xpY2UoMSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3dpdGNoKGtleXdvcmQpIHtcclxuICAgICAgICAgICAgY2FzZSAndic6XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKHBhcnNlRmxvYXQocGFydCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3ZuJzpcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vcm1zLnB1c2gocGFyc2VGbG9hdChwYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndnQnOlxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXZzLnB1c2gocGFyc2VGbG9hdChwYXJ0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZic6XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIFByb2Nlc3NPYmpGYWNlKHBhcnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2VzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3VuaGFuZGxlZCBrZXl3b3JkOicsIGtleXdvcmQpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcIm51bWJlciBvZiB2ZXJ0aWNlczogXCIgKyB2ZXJ0cy5sZW5ndGggLyAzKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwibnVtYmVyIG9mIGZhY2VzOiBcIiArIGZhY2VzLmxlbmd0aCAvIDMpO1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJudW1iZXIgb2YgdXZzOiBcIiArIHV2cy5sZW5ndGggLyAyKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwibnVtYmVyIG9mIG5vcm1zOiBcIiArIG5vcm1zLmxlbmd0aCAvIDMpO1xyXG5cclxuICAgIGxldCBtZXNoID0gUmVuZGVyTWVzaC5mcm9tRGF0YSh2ZXJ0cywgbm9ybXMsIHV2cywgZmFjZXMpO1xyXG4gIFxyXG4gICAgcmV0dXJuIG1lc2g7XHJcbn1cclxuXHJcbi8vIE5PVEU6IGZvciBub3csIHV2IGFuZCBub3JtYWxzIGFyZSBjb21wbGV0ZWx5IGlnbm9yZWQhISFcclxuLy8gd2UgYXNzdW1lIHRoZSBpbmRpY2VzIGFyZSB0aGUgc2FtZSBhbHMgdGhlIHZlcnRpY2VzISEhXHJcbi8vIHZlcmJvc2Ugd2F5IG9mIHByb2Nlc3Npbmcgb25lIHNpbmdsZSB2ZXJ0ZXgvbm9ybWFsL3V2IGNvbWJpbmF0aW9uIGluIGEgZmFjZS4gXHJcbmZ1bmN0aW9uIFByb2Nlc3NPYmpGYWNlVmVydGV4KHBhcnQ6IHN0cmluZykgOiBudW1iZXJbXSB7XHJcblxyXG4gICAgLy8gbWFrZSBzdXJlIGRhdGEgYWx3YXlzIGhhcyBsZW5ndGg6IDNcclxuICAgIGxldCBkYXRhOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyBjdXQgc3RyaW5nIGFwYXJ0IGFuZCBwcm9jZXNzIGl0XHJcbiAgICBsZXQgc3VicGFydHMgPSBwYXJ0LnNwbGl0KCcvJyk7XHJcbiAgICBpZiAoc3VicGFydHMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICBkYXRhLnB1c2gocGFyc2VJbnQoc3VicGFydHNbMF0pLTEpO1xyXG4gICAgICAgIC8vIGRhdGEucHVzaCgwKTtcclxuICAgICAgICAvLyBkYXRhLnB1c2goMCk7XHJcbiAgICB9IGVsc2UgaWYgKHN1YnBhcnRzLmxlbmd0aCA9PSAzKSB7XHJcbiAgICAgICAgZGF0YS5wdXNoKHBhcnNlSW50KHN1YnBhcnRzWzBdKS0xKTtcclxuICAgICAgICAvLyBkYXRhLnB1c2gocGFyc2VJbnQoc3VicGFydHNbMV0pLTEpO1xyXG4gICAgICAgIC8vIGRhdGEucHVzaChwYXJzZUludChzdWJwYXJ0c1syXSktMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IFwiaW52YWxpZCBmYWNlIGZvdW5kIHdoZW4gcHJvY2Vzc2luZ1wiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8vIHByb2Nlc3MgYSBmYWNlIGVudHJ5IGluIGFuIG9iaiBmaWxlXHJcbmZ1bmN0aW9uIFByb2Nlc3NPYmpGYWNlKHBhcnRzOiBzdHJpbmdbXSkgOiBudW1iZXJbXSB7XHJcbiAgICBcclxuICAgIGxldCBkYXRhOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT0gNCkge1xyXG4gICAgICAgIC8vIGkgZG9udCB3YW50IHRvIGRlYWwgd2l0aCBxdWFkcyBmb3Igbm93LCBjcmVhdGUgMiBmYWNlcyBmcm9tIGEgcXVhZFxyXG4gICAgICAgIGxldCBhID0gUHJvY2Vzc09iakZhY2VWZXJ0ZXgocGFydHNbMF0pO1xyXG4gICAgICAgIGxldCBiID0gUHJvY2Vzc09iakZhY2VWZXJ0ZXgocGFydHNbMV0pO1xyXG4gICAgICAgIGxldCBjID0gUHJvY2Vzc09iakZhY2VWZXJ0ZXgocGFydHNbMl0pO1xyXG4gICAgICAgIGxldCBkID0gUHJvY2Vzc09iakZhY2VWZXJ0ZXgocGFydHNbM10pO1xyXG5cclxuICAgICAgICBkYXRhLnB1c2goLi4uYSwgLi4uYiwgLi4uYywgLi4uYSwgLi4uYywgLi4uZCk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChwYXJ0cy5sZW5ndGggPT0gMykge1xyXG4gICAgICAgIC8vIGFzIG5vcm1hbCAgICAgICAgXHJcbiAgICAgICAgbGV0IGEgPSBQcm9jZXNzT2JqRmFjZVZlcnRleChwYXJ0c1swXSk7XHJcbiAgICAgICAgbGV0IGIgPSBQcm9jZXNzT2JqRmFjZVZlcnRleChwYXJ0c1sxXSk7XHJcbiAgICAgICAgbGV0IGMgPSBQcm9jZXNzT2JqRmFjZVZlcnRleChwYXJ0c1syXSk7XHJcbiAgICAgICAgZGF0YS5wdXNoKC4uLmEsIC4uLmIsIC4uLmMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRhdGEgYWx3YXlzIGhhcyBsZW5ndGggOSBvciAxOFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/mesh/render-mesh.ts\n");

/***/ }),

/***/ "./src/mesh/topo-mesh.ts":
/*!*******************************!*\
  !*** ./src/mesh/topo-mesh.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TopoMesh\": () => /* binding */ TopoMesh\n/* harmony export */ });\n/* harmony import */ var _data_hash_table__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/hash-table */ \"./src/data/hash-table.ts\");\n/* harmony import */ var _data_int_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/int-matrix */ \"./src/data/int-matrix.ts\");\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _render_mesh__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./render-mesh */ \"./src/mesh/render-mesh.ts\");\n/* harmony import */ var _geo_triangle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../geo/triangle */ \"./src/geo/triangle.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n// a mesh with topological information\r\nclass TopoMesh extends _render_mesh__WEBPACK_IMPORTED_MODULE_4__.RenderMesh {\r\n    // private -> should only be used with factory methods\r\n    constructor(vertCount, normCount, uvCount, faceCount, texture = undefined) {\r\n        super(vertCount, normCount, uvCount, faceCount, texture);\r\n        this.lastTouched = 0; // needed for triangle walk\r\n        this.neighborMap = new _data_int_matrix__WEBPACK_IMPORTED_MODULE_1__.IntMatrix(this.links.count(), 3);\r\n    }\r\n    static copyFromMesh(mesh) {\r\n        let topoMesh = new TopoMesh(mesh.verts.count(), mesh.norms.count(), mesh.uvs.count(), mesh.links.count());\r\n        topoMesh.verts = mesh.verts.clone();\r\n        topoMesh.norms = mesh.norms.clone();\r\n        topoMesh.uvs = mesh.uvs.clone();\r\n        topoMesh.links = mesh.links.clone();\r\n        topoMesh.setNeighborMap();\r\n        return topoMesh;\r\n    }\r\n    setNeighborMap() {\r\n        // this method fills this.neighborMap after data is loaded\r\n        // \r\n        let edges = new _data_hash_table__WEBPACK_IMPORTED_MODULE_0__.HashTable();\r\n        let pairs = new _data_hash_table__WEBPACK_IMPORTED_MODULE_0__.HashTable();\r\n        // 1 | per triangle\r\n        this.links.forEachRow((f, faceIndex) => {\r\n            let faceEdges = [\r\n                [f[0], f[1]],\r\n                [f[1], f[2]],\r\n                [f[2], f[0]]\r\n            ];\r\n            faceEdges.forEach(e => {\r\n                // if (4, 1), orientation is True | if (1, 4), orientation is False\r\n                let orientation = e[0] > e[1];\r\n                // use this min max construction to only store one edge per triangle pair\r\n                // let edge: [number, number] = e.sort();\r\n                let edge = new Int32Array([Math.min(...e), Math.max(...e)]);\r\n                // console.log(edge);\r\n                if (!edges.has(edge)) {\r\n                    // orientation, first tr ID, second tr ID\r\n                    edges.set(edge, [orientation, faceIndex, -1]);\r\n                }\r\n                else {\r\n                    // an edge match is made!\r\n                    // console.log(\"matched!\");\r\n                    let other = edges.get(edge);\r\n                    let nbOrientation = other[0];\r\n                    let nbIndex = other[1];\r\n                    other[2] = faceIndex;\r\n                    edges.set(edge, other); // edge is put away again, if an edge map is ever needed.\r\n                    // assign neighbours\r\n                    this.setNb(faceIndex, edge, nbIndex);\r\n                    this.setNb(nbIndex, edge, faceIndex);\r\n                    // use this info to fill self.pairs\r\n                    // if orientation != other orientation, edge is 'good' -> False\r\n                    // else -> True, one of the neighbour triangles needs to be flipped\r\n                    let pair = [nbIndex, faceIndex];\r\n                    pair.sort();\r\n                    // pair = (Math.min(...pair), Math.max(...pair))\r\n                    if (orientation != nbOrientation)\r\n                        pairs.set(pair, false);\r\n                    else\r\n                        pairs.set(pair, true);\r\n                }\r\n            });\r\n        });\r\n        // Done. Give feedback\r\n        let count = 0;\r\n        // for pair in pairs.items():\r\n        //     if not pair: count +=1;\r\n        console.log(\"number of 'wrong' face neighbours: \", count);\r\n        return;\r\n    }\r\n    /**\r\n     * Get the triangle based on a UV point somewhere on the mesh.\r\n     * Returns -1 if the point is not on the mesh TODO OR IF THE PATH HAS HOLES IN IT TODO FIX THIS!\r\n     * @param  {Vector2} point\r\n     * @returns triangleIndex, or -1 if failure\r\n     */\r\n    walkUV(point) {\r\n        // start where we last stopped\r\n        let faceIndex = this.lastTouched;\r\n        // make sure we never take more steps than triangles in the triangulation.\r\n        // this would mean something went wrong\r\n        let count = this.links.count();\r\n        for (let _ = 0; _ < count; _++) {\r\n            // i dont know how, but if we accidentally landed outside of the mesh\r\n            if (faceIndex == -1) {\r\n                return -1;\r\n            }\r\n            for (let i = 0; i < 3; i++) {\r\n                let j = (i + 1) % 3;\r\n                let face = this.links.getRow(faceIndex);\r\n                let edge = [face[i], face[j]];\r\n                let b = this.uvs.getVector(edge[0]);\r\n                let c = this.uvs.getVector(edge[1]);\r\n                let sign = point.sign(b, c);\r\n                if (sign < 0) {\r\n                    faceIndex = this.getNb(faceIndex, edge);\r\n                    // if its ouside, return -1\r\n                    if (faceIndex == -1)\r\n                        return -1;\r\n                    // else: go there immidiately\r\n                    this.lastTouched = faceIndex;\r\n                    break;\r\n                }\r\n                // if this ran 3 times, the point must be within the triangle\r\n                if (i == 2)\r\n                    return faceIndex;\r\n            }\r\n        }\r\n        // something went wrong\r\n        return -1;\r\n    }\r\n    // find the faces closest to the point \r\n    // -1 if the mesh does not contain triangles\r\n    closestFaces(point) {\r\n        let closestVertexId = this.verts.closestId(point);\r\n        // get all face ids containing closestVertex, along with their centers\r\n        let closestFaces = [];\r\n        //let centers: Vector3[] = []\r\n        this.links.forEachRow((tr, i) => {\r\n            if (tr.includes(closestVertexId)) {\r\n                closestFaces.push(i);\r\n                //let center = Vector3Array.fromList(this.getFacePoints(i, false)).average();\r\n                //centers.push(center);\r\n            }\r\n        });\r\n        // select the triangle with the closest baricenter\r\n        return closestFaces;\r\n    }\r\n    elevate(p) {\r\n        // 'elevate' a point in UV space to vertex space using a barycentric remap   \r\n        // figure out where this point is located on the mesh\r\n        let face = this.walkUV(p);\r\n        if (face == -1) {\r\n            console.warn(\"got a point not on triangle...\");\r\n            return new _math_vector__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 0, 0);\r\n        }\r\n        let tr3 = this.getTriangle3(face);\r\n        let tr2 = this.getTriangle2(face);\r\n        let bari = tr2.toBarycentric(p);\r\n        return tr3.fromBarycentric(bari);\r\n    }\r\n    closestFace(p) {\r\n        // NOTE this doesnt really work all that well...\r\n        let faceIds = this.closestFaces(p);\r\n        let closestPoints = new _data_vector_array__WEBPACK_IMPORTED_MODULE_2__.Vector3Array(faceIds.length);\r\n        faceIds.forEach((id, i) => {\r\n            let tr = this.getTriangle3(id);\r\n            let cp = tr.closestPoint(p);\r\n            closestPoints.setVector(i, cp);\r\n        });\r\n        // find the closest closest point \r\n        let id = closestPoints.closestId(p);\r\n        return faceIds[id];\r\n    }\r\n    // 'flatten' a point in vertex space to uv space using a barycentric remap\r\n    // NOTE : this is not exactly a 'project to closest triangle', something like that wouldnt always work\r\n    flatten(p, face) {\r\n        let tr3 = this.getTriangle3(face);\r\n        let tr2 = this.getTriangle2(face);\r\n        let bari = tr3.toBarycentric(p);\r\n        return tr2.fromBarycentric(bari);\r\n    }\r\n    // combo\r\n    flattenClosestPoint(p) {\r\n        let face = this.closestFace(p);\r\n        return this.flatten(p, face);\r\n    }\r\n    closestPoint(p) {\r\n        let face = this.closestFace(p);\r\n        let triangle = this.getTriangle3(face);\r\n        let bari = triangle.toBarycentric(p);\r\n        return triangle.fromBarycentric(bari);\r\n    }\r\n    getTriangle2(id) {\r\n        let p = this.getFacePoints(id, true);\r\n        return new _geo_triangle__WEBPACK_IMPORTED_MODULE_5__.Triangle2(p[0], p[1], p[2]);\r\n    }\r\n    getTriangle3(id) {\r\n        let p = this.getFacePoints(id, false);\r\n        return new _geo_triangle__WEBPACK_IMPORTED_MODULE_5__.Triangle3(p[0], p[1], p[2]);\r\n    }\r\n    setNb(faceIndex, commonEdge, nbIndex) {\r\n        for (let j = 0; j < 3; j++) {\r\n            if (!commonEdge.includes(this.links.get(faceIndex, j))) {\r\n                this.neighborMap.set(faceIndex, j, nbIndex);\r\n                return;\r\n            }\r\n        }\r\n        console.log(this.links.getRow(faceIndex));\r\n        console.log(commonEdge);\r\n        throw \"these are not actually neighbors!\";\r\n    }\r\n    getNb(faceIndex, commonEdge) {\r\n        for (let j = 0; j < 3; j++) {\r\n            if (!commonEdge.includes(this.links.get(faceIndex, j))) {\r\n                return this.neighborMap.get(faceIndex, j);\r\n            }\r\n        }\r\n        console.log(this.links.getRow(faceIndex));\r\n        console.log(commonEdge);\r\n        throw \"common edge does not match triangle index!\";\r\n    }\r\n    getFacePoints(tr, uv) {\r\n        let pointIds = this.links.getRow(tr);\r\n        if (uv) {\r\n            return [\r\n                this.uvs.getVector(pointIds[0]),\r\n                this.uvs.getVector(pointIds[1]),\r\n                this.uvs.getVector(pointIds[2]),\r\n            ];\r\n        }\r\n        else {\r\n            return [\r\n                this.verts.getVector(pointIds[0]),\r\n                this.verts.getVector(pointIds[1]),\r\n                this.verts.getVector(pointIds[2]),\r\n            ];\r\n        }\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL21lc2gvdG9wby1tZXNoLnRzPzE4YjUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUErQztBQUNBO0FBQ0s7QUFDRjtBQUNQO0FBQ1k7QUFFdkQsc0NBQXNDO0FBQy9CLE1BQU0sUUFBUyxTQUFRLG9EQUFVO0lBS3BDLHNEQUFzRDtJQUN0RCxZQUFvQixTQUFpQixFQUFFLFNBQWlCLEVBQUUsT0FBZSxFQUFFLFNBQWlCLEVBQUUsVUFBaUMsU0FBUztRQUNwSSxLQUFLLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBTDdELGdCQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUMsMkJBQTJCO1FBTXhDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSx1REFBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVELE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFBZ0I7UUFDaEMsSUFBSSxRQUFRLEdBQUcsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQzFHLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNwQyxRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDcEMsUUFBUSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2hDLFFBQVEsQ0FBQyxLQUFLLEdBQUcs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LFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDMUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN4QixNQUFNLDRDQUE0QyxDQUFDO0lBQ3ZELENBQUM7SUFHTyxhQUFhLENBQUMsRUFBVSxFQUFFLEVBQVc7UUFFekMsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckMsSUFBSSxFQUFFLEVBQUU7WUFDSixPQUFPO2dCQUNILElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDL0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvQixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEMsQ0FBQztTQUNMO2FBQU07WUFDSCxPQUFPO2dCQUNILElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNqQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDcEM7U0FDSjtJQUNMLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9tZXNoL3RvcG8tbWVzaC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhhc2hUYWJsZSB9IGZyb20gXCIuLi9kYXRhL2hhc2gtdGFibGVcIjtcclxuaW1wb3J0IHsgSW50TWF0cml4IH0gZnJvbSBcIi4uL2RhdGEvaW50LW1hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBSZW5kZXJNZXNoIH0gZnJvbSBcIi4vcmVuZGVyLW1lc2hcIjtcclxuaW1wb3J0IHsgVHJpYW5nbGUyLCBUcmlhbmdsZTMgfSBmcm9tIFwiLi4vZ2VvL3RyaWFuZ2xlXCI7XHJcblxyXG4vLyBhIG1lc2ggd2l0aCB0b3BvbG9naWNhbCBpbmZvcm1hdGlvblxyXG5leHBvcnQgY2xhc3MgVG9wb01lc2ggZXh0ZW5kcyBSZW5kZXJNZXNoIHtcclxuXHJcbiAgICBsYXN0VG91Y2hlZCA9IDA7IC8vIG5lZWRlZCBmb3IgdHJpYW5nbGUgd2Fsa1xyXG4gICAgbmVpZ2hib3JNYXA6IEludE1hdHJpeDtcclxuXHJcbiAgICAvLyBwcml2YXRlIC0+IHNob3VsZCBvbmx5IGJlIHVzZWQgd2l0aCBmYWN0b3J5IG1ldGhvZHNcclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IodmVydENvdW50OiBudW1iZXIsIG5vcm1Db3VudDogbnVtYmVyLCB1dkNvdW50OiBudW1iZXIsIGZhY2VDb3VudDogbnVtYmVyLCB0ZXh0dXJlOiBJbWFnZURhdGEgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBzdXBlcih2ZXJ0Q291bnQsIG5vcm1Db3VudCwgdXZDb3VudCwgZmFjZUNvdW50LCB0ZXh0dXJlKTtcclxuICAgICAgICB0aGlzLm5laWdoYm9yTWFwID0gbmV3IEludE1hdHJpeCh0aGlzLmxpbmtzLmNvdW50KCksIDMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjb3B5RnJvbU1lc2gobWVzaDogUmVuZGVyTWVzaCkgOiBUb3BvTWVzaCB7XHJcbiAgICAgICAgbGV0IHRvcG9NZXNoID0gbmV3IFRvcG9NZXNoKG1lc2gudmVydHMuY291bnQoKSwgbWVzaC5ub3Jtcy5jb3VudCgpLCBtZXNoLnV2cy5jb3VudCgpLCBtZXNoLmxpbmtzLmNvdW50KCkpO1xyXG4gICAgICAgIHRvcG9NZXNoLnZlcnRzID0gbWVzaC52ZXJ0cy5jbG9uZSgpO1xyXG4gICAgICAgIHRvcG9NZXNoLm5vcm1zID0gbWVzaC5ub3Jtcy5jbG9uZSgpO1xyXG4gICAgICAgIHRvcG9NZXNoLnV2cyA9IG1lc2gudXZzLmNsb25lKCk7XHJcbiAgICAgICAgdG9wb01lc2gubGlua3MgPSBtZXNoLmxpbmtzLmNsb25lKCk7XHJcbiAgICAgICAgdG9wb01lc2guc2V0TmVpZ2hib3JNYXAoKTtcclxuICAgICAgICByZXR1cm4gdG9wb01lc2g7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TmVpZ2hib3JNYXAoKSB7XHJcblxyXG4gICAgICAgIC8vIHRoaXMgbWV0aG9kIGZpbGxzIHRoaXMubmVpZ2hib3JNYXAgYWZ0ZXIgZGF0YSBpcyBsb2FkZWRcclxuXHJcbiAgICAgICAgLy8gXHJcbiAgICAgICAgbGV0IGVkZ2VzID0gbmV3IEhhc2hUYWJsZTxbYm9vbGVhbiwgbnVtYmVyLCBudW1iZXJdPigpO1xyXG4gICAgICAgIGxldCBwYWlycyA9IG5ldyBIYXNoVGFibGU8YW55PigpO1xyXG5cclxuICAgICAgICAvLyAxIHwgcGVyIHRyaWFuZ2xlXHJcbiAgICAgICAgdGhpcy5saW5rcy5mb3JFYWNoUm93KChmLCBmYWNlSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGZhY2VFZGdlcyA9IFtcclxuICAgICAgICAgICAgICAgIFtmWzBdLCBmWzFdXSxcclxuICAgICAgICAgICAgICAgIFtmWzFdLCBmWzJdXSxcclxuICAgICAgICAgICAgICAgIFtmWzJdLCBmWzBdXVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBmYWNlRWRnZXMuZm9yRWFjaChlID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoNCwgMSksIG9yaWVudGF0aW9uIGlzIFRydWUgfCBpZiAoMSwgNCksIG9yaWVudGF0aW9uIGlzIEZhbHNlXHJcbiAgICAgICAgICAgICAgICBsZXQgb3JpZW50YXRpb24gPSBlWzBdID4gZVsxXVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHVzZSB0aGlzIG1pbiBtYXggY29uc3RydWN0aW9uIHRvIG9ubHkgc3RvcmUgb25lIGVkZ2UgcGVyIHRyaWFuZ2xlIHBhaXJcclxuICAgICAgICAgICAgICAgIC8vIGxldCBlZGdlOiBbbnVtYmVyLCBudW1iZXJdID0gZS5zb3J0KCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWRnZSA9IG5ldyBJbnQzMkFycmF5KFtNYXRoLm1pbiguLi5lKSwgTWF0aC5tYXgoLi4uZSldKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVkZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZWRnZXMuaGFzKGVkZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3JpZW50YXRpb24sIGZpcnN0IHRyIElELCBzZWNvbmQgdHIgSURcclxuICAgICAgICAgICAgICAgICAgICBlZGdlcy5zZXQoZWRnZSwgW29yaWVudGF0aW9uLCBmYWNlSW5kZXgsIC0xXSk7IFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW4gZWRnZSBtYXRjaCBpcyBtYWRlIVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwibWF0Y2hlZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG90aGVyID0gZWRnZXMuZ2V0KGVkZ2UpITtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmJPcmllbnRhdGlvbiA9IG90aGVyWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuYkluZGV4ID0gb3RoZXJbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgb3RoZXJbMl0gPSBmYWNlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRnZXMuc2V0KGVkZ2UsIG90aGVyKTsgLy8gZWRnZSBpcyBwdXQgYXdheSBhZ2FpbiwgaWYgYW4gZWRnZSBtYXAgaXMgZXZlciBuZWVkZWQuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBuZWlnaGJvdXJzXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXROYihmYWNlSW5kZXgsIGVkZ2UsIG5iSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TmIobmJJbmRleCwgZWRnZSwgZmFjZUluZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdXNlIHRoaXMgaW5mbyB0byBmaWxsIHNlbGYucGFpcnNcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBvcmllbnRhdGlvbiAhPSBvdGhlciBvcmllbnRhdGlvbiwgZWRnZSBpcyAnZ29vZCcgLT4gRmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIC0+IFRydWUsIG9uZSBvZiB0aGUgbmVpZ2hib3VyIHRyaWFuZ2xlcyBuZWVkcyB0byBiZSBmbGlwcGVkXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhaXIgPSBbbmJJbmRleCwgZmFjZUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBwYWlyLnNvcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBwYWlyID0gKE1hdGgubWluKC4uLnBhaXIpLCBNYXRoLm1heCguLi5wYWlyKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZW50YXRpb24gIT0gbmJPcmllbnRhdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFpcnMuc2V0KHBhaXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhaXJzLnNldChwYWlyLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIERvbmUuIEdpdmUgZmVlZGJhY2tcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIC8vIGZvciBwYWlyIGluIHBhaXJzLml0ZW1zKCk6XHJcbiAgICAgICAgLy8gICAgIGlmIG5vdCBwYWlyOiBjb3VudCArPTE7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJudW1iZXIgb2YgJ3dyb25nJyBmYWNlIG5laWdoYm91cnM6IFwiLCBjb3VudClcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgdHJpYW5nbGUgYmFzZWQgb24gYSBVViBwb2ludCBzb21ld2hlcmUgb24gdGhlIG1lc2guXHJcbiAgICAgKiBSZXR1cm5zIC0xIGlmIHRoZSBwb2ludCBpcyBub3Qgb24gdGhlIG1lc2ggVE9ETyBPUiBJRiBUSEUgUEFUSCBIQVMgSE9MRVMgSU4gSVQgVE9ETyBGSVggVEhJUyFcclxuICAgICAqIEBwYXJhbSAge1ZlY3RvcjJ9IHBvaW50XHJcbiAgICAgKiBAcmV0dXJucyB0cmlhbmdsZUluZGV4LCBvciAtMSBpZiBmYWlsdXJlXHJcbiAgICAgKi9cclxuICAgIHdhbGtVVihwb2ludDogVmVjdG9yMikgOiBudW1iZXIge1xyXG5cclxuICAgICAgICAvLyBzdGFydCB3aGVyZSB3ZSBsYXN0IHN0b3BwZWRcclxuICAgICAgICBsZXQgZmFjZUluZGV4ID0gdGhpcy5sYXN0VG91Y2hlZDtcclxuXHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHdlIG5ldmVyIHRha2UgbW9yZSBzdGVwcyB0aGFuIHRyaWFuZ2xlcyBpbiB0aGUgdHJpYW5ndWxhdGlvbi5cclxuICAgICAgICAvLyB0aGlzIHdvdWxkIG1lYW4gc29tZXRoaW5nIHdlbnQgd3JvbmdcclxuICAgICAgICBcclxuICAgICAgICBsZXQgY291bnQgPSB0aGlzLmxpbmtzLmNvdW50KCk7XHJcbiAgICAgICAgZm9yKGxldCBfID0gMCA7IF8gPCBjb3VudDsgXysrKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBpIGRvbnQga25vdyBob3csIGJ1dCBpZiB3ZSBhY2NpZGVudGFsbHkgbGFuZGVkIG91dHNpZGUgb2YgdGhlIG1lc2hcclxuICAgICAgICAgICAgaWYgKGZhY2VJbmRleCA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGogPSAoaSArIDEpICUgMztcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZmFjZSA9IHRoaXMubGlua3MuZ2V0Um93KGZhY2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWRnZTogW251bWJlciwgbnVtYmVyXSA9IFtmYWNlW2ldLCBmYWNlW2pdXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGIgPSB0aGlzLnV2cy5nZXRWZWN0b3IoZWRnZVswXSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgYyA9IHRoaXMudXZzLmdldFZlY3RvcihlZGdlWzFdKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHNpZ24gPSBwb2ludC5zaWduKGIsIGMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzaWduIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2VJbmRleCA9IHRoaXMuZ2V0TmIoZmFjZUluZGV4LCBlZGdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXRzIG91c2lkZSwgcmV0dXJuIC0xXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2VJbmRleCA9PSAtMSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxzZTogZ28gdGhlcmUgaW1taWRpYXRlbHlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RUb3VjaGVkID0gZmFjZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgcmFuIDMgdGltZXMsIHRoZSBwb2ludCBtdXN0IGJlIHdpdGhpbiB0aGUgdHJpYW5nbGVcclxuICAgICAgICAgICAgICAgIGlmIChpID09IDIpIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWNlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZpbmQgdGhlIGZhY2VzIGNsb3Nlc3QgdG8gdGhlIHBvaW50IFxyXG4gICAgLy8gLTEgaWYgdGhlIG1lc2ggZG9lcyBub3QgY29udGFpbiB0cmlhbmdsZXNcclxuICAgIGNsb3Nlc3RGYWNlcyhwb2ludDogVmVjdG9yMykgOiBudW1iZXJbXSB7XHJcblxyXG4gICAgICAgIGxldCBjbG9zZXN0VmVydGV4SWQgPSB0aGlzLnZlcnRzLmNsb3Nlc3RJZChwb2ludCk7XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBmYWNlIGlkcyBjb250YWluaW5nIGNsb3Nlc3RWZXJ0ZXgsIGFsb25nIHdpdGggdGhlaXIgY2VudGVyc1xyXG4gICAgICAgIGxldCBjbG9zZXN0RmFjZXM6IG51bWJlcltdID0gW107ICBcclxuICAgICAgICAvL2xldCBjZW50ZXJzOiBWZWN0b3IzW10gPSBbXVxyXG4gICAgICAgIHRoaXMubGlua3MuZm9yRWFjaFJvdygodHIsIGkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRyLmluY2x1ZGVzKGNsb3Nlc3RWZXJ0ZXhJZCkpIHtcclxuICAgICAgICAgICAgICAgIGNsb3Nlc3RGYWNlcy5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgLy9sZXQgY2VudGVyID0gVmVjdG9yM0FycmF5LmZyb21MaXN0KHRoaXMuZ2V0RmFjZVBvaW50cyhpLCBmYWxzZSkpLmF2ZXJhZ2UoKTtcclxuICAgICAgICAgICAgICAgIC8vY2VudGVycy5wdXNoKGNlbnRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gc2VsZWN0IHRoZSB0cmlhbmdsZSB3aXRoIHRoZSBjbG9zZXN0IGJhcmljZW50ZXJcclxuICAgICAgICByZXR1cm4gY2xvc2VzdEZhY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGVsZXZhdGUocDogVmVjdG9yMikgOiBWZWN0b3IzIHtcclxuXHJcbiAgICAgICAgLy8gJ2VsZXZhdGUnIGEgcG9pbnQgaW4gVVYgc3BhY2UgdG8gdmVydGV4IHNwYWNlIHVzaW5nIGEgYmFyeWNlbnRyaWMgcmVtYXAgICBcclxuICAgICAgICAvLyBmaWd1cmUgb3V0IHdoZXJlIHRoaXMgcG9pbnQgaXMgbG9jYXRlZCBvbiB0aGUgbWVzaFxyXG4gICAgICAgIGxldCBmYWNlID0gdGhpcy53YWxrVVYocCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGZhY2UgPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiZ290IGEgcG9pbnQgbm90IG9uIHRyaWFuZ2xlLi4uXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoMCwwLDApO1xyXG4gICAgICAgIH0gXHJcblxyXG4gICAgICAgIGxldCB0cjMgPSB0aGlzLmdldFRyaWFuZ2xlMyhmYWNlKTtcclxuICAgICAgICBsZXQgdHIyID0gdGhpcy5nZXRUcmlhbmdsZTIoZmFjZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGJhcmkgPSB0cjIudG9CYXJ5Y2VudHJpYyhwKTtcclxuICAgICAgICByZXR1cm4gdHIzLmZyb21CYXJ5Y2VudHJpYyhiYXJpKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZXN0RmFjZShwOiBWZWN0b3IzKSA6IG51bWJlciB7XHJcblxyXG4gICAgICAgIC8vIE5PVEUgdGhpcyBkb2VzbnQgcmVhbGx5IHdvcmsgYWxsIHRoYXQgd2VsbC4uLlxyXG4gICAgICAgIGxldCBmYWNlSWRzID0gdGhpcy5jbG9zZXN0RmFjZXMocCk7XHJcbiAgICAgICAgbGV0IGNsb3Nlc3RQb2ludHMgPSBuZXcgVmVjdG9yM0FycmF5KGZhY2VJZHMubGVuZ3RoKTtcclxuICAgICAgICBmYWNlSWRzLmZvckVhY2goKGlkLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IHRoaXMuZ2V0VHJpYW5nbGUzKGlkKTtcclxuICAgICAgICAgICAgbGV0IGNwID0gdHIuY2xvc2VzdFBvaW50KHApO1xyXG4gICAgICAgICAgICBjbG9zZXN0UG9pbnRzLnNldFZlY3RvcihpLCBjcCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gZmluZCB0aGUgY2xvc2VzdCBjbG9zZXN0IHBvaW50IFxyXG4gICAgICAgIGxldCBpZCA9IGNsb3Nlc3RQb2ludHMuY2xvc2VzdElkKHApO1xyXG4gICAgICAgIHJldHVybiBmYWNlSWRzW2lkXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAnZmxhdHRlbicgYSBwb2ludCBpbiB2ZXJ0ZXggc3BhY2UgdG8gdXYgc3BhY2UgdXNpbmcgYSBiYXJ5Y2VudHJpYyByZW1hcFxyXG4gICAgLy8gTk9URSA6IHRoaXMgaXMgbm90IGV4YWN0bHkgYSAncHJvamVjdCB0byBjbG9zZXN0IHRyaWFuZ2xlJywgc29tZXRoaW5nIGxpa2UgdGhhdCB3b3VsZG50IGFsd2F5cyB3b3JrXHJcbiAgICBmbGF0dGVuKHA6IFZlY3RvcjMsIGZhY2U6IG51bWJlcikgOiBWZWN0b3IyIHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdHIzID0gdGhpcy5nZXRUcmlhbmdsZTMoZmFjZSk7XHJcbiAgICAgICAgbGV0IHRyMiA9IHRoaXMuZ2V0VHJpYW5nbGUyKGZhY2UpO1xyXG5cclxuICAgICAgICBsZXQgYmFyaSA9IHRyMy50b0JhcnljZW50cmljKHApO1xyXG4gICAgICAgIHJldHVybiB0cjIuZnJvbUJhcnljZW50cmljKGJhcmkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBjb21ib1xyXG4gICAgZmxhdHRlbkNsb3Nlc3RQb2ludChwOiBWZWN0b3IzKSB7XHJcblxyXG4gICAgICAgIGxldCBmYWNlID0gdGhpcy5jbG9zZXN0RmFjZShwKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKHAsIGZhY2UpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjbG9zZXN0UG9pbnQocDogVmVjdG9yMykge1xyXG4gICAgICAgIGxldCBmYWNlID0gdGhpcy5jbG9zZXN0RmFjZShwKTtcclxuICAgICAgICBsZXQgdHJpYW5nbGUgPSB0aGlzLmdldFRyaWFuZ2xlMyhmYWNlKTtcclxuICAgICAgICBsZXQgYmFyaSA9IHRyaWFuZ2xlLnRvQmFyeWNlbnRyaWMocCk7XHJcbiAgICAgICAgcmV0dXJuIHRyaWFuZ2xlLmZyb21CYXJ5Y2VudHJpYyhiYXJpKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGdldFRyaWFuZ2xlMihpZDogbnVtYmVyKSA6IFRyaWFuZ2xlMiB7XHJcblxyXG4gICAgICAgIGxldCBwID0gdGhpcy5nZXRGYWNlUG9pbnRzKGlkLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFRyaWFuZ2xlMihwWzBdLCBwWzFdLCBwWzJdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VHJpYW5nbGUzKGlkOiBudW1iZXIpIDogVHJpYW5nbGUzIHtcclxuXHJcbiAgICAgICAgbGV0IHAgPSB0aGlzLmdldEZhY2VQb2ludHMoaWQsIGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFRyaWFuZ2xlMyhwWzBdLCBwWzFdLCBwWzJdKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzZXROYihmYWNlSW5kZXg6IG51bWJlciwgY29tbW9uRWRnZTogSW50MzJBcnJheSwgbmJJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMCA7IGogPCAzOyBqKyspIHtcclxuICAgICAgICAgICAgaWYgKCFjb21tb25FZGdlLmluY2x1ZGVzKHRoaXMubGlua3MuZ2V0KGZhY2VJbmRleCwgaikpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5laWdoYm9yTWFwLnNldChmYWNlSW5kZXgsIGosIG5iSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpbmtzLmdldFJvdyhmYWNlSW5kZXgpKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb21tb25FZGdlKTtcclxuICAgICAgICB0aHJvdyBcInRoZXNlIGFyZSBub3QgYWN0dWFsbHkgbmVpZ2hib3JzIVwiO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldE5iKGZhY2VJbmRleDogbnVtYmVyLCBjb21tb25FZGdlOiBJbnQzMkFycmF5IHwgW251bWJlciwgbnVtYmVyXSApIDogbnVtYmVyIHtcclxuICAgICAgICBmb3IobGV0IGogPSAwIDsgaiA8IDM7IGorKykge1xyXG4gICAgICAgICAgICBpZiAoIWNvbW1vbkVkZ2UuaW5jbHVkZXModGhpcy5saW5rcy5nZXQoZmFjZUluZGV4LCBqKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5laWdoYm9yTWFwLmdldChmYWNlSW5kZXgsIGopO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmxpbmtzLmdldFJvdyhmYWNlSW5kZXgpKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb21tb25FZGdlKTtcclxuICAgICAgICB0aHJvdyBcImNvbW1vbiBlZGdlIGRvZXMgbm90IG1hdGNoIHRyaWFuZ2xlIGluZGV4IVwiO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldEZhY2VQb2ludHModHI6IG51bWJlciwgdXY6IGJvb2xlYW4pIDogW2FueSwgYW55LCBhbnldIHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcG9pbnRJZHMgPSB0aGlzLmxpbmtzLmdldFJvdyh0cik7XHJcbiAgICAgICAgaWYgKHV2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV2cy5nZXRWZWN0b3IocG9pbnRJZHNbMF0pLFxyXG4gICAgICAgICAgICAgICAgdGhpcy51dnMuZ2V0VmVjdG9yKHBvaW50SWRzWzFdKSxcclxuICAgICAgICAgICAgICAgIHRoaXMudXZzLmdldFZlY3Rvcihwb2ludElkc1syXSksXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVydHMuZ2V0VmVjdG9yKHBvaW50SWRzWzBdKSxcclxuICAgICAgICAgICAgICAgIHRoaXMudmVydHMuZ2V0VmVjdG9yKHBvaW50SWRzWzFdKSxcclxuICAgICAgICAgICAgICAgIHRoaXMudmVydHMuZ2V0VmVjdG9yKHBvaW50SWRzWzJdKSxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0gICBcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/mesh/topo-mesh.ts\n");

/***/ }),

/***/ "./src/render/camera.ts":
/*!******************************!*\
  !*** ./src/render/camera.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Camera\": () => /* binding */ Camera\n/* harmony export */ });\n/* harmony import */ var _geo_plane__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geo/plane */ \"./src/geo/plane.ts\");\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/math */ \"./src/math/math.ts\");\n/* harmony import */ var _math_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/matrix */ \"./src/math/matrix.ts\");\n/* harmony import */ var _math_ray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/ray */ \"./src/math/ray.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n// author : Jos Feenstra\r\n// purpose : contain all logic regarding \r\n\r\n\r\n\r\n\r\n\r\nclass Camera {\r\n    constructor(canvas, z_offset = 1, canMove = false) {\r\n        this.angleAlpha = 0; // rotation x \r\n        this.angleBeta = 0; // rotation y\r\n        this.mousePos = _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector2.zero();\r\n        // camera matrix properties\r\n        this.fov = 20. * Math.PI / 100.;\r\n        this.zFar = 10000.;\r\n        this.zNear = 0.1;\r\n        // other consts\r\n        this.speed = 1;\r\n        this.worldPlane = _geo_plane__WEBPACK_IMPORTED_MODULE_0__.Plane.WorldXY();\r\n        this.canMove = canMove;\r\n        this.pos = new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 0, 0);\r\n        this.z_offset = -z_offset;\r\n        this.offset = new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 0, -z_offset);\r\n        this.updateMatrices(canvas);\r\n    }\r\n    update(state) {\r\n        this.updateControls(state);\r\n        this.updateMatrices(state.canvas);\r\n        this.updateClick(state);\r\n        if (state.IsKeyPressed(\"p\")) {\r\n            console.log(this.pos);\r\n            console.log(this.offset);\r\n            console.log(\"speed is now: \" + this.speed);\r\n        }\r\n    }\r\n    updateMatrices(canvas) {\r\n        this.worldMatrix = this.getWorldMatrix();\r\n        this.projectMatrix = this.getProjectionMatrix(canvas);\r\n        this.totalMatrix = this.worldMatrix.multiplied(this.projectMatrix);\r\n    }\r\n    lookat(position, target) {\r\n        // set matrices to the thing\r\n        let matrix = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newLookAt(position, target, this.worldPlane.khat);\r\n    }\r\n    updateClick(state) {\r\n        // todo\r\n    }\r\n    updateControls(state) {\r\n        let deltaScroll = state.scrollValue * 1.2;\r\n        this.offset.z = this.z_offset - deltaScroll;\r\n        if (state.IsKeyPressed(\"Shift\")) {\r\n            this.speed *= 2;\r\n        }\r\n        if (state.IsKeyPressed(\"Control\")) {\r\n            this.speed = Math.max(this.speed * 0.5, 0.1);\r\n        }\r\n        // deal with mouse\r\n        let prevPos = this.mousePos.clone();\r\n        this.mousePos = state.mousePos.clone();\r\n        let delta = prevPos.clone().sub(this.mousePos);\r\n        this.getMouseWorldRay(state.canvas.width, state.canvas.height);\r\n        if (state.mouseRightDown) {\r\n            this.angleAlpha = _math_math__WEBPACK_IMPORTED_MODULE_1__.GMath.clamp(this.angleAlpha + delta.y * 0.01, 0, Math.PI);\r\n            this.angleBeta += delta.x * -0.01;\r\n        }\r\n        function relativeUnitY(angle) {\r\n            let m = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newZRotation(angle);\r\n            return m.multiplyVector(_math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3.unitY());\r\n        }\r\n        function relativeUnitX(angle) {\r\n            let m = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newZRotation(angle);\r\n            return m.multiplyVector(_math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3.unitX());\r\n        }\r\n        if (!this.canMove) {\r\n            return;\r\n        }\r\n        if (state.IsKeyDown(\"s\"))\r\n            this.pos.add(relativeUnitY(-this.angleBeta).scale(0.01 * this.speed));\r\n        if (state.IsKeyDown(\"w\"))\r\n            this.pos.add(relativeUnitY(-this.angleBeta).scale(-0.01 * this.speed));\r\n        if (state.IsKeyDown(\"a\"))\r\n            this.pos.add(relativeUnitX(-this.angleBeta).scale(0.01 * this.speed));\r\n        if (state.IsKeyDown(\"d\"))\r\n            this.pos.add(relativeUnitX(-this.angleBeta).scale(-0.01 * this.speed));\r\n        if (state.IsKeyDown(\"q\"))\r\n            this.pos.z += 0.01 * this.speed;\r\n        if (state.IsKeyDown(\"e\"))\r\n            this.pos.z -= 0.01 * this.speed;\r\n    }\r\n    getCameraPoint() {\r\n        return this.worldMatrix.inverse().multiplyVector(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 0, 0));\r\n    }\r\n    getMouseWorldRay(canvasWidth, canvasHeight) {\r\n        // get a ray from origin through mousepos \r\n        // mouse unit screen position: \r\n        //       -------------- -0.5\r\n        //       |            |\r\n        //       |      .(0,0)|\r\n        //       |            | \r\n        //       -------------- 0.5\r\n        //     -0.72        0.72     \r\n        //    (0.72 = 0.5 * aspect)\r\n        // \r\n        let size = 0.5; // size indicator of the fustrum\r\n        let mp = this.mousePos;\r\n        let aspect = canvasWidth / canvasHeight;\r\n        let mouseUnitX = (-size + (mp.x / canvasWidth)) * aspect;\r\n        let mouseUnitY = -size + (mp.y / canvasHeight);\r\n        let f = size / Math.tan(this.fov / 2); // focal length \r\n        let invWorld = this.worldMatrix.inverse();\r\n        let origin = invWorld.multiplyVector(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 0, 0));\r\n        // TODO instead of doing this, just extract the x, y, and z columns of invWorld \r\n        let iDestiny = invWorld.multiplyVector(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3(1, 0, 0));\r\n        let jDestiny = invWorld.multiplyVector(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 1, 0));\r\n        let kDestiny = invWorld.multiplyVector(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 0, -1));\r\n        let ihat = iDestiny.sub(origin).normalize();\r\n        let jhat = jDestiny.sub(origin).normalize();\r\n        let khat = kDestiny.sub(origin).normalize();\r\n        let screenPoint = origin\r\n            .added(khat.scaled(f))\r\n            .add(ihat.scaled(mouseUnitX))\r\n            .add(jhat.scaled(-mouseUnitY));\r\n        return _math_ray__WEBPACK_IMPORTED_MODULE_3__.Ray.fromPoints(origin, screenPoint);\r\n    }\r\n    getWorldMatrix() {\r\n        let offset = this.offset;\r\n        let angleA = this.angleAlpha;\r\n        let angleB = this.angleBeta;\r\n        // translate so z means 'up'\r\n        let yzFlip = new _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4([\r\n            1, 0, 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 0, 1,\r\n        ]);\r\n        // translated to fit screen\r\n        let position = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newTranslation(this.pos.x, this.pos.y, this.pos.z);\r\n        let mOffset = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newTranslation(offset.x, offset.y, offset.z);\r\n        // rotated by user\r\n        let x_rotation = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newXRotation(angleA);\r\n        let z_rotation = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newZRotation(angleB);\r\n        let rotation = z_rotation.multiply(x_rotation);\r\n        // let transform = mOffset.multiply(rotation).multiply(position);\r\n        let transform = position.multiply(rotation).multiply(mOffset);\r\n        return transform;\r\n    }\r\n    getProjectionMatrix(canvas) {\r\n        // aspects\r\n        let aspect = canvas.width / canvas.height; // note: this should be constant\r\n        // let z_plane = -1. / Math.tan(pi / 8.);        \r\n        // projection to screen\r\n        // let projection = Matrix4.newOrthographic(-1, 1, -1, 1, 0.1, 0.1);\r\n        let projection = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newPerspective(this.fov, aspect, this.zNear, this.zFar);\r\n        return projection;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci9jYW1lcmEudHM/YmRiMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDQSx3QkFBd0I7QUFDeEIseUNBQXlDO0FBSUo7QUFDQTtBQUNJO0FBQ1A7QUFDZTtBQUcxQyxNQUFNLE1BQU07SUEyQmYsWUFBWSxNQUF5QixFQUFFLFFBQVEsR0FBRyxDQUFDLEVBQUUsT0FBTyxHQUFDLEtBQUs7UUF0QmxFLGVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxjQUFjO1FBQzlCLGNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxhQUFhO1FBQzVCLGFBQVEsR0FBRyxzREFBWSxFQUFFLENBQUM7UUFFMUIsMkJBQTJCO1FBQzNCLFFBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDM0IsU0FBSSxHQUFHLE1BQU0sQ0FBQztRQUNkLFVBQUssR0FBRyxHQUFHLENBQUM7UUFFWixlQUFlO1FBQ2YsVUFBSyxHQUFHLENBQUMsQ0FBQztRQUVWLGVBQVUsR0FBRyxxREFBYSxFQUFFLENBQUM7UUFZekIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFFdkIsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUM5QixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsUUFBUSxDQUFDO1FBQzFCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxpREFBTyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMxQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxNQUFNLENBQUMsS0FBaUI7UUFDcEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsY0FBYyxD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QUFDO1lBQ3BDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyx1REFBYSxFQUFFLENBQUMsQ0FBQztRQUM3QyxDQUFDO1FBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDZixPQUFPO1NBQ1Y7UUFFRCxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzFFLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUM7WUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMzRSxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzFFLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUM7WUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMzRSxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFD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Q0FBQyxnQ0FBZ0M7UUFFM0UsaURBQWlEO1FBRWpELHVCQUF1QjtRQUN2QixvRUFBb0U7UUFDcEUsSUFBSSxVQUFVLEdBQUcsZ0VBQXNCLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakYsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL3JlbmRlci9jYW1lcmEudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8gYXV0aG9yIDogSm9zIEZlZW5zdHJhXHJcbi8vIHB1cnBvc2UgOiBjb250YWluIGFsbCBsb2dpYyByZWdhcmRpbmcgXHJcblxyXG5pbXBvcnQgeyBub3JtIH0gZnJvbSBcIkB0ZW5zb3JmbG93L3RmanNcIjtcclxuaW1wb3J0IHsgTGluZUFycmF5IH0gZnJvbSBcIi4uL21lc2gvbGluZS1hcnJheVwiO1xyXG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuLi9nZW8vcGxhbmVcIjtcclxuaW1wb3J0IHsgR01hdGggfSBmcm9tIFwiLi4vbWF0aC9tYXRoXCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL21hdGgvcmF5XCI7XHJcbmltcG9ydCB7IFZlY3RvcjIsIFZlY3RvcjMgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIlxyXG5pbXBvcnQgeyBJbnB1dFN0YXRlIH0gZnJvbSBcIi4uL3N5c3RlbS9pbnB1dC1zdGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XHJcblxyXG4gICAgcG9zOiBWZWN0b3IzO1xyXG4gICAgb2Zmc2V0OiBWZWN0b3IzOyAvLyBvZmZzZXQgZnJvbSByb3RhdGlvbiBjZW50ZXJcclxuICAgIHpfb2Zmc2V0OiBudW1iZXI7XHJcbiAgICBhbmdsZUFscGhhID0gMDsgLy8gcm90YXRpb24geCBcclxuICAgIGFuZ2xlQmV0YSA9IDA7IC8vIHJvdGF0aW9uIHlcclxuICAgIG1vdXNlUG9zID0gVmVjdG9yMi56ZXJvKCk7XHJcblxyXG4gICAgLy8gY2FtZXJhIG1hdHJpeCBwcm9wZXJ0aWVzXHJcbiAgICBmb3YgPSAyMC4gKiBNYXRoLlBJIC8gMTAwLjtcclxuICAgIHpGYXIgPSAxMDAwMC47XHJcbiAgICB6TmVhciA9IDAuMTtcclxuXHJcbiAgICAvLyBvdGhlciBjb25zdHNcclxuICAgIHNwZWVkID0gMTtcclxuXHJcbiAgICB3b3JsZFBsYW5lID0gUGxhbmUuV29ybGRYWSgpO1xyXG4gICAgXHJcbiAgICAvLyAhIG1lYW5zOiBkb250IHdvcnJ5LCB0aGVzZSB3aWxsIGJlIHNldCBpbiB0aGUgY29uc3RydWN0b3JcclxuICAgIHRvdGFsTWF0cml4ITogTWF0cml4NDtcclxuICAgIHdvcmxkTWF0cml4ITogTWF0cml4NDtcclxuICAgIHByb2plY3RNYXRyaXghOiBNYXRyaXg0OyAgICBcclxuXHJcbiAgICAvLyBzZXR0aW5nc1xyXG4gICAgY2FuTW92ZTogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCB6X29mZnNldCA9IDEsIGNhbk1vdmU9ZmFsc2UpIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNhbk1vdmUgPSBjYW5Nb3ZlO1xyXG5cclxuICAgICAgICB0aGlzLnBvcyA9IG5ldyBWZWN0b3IzKDAsMCwwKTtcclxuICAgICAgICB0aGlzLnpfb2Zmc2V0ID0gLXpfb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gbmV3IFZlY3RvcjMoMCwwLCAtel9vZmZzZXQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTWF0cmljZXMoY2FudmFzKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoc3RhdGU6IElucHV0U3RhdGUpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xzKHN0YXRlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1hdHJpY2VzKHN0YXRlLmNhbnZhcyk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDbGljayhzdGF0ZSk7XHJcblxyXG4gICAgICAgIGlmKHN0YXRlLklzS2V5UHJlc3NlZChcInBcIikpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5wb3MpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm9mZnNldCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3BlZWQgaXMgbm93OiBcIiArIHRoaXMuc3BlZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNYXRyaWNlcyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy53b3JsZE1hdHJpeCA9IHRoaXMuZ2V0V29ybGRNYXRyaXgoKTtcclxuICAgICAgICB0aGlzLnByb2plY3RNYXRyaXggPSB0aGlzLmdldFByb2plY3Rpb25NYXRyaXgoY2FudmFzKTtcclxuICAgICAgICB0aGlzLnRvdGFsTWF0cml4ID0gdGhpcy53b3JsZE1hdHJpeC5tdWx0aXBsaWVkKHRoaXMucHJvamVjdE1hdHJpeClcclxuICAgIH1cclxuXHJcbiAgICBsb29rYXQocG9zaXRpb246IFZlY3RvcjMsIHRhcmdldDogVmVjdG9yMykge1xyXG4gICAgICAgIC8vIHNldCBtYXRyaWNlcyB0byB0aGUgdGhpbmdcclxuICAgICAgICBsZXQgbWF0cml4ID0gTWF0cml4NC5uZXdMb29rQXQocG9zaXRpb24sIHRhcmdldCwgdGhpcy53b3JsZFBsYW5lLmtoYXQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNsaWNrKHN0YXRlOiBJbnB1dFN0YXRlKSB7XHJcbiAgICAgICAgLy8gdG9kb1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ29udHJvbHMoc3RhdGU6IElucHV0U3RhdGUpIHtcclxuXHJcbiAgICAgICAgbGV0IGRlbHRhU2Nyb2xsID0gc3RhdGUuc2Nyb2xsVmFsdWUgKiAxLjI7XHJcblxyXG4gICAgICAgIHRoaXMub2Zmc2V0LnogPSB0aGlzLnpfb2Zmc2V0IC0gZGVsdGFTY3JvbGw7XHJcbiAgICAgICAgaWYgKHN0YXRlLklzS2V5UHJlc3NlZChcIlNoaWZ0XCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlZWQgKj0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXRlLklzS2V5UHJlc3NlZChcIkNvbnRyb2xcIikpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGVlZCA9IE1hdGgubWF4KHRoaXMuc3BlZWQgKiAwLjUsIDAuMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZWFsIHdpdGggbW91c2VcclxuICAgICAgICBsZXQgcHJldlBvcyA9IHRoaXMubW91c2VQb3MuY2xvbmUoKTtcclxuICAgICAgICB0aGlzLm1vdXNlUG9zID0gc3RhdGUubW91c2VQb3MuY2xvbmUoKTtcclxuICAgICAgICBsZXQgZGVsdGEgPSBwcmV2UG9zLmNsb25lKCkuc3ViKHRoaXMubW91c2VQb3MpO1xyXG5cclxuICAgICAgICB0aGlzLmdldE1vdXNlV29ybGRSYXkoc3RhdGUuY2FudmFzLndpZHRoLCBzdGF0ZS5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgaWYgKHN0YXRlLm1vdXNlUmlnaHREb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5nbGVBbHBoYSA9IEdNYXRoLmNsYW1wKHRoaXMuYW5nbGVBbHBoYSArIGRlbHRhLnkgKiAwLjAxLCAwLCBNYXRoLlBJKTtcclxuICAgICAgICAgICAgdGhpcy5hbmdsZUJldGEgKz0gZGVsdGEueCAqIC0wLjAxO1xyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVsYXRpdmVVbml0WShhbmdsZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGxldCBtID0gTWF0cml4NC5uZXdaUm90YXRpb24oYW5nbGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbS5tdWx0aXBseVZlY3RvcihWZWN0b3IzLnVuaXRZKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVsYXRpdmVVbml0WChhbmdsZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGxldCBtID0gTWF0cml4NC5uZXdaUm90YXRpb24oYW5nbGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbS5tdWx0aXBseVZlY3RvcihWZWN0b3IzLnVuaXRYKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNhbk1vdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0YXRlLklzS2V5RG93bihcInNcIikpXHJcbiAgICAgICAgICAgIHRoaXMucG9zLmFkZChyZWxhdGl2ZVVuaXRZKC10aGlzLmFuZ2xlQmV0YSkuc2NhbGUoMC4wMSAqIHRoaXMuc3BlZWQpKTtcclxuICAgICAgICBpZiAoc3RhdGUuSXNLZXlEb3duKFwid1wiKSlcclxuICAgICAgICAgICAgdGhpcy5wb3MuYWRkKHJlbGF0aXZlVW5pdFkoLXRoaXMuYW5nbGVCZXRhKS5zY2FsZSgtMC4wMSAqIHRoaXMuc3BlZWQpKTsgICAgICAgICAgIFxyXG4gICAgICAgIGlmIChzdGF0ZS5Jc0tleURvd24oXCJhXCIpKVxyXG4gICAgICAgICAgICB0aGlzLnBvcy5hZGQocmVsYXRpdmVVbml0WCgtdGhpcy5hbmdsZUJldGEpLnNjYWxlKDAuMDEgKiB0aGlzLnNwZWVkKSk7XHJcbiAgICAgICAgaWYgKHN0YXRlLklzS2V5RG93bihcImRcIikpXHJcbiAgICAgICAgICAgIHRoaXMucG9zLmFkZChyZWxhdGl2ZVVuaXRYKC10aGlzLmFuZ2xlQmV0YSkuc2NhbGUoLTAuMDEgKiB0aGlzLnNwZWVkKSk7XHJcbiAgICAgICAgaWYgKHN0YXRlLklzS2V5RG93bihcInFcIikpXHJcbiAgICAgICAgICAgIHRoaXMucG9zLnogKz0gMC4wMSAqIHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgaWYgKHN0YXRlLklzS2V5RG93bihcImVcIikpXHJcbiAgICAgICAgICAgIHRoaXMucG9zLnogLT0gMC4wMSAqIHRoaXMuc3BlZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FtZXJhUG9pbnQoKSA6IFZlY3RvcjMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndvcmxkTWF0cml4LmludmVyc2UoKS5tdWx0aXBseVZlY3RvcihuZXcgVmVjdG9yMygwLDAsMCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1vdXNlV29ybGRSYXkoY2FudmFzV2lkdGg6IG51bWJlciwgY2FudmFzSGVpZ2h0OiBudW1iZXIpIDogUmF5IHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBnZXQgYSByYXkgZnJvbSBvcmlnaW4gdGhyb3VnaCBtb3VzZXBvcyBcclxuXHJcbiAgICAgICAgLy8gbW91c2UgdW5pdCBzY3JlZW4gcG9zaXRpb246IFxyXG4gICAgICAgIC8vICAgICAgIC0tLS0tLS0tLS0tLS0tIC0wLjVcclxuICAgICAgICAvLyAgICAgICB8ICAgICAgICAgICAgfFxyXG4gICAgICAgIC8vICAgICAgIHwgICAgICAuKDAsMCl8XHJcbiAgICAgICAgLy8gICAgICAgfCAgICAgICAgICAgIHwgXHJcbiAgICAgICAgLy8gICAgICAgLS0tLS0tLS0tLS0tLS0gMC41XHJcbiAgICAgICAgLy8gICAgIC0wLjcyICAgICAgICAwLjcyICAgICBcclxuICAgICAgICAvLyAgICAoMC43MiA9IDAuNSAqIGFzcGVjdClcclxuICAgICAgICAvLyBcclxuXHJcbiAgICAgICAgbGV0IHNpemUgPSAwLjUgLy8gc2l6ZSBpbmRpY2F0b3Igb2YgdGhlIGZ1c3RydW1cclxuICAgICAgICBsZXQgbXAgPSB0aGlzLm1vdXNlUG9zO1xyXG4gICAgICAgIGxldCBhc3BlY3QgPSBjYW52YXNXaWR0aCAvIGNhbnZhc0hlaWdodDtcclxuICAgICAgICBsZXQgbW91c2VVbml0WCA9ICgtc2l6ZSArIChtcC54IC8gY2FudmFzV2lkdGgpKSAqIGFzcGVjdDtcclxuICAgICAgICBsZXQgbW91c2VVbml0WSA9IC1zaXplICsgKG1wLnkgLyBjYW52YXNIZWlnaHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBmID0gc2l6ZSAvIE1hdGgudGFuKHRoaXMuZm92IC8gMik7IC8vIGZvY2FsIGxlbmd0aCBcclxuXHJcbiAgICAgICAgbGV0IGludldvcmxkID0gdGhpcy53b3JsZE1hdHJpeC5pbnZlcnNlKCk7XHJcbiAgICAgICAgbGV0IG9yaWdpbiA9IGludldvcmxkLm11bHRpcGx5VmVjdG9yKG5ldyBWZWN0b3IzKDAsMCwwKSk7XHJcblxyXG4gICAgICAgIC8vIFRPRE8gaW5zdGVhZCBvZiBkb2luZyB0aGlzLCBqdXN0IGV4dHJhY3QgdGhlIHgsIHksIGFuZCB6IGNvbHVtbnMgb2YgaW52V29ybGQgXHJcbiAgICAgICAgbGV0IGlEZXN0aW55ID0gaW52V29ybGQubXVsdGlwbHlWZWN0b3IobmV3IFZlY3RvcjMoMSwwLDApKTtcclxuICAgICAgICBsZXQgakRlc3RpbnkgPSBpbnZXb3JsZC5tdWx0aXBseVZlY3RvcihuZXcgVmVjdG9yMygwLDEsMCkpO1xyXG4gICAgICAgIGxldCBrRGVzdGlueSA9IGludldvcmxkLm11bHRpcGx5VmVjdG9yKG5ldyBWZWN0b3IzKDAsMCwtMSkpO1xyXG5cclxuICAgICAgICBsZXQgaWhhdCA9IGlEZXN0aW55LnN1YihvcmlnaW4pLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIGxldCBqaGF0ID0gakRlc3Rpbnkuc3ViKG9yaWdpbikubm9ybWFsaXplKCk7XHJcbiAgICAgICAgbGV0IGtoYXQgPSBrRGVzdGlueS5zdWIob3JpZ2luKS5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgICAgbGV0IHNjcmVlblBvaW50ID0gb3JpZ2luXHJcbiAgICAgICAgICAgIC5hZGRlZChraGF0LnNjYWxlZChmKSlcclxuICAgICAgICAgICAgLmFkZChpaGF0LnNjYWxlZChtb3VzZVVuaXRYKSlcclxuICAgICAgICAgICAgLmFkZChqaGF0LnNjYWxlZCgtbW91c2VVbml0WSkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIFJheS5mcm9tUG9pbnRzKG9yaWdpbiwgc2NyZWVuUG9pbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdvcmxkTWF0cml4KCkgOiBNYXRyaXg0IHtcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XHJcbiAgICAgICAgbGV0IGFuZ2xlQSA9IHRoaXMuYW5nbGVBbHBoYTtcclxuICAgICAgICBsZXQgYW5nbGVCID0gdGhpcy5hbmdsZUJldGE7XHJcbiAgICBcclxuICAgICAgICAvLyB0cmFuc2xhdGUgc28geiBtZWFucyAndXAnXHJcbiAgICAgICAgbGV0IHl6RmxpcCA9IG5ldyBNYXRyaXg0KFtcclxuICAgICAgICAgICAgMSwwLDAsMCxcclxuICAgICAgICAgICAgMCwwLDEsMCxcclxuICAgICAgICAgICAgMCwxLDAsMCxcclxuICAgICAgICAgICAgMCwwLDAsMSxcclxuICAgICAgICBdKVxyXG5cclxuICAgICAgICAvLyB0cmFuc2xhdGVkIHRvIGZpdCBzY3JlZW5cclxuICAgICAgICBsZXQgcG9zaXRpb24gPSBNYXRyaXg0Lm5ld1RyYW5zbGF0aW9uKHRoaXMucG9zLngsIHRoaXMucG9zLnksIHRoaXMucG9zLnopO1xyXG4gICAgICAgIGxldCBtT2Zmc2V0ID0gTWF0cml4NC5uZXdUcmFuc2xhdGlvbihvZmZzZXQueCwgb2Zmc2V0LnksIG9mZnNldC56KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyByb3RhdGVkIGJ5IHVzZXJcclxuICAgICAgICBsZXQgeF9yb3RhdGlvbiA9IE1hdHJpeDQubmV3WFJvdGF0aW9uKGFuZ2xlQSk7XHJcbiAgICAgICAgbGV0IHpfcm90YXRpb24gPSBNYXRyaXg0Lm5ld1pSb3RhdGlvbihhbmdsZUIpO1xyXG4gICAgICAgIGxldCByb3RhdGlvbiA9IHpfcm90YXRpb24ubXVsdGlwbHkoeF9yb3RhdGlvbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gbGV0IHRyYW5zZm9ybSA9IG1PZmZzZXQubXVsdGlwbHkocm90YXRpb24pLm11bHRpcGx5KHBvc2l0aW9uKTtcclxuICAgIFxyXG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSBwb3NpdGlvbi5tdWx0aXBseShyb3RhdGlvbikubXVsdGlwbHkobU9mZnNldCk7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9qZWN0aW9uTWF0cml4KGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIDogTWF0cml4NCB7XHJcblxyXG4gICAgICAgIC8vIGFzcGVjdHNcclxuICAgICAgICBsZXQgYXNwZWN0ID0gY2FudmFzLndpZHRoIC8gY2FudmFzLmhlaWdodDsgLy8gbm90ZTogdGhpcyBzaG91bGQgYmUgY29uc3RhbnRcclxuXHJcbiAgICAgICAgLy8gbGV0IHpfcGxhbmUgPSAtMS4gLyBNYXRoLnRhbihwaSAvIDguKTsgICAgICAgIFxyXG5cclxuICAgICAgICAvLyBwcm9qZWN0aW9uIHRvIHNjcmVlblxyXG4gICAgICAgIC8vIGxldCBwcm9qZWN0aW9uID0gTWF0cml4NC5uZXdPcnRob2dyYXBoaWMoLTEsIDEsIC0xLCAxLCAwLjEsIDAuMSk7XHJcbiAgICAgICAgbGV0IHByb2plY3Rpb24gPSBNYXRyaXg0Lm5ld1BlcnNwZWN0aXZlKHRoaXMuZm92LCBhc3BlY3QsIHRoaXMuek5lYXIsIHRoaXMuekZhcik7XHJcbiAgICAgICAgcmV0dXJuIHByb2plY3Rpb247XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/camera.ts\n");

/***/ }),

/***/ "./src/render/dot-renderer3.ts":
/*!*************************************!*\
  !*** ./src/render/dot-renderer3.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DotRenderer3\": () => /* binding */ DotRenderer3\n/* harmony export */ });\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderer */ \"./src/render/renderer.ts\");\n// jos feenstra\r\n\r\n\r\nclass DotRenderer3 extends _renderer__WEBPACK_IMPORTED_MODULE_1__.Renderer {\r\n    constructor(gl, radius = 5, color = [1, 1, 1, 1], square = true) {\r\n        // note: I like vertex & fragments to be included in the script itself.\r\n        // when you change vertex or fragment, this class has to deal with it. \r\n        // putting them somewhere else doesnt make sense to me, \r\n        // they are coupled 1 to 1.\r\n        let vertexSource = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        uniform mat4 u_transform;\r\n        uniform vec4 u_color;\r\n        uniform float u_size;\r\n\r\n        attribute vec3 a_vertex;\r\n\r\n        void main() {\r\n            // Set the size of a rendered point.\r\n            gl_PointSize = u_size;\r\n\r\n            // Transform the location of the vertex.\r\n            gl_Position = u_transform * vec4(a_vertex, 1.0);\r\n        }\r\n\r\n        `;\r\n        let fragmentSourceSquare = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        uniform vec4 u_color;\r\n        // vec2 center = vec2(0.5, 0.5);\r\n\r\n        void main() {\r\n            gl_FragColor = u_color;\r\n        }\r\n        `;\r\n        let fragmentSourceRound = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        uniform vec4 u_color;\r\n        vec2 center = vec2(0.5, 0.5);\r\n\r\n        void main() {\r\n            if (distance(center, gl_PointCoord) > 0.5) {\r\n               discard;\r\n            }\r\n            gl_FragColor = u_color;\r\n        }\r\n        `;\r\n        // setup program\r\n        if (square) {\r\n            super(gl, vertexSource, fragmentSourceSquare);\r\n        }\r\n        else {\r\n            super(gl, vertexSource, fragmentSourceRound);\r\n        }\r\n        this.u_transform = gl.getUniformLocation(this.program, \"u_transform\");\r\n        this.u_size = gl.getUniformLocation(this.program, \"u_size\");\r\n        this.u_color = gl.getUniformLocation(this.program, \"u_color\");\r\n        this.color = color;\r\n        this.size = radius;\r\n        this.count = 0;\r\n        // Bind it to ARRAY_BUFFER (think of it as ARRAY_BUFFER = positionBuffer)\r\n        // look up where the vertex data needs to go.\r\n        this.a_position = gl.getAttribLocation(this.program, \"a_vertex\");\r\n        this.a_position_buffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n    }\r\n    set(vectors, speed) {\r\n        let gl = this.gl;\r\n        gl.useProgram(this.program);\r\n        // convert all possible entries to a general entry\r\n        let array = (0,_data_vector_array__WEBPACK_IMPORTED_MODULE_0__.getGeneralFloatMatrix)(vectors);\r\n        // from some other thing\r\n        this.count = array.count();\r\n        // // Bind the position buffer.\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.vertexAttribPointer(this.a_position, array._width, gl.FLOAT, false, 0, 0);\r\n        gl.bufferData(gl.ARRAY_BUFFER, array.data, super.convertDrawSpeed(speed));\r\n    }\r\n    render(gl, matrix) {\r\n        // Tell it to use our program (pair of shaders)\r\n        gl.useProgram(this.program);\r\n        // set uniforms\r\n        // console.log(matrix.data);\r\n        gl.uniformMatrix4fv(this.u_transform, false, matrix.data);\r\n        gl.uniform1f(this.u_size, this.size);\r\n        gl.uniform4f(this.u_color, this.color[0], this.color[1], this.color[2], this.color[3]);\r\n        // // Bind the position buffer.\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.enableVertexAttribArray(this.a_position);\r\n        // Draw the point.\r\n        gl.drawArrays(gl.POINTS, 0, this.count);\r\n    }\r\n    setAndRender(gl, matrix, vectors) {\r\n        this.set(vectors, _renderer__WEBPACK_IMPORTED_MODULE_1__.DrawSpeed.DynamicDraw);\r\n        this.render(gl, matrix);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci9kb3QtcmVuZGVyZXIzLnRzP2IwY2QiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZUFBZTtBQUcwRTtBQUd4QztBQUUxQyxNQUFNLFlBQWEsU0FBUSwrQ0FBUTtJQWN0QyxZQUFZLEVBQXlCLEVBQ2pDLFNBQWdCLENBQUMsRUFDakIsUUFBa0IsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFDM0IsU0FBaUIsSUFBSTtRQUVyQix1RUFBdUU7UUFDdkUsdUVBQXVFO1FBQ3ZFLHdEQUF3RDtRQUN4RCwyQkFBMkI7UUFDM0IsSUFBSSxZQUFZLEdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQWtCMUIsQ0FBQztRQUNGLElBQUksb0JBQW9CLEdBQVc7Ozs7Ozs7Ozs7U0FVbEMsQ0FBQztRQUVGLElBQUksbUJBQW1CLEdBQVc7Ozs7Ozs7Ozs7Ozs7U0FhakMsQ0FBQztRQUVGLGdCQUFnQjtRQUNoQixJQUFJLE1BQU0sRUFBRTtZQUNSLEtBQUssQ0FBQyxFQUFFLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixDQUFDLENBQUM7U0FDakQ7YUFBTTtZQUNILEtBQUssQ0FBQyxFQUFFLEVBQUUsWUFBWSxFQUFFLG1CQUFtQixDQUFDLENBQUM7U0FDaEQ7UUFFRCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGFBQWEsQ0FBRSxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFFLENBQUM7UUFDN0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUUsQ0FBQztRQUUvRCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FB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LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gam9zIGZlZW5zdHJhXHJcblxyXG5pbXBvcnQgeyBGbG9hdE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2Zsb2F0LW1hdHJpeFwiO1xyXG5pbXBvcnQgeyBnZXRHZW5lcmFsRmxvYXRNYXRyaXgsIFZlY3RvcjJBcnJheSwgVmVjdG9yM0FycmF5IH0gZnJvbSBcIi4uL2RhdGEvdmVjdG9yLWFycmF5XCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBEcmF3U3BlZWQsIFJlbmRlcmVyIH0gZnJvbSBcIi4vcmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEb3RSZW5kZXJlcjMgZXh0ZW5kcyBSZW5kZXJlciB7XHJcblxyXG4gICAgLy8gYXR0cmlidXRlICYgdW5pZm9ybSBsb2NhdGlvbnNcclxuICAgIGFfcG9zaXRpb246IG51bWJlcjtcclxuICAgIGFfcG9zaXRpb25fYnVmZmVyOiBXZWJHTEJ1ZmZlcjtcclxuXHJcbiAgICB1X3RyYW5zZm9ybTogV2ViR0xVbmlmb3JtTG9jYXRpb247XHJcbiAgICB1X2NvbG9yOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcclxuICAgIHVfc2l6ZTogV2ViR0xVbmlmb3JtTG9jYXRpb247XHJcblxyXG4gICAgY29sb3I6IG51bWJlcltdO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgY291bnQ6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBcclxuICAgICAgICByYWRpdXM6IG51bWJlciA9NSwgXHJcbiAgICAgICAgY29sb3I6IG51bWJlcltdID0gWzEsMSwxLDFdLCBcclxuICAgICAgICBzcXVhcmU6IGJvb2xlYW49IHRydWUgKSB7XHJcblxyXG4gICAgICAgIC8vIG5vdGU6IEkgbGlrZSB2ZXJ0ZXggJiBmcmFnbWVudHMgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIHNjcmlwdCBpdHNlbGYuXHJcbiAgICAgICAgLy8gd2hlbiB5b3UgY2hhbmdlIHZlcnRleCBvciBmcmFnbWVudCwgdGhpcyBjbGFzcyBoYXMgdG8gZGVhbCB3aXRoIGl0LiBcclxuICAgICAgICAvLyBwdXR0aW5nIHRoZW0gc29tZXdoZXJlIGVsc2UgZG9lc250IG1ha2Ugc2Vuc2UgdG8gbWUsIFxyXG4gICAgICAgIC8vIHRoZXkgYXJlIGNvdXBsZWQgMSB0byAxLlxyXG4gICAgICAgIGxldCB2ZXJ0ZXhTb3VyY2U6IHN0cmluZyA9IGBcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBpbnQ7XHJcbiAgICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gbWF0NCB1X3RyYW5zZm9ybTtcclxuICAgICAgICB1bmlmb3JtIHZlYzQgdV9jb2xvcjtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IHVfc2l6ZTtcclxuXHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzMgYV92ZXJ0ZXg7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbigpIHtcclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBzaXplIG9mIGEgcmVuZGVyZWQgcG9pbnQuXHJcbiAgICAgICAgICAgIGdsX1BvaW50U2l6ZSA9IHVfc2l6ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgbG9jYXRpb24gb2YgdGhlIHZlcnRleC5cclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB1X3RyYW5zZm9ybSAqIHZlYzQoYV92ZXJ0ZXgsIDEuMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBgO1xyXG4gICAgICAgIGxldCBmcmFnbWVudFNvdXJjZVNxdWFyZTogc3RyaW5nID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgdW5pZm9ybSB2ZWM0IHVfY29sb3I7XHJcbiAgICAgICAgLy8gdmVjMiBjZW50ZXIgPSB2ZWMyKDAuNSwgMC41KTtcclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB1X2NvbG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICBsZXQgZnJhZ21lbnRTb3VyY2VSb3VuZDogc3RyaW5nID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgdW5pZm9ybSB2ZWM0IHVfY29sb3I7XHJcbiAgICAgICAgdmVjMiBjZW50ZXIgPSB2ZWMyKDAuNSwgMC41KTtcclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UoY2VudGVyLCBnbF9Qb2ludENvb3JkKSA+IDAuNSkge1xyXG4gICAgICAgICAgICAgICBkaXNjYXJkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIHNldHVwIHByb2dyYW1cclxuICAgICAgICBpZiAoc3F1YXJlKSB7ICAgIFxyXG4gICAgICAgICAgICBzdXBlcihnbCwgdmVydGV4U291cmNlLCBmcmFnbWVudFNvdXJjZVNxdWFyZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3VwZXIoZ2wsIHZlcnRleFNvdXJjZSwgZnJhZ21lbnRTb3VyY2VSb3VuZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVfdHJhbnNmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJ1X3RyYW5zZm9ybVwiKSE7XHJcbiAgICAgICAgdGhpcy51X3NpemUgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcInVfc2l6ZVwiKSE7XHJcbiAgICAgICAgdGhpcy51X2NvbG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJ1X2NvbG9yXCIpITtcclxuXHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHJhZGl1cztcclxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgLy8gQmluZCBpdCB0byBBUlJBWV9CVUZGRVIgKHRoaW5rIG9mIGl0IGFzIEFSUkFZX0JVRkZFUiA9IHBvc2l0aW9uQnVmZmVyKVxyXG4gICAgICAgIC8vIGxvb2sgdXAgd2hlcmUgdGhlIHZlcnRleCBkYXRhIG5lZWRzIHRvIGdvLlxyXG4gICAgICAgIHRoaXMuYV9wb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJhX3ZlcnRleFwiKTtcclxuICAgICAgICB0aGlzLmFfcG9zaXRpb25fYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCkhO1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmFfcG9zaXRpb25fYnVmZmVyKTsgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHNldCh2ZWN0b3JzOiBWZWN0b3IyQXJyYXkgfCBWZWN0b3IzQXJyYXkgfCBWZWN0b3IyW10gfCBWZWN0b3IzW10sIHNwZWVkOiBEcmF3U3BlZWQpIHtcclxuICAgICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgIGdsLnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuXHJcbiAgICAgICAgLy8gY29udmVydCBhbGwgcG9zc2libGUgZW50cmllcyB0byBhIGdlbmVyYWwgZW50cnlcclxuICAgICAgICBsZXQgYXJyYXkgPSBnZXRHZW5lcmFsRmxvYXRNYXRyaXgodmVjdG9ycyk7XHJcblxyXG4gICAgICAgIC8vIGZyb20gc29tZSBvdGhlciB0aGluZ1xyXG4gICAgICAgIHRoaXMuY291bnQgPSBhcnJheS5jb3VudCgpO1xyXG5cclxuICAgICAgICAvLyAvLyBCaW5kIHRoZSBwb3NpdGlvbiBidWZmZXIuXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuYV9wb3NpdGlvbl9idWZmZXIpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX3Bvc2l0aW9uLCBhcnJheS5fd2lkdGgsICBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhcnJheS5kYXRhLCBzdXBlci5jb252ZXJ0RHJhd1NwZWVkKHNwZWVkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIG1hdHJpeDogTWF0cml4NCkge1xyXG5cclxuICAgICAgICAvLyBUZWxsIGl0IHRvIHVzZSBvdXIgcHJvZ3JhbSAocGFpciBvZiBzaGFkZXJzKVxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuXHJcbiAgICAgICAgLy8gc2V0IHVuaWZvcm1zXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cobWF0cml4LmRhdGEpO1xyXG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51X3RyYW5zZm9ybSwgZmFsc2UsIG1hdHJpeC5kYXRhKTtcclxuICAgICAgICBnbC51bmlmb3JtMWYodGhpcy51X3NpemUsIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgZ2wudW5pZm9ybTRmKHRoaXMudV9jb2xvciwgdGhpcy5jb2xvclswXSwgdGhpcy5jb2xvclsxXSwgdGhpcy5jb2xvclsyXSwgdGhpcy5jb2xvclszXSk7XHJcblxyXG4gICAgICAgIC8vIC8vIEJpbmQgdGhlIHBvc2l0aW9uIGJ1ZmZlci5cclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5hX3Bvc2l0aW9uX2J1ZmZlcik7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hX3Bvc2l0aW9uKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBEcmF3IHRoZSBwb2ludC5cclxuICAgICAgICBnbC5kcmF3QXJyYXlzKCBnbC5QT0lOVFMsIDAsIHRoaXMuY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFuZFJlbmRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBtYXRyaXg6IE1hdHJpeDQsIHZlY3RvcnM6IFZlY3RvcjJBcnJheSB8IFZlY3RvcjNBcnJheSB8IFZlY3RvcjJbXSB8IFZlY3RvcjNbXSkge1xyXG4gICAgICAgIHRoaXMuc2V0KHZlY3RvcnMsIERyYXdTcGVlZC5EeW5hbWljRHJhdyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/dot-renderer3.ts\n");

/***/ }),

/***/ "./src/render/line-renderer.ts":
/*!*************************************!*\
  !*** ./src/render/line-renderer.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LineRenderer\": () => /* binding */ LineRenderer\n/* harmony export */ });\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderer */ \"./src/render/renderer.ts\");\n// name:    simple-line-renderer.ts\r\n// author:  Jos Feenstra\r\n// purpose: WebGL based rendering of lines.\r\n\r\nclass LineRenderer extends _renderer__WEBPACK_IMPORTED_MODULE_0__.Renderer {\r\n    constructor(gl, color = [1, 0, 0, 0.5]) {\r\n        // note: I like vertex & fragments to be included in the script itself.\r\n        // when you change vertex or fragment, this class has to deal with it. \r\n        // putting them somewhere else doesnt make sense to me, \r\n        // they are coupled 1 to 1.\r\n        const vs = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        attribute vec4 a_position;\r\n        uniform mat4 u_transform;\r\n        uniform vec4 u_color;\r\n\r\n        void main() {\r\n            gl_Position = u_transform * a_position;\r\n        }\r\n        `;\r\n        const fs = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        uniform vec4 u_color;\r\n\r\n        void main () {\r\n            gl_FragColor = u_color;\r\n        }\r\n        `;\r\n        // setup program    \r\n        super(gl, vs, fs);\r\n        this.u_transform = gl.getUniformLocation(this.program, \"u_transform\");\r\n        this.u_color = gl.getUniformLocation(this.program, \"u_color\");\r\n        // we need 2 buffers \r\n        this.a_position = gl.getAttribLocation(this.program, \"a_position\");\r\n        this.a_position_buffer = gl.createBuffer();\r\n        this.index_buffer = gl.createBuffer();\r\n        // set uniforms which wont change\r\n        gl.useProgram(this.program);\r\n        gl.uniform4f(this.u_color, color[0], color[1], color[2], color[3]);\r\n        this.count = 0;\r\n        this.vertCount = 0;\r\n    }\r\n    set(gl, data, speed = _renderer__WEBPACK_IMPORTED_MODULE_0__.DrawSpeed.StaticDraw) {\r\n        // save how many faces need to be drawn\r\n        gl.useProgram(this.program);\r\n        this.count = data.ids.length;\r\n        this.vertCount = data.verts._width;\r\n        let drawspeed = this.convertDrawSpeed(speed);\r\n        // vertices  \r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.enableVertexAttribArray(this.a_position);\r\n        gl.vertexAttribPointer(this.a_position, this.vertCount, gl.FLOAT, false, 0, 0);\r\n        gl.bufferData(gl.ARRAY_BUFFER, data.verts.data, drawspeed);\r\n        // indices \r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data.ids.buffer, drawspeed);\r\n    }\r\n    render(gl, matrix) {\r\n        // Tell it to use our program (pair of shaders)\r\n        // POINTERS MUST ALSO BE SET, DO EVERYTHING EXCEPT GL.BUFFERDATA\r\n        gl.useProgram(this.program);\r\n        gl.enableVertexAttribArray(this.a_position);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.vertexAttribPointer(this.a_position, this.vertCount, gl.FLOAT, false, 0, 0);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        // set uniforms\r\n        gl.uniformMatrix4fv(this.u_transform, false, matrix.data);\r\n        // Draw the point.\r\n        gl.drawElements(gl.LINES, this.count, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    setAndRender(gl, matrix, data) {\r\n        this.set(gl, data, _renderer__WEBPACK_IMPORTED_MODULE_0__.DrawSpeed.DynamicDraw);\r\n        this.render(gl, matrix);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci9saW5lLXJlbmRlcmVyLnRzP2M1ZWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxtQ0FBbUM7QUFDbkMsd0JBQXdCO0FBQ3hCLDJDQUEyQztBQVNNO0FBRTFDLE1BQU0sWUFBYSxTQUFRLCtDQUFRO0lBU3RDLFlBQVksRUFBeUIsRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxHQUFHLENBQUM7UUFFdEQsdUVBQXVFO1FBQ3ZFLHVFQUF1RTtRQUN2RSx3REFBd0Q7UUFDeEQsMkJBQTJCO1FBQzNCLE1BQU0sRUFBRSxHQUFHOzs7Ozs7Ozs7OztTQVdWLENBQUM7UUFFRixNQUFNLEVBQUUsR0FBRzs7Ozs7Ozs7O1NBU1YsQ0FBQztRQUVGLG9CQUFvQjtRQUNwQixLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGFBQWEsQ0FBRSxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFFLENBQUM7UUFFL0QscUJBQXFCO1FBQ3JCLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFFbkUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUcsQ0FBQztRQUM1QyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUcsQ0FBQztRQUV2QyxpQ0FBaUM7UUFDakMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDNUIsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25FLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVELEdBQUcsQ0FBQyxFQUF5QixFQUFFLElBQWUsRUFBRSxLQUFLLEdBQUcsMkRBQW9CO1FBRXhFLHVDQUF1QztRQUN2QyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTTtRQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQ25DLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUU3QyxhQUFhO1FBQ2IsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3ZELEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDNUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDL0UsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRTNELFdBQVc7UUFDWCxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDMUQsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELE1BQU0sQ0FBQyxFQUF5QixFQUFFLE1BQWU7UUFFN0MsK0NBQStDO1FBQy9DLGdFQUFnRTtRQUNoRSxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUU1QixFQUFFLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzVDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN2RCxFQUFFLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMvRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFMUQsZUFBZTtRQUNmLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFMUQsa0JBQWtCO1FBQ2xCLEVBQUUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVELFlBQVksQ0FBQyxFQUF5QixFQUFFLE1BQWUsRUFBRSxJQUFlO1FBQ3BFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSw0REFBcUIsQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzVCLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9yZW5kZXIvbGluZS1yZW5kZXJlci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIG5hbWU6ICAgIHNpbXBsZS1saW5lLXJlbmRlcmVyLnRzXHJcbi8vIGF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiBXZWJHTCBiYXNlZCByZW5kZXJpbmcgb2YgbGluZXMuXHJcblxyXG5pbXBvcnQgeyBGbG9hdE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2Zsb2F0LW1hdHJpeFwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyQXJyYXksIFZlY3RvcjNBcnJheSB9IGZyb20gXCIuLi9kYXRhL3ZlY3Rvci1hcnJheVwiO1xyXG5pbXBvcnQgeyBSZW5kZXJNZXNoIH0gZnJvbSBcIi4uL21lc2gvcmVuZGVyLW1lc2hcIjtcclxuaW1wb3J0IHsgUG9seWxpbmUgfSBmcm9tIFwiLi4vZ2VvL3BvbHlsaW5lXCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBMaW5lQXJyYXkgfSBmcm9tIFwiLi4vbWVzaC9saW5lLWFycmF5XCI7XHJcbmltcG9ydCB7IERyYXdTcGVlZCwgUmVuZGVyZXIgfSBmcm9tIFwiLi9yZW5kZXJlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIExpbmVSZW5kZXJlciBleHRlbmRzIFJlbmRlcmVyIHtcclxuXHJcbiAgICBhX3Bvc2l0aW9uOiBudW1iZXI7XHJcbiAgICBhX3Bvc2l0aW9uX2J1ZmZlcjogV2ViR0xCdWZmZXI7XHJcbiAgICBpbmRleF9idWZmZXI6IFdlYkdMQnVmZmVyO1xyXG4gICAgdV90cmFuc2Zvcm06IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xyXG4gICAgdV9jb2xvcjogV2ViR0xVbmlmb3JtTG9jYXRpb247XHJcbiAgICBjb3VudDogbnVtYmVyO1xyXG4gICAgdmVydENvdW50OiBudW1iZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBjb2xvciA9IFsxLDAsMCwwLjVdKSB7XHJcblxyXG4gICAgICAgIC8vIG5vdGU6IEkgbGlrZSB2ZXJ0ZXggJiBmcmFnbWVudHMgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIHNjcmlwdCBpdHNlbGYuXHJcbiAgICAgICAgLy8gd2hlbiB5b3UgY2hhbmdlIHZlcnRleCBvciBmcmFnbWVudCwgdGhpcyBjbGFzcyBoYXMgdG8gZGVhbCB3aXRoIGl0LiBcclxuICAgICAgICAvLyBwdXR0aW5nIHRoZW0gc29tZXdoZXJlIGVsc2UgZG9lc250IG1ha2Ugc2Vuc2UgdG8gbWUsIFxyXG4gICAgICAgIC8vIHRoZXkgYXJlIGNvdXBsZWQgMSB0byAxLlxyXG4gICAgICAgIGNvbnN0IHZzID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzQgYV9wb3NpdGlvbjtcclxuICAgICAgICB1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07XHJcbiAgICAgICAgdW5pZm9ybSB2ZWM0IHVfY29sb3I7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbigpIHtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB1X3RyYW5zZm9ybSAqIGFfcG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGNvbnN0IGZzID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgdW5pZm9ybSB2ZWM0IHVfY29sb3I7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIHNldHVwIHByb2dyYW0gICAgXHJcbiAgICAgICAgc3VwZXIoZ2wsIHZzLCBmcyk7XHJcbiAgICAgICAgdGhpcy51X3RyYW5zZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIFwidV90cmFuc2Zvcm1cIikhO1xyXG4gICAgICAgIHRoaXMudV9jb2xvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIFwidV9jb2xvclwiKSE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gd2UgbmVlZCAyIGJ1ZmZlcnMgXHJcbiAgICAgICAgdGhpcy5hX3Bvc2l0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcImFfcG9zaXRpb25cIik7XHJcbiAgXHJcbiAgICAgICAgdGhpcy5hX3Bvc2l0aW9uX2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpITtcclxuICAgICAgICB0aGlzLmluZGV4X2J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpITsgICAgXHJcblxyXG4gICAgICAgIC8vIHNldCB1bmlmb3JtcyB3aGljaCB3b250IGNoYW5nZVxyXG4gICAgICAgIGdsLnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuICAgICAgICBnbC51bmlmb3JtNGYodGhpcy51X2NvbG9yLCBjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdLCBjb2xvclszXSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy52ZXJ0Q291bnQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHNldChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBkYXRhOiBMaW5lQXJyYXksIHNwZWVkID0gRHJhd1NwZWVkLlN0YXRpY0RyYXcpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBzYXZlIGhvdyBtYW55IGZhY2VzIG5lZWQgdG8gYmUgZHJhd25cclxuICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IGRhdGEuaWRzLmxlbmd0aFxyXG4gICAgICAgIHRoaXMudmVydENvdW50ID0gZGF0YS52ZXJ0cy5fd2lkdGg7XHJcbiAgICAgICAgbGV0IGRyYXdzcGVlZCA9IHRoaXMuY29udmVydERyYXdTcGVlZChzcGVlZCk7XHJcblxyXG4gICAgICAgIC8vIHZlcnRpY2VzICBcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5hX3Bvc2l0aW9uX2J1ZmZlcik7XHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hX3Bvc2l0aW9uKTtcclxuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuYV9wb3NpdGlvbiwgdGhpcy52ZXJ0Q291bnQsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGRhdGEudmVydHMuZGF0YSwgZHJhd3NwZWVkKTtcclxuXHJcbiAgICAgICAgLy8gaW5kaWNlcyBcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4X2J1ZmZlcik7XHJcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZGF0YS5pZHMuYnVmZmVyLCBkcmF3c3BlZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBtYXRyaXg6IE1hdHJpeDQpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUZWxsIGl0IHRvIHVzZSBvdXIgcHJvZ3JhbSAocGFpciBvZiBzaGFkZXJzKVxyXG4gICAgICAgIC8vIFBPSU5URVJTIE1VU1QgQUxTTyBCRSBTRVQsIERPIEVWRVJZVEhJTkcgRVhDRVBUIEdMLkJVRkZFUkRBVEFcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hX3Bvc2l0aW9uKTtcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5hX3Bvc2l0aW9uX2J1ZmZlcik7XHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmFfcG9zaXRpb24sIHRoaXMudmVydENvdW50LCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApOyBcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4X2J1ZmZlcik7XHJcblxyXG4gICAgICAgIC8vIHNldCB1bmlmb3Jtc1xyXG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51X3RyYW5zZm9ybSwgZmFsc2UsIG1hdHJpeC5kYXRhKTtcclxuXHJcbiAgICAgICAgLy8gRHJhdyB0aGUgcG9pbnQuXHJcbiAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKGdsLkxJTkVTLCB0aGlzLmNvdW50LCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QW5kUmVuZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIG1hdHJpeDogTWF0cml4NCwgZGF0YTogTGluZUFycmF5KSB7XHJcbiAgICAgICAgdGhpcy5zZXQoZ2wsIGRhdGEsIERyYXdTcGVlZC5EeW5hbWljRHJhdyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/line-renderer.ts\n");

/***/ }),

/***/ "./src/render/mesh-debug-renderer.ts":
/*!*******************************************!*\
  !*** ./src/render/mesh-debug-renderer.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MeshDebugRenderer\": () => /* binding */ MeshDebugRenderer\n/* harmony export */ });\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderer */ \"./src/render/renderer.ts\");\n/* harmony import */ var _line_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./line-renderer */ \"./src/render/line-renderer.ts\");\n/* harmony import */ var _simple_mesh_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./simple-mesh-renderer */ \"./src/render/simple-mesh-renderer.ts\");\n/* harmony import */ var _mesh_normals_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mesh-normals-renderer */ \"./src/render/mesh-normals-renderer.ts\");\n// name:    mesh-renderer.ts\r\n// author:  Jos Feenstra\r\n// purpose: WebGL based rendering of a mesh.\r\n\r\n\r\n\r\n\r\n\r\nclass MeshDebugRenderer {\r\n    constructor(gl, faceColor = [1, 0, 0, 0.25], edgeColor = [1, 0, 0, 0.25]) {\r\n        this.faceRend = new _simple_mesh_renderer__WEBPACK_IMPORTED_MODULE_3__.SimpleMeshRenderer(gl, faceColor);\r\n        this.lineRend = new _line_renderer__WEBPACK_IMPORTED_MODULE_2__.LineRenderer(gl, edgeColor);\r\n        this.normRend = new _mesh_normals_renderer__WEBPACK_IMPORTED_MODULE_4__.NormalRenderer(gl);\r\n    }\r\n    setAndRender(gl, matrix, mesh) {\r\n        this.set(gl, mesh);\r\n        this.render(gl, matrix);\r\n    }\r\n    set(gl, mesh) {\r\n        this.faceRend.setMesh(gl, mesh);\r\n        this.lineRend.set(gl, _mesh_line_array__WEBPACK_IMPORTED_MODULE_0__.LineArray.fromMesh(mesh), _renderer__WEBPACK_IMPORTED_MODULE_1__.DrawSpeed.StaticDraw);\r\n        this.normRend.set(gl, mesh, _renderer__WEBPACK_IMPORTED_MODULE_1__.DrawSpeed.StaticDraw);\r\n    }\r\n    // render 1 image to the screen\r\n    render(gl, matrix) {\r\n        this.faceRend.render(gl, matrix);\r\n        this.lineRend.render(gl, matrix);\r\n        this.normRend.render(gl, matrix);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci9tZXNoLWRlYnVnLXJlbmRlcmVyLnRzP2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsNEJBQTRCO0FBQzVCLHdCQUF3QjtBQUN4Qiw0Q0FBNEM7QUFHRztBQUlFO0FBQ0Y7QUFDYTtBQUNIO0FBRWxELE1BQU0saUJBQWlCO0lBTTFCLFlBQVksRUFBeUIsRUFBRSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxJQUFJLENBQUMsRUFBRSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxJQUFJLENBQUM7UUFDckYsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLHFFQUFrQixDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksd0RBQVksQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDaEQsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLGtFQUFjLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELFlBQVksQ0FBQyxFQUF5QixFQUFFLE1BQWUsRUFBRSxJQUFnQjtRQUNyRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRUQsR0FBRyxDQUFDLEVBQXlCLEVBQUUsSUFBZ0I7UUFDM0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxnRUFBa0IsQ0FBQyxJQUFJLENBQUMsRUFBRSwyREFBb0IsQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsMkRBQW9CLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQsK0JBQStCO0lBQy9CLE1BQU0sQ0FBQyxFQUF5QixFQUFFLE1BQWU7UUFDN0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDckMsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL3JlbmRlci9tZXNoLWRlYnVnLXJlbmRlcmVyLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgbWVzaC1yZW5kZXJlci50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogV2ViR0wgYmFzZWQgcmVuZGVyaW5nIG9mIGEgbWVzaC5cclxuXHJcbmltcG9ydCB7IEludE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2ludC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgTGluZUFycmF5IH0gZnJvbSBcIi4uL21lc2gvbGluZS1hcnJheVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgUmVuZGVyTWVzaCB9IGZyb20gXCIuLi9tZXNoL3JlbmRlci1tZXNoXCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgRHJhd1NwZWVkLCBSZW5kZXJlciB9IGZyb20gXCIuL3JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IExpbmVSZW5kZXJlciB9IGZyb20gXCIuL2xpbmUtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU2ltcGxlTWVzaFJlbmRlcmVyIH0gZnJvbSBcIi4vc2ltcGxlLW1lc2gtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgTm9ybWFsUmVuZGVyZXIgfSBmcm9tIFwiLi9tZXNoLW5vcm1hbHMtcmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZXNoRGVidWdSZW5kZXJlciB7XHJcblxyXG4gICAgZmFjZVJlbmQ6IFNpbXBsZU1lc2hSZW5kZXJlcjtcclxuICAgIGxpbmVSZW5kOiBMaW5lUmVuZGVyZXI7XHJcbiAgICBub3JtUmVuZDogTm9ybWFsUmVuZGVyZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgZmFjZUNvbG9yID0gWzEsMCwwLDAuMjVdLCBlZGdlQ29sb3IgPSBbMSwwLDAsMC4yNV0pIHtcclxuICAgICAgICB0aGlzLmZhY2VSZW5kID0gbmV3IFNpbXBsZU1lc2hSZW5kZXJlcihnbCwgZmFjZUNvbG9yKTtcclxuICAgICAgICB0aGlzLmxpbmVSZW5kID0gbmV3IExpbmVSZW5kZXJlcihnbCwgZWRnZUNvbG9yKTtcclxuICAgICAgICB0aGlzLm5vcm1SZW5kID0gbmV3IE5vcm1hbFJlbmRlcmVyKGdsKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBbmRSZW5kZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgbWF0cml4OiBNYXRyaXg0LCBtZXNoOiBSZW5kZXJNZXNoKSB7XHJcbiAgICAgICAgdGhpcy5zZXQoZ2wsIG1lc2gpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKGdsLCBtYXRyaXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBtZXNoOiBSZW5kZXJNZXNoKSB7XHJcbiAgICAgICAgdGhpcy5mYWNlUmVuZC5zZXRNZXNoKGdsLCBtZXNoKTtcclxuICAgICAgICB0aGlzLmxpbmVSZW5kLnNldChnbCwgTGluZUFycmF5LmZyb21NZXNoKG1lc2gpLCBEcmF3U3BlZWQuU3RhdGljRHJhdyk7XHJcbiAgICAgICAgdGhpcy5ub3JtUmVuZC5zZXQoZ2wsIG1lc2gsIERyYXdTcGVlZC5TdGF0aWNEcmF3KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZW5kZXIgMSBpbWFnZSB0byB0aGUgc2NyZWVuXHJcbiAgICByZW5kZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgbWF0cml4OiBNYXRyaXg0KSB7XHJcbiAgICAgICAgdGhpcy5mYWNlUmVuZC5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5saW5lUmVuZC5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5ub3JtUmVuZC5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/mesh-debug-renderer.ts\n");

/***/ }),

/***/ "./src/render/mesh-normals-renderer.ts":
/*!*********************************************!*\
  !*** ./src/render/mesh-normals-renderer.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NormalRenderer\": () => /* binding */ NormalRenderer\n/* harmony export */ });\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _mesh_render_mesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mesh/render-mesh */ \"./src/mesh/render-mesh.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./renderer */ \"./src/render/renderer.ts\");\n// name:    simple-line-renderer.ts\r\n// author:  Jos Feenstra\r\n// purpose: WebGL based rendering of lines.\r\n\r\n\r\n\r\n\r\n\r\nclass NormalRenderer extends _renderer__WEBPACK_IMPORTED_MODULE_4__.Renderer {\r\n    constructor(gl) {\r\n        // note: I like vertex & fragments to be included in the script itself.\r\n        // when you change vertex or fragment, this class has to deal with it. \r\n        // putting them somewhere else doesnt make sense to me, \r\n        // they are coupled 1 to 1.\r\n        const vs = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        attribute vec4 a_vertex;\r\n        attribute vec4 a_vertex_color;\r\n\r\n        uniform mat4 u_transform;\r\n\r\n        varying vec4 v_color;\r\n\r\n        void main() {\r\n            gl_Position = u_transform * a_vertex;\r\n            v_color = a_vertex_color;\r\n        }\r\n        `;\r\n        const fs = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        varying vec4 v_color;\r\n\r\n        void main () {\r\n            gl_FragColor = v_color;\r\n        }\r\n        `;\r\n        // setup program    \r\n        super(gl, vs, fs);\r\n        this.u_transform = gl.getUniformLocation(this.program, \"u_transform\");\r\n        // we need 2 buffers \r\n        this.a_position = gl.getAttribLocation(this.program, \"a_vertex\");\r\n        this.a_color = gl.getAttribLocation(this.program, \"a_vertex_color\");\r\n        this.a_position_buffer = gl.createBuffer();\r\n        this.a_color_buffer = gl.createBuffer();\r\n        this.index_buffer = gl.createBuffer();\r\n        gl.useProgram(this.program);\r\n        this.count = 0;\r\n        this.vertCount = 0;\r\n        this.scale = 0.4;\r\n    }\r\n    // take a general render mesh, and extract normals\r\n    set(gl, mesh, speed = _renderer__WEBPACK_IMPORTED_MODULE_4__.DrawSpeed.StaticDraw) {\r\n        // save how many verts need to be drawn\r\n        gl.useProgram(this.program);\r\n        let drawspeed = this.convertDrawSpeed(speed);\r\n        this.vertCount = 3;\r\n        let lineverts;\r\n        let normals;\r\n        // different buffer fills based upon normal kind\r\n        let normalKind = mesh.getNormalType();\r\n        if (normalKind == _mesh_render_mesh__WEBPACK_IMPORTED_MODULE_1__.NormalKind.Face) {\r\n            let faceCount = mesh.links.count();\r\n            this.count = faceCount * 2;\r\n            lineverts = new _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array(this.count);\r\n            normals = new _data_vector_array__WEBPACK_IMPORTED_MODULE_0__.Vector3Array(this.count);\r\n            for (let f = 0; f < faceCount; f++) {\r\n                let center = mesh.getFaceVertices(f).average();\r\n                let normal = mesh.norms.getVector(f);\r\n                let i1 = f * 2;\r\n                let i2 = f * 2 + 1;\r\n                lineverts.setVector(i1, center);\r\n                lineverts.setVector(i2, center.add(normal.scaled(this.scale)));\r\n                let color = normal.add(new _math_vector__WEBPACK_IMPORTED_MODULE_2__.Vector3(1, 1, 1).div(2));\r\n                normals.setVector(i1, color);\r\n                normals.setVector(i2, color);\r\n            }\r\n        }\r\n        else if (normalKind == _mesh_render_mesh__WEBPACK_IMPORTED_MODULE_1__.NormalKind.Vertex) {\r\n            console.warn(\"TODO\");\r\n            return;\r\n        }\r\n        else {\r\n            // console.log(\"no normals\");\r\n            this.count = 0;\r\n            return;\r\n        }\r\n        // vertices  \r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.enableVertexAttribArray(this.a_position);\r\n        gl.vertexAttribPointer(this.a_position, this.vertCount, gl.FLOAT, false, 0, 0);\r\n        gl.bufferData(gl.ARRAY_BUFFER, lineverts.data, drawspeed);\r\n        // normals\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_color_buffer);\r\n        gl.enableVertexAttribArray(this.a_color);\r\n        gl.vertexAttribPointer(this.a_color, this.vertCount, gl.FLOAT, false, 0, 0);\r\n        gl.bufferData(gl.ARRAY_BUFFER, normals.data, drawspeed);\r\n        // indices \r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, (0,_mesh_line_array__WEBPACK_IMPORTED_MODULE_3__.getDefaultIndices)(this.count), drawspeed);\r\n    }\r\n    render(gl, matrix) {\r\n        // Tell it to use our program (pair of shaders)\r\n        // POINTERS MUST ALSO BE SET, DO EVERYTHING EXCEPT GL.BUFFERDATA\r\n        gl.useProgram(this.program);\r\n        gl.enableVertexAttribArray(this.a_position);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.vertexAttribPointer(this.a_position, this.vertCount, gl.FLOAT, false, 0, 0);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        // set uniforms\r\n        gl.uniformMatrix4fv(this.u_transform, false, matrix.data);\r\n        // Draw the point.\r\n        gl.drawElements(gl.LINES, this.count, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci9tZXNoLW5vcm1hbHMtcmVuZGVyZXIudHM/YWMxZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxtQ0FBbUM7QUFDbkMsd0JBQXdCO0FBQ3hCLDJDQUEyQztBQUd1QjtBQUNMO0FBR3BCO0FBQ3lCO0FBQ2pCO0FBRTFDLE1BQU0sY0FBZSxTQUFRLCtDQUFRO0lBY3hDLFlBQVksRUFBeUI7UUFFakMsdUVBQXVFO1FBQ3ZFLHVFQUF1RTtRQUN2RSx3REFBd0Q7UUFDeEQsMkJBQTJCO1FBQzNCLE1BQU0sRUFBRSxHQUFHOzs7Ozs7Ozs7Ozs7Ozs7U0FlVixDQUFDO1FBRUYsTUFBTSxFQUFFLEdBQUc7Ozs7Ozs7OztTQVNWLENBQUM7UUFFRixvQkFBb0I7UUFDcEIsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUUsQ0FBQztRQUV2RSxxQkFBcUI7UUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNqRSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFFcEUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUcsQ0FBQztRQUM1QyxJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUcsQ0FBQztRQUN6QyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUcsQ0FBQztRQUV2QyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENB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SSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMvRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFMUQsZUFBZTtRQUNmLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFMUQsa0JBQWtCO1FBQ2xCLEVBQUUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL3JlbmRlci9tZXNoLW5vcm1hbHMtcmVuZGVyZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBuYW1lOiAgICBzaW1wbGUtbGluZS1yZW5kZXJlci50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogV2ViR0wgYmFzZWQgcmVuZGVyaW5nIG9mIGxpbmVzLlxyXG5cclxuaW1wb3J0IHsgRmxvYXRNYXRyaXggfSBmcm9tIFwiLi4vZGF0YS9mbG9hdC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgVmVjdG9yMkFycmF5LCBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgTm9ybWFsS2luZCwgUmVuZGVyTWVzaCB9IGZyb20gXCIuLi9tZXNoL3JlbmRlci1tZXNoXCI7XHJcbmltcG9ydCB7IFBvbHlsaW5lIH0gZnJvbSBcIi4uL2dlby9wb2x5bGluZVwiO1xyXG5pbXBvcnQgeyBNYXRyaXg0IH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgZ2V0RGVmYXVsdEluZGljZXMsIExpbmVBcnJheSB9IGZyb20gXCIuLi9tZXNoL2xpbmUtYXJyYXlcIjtcclxuaW1wb3J0IHsgRHJhd1NwZWVkLCBSZW5kZXJlciB9IGZyb20gXCIuL3JlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTm9ybWFsUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJlciB7XHJcblxyXG4gICAgYV9wb3NpdGlvbjogbnVtYmVyO1xyXG4gICAgYV9wb3NpdGlvbl9idWZmZXI6IFdlYkdMQnVmZmVyO1xyXG4gICAgaW5kZXhfYnVmZmVyOiBXZWJHTEJ1ZmZlcjtcclxuXHJcbiAgICB1X3RyYW5zZm9ybTogV2ViR0xVbmlmb3JtTG9jYXRpb247XHJcblxyXG4gICAgY291bnQ6IG51bWJlcjtcclxuICAgIHZlcnRDb3VudDogbnVtYmVyO1xyXG4gICAgYV9jb2xvcl9idWZmZXI6IFdlYkdMQnVmZmVyO1xyXG4gICAgYV9jb2xvcjogbnVtYmVyO1xyXG4gICAgc2NhbGU6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcblxyXG4gICAgICAgIC8vIG5vdGU6IEkgbGlrZSB2ZXJ0ZXggJiBmcmFnbWVudHMgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIHNjcmlwdCBpdHNlbGYuXHJcbiAgICAgICAgLy8gd2hlbiB5b3UgY2hhbmdlIHZlcnRleCBvciBmcmFnbWVudCwgdGhpcyBjbGFzcyBoYXMgdG8gZGVhbCB3aXRoIGl0LiBcclxuICAgICAgICAvLyBwdXR0aW5nIHRoZW0gc29tZXdoZXJlIGVsc2UgZG9lc250IG1ha2Ugc2Vuc2UgdG8gbWUsIFxyXG4gICAgICAgIC8vIHRoZXkgYXJlIGNvdXBsZWQgMSB0byAxLlxyXG4gICAgICAgIGNvbnN0IHZzID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzQgYV92ZXJ0ZXg7XHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzQgYV92ZXJ0ZXhfY29sb3I7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gbWF0NCB1X3RyYW5zZm9ybTtcclxuXHJcbiAgICAgICAgdmFyeWluZyB2ZWM0IHZfY29sb3I7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbigpIHtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB1X3RyYW5zZm9ybSAqIGFfdmVydGV4O1xyXG4gICAgICAgICAgICB2X2NvbG9yID0gYV92ZXJ0ZXhfY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGNvbnN0IGZzID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgdmFyeWluZyB2ZWM0IHZfY29sb3I7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZfY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIHNldHVwIHByb2dyYW0gICAgXHJcbiAgICAgICAgc3VwZXIoZ2wsIHZzLCBmcyk7XHJcbiAgICAgICAgdGhpcy51X3RyYW5zZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIFwidV90cmFuc2Zvcm1cIikhO1xyXG5cclxuICAgICAgICAvLyB3ZSBuZWVkIDIgYnVmZmVycyBcclxuICAgICAgICB0aGlzLmFfcG9zaXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLnByb2dyYW0sIFwiYV92ZXJ0ZXhcIik7XHJcbiAgICAgICAgdGhpcy5hX2NvbG9yID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcImFfdmVydGV4X2NvbG9yXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmFfcG9zaXRpb25fYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCkhO1xyXG4gICAgICAgIHRoaXMuYV9jb2xvcl9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKSE7XHJcbiAgICAgICAgdGhpcy5pbmRleF9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKSE7ICAgIFxyXG5cclxuICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy52ZXJ0Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSAwLjQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGFrZSBhIGdlbmVyYWwgcmVuZGVyIG1lc2gsIGFuZCBleHRyYWN0IG5vcm1hbHNcclxuICAgIHNldChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBtZXNoOiBSZW5kZXJNZXNoLCBzcGVlZCA9IERyYXdTcGVlZC5TdGF0aWNEcmF3KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gc2F2ZSBob3cgbWFueSB2ZXJ0cyBuZWVkIHRvIGJlIGRyYXduXHJcbiAgICAgICAgZ2wudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgICAgIGxldCBkcmF3c3BlZWQgPSB0aGlzLmNvbnZlcnREcmF3U3BlZWQoc3BlZWQpO1xyXG4gICAgICAgIHRoaXMudmVydENvdW50ID0gMztcclxuXHJcbiAgICAgICAgbGV0IGxpbmV2ZXJ0czogVmVjdG9yM0FycmF5O1xyXG4gICAgICAgIGxldCBub3JtYWxzOiBWZWN0b3IzQXJyYXk7XHJcblxyXG4gICAgICAgIC8vIGRpZmZlcmVudCBidWZmZXIgZmlsbHMgYmFzZWQgdXBvbiBub3JtYWwga2luZFxyXG4gICAgICAgIGxldCBub3JtYWxLaW5kID0gbWVzaC5nZXROb3JtYWxUeXBlKCk7XHJcbiAgICAgICAgaWYgKG5vcm1hbEtpbmQgPT0gTm9ybWFsS2luZC5GYWNlKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZmFjZUNvdW50ID0gbWVzaC5saW5rcy5jb3VudCgpOyBcclxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IGZhY2VDb3VudCAqIDI7XHJcblxyXG4gICAgICAgICAgICBsaW5ldmVydHMgPSBuZXcgVmVjdG9yM0FycmF5KHRoaXMuY291bnQpO1xyXG4gICAgICAgICAgICBub3JtYWxzID0gbmV3IFZlY3RvcjNBcnJheSh0aGlzLmNvdW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGYgPSAwIDsgZiA8IGZhY2VDb3VudDsgZisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VudGVyID0gbWVzaC5nZXRGYWNlVmVydGljZXMoZikuYXZlcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vcm1hbCA9IG1lc2gubm9ybXMuZ2V0VmVjdG9yKGYpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGkxID0gZiAqIDI7XHJcbiAgICAgICAgICAgICAgICBsZXQgaTIgPSBmICogMiArIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgbGluZXZlcnRzLnNldFZlY3RvcihpMSwgY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIGxpbmV2ZXJ0cy5zZXRWZWN0b3IoaTIsIGNlbnRlci5hZGQobm9ybWFsLnNjYWxlZCh0aGlzLnNjYWxlKSkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gbm9ybWFsLmFkZChuZXcgVmVjdG9yMygxLDEsMSkuZGl2KDIpKTtcclxuICAgICAgICAgICAgICAgIG5vcm1hbHMuc2V0VmVjdG9yKGkxLCBjb2xvcik7XHJcbiAgICAgICAgICAgICAgICBub3JtYWxzLnNldFZlY3RvcihpMiwgY29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbEtpbmQgPT0gTm9ybWFsS2luZC5WZXJ0ZXgpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRPRE9cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm5vIG5vcm1hbHNcIik7XHJcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAwO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB2ZXJ0aWNlcyAgXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuYV9wb3NpdGlvbl9idWZmZXIpO1xyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYV9wb3NpdGlvbik7XHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmFfcG9zaXRpb24sIHRoaXMudmVydENvdW50LCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBsaW5ldmVydHMuZGF0YSwgZHJhd3NwZWVkKTtcclxuXHJcbiAgICAgICAgLy8gbm9ybWFsc1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmFfY29sb3JfYnVmZmVyKTtcclxuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmFfY29sb3IpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX2NvbG9yLCB0aGlzLnZlcnRDb3VudCwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbm9ybWFscy5kYXRhLCBkcmF3c3BlZWQpO1xyXG5cclxuICAgICAgICAvLyBpbmRpY2VzIFxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRoaXMuaW5kZXhfYnVmZmVyKTtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBnZXREZWZhdWx0SW5kaWNlcyh0aGlzLmNvdW50KSwgZHJhd3NwZWVkKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgbWF0cml4OiBNYXRyaXg0KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVGVsbCBpdCB0byB1c2Ugb3VyIHByb2dyYW0gKHBhaXIgb2Ygc2hhZGVycylcclxuICAgICAgICAvLyBQT0lOVEVSUyBNVVNUIEFMU08gQkUgU0VULCBETyBFVkVSWVRISU5HIEVYQ0VQVCBHTC5CVUZGRVJEQVRBXHJcbiAgICAgICAgZ2wudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYV9wb3NpdGlvbik7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuYV9wb3NpdGlvbl9idWZmZXIpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX3Bvc2l0aW9uLCB0aGlzLnZlcnRDb3VudCwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTsgXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5pbmRleF9idWZmZXIpO1xyXG5cclxuICAgICAgICAvLyBzZXQgdW5pZm9ybXNcclxuICAgICAgICBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMudV90cmFuc2Zvcm0sIGZhbHNlLCBtYXRyaXguZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIERyYXcgdGhlIHBvaW50LlxyXG4gICAgICAgIGdsLmRyYXdFbGVtZW50cyhnbC5MSU5FUywgdGhpcy5jb3VudCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/mesh-normals-renderer.ts\n");

/***/ }),

/***/ "./src/render/renderer.ts":
/*!********************************!*\
  !*** ./src/render/renderer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DrawSpeed\": () => /* binding */ DrawSpeed,\n/* harmony export */   \"Renderer\": () => /* binding */ Renderer\n/* harmony export */ });\n// webgl-helpers.ts\r\n// \r\n// author: Jos Feenstra\r\n// credits to : https://webglfundamentals.org/\r\n// note: im still figuring out how to organize this \r\nvar nextTextureId = 0;\r\nvar rendercallsperframe = 0;\r\nvar DrawSpeed;\r\n(function (DrawSpeed) {\r\n    DrawSpeed[DrawSpeed[\"StaticDraw\"] = 0] = \"StaticDraw\";\r\n    DrawSpeed[DrawSpeed[\"DynamicDraw\"] = 1] = \"DynamicDraw\"; // if you plan on using the 'set' method every frame \r\n})(DrawSpeed || (DrawSpeed = {}));\r\nclass Renderer {\r\n    constructor(gl, vertexScript, fragmentScript) {\r\n        this.gl = gl;\r\n        this.program = Renderer.createProgramFromScripts(gl, vertexScript, fragmentScript);\r\n    }\r\n    buffer(...vars) {\r\n        rendercallsperframe += 1;\r\n    }\r\n    render(...vars) {\r\n        rendercallsperframe += 1;\r\n    }\r\n    static getNextTextureID() {\r\n        let id = nextTextureId;\r\n        nextTextureId += 1;\r\n        return id;\r\n    }\r\n    static resizeCanvas(gl) {\r\n        // Lookup the size the browser is displaying the canvas in CSS pixels.\r\n        let canvas = gl.canvas;\r\n        const displayWidth = canvas.clientWidth;\r\n        const displayHeight = canvas.clientHeight;\r\n        // Check if the canvas is not the same size.\r\n        const needResize = gl.canvas.width !== displayWidth ||\r\n            gl.canvas.height !== displayHeight;\r\n        if (needResize) {\r\n            // Make the canvas the same size\r\n            gl.canvas.width = displayWidth;\r\n            gl.canvas.height = displayHeight;\r\n        }\r\n        // Tell WebGL how to convert from clip space to pixels\r\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n        return needResize;\r\n    }\r\n    convertDrawSpeed(speed) {\r\n        if (speed == DrawSpeed.DynamicDraw) {\r\n            return this.gl.DYNAMIC_DRAW;\r\n        }\r\n        else {\r\n            return this.gl.STATIC_DRAW;\r\n        }\r\n    }\r\n    static initWebglContext(canvas) {\r\n        let possiblyGl = canvas.getContext(\"webgl\");\r\n        if (possiblyGl == undefined) {\r\n            console.log(\"webgl unavailable...\");\r\n        }\r\n        let gl = possiblyGl;\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n        gl.enable(gl.CULL_FACE);\r\n        gl.enable(gl.DEPTH_TEST);\r\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n        gl.clearDepth(1.);\r\n        return gl;\r\n    }\r\n    static compileShader(gl, shaderSource, shaderType) {\r\n        let shader = gl.createShader(shaderType);\r\n        gl.shaderSource(shader, shaderSource);\r\n        gl.compileShader(shader);\r\n        let success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n        if (!success) {\r\n            throw \"could not compile shader:\" + shaderSource + gl.getShaderInfoLog(shader);\r\n        }\r\n        return shader;\r\n    }\r\n    static createProgram(gl, vertexShader, fragmentShader) {\r\n        let program = gl.createProgram();\r\n        gl.attachShader(program, vertexShader);\r\n        gl.attachShader(program, fragmentShader);\r\n        gl.linkProgram(program);\r\n        let success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n        if (!success) {\r\n            throw (\"program failed to link:\" + gl.getProgramInfoLog(program));\r\n        }\r\n        return program;\r\n    }\r\n    ;\r\n    static createProgramFromScripts(gl, vertexScript, fragmentScript) {\r\n        let vertexShader = Renderer.compileShader(gl, vertexScript, gl.VERTEX_SHADER);\r\n        let fragmentShader = Renderer.compileShader(gl, fragmentScript, gl.FRAGMENT_SHADER);\r\n        return Renderer.createProgram(gl, vertexShader, fragmentShader);\r\n    }\r\n}\r\nRenderer.rendercallsperframe = 0;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci9yZW5kZXJlci50cz9iNWM3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsbUJBQW1CO0FBQ25CLEdBQUc7QUFDSCx1QkFBdUI7QUFDdkIsOENBQThDO0FBQzlDLG9EQUFvRDtBQUlwRCxJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUM7QUFDdEIsSUFBSSxtQkFBbUIsR0FBRyxDQUFDLENBQUM7QUFFNUIsSUFBWSxTQUdYO0FBSEQsV0FBWSxTQUFTO0lBQ2pCLHFEQUFVO0lBQ1YsdURBQVcsRUFBQyxxREFBcUQ7QUFDckUsQ0FBQyxFQUhXLFNBQVMsS0FBVCxTQUFTLFFBR3BCO0FBRU0sTUFBTSxRQUFRO0lBTWpCLFlBQVksRUFBeUIsRUFBRSxZQUFvQixFQUFFLGNBQXNCO1FBQy9FLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsd0JBQXdCLENBQUMsRUFBRSxFQUFFLFlBQVksRUFBRSxjQUFjLENBQUMsQ0FBQztJQUN2RixDQUFDO0lBR0QsTUFBTSxDQUFDLEdBQUcsSUFBUztRQUNmLG1CQUFtQixJQUFJLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBR0QsTUFBTSxDQUFDLEdBQUcsSUFBUztRQUNmLG1CQUFtQixJQUFJLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBSUQsTUFBTSxDQUFDLGdCQUFnQjtRQUNuQixJQUFJLEVBQUUsR0FBRyxhQUFhLENBQUM7UUFDdkIsYUFBYSxJQUFJLENBQUMsQ0FBQztRQUNuQixPQUFPLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFHRCxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQXlCO1FBRXpDLHNFQUFzRTtRQUN0RSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBMkIsQ0FBQztRQUU1QyxNQUFNLFlBQVksR0FBSSxNQUFNLENBQUMsV0FBVyxDQUFDO1FBQ3pDLE1BQU0sYUFB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LENBQUMsT0FBTyxDQUFDLENBQUM7UUFDeEIsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDOUQsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNWLE1BQU0sQ0FBQyx5QkFBeUIsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUN0RTtRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ25CLENBQUM7SUFBQSxDQUFDO0lBR0YsTUFBTSxDQUFDLHdCQUF3QixDQUFDLEVBQXlCLEVBQUUsWUFBb0IsRUFBRSxjQUFzQjtRQUNuRyxJQUFJLFlBQVksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzlFLElBQUksY0FBYyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLGNBQWMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDcEYsT0FBTyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFDcEUsQ0FBQzs7QUFoSE0sNEJBQW1CLEdBQUcsQ0FBQyxDQUFDIiwiZmlsZSI6Ii4vc3JjL3JlbmRlci9yZW5kZXJlci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHdlYmdsLWhlbHBlcnMudHNcclxuLy8gXHJcbi8vIGF1dGhvcjogSm9zIEZlZW5zdHJhXHJcbi8vIGNyZWRpdHMgdG8gOiBodHRwczovL3dlYmdsZnVuZGFtZW50YWxzLm9yZy9cclxuLy8gbm90ZTogaW0gc3RpbGwgZmlndXJpbmcgb3V0IGhvdyB0byBvcmdhbml6ZSB0aGlzIFxyXG5cclxuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9zY2VuZVwiO1xyXG5cclxudmFyIG5leHRUZXh0dXJlSWQgPSAwO1xyXG52YXIgcmVuZGVyY2FsbHNwZXJmcmFtZSA9IDA7IFxyXG5cclxuZXhwb3J0IGVudW0gRHJhd1NwZWVkIHtcclxuICAgIFN0YXRpY0RyYXcsICAvLyBpZiB5b3UgcGxhbiBvbiB1c2luZyB0aGUgJ3NldCcgbWV0aG9kIG9ubHkgYSBjb3VwbGUgb2YgdGltZXMgLyBvbmNlXHJcbiAgICBEeW5hbWljRHJhdyAvLyBpZiB5b3UgcGxhbiBvbiB1c2luZyB0aGUgJ3NldCcgbWV0aG9kIGV2ZXJ5IGZyYW1lIFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIge1xyXG5cclxuICAgIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICBwcm9ncmFtOiBXZWJHTFByb2dyYW07XHJcbiAgICBzdGF0aWMgcmVuZGVyY2FsbHNwZXJmcmFtZSA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdmVydGV4U2NyaXB0OiBzdHJpbmcsIGZyYWdtZW50U2NyaXB0OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmdsID0gZ2w7XHJcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gUmVuZGVyZXIuY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsLCB2ZXJ0ZXhTY3JpcHQsIGZyYWdtZW50U2NyaXB0KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYnVmZmVyKC4uLnZhcnM6IGFueSkge1xyXG4gICAgICAgIHJlbmRlcmNhbGxzcGVyZnJhbWUgKz0gMTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmVuZGVyKC4uLnZhcnM6IGFueSkge1xyXG4gICAgICAgIHJlbmRlcmNhbGxzcGVyZnJhbWUgKz0gMTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHN0YXRpYyBnZXROZXh0VGV4dHVyZUlEKCkge1xyXG4gICAgICAgIGxldCBpZCA9IG5leHRUZXh0dXJlSWQ7XHJcbiAgICAgICAgbmV4dFRleHR1cmVJZCArPSAxO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIHJlc2l6ZUNhbnZhcyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcblxyXG4gICAgICAgIC8vIExvb2t1cCB0aGUgc2l6ZSB0aGUgYnJvd3NlciBpcyBkaXNwbGF5aW5nIHRoZSBjYW52YXMgaW4gQ1NTIHBpeGVscy5cclxuICAgICAgICBsZXQgY2FudmFzID0gZ2wuY2FudmFzIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5cclxuICAgICAgICBjb25zdCBkaXNwbGF5V2lkdGggID0gY2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlIZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbnZhcyBpcyBub3QgdGhlIHNhbWUgc2l6ZS5cclxuICAgICAgICBjb25zdCBuZWVkUmVzaXplID0gZ2wuY2FudmFzLndpZHRoICAhPT0gZGlzcGxheVdpZHRoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmNhbnZhcy5oZWlnaHQgIT09IGRpc3BsYXlIZWlnaHQ7XHJcbiAgICAgICBcclxuICAgICAgICBpZiAobmVlZFJlc2l6ZSkge1xyXG4gICAgICAgICAgLy8gTWFrZSB0aGUgY2FudmFzIHRoZSBzYW1lIHNpemVcclxuICAgICAgICAgIGdsLmNhbnZhcy53aWR0aCAgPSBkaXNwbGF5V2lkdGg7XHJcbiAgICAgICAgICBnbC5jYW52YXMuaGVpZ2h0ID0gZGlzcGxheUhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICAvLyBUZWxsIFdlYkdMIGhvdyB0byBjb252ZXJ0IGZyb20gY2xpcCBzcGFjZSB0byBwaXhlbHNcclxuICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmVlZFJlc2l6ZTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGNvbnZlcnREcmF3U3BlZWQoc3BlZWQ6IERyYXdTcGVlZCkgOiBudW1iZXIge1xyXG4gICAgICAgIGlmIChzcGVlZCA9PSBEcmF3U3BlZWQuRHluYW1pY0RyYXcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2wuRFlOQU1JQ19EUkFXO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdsLlNUQVRJQ19EUkFXO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGluaXRXZWJnbENvbnRleHQoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG5cclxuICAgICAgICBsZXQgcG9zc2libHlHbCA9IGNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2xcIik7XHJcbiAgICAgICAgaWYgKHBvc3NpYmx5R2wgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3ZWJnbCB1bmF2YWlsYWJsZS4uLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGdsID0gcG9zc2libHlHbCE7XHJcbiAgICBcclxuICAgICAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xyXG4gICAgICAgIGdsLmJsZW5kRnVuYyhnbC5TUkNfQUxQSEEsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xyXG4gICAgICAgIGdsLmVuYWJsZShnbC5DVUxMX0ZBQ0UpO1xyXG4gICAgICAgIGdsLmVuYWJsZShnbC5ERVBUSF9URVNUKTtcclxuICAgIFxyXG4gICAgICAgIGdsLmNsZWFyQ29sb3IoMC4wLCAwLjAsIDAuMCwgMS4wKTtcclxuICAgICAgICBnbC5jbGVhckRlcHRoKDEuKTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBnbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGNvbXBpbGVTaGFkZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgc2hhZGVyU291cmNlOiBzdHJpbmcsIHNoYWRlclR5cGU6IG51bWJlcikgOiBXZWJHTFNoYWRlciB7XHJcbiAgICBcclxuICAgICAgICBsZXQgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpITsgXHJcbiAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc2hhZGVyU291cmNlKTsgXHJcbiAgICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpOyBcclxuICAgICAgICBsZXQgc3VjY2VzcyA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTsgXHJcbiAgICAgICAgaWYgKCFzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiY291bGQgbm90IGNvbXBpbGUgc2hhZGVyOlwiICsgc2hhZGVyU291cmNlICsgZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZVByb2dyYW0oZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlciwgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyKSB7XHJcbiAgICBcclxuICAgICAgICBsZXQgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKSE7XHJcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XHJcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcclxuICAgICAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgICAgICBsZXQgc3VjY2VzcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpO1xyXG4gICAgICAgIGlmICghc3VjY2Vzcykge1xyXG4gICAgICAgICAgICB0aHJvdyAoXCJwcm9ncmFtIGZhaWxlZCB0byBsaW5rOlwiICsgZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cgKHByb2dyYW0pKTtcclxuICAgICAgICB9ICAgXHJcbiAgICAgICAgcmV0dXJuIHByb2dyYW07XHJcbiAgICB9O1xyXG4gICAgXHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2ZXJ0ZXhTY3JpcHQ6IHN0cmluZywgZnJhZ21lbnRTY3JpcHQ6IHN0cmluZyk6IFdlYkdMUHJvZ3JhbSB7XHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlciA9IFJlbmRlcmVyLmNvbXBpbGVTaGFkZXIoZ2wsIHZlcnRleFNjcmlwdCwgZ2wuVkVSVEVYX1NIQURFUik7XHJcbiAgICAgICAgbGV0IGZyYWdtZW50U2hhZGVyID0gUmVuZGVyZXIuY29tcGlsZVNoYWRlcihnbCwgZnJhZ21lbnRTY3JpcHQsIGdsLkZSQUdNRU5UX1NIQURFUik7XHJcbiAgICAgICAgcmV0dXJuIFJlbmRlcmVyLmNyZWF0ZVByb2dyYW0oZ2wsIHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renderer.ts\n");

/***/ }),

/***/ "./src/render/simple-mesh-renderer.ts":
/*!********************************************!*\
  !*** ./src/render/simple-mesh-renderer.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SimpleMeshRenderer\": () => /* binding */ SimpleMeshRenderer\n/* harmony export */ });\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderer */ \"./src/render/renderer.ts\");\n// name:    mesh-renderer.ts\r\n// author:  Jos Feenstra\r\n// purpose: WebGL based rendering of a mesh.\r\n\r\nclass SimpleMeshRenderer extends _renderer__WEBPACK_IMPORTED_MODULE_0__.Renderer {\r\n    constructor(gl, color = [1, 0, 0, 0.25]) {\r\n        const vs = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        attribute vec4 a_position;\r\n        uniform mat4 u_transform;\r\n        uniform vec4 u_color;\r\n\r\n        void main() {\r\n            gl_Position = u_transform * a_position;\r\n        }\r\n        `;\r\n        const fs = `\r\n        precision mediump int;\r\n        precision mediump float;\r\n\r\n        uniform vec4 u_color;\r\n\r\n        void main () {\r\n            gl_FragColor = u_color;\r\n        }\r\n        `;\r\n        // setup program    \r\n        super(gl, vs, fs);\r\n        this.u_transform = gl.getUniformLocation(this.program, \"u_transform\");\r\n        this.u_color = gl.getUniformLocation(this.program, \"u_color\");\r\n        gl.useProgram(this.program);\r\n        gl.uniform4f(this.u_color, color[0], color[1], color[2], color[3]);\r\n        this.count = 0;\r\n        this.size = 0;\r\n        // we need 2 buffers \r\n        // -> 1 float buffer for the positions of all vertices.\r\n        // -> 1 int buffer for the index of all triangles\r\n        this.a_position = gl.getAttribLocation(this.program, \"a_position\");\r\n        this.a_position_buffer = gl.createBuffer();\r\n        this.index_buffer = gl.createBuffer();\r\n    }\r\n    setMesh(gl, mesh, speed = _renderer__WEBPACK_IMPORTED_MODULE_0__.DrawSpeed.StaticDraw) {\r\n        return this.set(gl, mesh.verts, mesh.links, speed);\r\n    }\r\n    set(gl, verts, faces, speed = _renderer__WEBPACK_IMPORTED_MODULE_0__.DrawSpeed.StaticDraw) {\r\n        // save how many faces need to be drawn\r\n        gl.useProgram(this.program);\r\n        this.count = faces.data.length;\r\n        // vertices \r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        this.size = 3;\r\n        var type = gl.FLOAT;\r\n        var normalize = false;\r\n        gl.vertexAttribPointer(this.a_position, this.size, gl.FLOAT, false, 0, 0);\r\n        gl.bufferData(gl.ARRAY_BUFFER, verts.data, this.convertDrawSpeed(speed));\r\n        // indices \r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(faces.data), this.convertDrawSpeed(speed));\r\n    }\r\n    // render 1 image to the screen\r\n    render(gl, matrix) {\r\n        // Tell it to use our program (pair of shaders)\r\n        gl.useProgram(this.program);\r\n        gl.enableVertexAttribArray(this.a_position);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.vertexAttribPointer(this.a_position, this.size, gl.FLOAT, false, 0, 0);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        // set uniforms\r\n        gl.uniformMatrix4fv(this.u_transform, false, matrix.data);\r\n        // Draw the point.\r\n        gl.drawElements(gl.TRIANGLES, this.count, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci9zaW1wbGUtbWVzaC1yZW5kZXJlci50cz9kOTEzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNEJBQTRCO0FBQzVCLHdCQUF3QjtBQUN4Qiw0Q0FBNEM7QUFNSztBQUUxQyxNQUFNLGtCQUFtQixTQUFRLCtDQUFRO0lBVTVDLFlBQVksRUFBeUIsRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxJQUFJLENBQUM7UUFFdkQsTUFBTSxFQUFFLEdBQUc7Ozs7Ozs7Ozs7O1NBV1YsQ0FBQztRQUVGLE1BQU0sRUFBRSxHQUFHOzs7Ozs7Ozs7U0FTVixDQUFDO1FBRUYsb0JBQW9CO1FBQ3BCLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWxCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFFLENBQUM7UUFDdkUsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUUsQ0FBQztRQUMvRCxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1QixFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztRQUVkLHFCQUFxQjtRQUNyQix1REFBdUQ7UUFDdkQsaURBQWlEO1FBQ2pELElB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Q0FBQztJQUNwRSxDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NpbXBsZS1tZXNoLXJlbmRlcmVyLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgbWVzaC1yZW5kZXJlci50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogV2ViR0wgYmFzZWQgcmVuZGVyaW5nIG9mIGEgbWVzaC5cclxuXHJcbmltcG9ydCB7IEludE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2ludC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgVmVjdG9yM0FycmF5IH0gZnJvbSBcIi4uL2RhdGEvdmVjdG9yLWFycmF5XCI7XHJcbmltcG9ydCB7IFJlbmRlck1lc2ggfSBmcm9tIFwiLi4vbWVzaC9yZW5kZXItbWVzaFwiO1xyXG5pbXBvcnQgeyBNYXRyaXg0IH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IERyYXdTcGVlZCwgUmVuZGVyZXIgfSBmcm9tIFwiLi9yZW5kZXJlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXBsZU1lc2hSZW5kZXJlciBleHRlbmRzIFJlbmRlcmVyIHtcclxuXHJcbiAgICAvLyBhdHRyaWJ1dGUgJiB1bmlmb3JtIGxvY2F0aW9uc1xyXG4gICAgYV9wb3NpdGlvbjogbnVtYmVyO1xyXG4gICAgYV9wb3NpdGlvbl9idWZmZXI6IFdlYkdMQnVmZmVyO1xyXG4gICAgaW5kZXhfYnVmZmVyOiBXZWJHTEJ1ZmZlcjtcclxuICAgIHVfdHJhbnNmb3JtOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcclxuICAgIHVfY29sb3I6IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xyXG4gICAgY291bnQ6IG51bWJlcjtcclxuICAgIHNpemU6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIGNvbG9yID0gWzEsMCwwLDAuMjVdKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZzID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzQgYV9wb3NpdGlvbjtcclxuICAgICAgICB1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07XHJcbiAgICAgICAgdW5pZm9ybSB2ZWM0IHVfY29sb3I7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbigpIHtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB1X3RyYW5zZm9ybSAqIGFfcG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGNvbnN0IGZzID0gYFxyXG4gICAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGludDtcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgdW5pZm9ybSB2ZWM0IHVfY29sb3I7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbiAoKSB7XHJcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIHNldHVwIHByb2dyYW0gICAgXHJcbiAgICAgICAgc3VwZXIoZ2wsIHZzLCBmcyk7XHJcblxyXG4gICAgICAgIHRoaXMudV90cmFuc2Zvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcInVfdHJhbnNmb3JtXCIpITtcclxuICAgICAgICB0aGlzLnVfY29sb3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcInVfY29sb3JcIikhO1xyXG4gICAgICAgIGdsLnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuICAgICAgICBnbC51bmlmb3JtNGYodGhpcy51X2NvbG9yLCBjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdLCBjb2xvclszXSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5zaXplID0gMDtcclxuXHJcbiAgICAgICAgLy8gd2UgbmVlZCAyIGJ1ZmZlcnMgXHJcbiAgICAgICAgLy8gLT4gMSBmbG9hdCBidWZmZXIgZm9yIHRoZSBwb3NpdGlvbnMgb2YgYWxsIHZlcnRpY2VzLlxyXG4gICAgICAgIC8vIC0+IDEgaW50IGJ1ZmZlciBmb3IgdGhlIGluZGV4IG9mIGFsbCB0cmlhbmdsZXNcclxuICAgICAgICB0aGlzLmFfcG9zaXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLnByb2dyYW0sIFwiYV9wb3NpdGlvblwiKTtcclxuICAgICAgICB0aGlzLmFfcG9zaXRpb25fYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCkhO1xyXG4gICAgICAgIHRoaXMuaW5kZXhfYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCkhOyAgXHJcbiAgICB9XHJcblxyXG4gICAgc2V0TWVzaChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBtZXNoOiBSZW5kZXJNZXNoLCBzcGVlZDogRHJhd1NwZWVkID0gRHJhd1NwZWVkLlN0YXRpY0RyYXcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXQoZ2wsIG1lc2gudmVydHMsIG1lc2gubGlua3MsIHNwZWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdmVydHM6IFZlY3RvcjNBcnJheSwgZmFjZXM6IEludE1hdHJpeCwgc3BlZWQ6IERyYXdTcGVlZCA9IERyYXdTcGVlZC5TdGF0aWNEcmF3KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gc2F2ZSBob3cgbWFueSBmYWNlcyBuZWVkIHRvIGJlIGRyYXduXHJcbiAgICAgICAgZ2wudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgICAgIHRoaXMuY291bnQgPSBmYWNlcy5kYXRhLmxlbmd0aFxyXG5cclxuICAgICAgICAvLyB2ZXJ0aWNlcyBcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5hX3Bvc2l0aW9uX2J1ZmZlcik7XHJcbiAgICAgICAgdGhpcy5zaXplID0gMztcclxuICAgICAgICB2YXIgdHlwZSA9IGdsLkZMT0FUO1xyXG4gICAgICAgIHZhciBub3JtYWxpemUgPSBmYWxzZTsgXHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmFfcG9zaXRpb24sIHRoaXMuc2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdmVydHMuZGF0YSwgdGhpcy5jb252ZXJ0RHJhd1NwZWVkKHNwZWVkKSk7XHJcblxyXG4gICAgICAgIC8vIGluZGljZXMgXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5pbmRleF9idWZmZXIpO1xyXG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG5ldyBVaW50MTZBcnJheShmYWNlcy5kYXRhKSwgdGhpcy5jb252ZXJ0RHJhd1NwZWVkKHNwZWVkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVuZGVyIDEgaW1hZ2UgdG8gdGhlIHNjcmVlblxyXG4gICAgcmVuZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIG1hdHJpeDogTWF0cml4NCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRlbGwgaXQgdG8gdXNlIG91ciBwcm9ncmFtIChwYWlyIG9mIHNoYWRlcnMpXHJcbiAgICAgICAgZ2wudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYV9wb3NpdGlvbik7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuYV9wb3NpdGlvbl9idWZmZXIpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX3Bvc2l0aW9uLCB0aGlzLnNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5pbmRleF9idWZmZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNldCB1bmlmb3Jtc1xyXG4gICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51X3RyYW5zZm9ybSwgZmFsc2UsIG1hdHJpeC5kYXRhKTtcclxuXHJcbiAgICAgICAgLy8gRHJhdyB0aGUgcG9pbnQuXHJcbiAgICAgICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgdGhpcy5jb3VudCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/simple-mesh-renderer.ts\n");

/***/ }),

/***/ "./src/render/texture-mesh-renderer.ts":
/*!*********************************************!*\
  !*** ./src/render/texture-mesh-renderer.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TextureMeshRenderer\": () => /* binding */ TextureMeshRenderer\n/* harmony export */ });\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderer */ \"./src/render/renderer.ts\");\n// name:    mesh-renderer.ts\r\n// author:  Jos Feenstra\r\n// purpose: WebGL based rendering of a mesh.\r\n\r\nclass TextureMeshRenderer extends _renderer__WEBPACK_IMPORTED_MODULE_0__.Renderer {\r\n    constructor(gl) {\r\n        const vs = `\r\n        // precision mediump int;\r\n        // precision mediump float;\r\n\r\n        attribute vec4 a_position;\r\n        attribute vec2 a_texcoord;\r\n\r\n        uniform mat4 u_transform;\r\n\r\n        varying vec2 v_texcoord;\r\n\r\n        void main() {\r\n            gl_Position = u_transform * a_position;\r\n            v_texcoord = a_texcoord;\r\n        }\r\n        `;\r\n        const fs = `\r\n        precision mediump float;\r\n\r\n        varying vec2 v_texcoord;\r\n\r\n        uniform sampler2D u_texture;\r\n\r\n        void main() {\r\n            gl_FragColor = texture2D(u_texture, v_texcoord);\r\n        }\r\n        `;\r\n        // setup program    \r\n        super(gl, vs, fs);\r\n        gl.useProgram(this.program);\r\n        this.count = 0;\r\n        this.size = 0;\r\n        // init uniforms \r\n        this.u_transform = gl.getUniformLocation(this.program, \"u_transform\");\r\n        this.u_texture = gl.getUniformLocation(this.program, \"u_texture\");\r\n        // init three buffers: verts | uvs | links\r\n        this.a_position = gl.getAttribLocation(this.program, \"a_position\");\r\n        this.a_position_buffer = gl.createBuffer();\r\n        this.a_texcoord = gl.getAttribLocation(this.program, \"a_texcoord\");\r\n        this.a_texcoord_buffer = gl.createBuffer();\r\n        this.index_buffer = gl.createBuffer();\r\n        // init texture\r\n        this.texture_id = _renderer__WEBPACK_IMPORTED_MODULE_0__.Renderer.getNextTextureID();\r\n        this.texture = gl.createTexture();\r\n    }\r\n    setAndRender(gl, matrix, mesh) {\r\n        this.set(gl, mesh, _renderer__WEBPACK_IMPORTED_MODULE_0__.DrawSpeed.DynamicDraw);\r\n        this.render(gl, matrix);\r\n    }\r\n    set(gl, mesh, speed = _renderer__WEBPACK_IMPORTED_MODULE_0__.DrawSpeed.StaticDraw) {\r\n        if (!mesh.texture) {\r\n            console.warn(\"Mesh does not contain a texture!\");\r\n            return;\r\n        }\r\n        // save how many faces need to be drawn\r\n        gl.useProgram(this.program);\r\n        this.count = mesh.links.data.length;\r\n        // buffer 1\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.vertexAttribPointer(this.a_position, 3, gl.FLOAT, false, 0, 0);\r\n        gl.bufferData(gl.ARRAY_BUFFER, mesh.verts.data, this.convertDrawSpeed(speed));\r\n        // buffer 2 \r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_texcoord_buffer);\r\n        gl.vertexAttribPointer(this.a_texcoord, 2, gl.FLOAT, false, 0, 0);\r\n        gl.bufferData(gl.ARRAY_BUFFER, mesh.uvs.data, this.convertDrawSpeed(speed));\r\n        // buffer 3\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(mesh.links.data), this.convertDrawSpeed(speed));\r\n        // texture \r\n        gl.activeTexture(gl.TEXTURE0 + this.texture_id);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, mesh.texture);\r\n        // alternative texture -> Fill the texture with a 1x1 blue pixel.\r\n        // gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 128, 128, 255]));\r\n        // gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, mesh.texture.data);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n        gl.generateMipmap(gl.TEXTURE_2D);\r\n    }\r\n    // render 1 image to the screen\r\n    render(gl, matrix) {\r\n        // console.log(\"rendering..\");\r\n        // use the program\r\n        gl.useProgram(this.program);\r\n        // set uniforms\r\n        gl.uniformMatrix4fv(this.u_transform, false, matrix.data);\r\n        // set texture \r\n        gl.uniform1i(this.u_texture, this.texture_id);\r\n        gl.activeTexture(gl.TEXTURE0 + this.texture_id);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n        // buffer 1\r\n        gl.enableVertexAttribArray(this.a_position);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_position_buffer);\r\n        gl.vertexAttribPointer(this.a_position, 3, gl.FLOAT, false, 0, 0);\r\n        // buffer 2\r\n        gl.enableVertexAttribArray(this.a_texcoord);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.a_texcoord_buffer);\r\n        gl.vertexAttribPointer(this.a_texcoord, 2, gl.FLOAT, false, 0, 0);\r\n        // buffer 3\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\r\n        // draw!\r\n        gl.drawElements(gl.TRIANGLES, this.count, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3JlbmRlci90ZXh0dXJlLW1lc2gtcmVuZGVyZXIudHM/OGQyNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDRCQUE0QjtBQUM1Qix3QkFBd0I7QUFDeEIsNENBQTRDO0FBT0s7QUFJMUMsTUFBTSxtQkFBb0IsU0FBUSwrQ0FBUTtJQWtCN0MsWUFBWSxFQUF5QjtRQUNqQyxNQUFNLEVBQUUsR0FBRzs7Ozs7Ozs7Ozs7Ozs7O1NBZVYsQ0FBQztRQUVGLE1BQU0sRUFBRSxHQUFHOzs7Ozs7Ozs7O1NBVVYsQ0FBQztRQUVGLG9CQUFvQjtRQUNwQixLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNsQixFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBRWQsaUJBQWlCO1FBQ2pCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFFLENBQUM7UUFDdkUsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUUsQ0FBQztRQUVuRSwwQ0FBMEM7UUFDMUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsRUFBRSxDQUFDLFlBQVksRUFBRyxDQUFDO1FBRTVDLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDbkUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUcsQ0FBQztRQUU1QyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUcsQ0FBQztRQUV2QyxlQUFlO1FBQ2YsSUFBSSxDQUFDLFVBQVUsR0FBRyxnRUFBeUIsRUFBRSxDQUFDO1FBQzlDLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxZQUFZLENBQUMsRUFBeUIsRUFBRSxNQUFlLEVBQUUsSUFBZ0I7UUFDckUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLDREQUFxQixDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVELEdBQUcsQ0FBQyxFQUF5QixFQUFFLElBQWdCLEVBQUUsUUFBbUIsMkRBQW9CO1FBRXBGLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO1lBQ2pELE9BQU87U0FDVjtRQUVELHVDQUF1QztRQUN2QyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU07UUFFbkMsV0FBVztRQUNYLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN2RCxFQUFFLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUU5RSxZQUFZO1FBQ1osRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3ZELEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBRTVFLFdBQVc7UUFDWCxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDMUQsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUV2RyxXQUFXO1FBQ1gsRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNoRCxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzVDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xGLGlFQUFpRTtRQUNqRSxvSEFBb0g7UUFDcEgsbUdBQW1HO1FBQ25HLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25FLEVBQUUsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCwrQkFBK0I7SUFDL0IsTUFBTSxDQUFDLEVBQXlCLEVBQUUsTUFBZTtRQUU3Qyw4QkFBOEI7UUFFOUIsa0JBQWtCO1FBQ2xCLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTVCLGVBQWU7UUFDZixFQUFFLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTFELGVBQWU7UUFDZixFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzlDLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEQsRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUU1QyxXQUFXO1FBQ1gsRUFBRSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM1QyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDdkQsRUFBRSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVsRSxXQUFXO1FBQ1gsRUFBRSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM1QyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDdkQsRUFBRSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVsRSxXQUFXO1FBQ1gsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTFELFFBQVE7UUFDUixFQUFFLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9yZW5kZXIvdGV4dHVyZS1tZXNoLXJlbmRlcmVyLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgbWVzaC1yZW5kZXJlci50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogV2ViR0wgYmFzZWQgcmVuZGVyaW5nIG9mIGEgbWVzaC5cclxuXHJcbmltcG9ydCB7IEludE1hdHJpeCB9IGZyb20gXCIuLi9kYXRhL2ludC1tYXRyaXhcIjtcclxuaW1wb3J0IHsgTGluZUFycmF5IH0gZnJvbSBcIi4uL21lc2gvbGluZS1hcnJheVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgUmVuZGVyTWVzaCB9IGZyb20gXCIuLi9tZXNoL3JlbmRlci1tZXNoXCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgRHJhd1NwZWVkLCBSZW5kZXJlciB9IGZyb20gXCIuL3JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IExpbmVSZW5kZXJlciB9IGZyb20gXCIuL2xpbmUtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU2ltcGxlTWVzaFJlbmRlcmVyIH0gZnJvbSBcIi4vc2ltcGxlLW1lc2gtcmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0dXJlTWVzaFJlbmRlcmVyIGV4dGVuZHMgUmVuZGVyZXIge1xyXG4gICAgXHJcbiAgICAvLyBhdHRyaWJ1dGUgJiB1bmlmb3JtIGxvY2F0aW9uc1xyXG4gICAgYV9wb3NpdGlvbjogbnVtYmVyO1xyXG4gICAgYV9wb3NpdGlvbl9idWZmZXI6IFdlYkdMQnVmZmVyO1xyXG4gICAgaW5kZXhfYnVmZmVyOiBXZWJHTEJ1ZmZlcjtcclxuXHJcbiAgICB1X3RyYW5zZm9ybTogV2ViR0xVbmlmb3JtTG9jYXRpb247XHJcbiAgICAvLyB1X3RleHR1cmU6IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xyXG5cclxuICAgIGNvdW50OiBudW1iZXI7XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICBhX3RleGNvb3JkOiBudW1iZXI7XHJcbiAgICBhX3RleGNvb3JkX2J1ZmZlcjogV2ViR0xCdWZmZXI7XHJcbiAgICB1X3RleHR1cmU6IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xyXG4gICAgdGV4dHVyZV9pZDogbnVtYmVyO1xyXG4gICAgdGV4dHVyZTogV2ViR0xUZXh0dXJlIHwgbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgdnMgPSBgXHJcbiAgICAgICAgLy8gcHJlY2lzaW9uIG1lZGl1bXAgaW50O1xyXG4gICAgICAgIC8vIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG5cclxuICAgICAgICBhdHRyaWJ1dGUgdmVjNCBhX3Bvc2l0aW9uO1xyXG4gICAgICAgIGF0dHJpYnV0ZSB2ZWMyIGFfdGV4Y29vcmQ7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gbWF0NCB1X3RyYW5zZm9ybTtcclxuXHJcbiAgICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Y29vcmQ7XHJcblxyXG4gICAgICAgIHZvaWQgbWFpbigpIHtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB1X3RyYW5zZm9ybSAqIGFfcG9zaXRpb247XHJcbiAgICAgICAgICAgIHZfdGV4Y29vcmQgPSBhX3RleGNvb3JkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICBjb25zdCBmcyA9IGBcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Y29vcmQ7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4dHVyZTtcclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodV90ZXh0dXJlLCB2X3RleGNvb3JkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gc2V0dXAgcHJvZ3JhbSAgICBcclxuICAgICAgICBzdXBlcihnbCwgdnMsIGZzKTtcclxuICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5zaXplID0gMDtcclxuXHJcbiAgICAgICAgLy8gaW5pdCB1bmlmb3JtcyBcclxuICAgICAgICB0aGlzLnVfdHJhbnNmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJ1X3RyYW5zZm9ybVwiKSE7XHJcbiAgICAgICAgdGhpcy51X3RleHR1cmUgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcInVfdGV4dHVyZVwiKSE7XHJcblxyXG4gICAgICAgIC8vIGluaXQgdGhyZWUgYnVmZmVyczogdmVydHMgfCB1dnMgfCBsaW5rc1xyXG4gICAgICAgIHRoaXMuYV9wb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJhX3Bvc2l0aW9uXCIpO1xyXG4gICAgICAgIHRoaXMuYV9wb3NpdGlvbl9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKSE7XHJcblxyXG4gICAgICAgIHRoaXMuYV90ZXhjb29yZCA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJhX3RleGNvb3JkXCIpO1xyXG4gICAgICAgIHRoaXMuYV90ZXhjb29yZF9idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKSE7XHJcblxyXG4gICAgICAgIHRoaXMuaW5kZXhfYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCkhOyBcclxuXHJcbiAgICAgICAgLy8gaW5pdCB0ZXh0dXJlXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlX2lkID0gUmVuZGVyZXIuZ2V0TmV4dFRleHR1cmVJRCgpO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBbmRSZW5kZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgbWF0cml4OiBNYXRyaXg0LCBtZXNoOiBSZW5kZXJNZXNoKSB7XHJcbiAgICAgICAgdGhpcy5zZXQoZ2wsIG1lc2gsIERyYXdTcGVlZC5EeW5hbWljRHJhdyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIG1lc2g6IFJlbmRlck1lc2gsIHNwZWVkOiBEcmF3U3BlZWQgPSBEcmF3U3BlZWQuU3RhdGljRHJhdykge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghbWVzaC50ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk1lc2ggZG9lcyBub3QgY29udGFpbiBhIHRleHR1cmUhXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzYXZlIGhvdyBtYW55IGZhY2VzIG5lZWQgdG8gYmUgZHJhd25cclxuICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IG1lc2gubGlua3MuZGF0YS5sZW5ndGhcclxuXHJcbiAgICAgICAgLy8gYnVmZmVyIDFcclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5hX3Bvc2l0aW9uX2J1ZmZlcik7XHJcbiAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmFfcG9zaXRpb24sIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG1lc2gudmVydHMuZGF0YSwgdGhpcy5jb252ZXJ0RHJhd1NwZWVkKHNwZWVkKSk7XHJcblxyXG4gICAgICAgIC8vIGJ1ZmZlciAyIFxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmFfdGV4Y29vcmRfYnVmZmVyKTtcclxuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuYV90ZXhjb29yZCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbWVzaC51dnMuZGF0YSwgdGhpcy5jb252ZXJ0RHJhd1NwZWVkKHNwZWVkKSk7XHJcblxyXG4gICAgICAgIC8vIGJ1ZmZlciAzXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5pbmRleF9idWZmZXIpO1xyXG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG5ldyBVaW50MTZBcnJheShtZXNoLmxpbmtzLmRhdGEpLCB0aGlzLmNvbnZlcnREcmF3U3BlZWQoc3BlZWQpKTtcclxuXHJcbiAgICAgICAgLy8gdGV4dHVyZSBcclxuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgdGhpcy50ZXh0dXJlX2lkKTtcclxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUpO1xyXG4gICAgICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbWVzaC50ZXh0dXJlKTtcclxuICAgICAgICAvLyBhbHRlcm5hdGl2ZSB0ZXh0dXJlIC0+IEZpbGwgdGhlIHRleHR1cmUgd2l0aCBhIDF4MSBibHVlIHBpeGVsLlxyXG4gICAgICAgIC8vIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgMSwgMSwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbmV3IFVpbnQ4QXJyYXkoWzAsIDEyOCwgMTI4LCAyNTVdKSk7XHJcbiAgICAgICAgLy8gZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCAxLCAxLCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBtZXNoLnRleHR1cmUuZGF0YSk7XHJcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xyXG4gICAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKGdsLlRFWFRVUkVfMkQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbmRlciAxIGltYWdlIHRvIHRoZSBzY3JlZW5cclxuICAgIHJlbmRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBtYXRyaXg6IE1hdHJpeDQpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInJlbmRlcmluZy4uXCIpO1xyXG5cclxuICAgICAgICAvLyB1c2UgdGhlIHByb2dyYW1cclxuICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gc2V0IHVuaWZvcm1zXHJcbiAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLnVfdHJhbnNmb3JtLCBmYWxzZSwgbWF0cml4LmRhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNldCB0ZXh0dXJlIFxyXG4gICAgICAgIGdsLnVuaWZvcm0xaSh0aGlzLnVfdGV4dHVyZSwgdGhpcy50ZXh0dXJlX2lkKTtcclxuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgdGhpcy50ZXh0dXJlX2lkKTtcclxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUpO1xyXG5cclxuICAgICAgICAvLyBidWZmZXIgMVxyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYV9wb3NpdGlvbik7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuYV9wb3NpdGlvbl9idWZmZXIpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX3Bvc2l0aW9uLCAzLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG5cclxuICAgICAgICAvLyBidWZmZXIgMlxyXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYV90ZXhjb29yZCk7XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuYV90ZXhjb29yZF9idWZmZXIpO1xyXG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX3RleGNvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG5cclxuICAgICAgICAvLyBidWZmZXIgM1xyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRoaXMuaW5kZXhfYnVmZmVyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBkcmF3IVxyXG4gICAgICAgIGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIHRoaXMuY291bnQsIGdsLlVOU0lHTkVEX1NIT1JULCAwKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/texture-mesh-renderer.ts\n");

/***/ }),

/***/ "./src/sfered/eye-finder-app.ts":
/*!**************************************!*\
  !*** ./src/sfered/eye-finder-app.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EyeFinderApp\": () => /* binding */ EyeFinderApp\n/* harmony export */ });\n/* harmony import */ var _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mesh/pure-mesh */ \"./src/mesh/pure-mesh.ts\");\n/* harmony import */ var _scan_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scan-data */ \"./src/sfered/scan-data.ts\");\n/* harmony import */ var _system_domwrappers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/domwrappers */ \"./src/system/domwrappers.ts\");\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _render_camera__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../render/camera */ \"./src/render/camera.ts\");\n/* harmony import */ var _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../render/dot-renderer3 */ \"./src/render/dot-renderer3.ts\");\n/* harmony import */ var _render_line_renderer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../render/line-renderer */ \"./src/render/line-renderer.ts\");\n/* harmony import */ var _app_app__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../app/app */ \"./src/app/app.ts\");\n/* harmony import */ var _eye_finder__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./eye-finder */ \"./src/sfered/eye-finder.ts\");\n/* harmony import */ var _geo_rectangle__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../geo/rectangle */ \"./src/geo/rectangle.ts\");\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n/* harmony import */ var _geo_circle3__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../geo/circle3 */ \"./src/geo/circle3.ts\");\n/* harmony import */ var _geo_plane__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../geo/plane */ \"./src/geo/plane.ts\");\n/* harmony import */ var _render_texture_mesh_renderer__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../render/texture-mesh-renderer */ \"./src/render/texture-mesh-renderer.ts\");\n/* harmony import */ var _render_renderer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../render/renderer */ \"./src/render/renderer.ts\");\n/* harmony import */ var _mesh_topo_mesh__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../mesh/topo-mesh */ \"./src/mesh/topo-mesh.ts\");\n/* harmony import */ var _render_mesh_debug_renderer__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../render/mesh-debug-renderer */ \"./src/render/mesh-debug-renderer.ts\");\n/* harmony import */ var _geo_cube__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../geo/cube */ \"./src/geo/cube.ts\");\n// name:    debug-app\r\n// author:  Jos Feenstra\r\n// purpose: environment to test eyefinder functionalities\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst settings = __webpack_require__(/*! ../sfered/settings.json */ \"./src/sfered/settings.json\"); // note DIFFERENCE BETWEEN \"\" AND ''. '' WORKS, \"\" NOT. \r\n// note : sadly, this doesnt quite work. \r\n// TODO : figure out some serialize sceme, aka: spitting out obj data in json format. \r\n// const DEBUG_LANDMARKS: any = require('../../data/scan/facelandmarks.json'); // note DIFFERENCE BETWEEN \"\" AND ''. '' WORKS, \"\" NOT. \r\n// const DEBUG_JPG: any = require('../../data/scan/head3d.jpg'); // note DIFFERENCE BETWEEN \"\" AND ''. '' WORKS, \"\" NOT. \r\n// const DEBUG_OBJ: any = require('../../data/scan/head3d.obj'); // note DIFFERENCE BETWEEN \"\" AND ''. '' WORKS, \"\" NOT. \r\n// const DEBUG_FRONT_IMAGE: any = require('../../data/scan/image.obj'); // note DIFFERENCE BETWEEN \"\" AND ''. '' WORKS, \"\" NOT. \r\n// console.log(DEBUG_JPG);\r\nclass EyeFinderApp extends _app_app__WEBPACK_IMPORTED_MODULE_9__.App {\r\n    constructor(gl) {\r\n        super(gl);\r\n        this.dots2 = [];\r\n        this.whiteDots = [];\r\n        this.redDots = [];\r\n        this.images = [];\r\n        this.lines = [];\r\n        this.lineRenderables = [];\r\n        this.renderables = [];\r\n        this.debugRenderables = [];\r\n        let canvas = gl.canvas;\r\n        this.eyefinder = new _eye_finder__WEBPACK_IMPORTED_MODULE_10__.EyeFinder(this);\r\n        // setup render stuff \r\n        this.blueDotRenderer = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_7__.DotRenderer3(gl, 6, [0, 0, 1, 1], false);\r\n        this.redDotRenderer = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_7__.DotRenderer3(gl, 4, [1, 0, 0, 1], false);\r\n        this.whiteDotRenderer = new _render_dot_renderer3__WEBPACK_IMPORTED_MODULE_7__.DotRenderer3(gl, 5, [0.8, 0.8, 0.8, 1], false);\r\n        this.whiteLineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_8__.LineRenderer(gl, [0.9, 0.9, 0.9, 0.9]);\r\n        this.blueLineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_8__.LineRenderer(gl, [0, 0, 1, 0.5]);\r\n        this.redLineRenderer = new _render_line_renderer__WEBPACK_IMPORTED_MODULE_8__.LineRenderer(gl, [1, 0, 0, 0.5]);\r\n        this.faceRenderer = new _render_texture_mesh_renderer__WEBPACK_IMPORTED_MODULE_15__.TextureMeshRenderer(gl);\r\n        this.imageRenderer = new _render_texture_mesh_renderer__WEBPACK_IMPORTED_MODULE_15__.TextureMeshRenderer(gl);\r\n        this.debugMeshRenderer = new _render_mesh_debug_renderer__WEBPACK_IMPORTED_MODULE_18__.MeshDebugRenderer(gl, [0, 1, 1, 0.8], [0, 1, 1, 1]);\r\n        let zoom = 1;\r\n        this.camera = new _render_camera__WEBPACK_IMPORTED_MODULE_6__.Camera(canvas, zoom, true);\r\n        this.camera.angleAlpha = 0.25 * Math.PI;\r\n        this.camera.angleBeta = 0.25 * Math.PI;\r\n        (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_2__.addDropFileEventListeners)(canvas, processFiles.bind(this));\r\n    }\r\n    start() {\r\n        let lines = _mesh_line_array__WEBPACK_IMPORTED_MODULE_12__.LineArray.fromCircle(new _geo_circle3__WEBPACK_IMPORTED_MODULE_13__.Circle3(_geo_plane__WEBPACK_IMPORTED_MODULE_14__.Plane.WorldXY(), 0.5));\r\n        this.lineRenderables.push(lines);\r\n    }\r\n    update(state) {\r\n        // move the camera with the mouse\r\n        this.camera.update(state);\r\n    }\r\n    draw(gl) {\r\n        // get to-screen matrix\r\n        const canvas = gl.canvas;\r\n        let matrix = this.camera.totalMatrix;\r\n        this.lineRenderables.forEach((renderable) => {\r\n            this.redLineRenderer.setAndRender(gl, matrix, renderable);\r\n        });\r\n        if (this.mesh == undefined)\r\n            this.redDotRenderer.setAndRender(gl, matrix, _data_vector_array__WEBPACK_IMPORTED_MODULE_3__.Vector3Array.fromList([new _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector3(0, 0, 0), new _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector3(1, 1, 1)]));\r\n        else {\r\n            let mesh = this.mesh;\r\n            let landmarks = this.landmarks;\r\n            // show the mesh\r\n            this.faceRenderer.render(gl, matrix);\r\n            this.blueLineRenderer.render(gl, matrix);\r\n            // this.blueLineRenderer.setAndRender(gl, matrix, LineArray.fromMesh(mesh, false))\r\n            if (landmarks)\r\n                this.redDotRenderer.setAndRender(gl, matrix, landmarks);\r\n            this.blueDotRenderer.setAndRender(gl, matrix, mesh.uvs);\r\n            // debug data from eyefinder process\r\n            this.redDotRenderer.setAndRender(gl, matrix, this.dots2);\r\n            this.whiteDotRenderer.setAndRender(gl, matrix, this.whiteDots);\r\n            this.redDotRenderer.setAndRender(gl, matrix, this.redDots);\r\n            this.whiteLineRenderer.setAndRender(gl, matrix, _mesh_line_array__WEBPACK_IMPORTED_MODULE_12__.LineArray.fromLines(this.lines));\r\n            this.redLineRenderer.render(gl, matrix);\r\n            // render meshes with textures\r\n            this.renderables.forEach((mesh) => {\r\n                this.imageRenderer.setAndRender(gl, matrix, mesh);\r\n            });\r\n            // render textureless meshes \r\n            this.debugRenderables.forEach((mesh) => {\r\n                this.debugMeshRenderer.setAndRender(gl, matrix, mesh);\r\n            });\r\n            // render some dots \r\n            if (this.dots) {\r\n                //\r\n                this.redDotRenderer.setAndRender(gl, matrix, this.dots);\r\n            }\r\n        }\r\n    }\r\n    bufferImageMeshes() {\r\n        // i was having trouble rendering images... this is a workaround:\r\n        // convert the this.images[] list into the this.imageMeshes list. then render that with the normal renderer\r\n        let size = 256;\r\n        let accHeight = 0;\r\n        this.images.forEach((image, i) => {\r\n            let height = image.height;\r\n            let width = image.width;\r\n            let rec = new _geo_rectangle__WEBPACK_IMPORTED_MODULE_11__.Rectangle3(_geo_plane__WEBPACK_IMPORTED_MODULE_14__.Plane.fromPVV(new _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector3(0, 0, 0), new _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector3(1, 0, 0), new _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector3(0, 1, 0)), _math_domain__WEBPACK_IMPORTED_MODULE_4__.Domain2.fromBounds(10, 10 + width, accHeight, accHeight + height));\r\n            let mesh = _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromRect(rec);\r\n            mesh.setTexture(image.resize(size, size).toImageData()); // note: webgl can only work with 2^x * 512 images\r\n            this.renderables.push(mesh);\r\n            accHeight += height + 10;\r\n        });\r\n    }\r\n    addNextcloudData(data) {\r\n        // start the eyefinder\r\n        this.renderables = [];\r\n        let r = this.eyefinder.findPupilsFromNextcloud(data);\r\n        if (r) {\r\n            console.log(\"eyepoints found\");\r\n            // difference between edited eyepoints in dataset, and this newly found point:\r\n            let eyepointL = r[0];\r\n            let eyepointR = r[1];\r\n            let topo = _mesh_topo_mesh__WEBPACK_IMPORTED_MODULE_17__.TopoMesh.copyFromMesh(data.mesh);\r\n            let guesspointL = topo.closestPoint(data.eyePointsEdited.getVector(0));\r\n            let guesspointR = topo.closestPoint(data.eyePointsEdited.getVector(1));\r\n            console.log(\"accuracy left: \", eyepointL.disTo(guesspointL).toPrecision(5));\r\n            console.log(\"accuracy right: \", eyepointR.disTo(guesspointR).toPrecision(5));\r\n            // create spheres at the center points \r\n            let radius = 0.5;\r\n            let detail = 10;\r\n            let spheres = _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromJoin([\r\n                _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromSphere(eyepointL, radius, detail, detail),\r\n                _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromSphere(eyepointR, radius, detail, detail),\r\n                _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromCube(_geo_cube__WEBPACK_IMPORTED_MODULE_19__.Cube.fromRadius(guesspointL, radius)),\r\n                _mesh_pure_mesh__WEBPACK_IMPORTED_MODULE_0__.PureMesh.fromCube(_geo_cube__WEBPACK_IMPORTED_MODULE_19__.Cube.fromRadius(guesspointR, radius)),\r\n            ]);\r\n            this.debugRenderables.push(spheres.toDisplayMesh());\r\n        }\r\n        else {\r\n            console.log(\"eyepoints couldnt be found...\");\r\n        }\r\n        this.bufferImageMeshes();\r\n        let mesh = data.mesh;\r\n        this.faceRenderer.set(this.gl, mesh);\r\n        this.blueLineRenderer.set(this.gl, _mesh_line_array__WEBPACK_IMPORTED_MODULE_12__.LineArray.fromMesh(mesh), _render_renderer__WEBPACK_IMPORTED_MODULE_16__.DrawSpeed.StaticDraw);\r\n        this.mesh = mesh;\r\n        let center = this.mesh.verts.average();\r\n        this.camera.pos.copy(center);\r\n    }\r\n    addBellusData(bsd) {\r\n        // start the eyefinder\r\n        let r = this.eyefinder.findPupilsFromBellus(bsd);\r\n        if (r) {\r\n            console.log(\"eyepoints found\");\r\n        }\r\n        else {\r\n            console.log(\"eyepoints couldnt be found...\");\r\n        }\r\n        this.bufferImageMeshes();\r\n        // this.camera.pos = left.clone();\r\n        // this.camera.offset.x = 100;\r\n        // put the data into the render buffers.\r\n        let mesh = bsd.mesh;\r\n        this.faceRenderer.set(this.gl, mesh);\r\n        this.blueLineRenderer.set(this.gl, _mesh_line_array__WEBPACK_IMPORTED_MODULE_12__.LineArray.fromMesh(mesh), _render_renderer__WEBPACK_IMPORTED_MODULE_16__.DrawSpeed.StaticDraw);\r\n        // this.redLineRenderer.set(this.gl, mesh.uvs.data, mesh.getLineIds(), 2);\r\n        this.mesh = bsd.mesh;\r\n        this.landmarks = bsd.landmarks;\r\n    }\r\n    testBaricentricElevation(bsd) {\r\n        let topo = _mesh_topo_mesh__WEBPACK_IMPORTED_MODULE_17__.TopoMesh.copyFromMesh(bsd.mesh);\r\n        let count = 100;\r\n        let center = new _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector2(0.5, 0.5);\r\n        for (let i = 0; i < count; i++) {\r\n            let theta = (i / count) * 2 * Math.PI;\r\n            let test = _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector2.fromCircle(center, 0.05, theta);\r\n            this.whiteDots.push(test.to3D());\r\n            let face = topo.walkUV(test);\r\n            if (face == -1) {\r\n                console.warn(\"got a point not on triangle...\");\r\n                return new _math_vector__WEBPACK_IMPORTED_MODULE_5__.Vector3(0, 0, 0);\r\n            }\r\n            let tr3 = topo.getTriangle3(face);\r\n            let tr2 = topo.getTriangle2(face);\r\n            let triangle2points = tr2.points().to3D().toList();\r\n            // console.log(triangle2points);\r\n            this.whiteDots.push(test.to3D());\r\n            let bari = tr2.toBarycentric(test);\r\n            let test3d = tr3.fromBarycentric(bari);\r\n            this.whiteDots.push(test3d);\r\n        }\r\n    }\r\n}\r\nvar Format;\r\n(function (Format) {\r\n    Format[Format[\"None\"] = 0] = \"None\";\r\n    Format[Format[\"Bellus\"] = 1] = \"Bellus\";\r\n    Format[Format[\"NextCloudDataset\"] = 2] = \"NextCloudDataset\"; // the 140 or so scans on nextcloud \r\n})(Format || (Format = {}));\r\nfunction getFormat(files) {\r\n    for (let i = 0; i < files.length; i++) {\r\n        let file = files.item(i);\r\n        if (file.name == \"facelandmarks.json\") {\r\n            return Format.Bellus;\r\n        }\r\n        if (file.name == \"scaninfo.txt\") {\r\n            return Format.NextCloudDataset;\r\n        }\r\n    }\r\n    return Format.None;\r\n}\r\nfunction processFiles(files) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let format = getFormat(files);\r\n        switch (format) {\r\n            case Format.Bellus:\r\n                console.log(\"found a bellus-style dataset! processing...\");\r\n                _scan_data__WEBPACK_IMPORTED_MODULE_1__.BellusScanData.fromFileList(files, settings).then((bsd) => this.addBellusData(bsd));\r\n                break;\r\n            case Format.NextCloudDataset:\r\n                console.log(\"found a scan from the nextcloud format! processing...\");\r\n                _scan_data__WEBPACK_IMPORTED_MODULE_1__.NextcloudScanData.fromFileList(files, settings).then((data) => this.addNextcloudData(data));\r\n                break;\r\n            case Format.None:\r\n                console.log(\"couldnt read the files you gave me...\");\r\n                break;\r\n        }\r\n    });\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3NmZXJlZC9leWUtZmluZGVyLWFwcC50cz9hM2NkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHFCQUFxQjtBQUNyQix3QkFBd0I7QUFDeEIseURBQXlEOzs7Ozs7Ozs7O0FBR1o7QUFFbUI7QUFDb0I7QUFDaEM7QUFDWDtBQUNTO0FBQ1I7QUFDYTtBQUNBO0FBRXRCO0FBQ1E7QUFFaUI7QUFDWDtBQUNOO0FBQ0o7QUFDaUM7QUFDdkI7QUFDRjtBQUVxQjtBQUMvQjtBQUVuQyxNQUFNLFFBQVEsR0FBRyxtQkFBTyxDQUFDLDJEQUF5QixDQUFDLENBQUMsQ0FBQyx3REFBd0Q7QUFFN0cseUNBQXlDO0FBQ3pDLHNGQUFzRjtBQUV0Rix1SUFBdUk7QUFDdkkseUhBQXlIO0FBQ3pILHlIQUF5SDtBQUN6SCxnSUFBZ0k7QUFFaEksMEJBQTBCO0FBR25CLE1BQU0sWUFBYSxTQUFRLHlDQUFHO0lBd0NqQyxZQUFZLEVBQXlCO1FBRWpDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQS9CZCxVQUFLLEdBQWMsRUFBRSxDQUFDO1FBQ3RCLGNBQVMsR0FBYyxFQUFFLENBQUM7UUFDMUIsWUFBTyxHQUFjLEVBQUUsQ0FBQztRQUN4QixXQUFNLEdBQWdCLEVBQUUsQ0FBQztRQUV6QixVQUFLLEdBQWMsRUFBRSxDQUFDO1FBQ3RCLG9CQUFlLEdBQWdCLEVBQUUsQ0FBQztRQUVsQyxnQkFBVyxHQUFpQixFQUFFLENBQUM7UUFDL0IscUJBQWdCLEdBQWlCLEVBQUUsQ0FBQztRQXVCaEMsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQTJCLENBQUM7UUFFNUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLG1EQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFckMsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSwrREFBWSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNqRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksK0RBQVksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDaEUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksK0RBQVksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksK0RBQVksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLCtEQUFZLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksK0RBQVksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRXpELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSwrRUFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksK0VBQW1CLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksMkVBQWlCLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUUxRSxJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7UUFDYixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksa0RBQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBRXZDLDhFQUF5QixDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUdELEtBQUs7UUFDRCxJQUFJLEtBQUssR0FBRyxtRUFBb0IsQ0FBQyxJQUFJLGtEQUFPLENBQUMsc0RBQWEsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUdELE1BQU0sQ0FBQyxLQUFpQjtRQUVwQixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUdELElBQUksQ0FBQyxFQUF5QjtRQUUxQix1QkFBdUI7UUFDdkIsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQTJCLENBQUM7UUFDOUMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUM7UUFFckMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLEVBQUUsRUFBRTtZQUN4QyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQzlELENBQUMsQ0FBQztRQUVGLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxTQUFTO1lBQ3RCLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUscUVBQXFCLENBQUMsQ0FBQyxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBRSxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM3RztZQUNELElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDckIsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUUvQixnQkFBZ0I7WUFDaEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ3pDLGtGQUFrRjtZQUNsRixJQUFJLFNBQVM7Z0JBQ1QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztZQUM1RCxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUV4RCxvQ0FBb0M7WUFDcEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMvRCxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsa0VBQW1CLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFFakYsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRXhDLDhCQUE4QjtZQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUM5QixJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3RELENBQUMsQ0FBQztZQUVGLDZCQUE2QjtZQUM3QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7Z0JBQ25DLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMxRCxDQUFDLENBQUM7WUFFRixvQkFBb0I7WUFDcEIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNYLEVBQUU7Z0JBQ0YsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDM0Q7U0FDSjtJQUNMLENBQUM7SUFHRCxpQkFBaUI7UUFDYixpRUFBaUU7UUFDakUsMkdBQTJHO1FBRTNHLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUNmLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUU3QixJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDO1lBQzFCLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFFeEIsSUFBSSxHQUFHLEdBQUcsSUFBSSx1REFBVSxDQUNwQixzREFBYSxDQUFDLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3pFLDREQUFrQixDQUFDLEVBQUUsRUFBQyxFQUFFLEdBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxTQUFTLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNwRSxJQUFJLElBQUksR0FBRyw4REFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxrREFBa0Q7WUFDM0csSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFNUIsU0FBUyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBR0QsZ0JBQWdCLENBQUMsSUFBdUI7UUFFcEMsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckQsSUFBSSxDQUFDLEVBQUU7WUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFrQixDQUFDO1lBRS9CLDhFQUE4RTtZQUM5RSxJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckIsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXJCLElBQUksSUFBSSxHQUFHLG1FQUFxQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM1QyxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkUsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXZFLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1RSxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFHN0UsdUNBQXVDO1lBQ3ZDLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQztZQUNqQixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDaEIsSUFBSSxPQUFPLEdBQUcsOERBQWlCLENBQUM7Z0JBQzVCLGdFQUFtQixDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQztnQkFDdEQsZ0VBQW1CLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDO2dCQUN0RCw4REFBaUIsQ0FBQyx1REFBZSxDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDdkQsOERBQWlCLENBQUMsdURBQWUsQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDMUQsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQztTQUV2RDthQUFNO1lBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQztTQUMvQztRQUNELElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBRXpCLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsaUVBQWtCLENBQUMsSUFBSSxDQUFDLEVBQUUsbUVBQW9CLENBQUMsQ0FBQztRQUNuRixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUVqQixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUdELGFBQWEsQ0FBQyxHQUFtQjtRQUU3QixzQkFBc0I7UUFDdEIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsRUFBRTtZQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztTQUNsQzthQUFNO1lBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1NBQ2hEO1FBRUQsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDekIsa0NBQWtDO1FBQ2xDLDhCQUE4QjtRQUU5Qix3Q0FBd0M7UUFDeEMsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztRQUVwQixJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxpRUFBa0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxtRUFBb0IsQ0FBQyxDQUFDO1FBQ25GLDBFQUEwRTtRQUUxRSxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDO0lBQ25DLENBQUM7SUFHRCx3QkFBd0IsQ0FBQyxHQUFtQjtRQUV4QyxJQUFJLElBQUksR0FBRyxtRUFBcUIsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDO1FBQ2hCLElBQUksTUFBTSxHQUFHLElBQUksaURBQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbkMsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMzQixJQUFJLEtBQUssR0FBSSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUN2QyxJQUFJLElBQUksR0FBRyw0REFBa0IsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ25ELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBRWpDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFN0IsSUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUU7Z0JBQ1osT0FBTyxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO2dCQUMvQyxPQUFPLElBQUksaURBQU8sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzdCO1lBRUQsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRWxDLElBQUksZUFBZSxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNuRCxnQ0FBZ0M7WUFFaEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7WUFFakMsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuQyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRXZDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQy9CO0lBQ0wsQ0FBQztDQUVKO0FBR0QsSUFBSyxNQUlKO0FBSkQsV0FBSyxNQUFNO0lBQ1AsbUNBQUk7SUFDSix1Q0FBTTtJQUNOLDJEQUFnQixFQUFDLG9DQUFvQztBQUN6RCxDQUFDLEVBSkksTUFBTSxLQUFOLE1BQU0sUUFJVjtBQUdELFNBQVMsU0FBUyxDQUFDLEtBQWU7SUFFOUIsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDbkMsSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUUsQ0FBQztRQUMxQixJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksb0JBQW9CLEVBQUU7WUFDbkMsT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDO1NBQ3hCO1FBQ0QsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLGNBQWMsRUFBRTtZQUM3QixPQUFPLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztTQUNsQztLQUNKO0lBQ0QsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ3ZCLENBQUM7QUFHRCxTQUFlLFlBQVksQ0FBcUIsS0FBZTs7UUFFM0QsSUFBSSxNQUFNLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzlCLFFBQU8sTUFBTSxFQUFFO1lBQ1gsS0FBSyxNQUFNLENBQUMsTUFBTTtnQkFDZCxPQUFPLENBQUMsR0FBRyxDQUFDLDZDQUE2QyxDQUFDO2dCQUMxRCxtRUFBMkIsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUM3QyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FDbkMsQ0FBQztnQkFDRixNQUFNO1lBQ1YsS0FBSyxNQUFNLENBQUMsZ0JBQWdCO2dCQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLHVEQUF1RCxDQUFDO2dCQUNwRSxzRUFBOEIsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUNoRCxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUN4QyxDQUFDO2dCQUNGLE1BQU07WUFDVixLQUFLLE1BQU0sQ0FBQyxJQUFJO2dCQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUNBQXVDLENBQUM7Z0JBQ3BELE1BQU07U0FDYjtJQUNMLENBQUM7Q0FBQSIsImZpbGUiOiIuL3NyYy9zZmVyZWQvZXllLWZpbmRlci1hcHAudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBuYW1lOiAgICBkZWJ1Zy1hcHBcclxuLy8gYXV0aG9yOiAgSm9zIEZlZW5zdHJhXHJcbi8vIHB1cnBvc2U6IGVudmlyb25tZW50IHRvIHRlc3QgZXllZmluZGVyIGZ1bmN0aW9uYWxpdGllc1xyXG5cclxuaW1wb3J0IHsgUmVuZGVyTWVzaCwgbWVzaEZyb21PYmogfSBmcm9tIFwiLi4vbWVzaC9yZW5kZXItbWVzaFwiO1xyXG5pbXBvcnQgeyBQdXJlTWVzaCB9IGZyb20gXCIuLi9tZXNoL3B1cmUtbWVzaFwiO1xyXG5pbXBvcnQgeyBHZW9uSW1hZ2UgfSBmcm9tIFwiLi4vaW1nL0ltYWdlXCI7XHJcbmltcG9ydCB7IEJlbGx1c1NjYW5EYXRhLCBOZXh0Y2xvdWRTY2FuRGF0YSB9IGZyb20gXCIuL3NjYW4tZGF0YVwiO1xyXG5pbXBvcnQgeyBhZGREcm9wRmlsZUV2ZW50TGlzdGVuZXJzLCBsb2FkVGV4dEZyb21GaWxlIH0gZnJvbSBcIi4uL3N5c3RlbS9kb213cmFwcGVyc1wiO1xyXG5pbXBvcnQgeyBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgRG9tYWluMiB9IGZyb20gXCIuLi9tYXRoL2RvbWFpblwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuLi9yZW5kZXIvY2FtZXJhXCI7XHJcbmltcG9ydCB7IERvdFJlbmRlcmVyMyB9IGZyb20gXCIuLi9yZW5kZXIvZG90LXJlbmRlcmVyM1wiO1xyXG5pbXBvcnQgeyBMaW5lUmVuZGVyZXIgfSBmcm9tIFwiLi4vcmVuZGVyL2xpbmUtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgSW5wdXRTdGF0ZSB9IGZyb20gXCIuLi9zeXN0ZW0vaW5wdXQtc3RhdGVcIjtcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL2FwcC9hcHBcIjtcclxuaW1wb3J0IHsgRXllRmluZGVyIH0gZnJvbSBcIi4vZXllLWZpbmRlclwiO1xyXG5pbXBvcnQgeyBNYXRyaXgzLCBNYXRyaXg0IH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZTIsIFJlY3RhbmdsZTMgfSBmcm9tIFwiLi4vZ2VvL3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBMaW5lQXJyYXkgfSBmcm9tIFwiLi4vbWVzaC9saW5lLWFycmF5XCI7XHJcbmltcG9ydCB7IENpcmNsZTMgfSBmcm9tIFwiLi4vZ2VvL2NpcmNsZTNcIjtcclxuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vZ2VvL3BsYW5lXCI7XHJcbmltcG9ydCB7IFRleHR1cmVNZXNoUmVuZGVyZXIgfSBmcm9tIFwiLi4vcmVuZGVyL3RleHR1cmUtbWVzaC1yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBEcmF3U3BlZWQgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFRvcG9NZXNoIH0gZnJvbSBcIi4uL21lc2gvdG9wby1tZXNoXCI7XHJcbmltcG9ydCB7IFNpbXBsZU1lc2hSZW5kZXJlciB9IGZyb20gXCIuLi9yZW5kZXIvc2ltcGxlLW1lc2gtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgTWVzaERlYnVnUmVuZGVyZXIgfSBmcm9tIFwiLi4vcmVuZGVyL21lc2gtZGVidWctcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgQ3ViZSB9IGZyb20gXCIuLi9nZW8vY3ViZVwiO1xyXG5cclxuY29uc3Qgc2V0dGluZ3MgPSByZXF1aXJlKCcuLi9zZmVyZWQvc2V0dGluZ3MuanNvbicpOyAvLyBub3RlIERJRkZFUkVOQ0UgQkVUV0VFTiBcIlwiIEFORCAnJy4gJycgV09SS1MsIFwiXCIgTk9ULiBcclxuXHJcbi8vIG5vdGUgOiBzYWRseSwgdGhpcyBkb2VzbnQgcXVpdGUgd29yay4gXHJcbi8vIFRPRE8gOiBmaWd1cmUgb3V0IHNvbWUgc2VyaWFsaXplIHNjZW1lLCBha2E6IHNwaXR0aW5nIG91dCBvYmogZGF0YSBpbiBqc29uIGZvcm1hdC4gXHJcblxyXG4vLyBjb25zdCBERUJVR19MQU5ETUFSS1M6IGFueSA9IHJlcXVpcmUoJy4uLy4uL2RhdGEvc2Nhbi9mYWNlbGFuZG1hcmtzLmpzb24nKTsgLy8gbm90ZSBESUZGRVJFTkNFIEJFVFdFRU4gXCJcIiBBTkQgJycuICcnIFdPUktTLCBcIlwiIE5PVC4gXHJcbi8vIGNvbnN0IERFQlVHX0pQRzogYW55ID0gcmVxdWlyZSgnLi4vLi4vZGF0YS9zY2FuL2hlYWQzZC5qcGcnKTsgLy8gbm90ZSBESUZGRVJFTkNFIEJFVFdFRU4gXCJcIiBBTkQgJycuICcnIFdPUktTLCBcIlwiIE5PVC4gXHJcbi8vIGNvbnN0IERFQlVHX09CSjogYW55ID0gcmVxdWlyZSgnLi4vLi4vZGF0YS9zY2FuL2hlYWQzZC5vYmonKTsgLy8gbm90ZSBESUZGRVJFTkNFIEJFVFdFRU4gXCJcIiBBTkQgJycuICcnIFdPUktTLCBcIlwiIE5PVC4gXHJcbi8vIGNvbnN0IERFQlVHX0ZST05UX0lNQUdFOiBhbnkgPSByZXF1aXJlKCcuLi8uLi9kYXRhL3NjYW4vaW1hZ2Uub2JqJyk7IC8vIG5vdGUgRElGRkVSRU5DRSBCRVRXRUVOIFwiXCIgQU5EICcnLiAnJyBXT1JLUywgXCJcIiBOT1QuIFxyXG5cclxuLy8gY29uc29sZS5sb2coREVCVUdfSlBHKTtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRXllRmluZGVyQXBwIGV4dGVuZHMgQXBwIHtcclxuXHJcbiAgICAvLyBkYXRhIFxyXG4gICAgbWVzaD86IFJlbmRlck1lc2g7XHJcbiAgICBsYW5kbWFya3M/OiBWZWN0b3IzQXJyYXk7XHJcblxyXG4gICAgLy8gcHJvY2Vzc1xyXG4gICAgZXllZmluZGVyOiBFeWVGaW5kZXI7XHJcblxyXG4gICAgLy8gZGVidWcgZGF0YSBcclxuICAgIGRvdHM/OiBWZWN0b3IzQXJyYXk7XHJcbiAgICBkb3RzMjogVmVjdG9yMltdID0gW107XHJcbiAgICB3aGl0ZURvdHM6IFZlY3RvcjNbXSA9IFtdO1xyXG4gICAgcmVkRG90czogVmVjdG9yM1tdID0gW107XHJcbiAgICBpbWFnZXM6IEdlb25JbWFnZVtdID0gW107XHJcbiAgICBtZXNoTGluZUlkcz86IFVpbnQxNkFycmF5O1xyXG4gICAgbGluZXM6IFZlY3RvcjNbXSA9IFtdO1xyXG4gICAgbGluZVJlbmRlcmFibGVzOiBMaW5lQXJyYXlbXSA9IFtdO1xyXG5cclxuICAgIHJlbmRlcmFibGVzOiBSZW5kZXJNZXNoW10gPSBbXTtcclxuICAgIGRlYnVnUmVuZGVyYWJsZXM6IFJlbmRlck1lc2hbXSA9IFtdO1xyXG5cclxuICAgIC8vIHJlbmRlcmluZyBcclxuICAgIGJsdWVEb3RSZW5kZXJlcjogRG90UmVuZGVyZXIzO1xyXG4gICAgcmVkRG90UmVuZGVyZXI6IERvdFJlbmRlcmVyMztcclxuICAgIHdoaXRlRG90UmVuZGVyZXI6IERvdFJlbmRlcmVyMztcclxuXHJcbiAgICB3aGl0ZUxpbmVSZW5kZXJlcjogTGluZVJlbmRlcmVyO1xyXG4gICAgcmVkTGluZVJlbmRlcmVyOiBMaW5lUmVuZGVyZXI7XHJcbiAgICBibHVlTGluZVJlbmRlcmVyOiBMaW5lUmVuZGVyZXI7XHJcblxyXG4gICAgZmFjZVJlbmRlcmVyOiBUZXh0dXJlTWVzaFJlbmRlcmVyO1xyXG4gICAgaW1hZ2VSZW5kZXJlcjogVGV4dHVyZU1lc2hSZW5kZXJlcjtcclxuICAgIGRlYnVnTWVzaFJlbmRlcmVyOiBNZXNoRGVidWdSZW5kZXJlcjtcclxuXHJcbiAgICBjYW1lcmE6IENhbWVyYTtcclxuICAgIFxyXG5cclxuICAgIFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpIHtcclxuICAgICAgICBcclxuICAgICAgICBzdXBlcihnbCk7XHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGdsLmNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5leWVmaW5kZXIgPSBuZXcgRXllRmluZGVyKHRoaXMpO1xyXG5cclxuICAgICAgICAvLyBzZXR1cCByZW5kZXIgc3R1ZmYgXHJcbiAgICAgICAgdGhpcy5ibHVlRG90UmVuZGVyZXIgPSBuZXcgRG90UmVuZGVyZXIzKGdsLCA2LCBbMCwwLDEsMV0sIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnJlZERvdFJlbmRlcmVyID0gbmV3IERvdFJlbmRlcmVyMyhnbCwgNCwgWzEsMCwwLDFdLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy53aGl0ZURvdFJlbmRlcmVyID0gbmV3IERvdFJlbmRlcmVyMyhnbCwgNSwgWzAuOCwwLjgsMC44LDFdLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMud2hpdGVMaW5lUmVuZGVyZXIgPSBuZXcgTGluZVJlbmRlcmVyKGdsLCBbMC45LDAuOSwwLjksMC45XSk7XHJcbiAgICAgICAgdGhpcy5ibHVlTGluZVJlbmRlcmVyID0gbmV3IExpbmVSZW5kZXJlcihnbCwgWzAsMCwxLDAuNV0pO1xyXG4gICAgICAgIHRoaXMucmVkTGluZVJlbmRlcmVyID0gbmV3IExpbmVSZW5kZXJlcihnbCwgWzEsMCwwLDAuNV0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZmFjZVJlbmRlcmVyID0gbmV3IFRleHR1cmVNZXNoUmVuZGVyZXIoZ2wpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VSZW5kZXJlciA9IG5ldyBUZXh0dXJlTWVzaFJlbmRlcmVyKGdsKTtcclxuICAgICAgICB0aGlzLmRlYnVnTWVzaFJlbmRlcmVyID0gbmV3IE1lc2hEZWJ1Z1JlbmRlcmVyKGdsLCBbMCwxLDEsMC44XSwgWzAsMSwxLDFdKVxyXG5cclxuICAgICAgICBsZXQgem9vbSA9IDE7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKGNhbnZhcywgem9vbSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEuYW5nbGVBbHBoYSA9IDAuMjUgKiBNYXRoLlBJO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLmFuZ2xlQmV0YSA9IDAuMjUgKiBNYXRoLlBJO1xyXG5cclxuICAgICAgICBhZGREcm9wRmlsZUV2ZW50TGlzdGVuZXJzKGNhbnZhcywgcHJvY2Vzc0ZpbGVzLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBsZXQgbGluZXMgPSBMaW5lQXJyYXkuZnJvbUNpcmNsZShuZXcgQ2lyY2xlMyhQbGFuZS5Xb3JsZFhZKCksIDAuNSkpO1xyXG4gICAgICAgIHRoaXMubGluZVJlbmRlcmFibGVzLnB1c2gobGluZXMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB1cGRhdGUoc3RhdGU6IElucHV0U3RhdGUpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBtb3ZlIHRoZSBjYW1lcmEgd2l0aCB0aGUgbW91c2VcclxuICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGUoc3RhdGUpOyBcclxuICAgIH1cclxuXHJcblxyXG4gICAgZHJhdyhnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XHJcblxyXG4gICAgICAgIC8vIGdldCB0by1zY3JlZW4gbWF0cml4XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZ2wuY2FudmFzIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGxldCBtYXRyaXggPSB0aGlzLmNhbWVyYS50b3RhbE1hdHJpeDtcclxuXHJcbiAgICAgICAgdGhpcy5saW5lUmVuZGVyYWJsZXMuZm9yRWFjaCgocmVuZGVyYWJsZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlZExpbmVSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgcmVuZGVyYWJsZSk7XHJcbiAgICAgICAgfSlcclxuICAgICBcclxuICAgICAgICBpZiAodGhpcy5tZXNoID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5yZWREb3RSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgVmVjdG9yM0FycmF5LmZyb21MaXN0KFtuZXcgVmVjdG9yMygwLDAsMCksIG5ldyBWZWN0b3IzKDEsMSwxKV0pKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG1lc2ggPSB0aGlzLm1lc2g7XHJcbiAgICAgICAgICAgIGxldCBsYW5kbWFya3MgPSB0aGlzLmxhbmRtYXJrcztcclxuXHJcbiAgICAgICAgICAgIC8vIHNob3cgdGhlIG1lc2hcclxuICAgICAgICAgICAgdGhpcy5mYWNlUmVuZGVyZXIucmVuZGVyKGdsLCBtYXRyaXgpO1xyXG4gICAgICAgICAgICB0aGlzLmJsdWVMaW5lUmVuZGVyZXIucmVuZGVyKGdsLCBtYXRyaXgpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmJsdWVMaW5lUmVuZGVyZXIuc2V0QW5kUmVuZGVyKGdsLCBtYXRyaXgsIExpbmVBcnJheS5mcm9tTWVzaChtZXNoLCBmYWxzZSkpXHJcbiAgICAgICAgICAgIGlmIChsYW5kbWFya3MpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZERvdFJlbmRlcmVyLnNldEFuZFJlbmRlcihnbCwgbWF0cml4LCBsYW5kbWFya3MpO1xyXG4gICAgICAgICAgICB0aGlzLmJsdWVEb3RSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgbWVzaC51dnMpOyAgIFxyXG5cclxuICAgICAgICAgICAgLy8gZGVidWcgZGF0YSBmcm9tIGV5ZWZpbmRlciBwcm9jZXNzXHJcbiAgICAgICAgICAgIHRoaXMucmVkRG90UmVuZGVyZXIuc2V0QW5kUmVuZGVyKGdsLCBtYXRyaXgsIHRoaXMuZG90czIpO1xyXG4gICAgICAgICAgICB0aGlzLndoaXRlRG90UmVuZGVyZXIuc2V0QW5kUmVuZGVyKGdsLCBtYXRyaXgsIHRoaXMud2hpdGVEb3RzKTtcclxuICAgICAgICAgICAgdGhpcy5yZWREb3RSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgdGhpcy5yZWREb3RzKTtcclxuICAgICAgICAgICAgdGhpcy53aGl0ZUxpbmVSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgTGluZUFycmF5LmZyb21MaW5lcyh0aGlzLmxpbmVzKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZExpbmVSZW5kZXJlci5yZW5kZXIoZ2wsIG1hdHJpeCk7XHJcblxyXG4gICAgICAgICAgICAvLyByZW5kZXIgbWVzaGVzIHdpdGggdGV4dHVyZXNcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJhYmxlcy5mb3JFYWNoKChtZXNoKSA9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VSZW5kZXJlci5zZXRBbmRSZW5kZXIoZ2wsIG1hdHJpeCwgbWVzaCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAvLyByZW5kZXIgdGV4dHVyZWxlc3MgbWVzaGVzIFxyXG4gICAgICAgICAgICB0aGlzLmRlYnVnUmVuZGVyYWJsZXMuZm9yRWFjaCgobWVzaCkgPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnTWVzaFJlbmRlcmVyLnNldEFuZFJlbmRlcihnbCwgbWF0cml4LCBtZXNoKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIHJlbmRlciBzb21lIGRvdHMgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRvdHMpIHtcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZERvdFJlbmRlcmVyLnNldEFuZFJlbmRlcihnbCwgbWF0cml4LCB0aGlzLmRvdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICBcclxuICAgIH1cclxuXHJcblxyXG4gICAgYnVmZmVySW1hZ2VNZXNoZXMoKSB7XHJcbiAgICAgICAgLy8gaSB3YXMgaGF2aW5nIHRyb3VibGUgcmVuZGVyaW5nIGltYWdlcy4uLiB0aGlzIGlzIGEgd29ya2Fyb3VuZDpcclxuICAgICAgICAvLyBjb252ZXJ0IHRoZSB0aGlzLmltYWdlc1tdIGxpc3QgaW50byB0aGUgdGhpcy5pbWFnZU1lc2hlcyBsaXN0LiB0aGVuIHJlbmRlciB0aGF0IHdpdGggdGhlIG5vcm1hbCByZW5kZXJlclxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzaXplID0gMjU2O1xyXG4gICAgICAgIGxldCBhY2NIZWlnaHQgPSAwO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goKGltYWdlLCBpKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBpbWFnZS53aWR0aDsgXHJcblxyXG4gICAgICAgICAgICBsZXQgcmVjID0gbmV3IFJlY3RhbmdsZTMoXHJcbiAgICAgICAgICAgICAgICBQbGFuZS5mcm9tUFZWKG5ldyBWZWN0b3IzKDAsMCwwKSwgbmV3IFZlY3RvcjMoMSwwLDApLCBuZXcgVmVjdG9yMygwLDEsMCkpLFxyXG4gICAgICAgICAgICAgICAgRG9tYWluMi5mcm9tQm91bmRzKDEwLDEwK3dpZHRoLCBhY2NIZWlnaHQsIGFjY0hlaWdodCArIGhlaWdodCkpO1xyXG4gICAgICAgICAgICBsZXQgbWVzaCA9IFB1cmVNZXNoLmZyb21SZWN0KHJlYyk7XHJcbiAgICAgICAgICAgIG1lc2guc2V0VGV4dHVyZShpbWFnZS5yZXNpemUoc2l6ZSwgc2l6ZSkudG9JbWFnZURhdGEoKSk7IC8vIG5vdGU6IHdlYmdsIGNhbiBvbmx5IHdvcmsgd2l0aCAyXnggKiA1MTIgaW1hZ2VzXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyYWJsZXMucHVzaChtZXNoKTtcclxuXHJcbiAgICAgICAgICAgIGFjY0hlaWdodCArPSBoZWlnaHQgKyAxMDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYWRkTmV4dGNsb3VkRGF0YShkYXRhOiBOZXh0Y2xvdWRTY2FuRGF0YSkge1xyXG5cclxuICAgICAgICAvLyBzdGFydCB0aGUgZXllZmluZGVyXHJcbiAgICAgICAgdGhpcy5yZW5kZXJhYmxlcyA9IFtdO1xyXG4gICAgICAgIGxldCByID0gdGhpcy5leWVmaW5kZXIuZmluZFB1cGlsc0Zyb21OZXh0Y2xvdWQoZGF0YSk7XHJcbiAgICAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJleWVwb2ludHMgZm91bmRcIiEpICBcclxuXHJcbiAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgYmV0d2VlbiBlZGl0ZWQgZXllcG9pbnRzIGluIGRhdGFzZXQsIGFuZCB0aGlzIG5ld2x5IGZvdW5kIHBvaW50OlxyXG4gICAgICAgICAgICBsZXQgZXllcG9pbnRMID0gclswXTtcclxuICAgICAgICAgICAgbGV0IGV5ZXBvaW50UiA9IHJbMV07XHJcblxyXG4gICAgICAgICAgICBsZXQgdG9wbyA9IFRvcG9NZXNoLmNvcHlGcm9tTWVzaChkYXRhLm1lc2gpO1xyXG4gICAgICAgICAgICBsZXQgZ3Vlc3Nwb2ludEwgPSB0b3BvLmNsb3Nlc3RQb2ludChkYXRhLmV5ZVBvaW50c0VkaXRlZC5nZXRWZWN0b3IoMCkpO1xyXG4gICAgICAgICAgICBsZXQgZ3Vlc3Nwb2ludFIgPSB0b3BvLmNsb3Nlc3RQb2ludChkYXRhLmV5ZVBvaW50c0VkaXRlZC5nZXRWZWN0b3IoMSkpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJhY2N1cmFjeSBsZWZ0OiBcIiwgZXllcG9pbnRMLmRpc1RvKGd1ZXNzcG9pbnRMKS50b1ByZWNpc2lvbig1KSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYWNjdXJhY3kgcmlnaHQ6IFwiLCBleWVwb2ludFIuZGlzVG8oZ3Vlc3Nwb2ludFIpLnRvUHJlY2lzaW9uKDUpKTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBzcGhlcmVzIGF0IHRoZSBjZW50ZXIgcG9pbnRzIFxyXG4gICAgICAgICAgICBsZXQgcmFkaXVzID0gMC41O1xyXG4gICAgICAgICAgICBsZXQgZGV0YWlsID0gMTA7XHJcbiAgICAgICAgICAgIGxldCBzcGhlcmVzID0gUHVyZU1lc2guZnJvbUpvaW4oW1xyXG4gICAgICAgICAgICAgICAgUHVyZU1lc2guZnJvbVNwaGVyZShleWVwb2ludEwsIHJhZGl1cywgZGV0YWlsLCBkZXRhaWwpLFxyXG4gICAgICAgICAgICAgICAgUHVyZU1lc2guZnJvbVNwaGVyZShleWVwb2ludFIsIHJhZGl1cywgZGV0YWlsLCBkZXRhaWwpLFxyXG4gICAgICAgICAgICAgICAgUHVyZU1lc2guZnJvbUN1YmUoQ3ViZS5mcm9tUmFkaXVzKGd1ZXNzcG9pbnRMLCByYWRpdXMpKSxcclxuICAgICAgICAgICAgICAgIFB1cmVNZXNoLmZyb21DdWJlKEN1YmUuZnJvbVJhZGl1cyhndWVzc3BvaW50UiwgcmFkaXVzKSksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnUmVuZGVyYWJsZXMucHVzaChzcGhlcmVzLnRvRGlzcGxheU1lc2goKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJleWVwb2ludHMgY291bGRudCBiZSBmb3VuZC4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJ1ZmZlckltYWdlTWVzaGVzKCk7XHJcblxyXG4gICAgICAgIGxldCBtZXNoID0gZGF0YS5tZXNoOyAgICAgICAgXHJcbiAgICAgICAgdGhpcy5mYWNlUmVuZGVyZXIuc2V0KHRoaXMuZ2wsIG1lc2gpO1xyXG4gICAgICAgIHRoaXMuYmx1ZUxpbmVSZW5kZXJlci5zZXQodGhpcy5nbCwgTGluZUFycmF5LmZyb21NZXNoKG1lc2gpLCBEcmF3U3BlZWQuU3RhdGljRHJhdyk7XHJcbiAgICAgICAgdGhpcy5tZXNoID0gbWVzaDtcclxuXHJcbiAgICAgICAgbGV0IGNlbnRlciA9IHRoaXMubWVzaC52ZXJ0cy5hdmVyYWdlKCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zLmNvcHkoY2VudGVyKTsgIFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhZGRCZWxsdXNEYXRhKGJzZDogQmVsbHVzU2NhbkRhdGEpIHtcclxuXHJcbiAgICAgICAgLy8gc3RhcnQgdGhlIGV5ZWZpbmRlclxyXG4gICAgICAgIGxldCByID0gdGhpcy5leWVmaW5kZXIuZmluZFB1cGlsc0Zyb21CZWxsdXMoYnNkKTtcclxuICAgICAgICBpZiAocikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImV5ZXBvaW50cyBmb3VuZFwiKTsgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXllcG9pbnRzIGNvdWxkbnQgYmUgZm91bmQuLi5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJ1ZmZlckltYWdlTWVzaGVzKCk7XHJcbiAgICAgICAgLy8gdGhpcy5jYW1lcmEucG9zID0gbGVmdC5jbG9uZSgpO1xyXG4gICAgICAgIC8vIHRoaXMuY2FtZXJhLm9mZnNldC54ID0gMTAwO1xyXG5cclxuICAgICAgICAvLyBwdXQgdGhlIGRhdGEgaW50byB0aGUgcmVuZGVyIGJ1ZmZlcnMuXHJcbiAgICAgICAgbGV0IG1lc2ggPSBic2QubWVzaDtcclxuXHJcbiAgICAgICAgdGhpcy5mYWNlUmVuZGVyZXIuc2V0KHRoaXMuZ2wsIG1lc2gpO1xyXG4gICAgICAgIHRoaXMuYmx1ZUxpbmVSZW5kZXJlci5zZXQodGhpcy5nbCwgTGluZUFycmF5LmZyb21NZXNoKG1lc2gpLCBEcmF3U3BlZWQuU3RhdGljRHJhdyk7XHJcbiAgICAgICAgLy8gdGhpcy5yZWRMaW5lUmVuZGVyZXIuc2V0KHRoaXMuZ2wsIG1lc2gudXZzLmRhdGEsIG1lc2guZ2V0TGluZUlkcygpLCAyKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZXNoID0gYnNkLm1lc2g7XHJcbiAgICAgICAgdGhpcy5sYW5kbWFya3MgPSBic2QubGFuZG1hcmtzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0ZXN0QmFyaWNlbnRyaWNFbGV2YXRpb24oYnNkOiBCZWxsdXNTY2FuRGF0YSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB0b3BvID0gVG9wb01lc2guY29weUZyb21NZXNoKGJzZC5tZXNoKTtcclxuICAgICAgICBsZXQgY291bnQgPSAxMDA7XHJcbiAgICAgICAgbGV0IGNlbnRlciA9IG5ldyBWZWN0b3IyKDAuNSwgMC41KTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdGhldGEgPSAgKGkgLyBjb3VudCkgKiAyICogTWF0aC5QSTtcclxuICAgICAgICAgICAgbGV0IHRlc3QgPSBWZWN0b3IyLmZyb21DaXJjbGUoY2VudGVyLCAwLjA1LCB0aGV0YSk7XHJcbiAgICAgICAgICAgIHRoaXMud2hpdGVEb3RzLnB1c2godGVzdC50bzNEKCkpOyAgICBcclxuXHJcbiAgICAgICAgICAgIGxldCBmYWNlID0gdG9wby53YWxrVVYodGVzdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChmYWNlID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJnb3QgYSBwb2ludCBub3Qgb24gdHJpYW5nbGUuLi5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoMCwwLDApO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCB0cjMgPSB0b3BvLmdldFRyaWFuZ2xlMyhmYWNlKTtcclxuICAgICAgICAgICAgbGV0IHRyMiA9IHRvcG8uZ2V0VHJpYW5nbGUyKGZhY2UpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRyaWFuZ2xlMnBvaW50cyA9IHRyMi5wb2ludHMoKS50bzNEKCkudG9MaXN0KCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRyaWFuZ2xlMnBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLndoaXRlRG90cy5wdXNoKHRlc3QudG8zRCgpKTsgICAgXHJcblxyXG4gICAgICAgICAgICBsZXQgYmFyaSA9IHRyMi50b0JhcnljZW50cmljKHRlc3QpO1xyXG4gICAgICAgICAgICBsZXQgdGVzdDNkID0gdHIzLmZyb21CYXJ5Y2VudHJpYyhiYXJpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMud2hpdGVEb3RzLnB1c2godGVzdDNkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuZW51bSBGb3JtYXQge1xyXG4gICAgTm9uZSxcclxuICAgIEJlbGx1cywgLy8gdGhlIHNwZWNpYWwgZGF0YXNldCBnYXRoZXJlZCBhdCBhbiBlYXJsaWVyIHN0ZXBcclxuICAgIE5leHRDbG91ZERhdGFzZXQgLy8gdGhlIDE0MCBvciBzbyBzY2FucyBvbiBuZXh0Y2xvdWQgXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBnZXRGb3JtYXQoZmlsZXM6IEZpbGVMaXN0KSA6IEZvcm1hdCB7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMCA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBmaWxlID0gZmlsZXMuaXRlbShpKSE7XHJcbiAgICAgICAgaWYgKGZpbGUubmFtZSA9PSBcImZhY2VsYW5kbWFya3MuanNvblwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGb3JtYXQuQmVsbHVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmlsZS5uYW1lID09IFwic2NhbmluZm8udHh0XCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEZvcm1hdC5OZXh0Q2xvdWREYXRhc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBGb3JtYXQuTm9uZTtcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NGaWxlcyh0aGlzOiBFeWVGaW5kZXJBcHAsIGZpbGVzOiBGaWxlTGlzdCkge1xyXG5cclxuICAgIGxldCBmb3JtYXQgPSBnZXRGb3JtYXQoZmlsZXMpO1xyXG4gICAgc3dpdGNoKGZvcm1hdCkge1xyXG4gICAgICAgIGNhc2UgRm9ybWF0LkJlbGx1czogXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZm91bmQgYSBiZWxsdXMtc3R5bGUgZGF0YXNldCEgcHJvY2Vzc2luZy4uLlwiKVxyXG4gICAgICAgICAgICBCZWxsdXNTY2FuRGF0YS5mcm9tRmlsZUxpc3QoZmlsZXMsIHNldHRpbmdzKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgKGJzZCkgPT4gdGhpcy5hZGRCZWxsdXNEYXRhKGJzZClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGb3JtYXQuTmV4dENsb3VkRGF0YXNldDogXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZm91bmQgYSBzY2FuIGZyb20gdGhlIG5leHRjbG91ZCBmb3JtYXQhIHByb2Nlc3NpbmcuLi5cIilcclxuICAgICAgICAgICAgTmV4dGNsb3VkU2NhbkRhdGEuZnJvbUZpbGVMaXN0KGZpbGVzLCBzZXR0aW5ncykudGhlbihcclxuICAgICAgICAgICAgICAgIChkYXRhKSA9PiB0aGlzLmFkZE5leHRjbG91ZERhdGEoZGF0YSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGb3JtYXQuTm9uZTogXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY291bGRudCByZWFkIHRoZSBmaWxlcyB5b3UgZ2F2ZSBtZS4uLlwiKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/sfered/eye-finder-app.ts\n");

/***/ }),

/***/ "./src/sfered/eye-finder.ts":
/*!**********************************!*\
  !*** ./src/sfered/eye-finder.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EyeFinder\": () => /* binding */ EyeFinder\n/* harmony export */ });\n/* harmony import */ var _img_Image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../img/Image */ \"./src/img/Image.ts\");\n/* harmony import */ var _img_kernels__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../img/kernels */ \"./src/img/kernels.ts\");\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _math_domain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/domain */ \"./src/math/domain.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n/* harmony import */ var _mesh_topo_mesh__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../mesh/topo-mesh */ \"./src/mesh/topo-mesh.ts\");\n/* harmony import */ var _geo_plane__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../geo/plane */ \"./src/geo/plane.ts\");\n/* harmony import */ var _ransac__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ransac */ \"./src/sfered/ransac.ts\");\n/* harmony import */ var _mesh_line_array__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../mesh/line-array */ \"./src/mesh/line-array.ts\");\n/* harmony import */ var _geo_circle3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geo/circle3 */ \"./src/geo/circle3.ts\");\n// name:    eye-finder.ts\r\n// author:  Jos Feenstra\r\n// purpose: Keeper of the full pupil-point.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass EyeFinder {\r\n    constructor(app) {\r\n        this.app = app;\r\n    }\r\n    findPupilsFromNextcloud(data) {\r\n        console.log(\"finding eyes from nextcloud set...\");\r\n        let topo = _mesh_topo_mesh__WEBPACK_IMPORTED_MODULE_5__.TopoMesh.copyFromMesh(data.mesh);\r\n        let image = _img_Image__WEBPACK_IMPORTED_MODULE_0__.GeonImage.fromImageData(data.texture);\r\n        let [winLeft, winRight] = this.getEyeWindowsNextcloud(data, topo);\r\n        return this.findPupils(image, topo, data.settings, winLeft, winRight);\r\n    }\r\n    findPupilsFromBellus(bsd) {\r\n        console.log(\"finding eyes from bellus...\");\r\n        // get the window with which the eyes can be extracted\r\n        let topo = _mesh_topo_mesh__WEBPACK_IMPORTED_MODULE_5__.TopoMesh.copyFromMesh(bsd.mesh);\r\n        let image = _img_Image__WEBPACK_IMPORTED_MODULE_0__.GeonImage.fromImageData(bsd.texture);\r\n        let [winLeft, winRight] = this.getEyeWindows(bsd);\r\n        return this.findPupils(image, topo, bsd.settings, winLeft, winRight);\r\n    }\r\n    // some stupid wrapping\r\n    findPupils(image, topo, settings, winLeft, winRight) {\r\n        // left side\r\n        let ransacSettings = settings.process_ransac;\r\n        let leftPupilPoint = this.findPupilFromEye(image, topo, winLeft, ransacSettings);\r\n        // right side\r\n        let rightPupilPoint = this.findPupilFromEye(image, topo, winRight, ransacSettings);\r\n        if (leftPupilPoint && rightPupilPoint) {\r\n            return [leftPupilPoint, rightPupilPoint];\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    }\r\n    findPupilFromEye(image, mesh, window, ransacSettings) {\r\n        var _a, _b, _c, _d;\r\n        // step 1: get points (vectors) which symbolize pixels in contrasting areas of the image (the iris).\r\n        let eyeImg = image.trimWithDomain(window);\r\n        let contrastEyeImg = this.contrastDetection(eyeImg);\r\n        let cps = this.pixelsToPoints(contrastEyeImg, 50);\r\n        if (cps.count() < 0) {\r\n            return;\r\n        }\r\n        let scaleVec = new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector2(1 / image.width, 1 / image.height);\r\n        // convert these points to the same space as the uv points of the mesh\r\n        cps.forEach((p) => {\r\n            // move from eyetrim to original image space\r\n            p.add(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector2(window.x.t0, window.y.t0));\r\n            // move from pixel space to normalized uv space\r\n            p.mul(scaleVec);\r\n            // flip and move according to uv parameters\r\n            p.mul(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector2(1, -1));\r\n            p.add(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector2(0, 1));\r\n        });\r\n        // step 2: elevate from uv space to vertex space of the mesh\r\n        let cpsElevated = cps.to3D().map((p, i) => {\r\n            return mesh.elevate(p.to2D());\r\n        });\r\n        (_a = this.app) === null || _a === void 0 ? void 0 : _a.whiteDots.push(...cpsElevated.toList());\r\n        // step 3: fit a plane through the points, and project to this plane\r\n        let plane = _geo_plane__WEBPACK_IMPORTED_MODULE_6__.Plane.fromLeastSquares(cpsElevated);\r\n        cpsElevated.forEach((p) => plane.pullToPlane(p));\r\n        let cpsFixed = cpsElevated.to2D();\r\n        // step 4: ransac! \r\n        let rss = ransacSettings;\r\n        let r = (0,_ransac__WEBPACK_IMPORTED_MODULE_7__.RansacCircle2d)(cpsFixed, rss.iterations, rss.radius, rss.tolerance, rss.seed, rss.min_score, rss.max_radius_deviation);\r\n        let eyepoint;\r\n        let bestCircle;\r\n        if (!r) {\r\n            console.error(\"couldnt find eyepoint...\");\r\n            return;\r\n        }\r\n        else {\r\n            let [bestCircle, values] = r;\r\n            eyepoint = plane.pushToWorld(bestCircle.center.to3D());\r\n            (_b = this.app) === null || _b === void 0 ? void 0 : _b.lineRenderables.push(_mesh_line_array__WEBPACK_IMPORTED_MODULE_8__.LineArray.fromCircle(_geo_circle3__WEBPACK_IMPORTED_MODULE_9__.Circle3.fromCircle2(bestCircle, plane)));\r\n        }\r\n        // debug\r\n        cpsElevated.forEach((p) => {\r\n            p.z = 0;\r\n            return plane.pushToWorld(p);\r\n        });\r\n        (_c = this.app) === null || _c === void 0 ? void 0 : _c.lineRenderables.push(_mesh_line_array__WEBPACK_IMPORTED_MODULE_8__.LineArray.fromPlane(plane));\r\n        (_d = this.app) === null || _d === void 0 ? void 0 : _d.redDots.push(eyepoint);\r\n        return eyepoint;\r\n    }\r\n    contrastDetection(image) {\r\n        // console.log(\"processing image with size: \", image.width, image.height);\r\n        var _a;\r\n        let grey = image.toGreyscale();\r\n        let blurred = grey.applyKernel(_img_kernels__WEBPACK_IMPORTED_MODULE_1__.Kernels.Gauss5);\r\n        let left = blurred.applyKernel(_img_kernels__WEBPACK_IMPORTED_MODULE_1__.Kernels.SobelLeft);\r\n        let right = blurred.applyKernel(_img_kernels__WEBPACK_IMPORTED_MODULE_1__.Kernels.SobelRight);\r\n        let sum = this.SobelSum(left, right);\r\n        let [min, max] = sum.getMinMax();\r\n        // console.log(\"minmax: \", min, max);\r\n        let upper = max * 0.7;\r\n        let lower = upper * 0.3;\r\n        let thres = sum.applyThreshold(lower, upper);\r\n        // debug \r\n        // console.log(\"adding images:\")\r\n        (_a = this.app) === null || _a === void 0 ? void 0 : _a.images.push(blurred.toRGBA(), sum.toRGBA(), thres.toRGBA());\r\n        return thres;\r\n    }\r\n    SobelSum(hor, ver) {\r\n        let width = hor.width; // assume the same as ver\r\n        let height = hor.height; // assume the same as ver\r\n        let ps = hor.pixelSize;\r\n        let sum = new _img_Image__WEBPACK_IMPORTED_MODULE_0__.GeonImage(width, height, ps);\r\n        for (let y = 0; y < height; y++) {\r\n            for (let x = 0; x < width; x++) {\r\n                // assume grey value\r\n                let one = hor.get(x, y)[0];\r\n                let two = ver.get(x, y)[0];\r\n                let value = Math.round(Math.pow((Math.pow(one, 2) + Math.pow(two, 2)), 0.5));\r\n                sum.set(x, y, [value, value, value, 255]);\r\n            }\r\n        }\r\n        return sum;\r\n    }\r\n    getEyeWindowsNextcloud(data, mesh) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h;\r\n        let bb_o = data.settings.process.bounding_box_offset;\r\n        console.log(bb_o);\r\n        let eyeGuessLeft = data.eyePointsEdited.getVector(0);\r\n        let eyeGuessRight = data.eyePointsEdited.getVector(1);\r\n        console.log(\"groundTruthLeft, groundTruthRight\");\r\n        console.log(eyeGuessLeft, eyeGuessRight);\r\n        (_b = (_a = this.app) === null || _a === void 0 ? void 0 : _a.whiteDots) === null || _b === void 0 ? void 0 : _b.push(eyeGuessLeft);\r\n        (_d = (_c = this.app) === null || _c === void 0 ? void 0 : _c.whiteDots) === null || _d === void 0 ? void 0 : _d.push(eyeGuessRight);\r\n        let eyeLandmarksLeft = mesh.flattenClosestPoint(eyeGuessLeft);\r\n        let eyeLandmarksRight = mesh.flattenClosestPoint(eyeGuessRight);\r\n        (_f = (_e = this.app) === null || _e === void 0 ? void 0 : _e.whiteDots) === null || _f === void 0 ? void 0 : _f.push(eyeLandmarksLeft.to3D());\r\n        (_h = (_g = this.app) === null || _g === void 0 ? void 0 : _g.whiteDots) === null || _h === void 0 ? void 0 : _h.push(eyeLandmarksRight.to3D());\r\n        // to texture pixel space \r\n        let mat = data.getTextureToUVMatrix().inverse();\r\n        console.log(mat);\r\n        // let mat = data.getTextureToUVMatrix().inverse();\r\n        let leftPixel = mat.multiplyVector(eyeLandmarksLeft.to3D()).to2D();\r\n        let rightPixel = mat.multiplyVector(eyeLandmarksRight.to3D()).to2D();\r\n        console.log(\"in pixelspace: \");\r\n        console.log(leftPixel, rightPixel);\r\n        let window = [-70, 70, -70, 70];\r\n        let rightWindow = _math_domain__WEBPACK_IMPORTED_MODULE_3__.Domain2.fromInclude(_data_vector_array__WEBPACK_IMPORTED_MODULE_2__.Vector2Array.fromList([leftPixel])).offset(window);\r\n        let leftWindow = _math_domain__WEBPACK_IMPORTED_MODULE_3__.Domain2.fromInclude(_data_vector_array__WEBPACK_IMPORTED_MODULE_2__.Vector2Array.fromList([rightPixel])).offset(window);\r\n        return [rightWindow, leftWindow];\r\n    }\r\n    getEyeWindows(bsd) {\r\n        let pr = bsd.settings.process.point_ranges;\r\n        let bb_o = bsd.settings.process.bounding_box_offset;\r\n        let eyeLandmarksLeft = bsd.landmarks.takeRows(pr.left_eye_set);\r\n        let eyeLandmarksRight = bsd.landmarks.takeRows(pr.right_eye_set);\r\n        let rightWindow = _math_domain__WEBPACK_IMPORTED_MODULE_3__.Domain2.fromInclude(eyeLandmarksLeft).offset(bb_o.ly);\r\n        let leftWindow = _math_domain__WEBPACK_IMPORTED_MODULE_3__.Domain2.fromInclude(eyeLandmarksRight).offset(bb_o.ry);\r\n        return [rightWindow, leftWindow];\r\n    }\r\n    pixelsToPoints(image, threshold) {\r\n        let points = [];\r\n        for (let y = 0; y < image.height; y++) {\r\n            for (let x = 0; x < image.width; x++) {\r\n                let value = image.get(x, y)[0];\r\n                if (value > threshold) {\r\n                    points.push(new _math_vector__WEBPACK_IMPORTED_MODULE_4__.Vector2(x, y));\r\n                }\r\n            }\r\n        }\r\n        return _data_vector_array__WEBPACK_IMPORTED_MODULE_2__.Vector2Array.fromList(points);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3NmZXJlZC9leWUtZmluZGVyLnRzP2UzMjYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSx5QkFBeUI7QUFDekIsd0JBQXdCO0FBQ3hCLDJDQUEyQztBQUdGO0FBQ0E7QUFDeUI7QUFDekI7QUFDUztBQUdMO0FBQ1I7QUFFSztBQUNLO0FBQ047QUFJbEMsTUFBTSxTQUFTO0lBSWxCLFlBQVksR0FBa0I7UUFDMUIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7SUFDbkIsQ0FBQztJQUdNLHVCQUF1QixDQUFDLElBQXVCO1FBRWxELE9BQU8sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLENBQUMsQ0FBQztRQUVsRCxJQUFJLElBQUksR0FBRyxrRUFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUMsSUFBSSxLQUFLLEdBQUcsK0RBQXVCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUVsRSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBR00sb0JBQW9CLENBQUMsR0FBbUI7UUFFM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO1FBRTNDLHNEQUFzRDtRQUN0RCxJQUFJLElBQUksR0FBRyxrRUFBcUIsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsSUFBSSxLQUFLLEdBQUcsK0RBQXVCLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFD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Q0FBQyxLQUFnQixFQUFFLFNBQWlCO1FBRXRELElBQUksTUFBTSxHQUFjLEVBQUUsQ0FBQztRQUMzQixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNuQyxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDakMsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLElBQUksS0FBSyxHQUFHLFNBQVMsRUFBRTtvQkFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ2xDO2FBQ0o7U0FDSjtRQUNELE9BQU8scUVBQXFCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDekMsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL3NmZXJlZC9leWUtZmluZGVyLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbmFtZTogICAgZXllLWZpbmRlci50c1xyXG4vLyBhdXRob3I6ICBKb3MgRmVlbnN0cmFcclxuLy8gcHVycG9zZTogS2VlcGVyIG9mIHRoZSBmdWxsIHB1cGlsLXBvaW50LlxyXG5cclxuaW1wb3J0IHsgRXllRmluZGVyQXBwIH0gZnJvbSBcIi4vZXllLWZpbmRlci1hcHBcIjtcclxuaW1wb3J0IHsgR2VvbkltYWdlIH0gZnJvbSBcIi4uL2ltZy9JbWFnZVwiO1xyXG5pbXBvcnQgeyBLZXJuZWxzIH0gZnJvbSBcIi4uL2ltZy9rZXJuZWxzXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJBcnJheSwgVmVjdG9yM0FycmF5IH0gZnJvbSBcIi4uL2RhdGEvdmVjdG9yLWFycmF5XCI7XHJcbmltcG9ydCB7IERvbWFpbjIgfSBmcm9tIFwiLi4vbWF0aC9kb21haW5cIjtcclxuaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBEb3RSZW5kZXJlcjMgfSBmcm9tIFwiLi4vcmVuZGVyL2RvdC1yZW5kZXJlcjNcIjtcclxuaW1wb3J0IHsgQmVsbHVzU2NhbkRhdGEsIE5leHRjbG91ZFNjYW5EYXRhIH0gZnJvbSBcIi4vc2Nhbi1kYXRhXCI7XHJcbmltcG9ydCB7IFRvcG9NZXNoIH0gZnJvbSBcIi4uL21lc2gvdG9wby1tZXNoXCI7XHJcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4uL2dlby9wbGFuZVwiO1xyXG5pbXBvcnQgeyBNYXRyaXg0IH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IFJhbnNhY0NpcmNsZTJkIH0gZnJvbSBcIi4vcmFuc2FjXCI7XHJcbmltcG9ydCB7IExpbmVBcnJheSB9IGZyb20gXCIuLi9tZXNoL2xpbmUtYXJyYXlcIjtcclxuaW1wb3J0IHsgQ2lyY2xlMyB9IGZyb20gXCIuLi9nZW8vY2lyY2xlM1wiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRXllRmluZGVyIHtcclxuXHJcbiAgICBhcHA/OiBFeWVGaW5kZXJBcHBcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA/OiBFeWVGaW5kZXJBcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGZpbmRQdXBpbHNGcm9tTmV4dGNsb3VkKGRhdGE6IE5leHRjbG91ZFNjYW5EYXRhKSB7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZmluZGluZyBleWVzIGZyb20gbmV4dGNsb3VkIHNldC4uLlwiKTtcclxuXHJcbiAgICAgICAgbGV0IHRvcG8gPSBUb3BvTWVzaC5jb3B5RnJvbU1lc2goZGF0YS5tZXNoKTtcclxuICAgICAgICBsZXQgaW1hZ2UgPSBHZW9uSW1hZ2UuZnJvbUltYWdlRGF0YShkYXRhLnRleHR1cmUpO1xyXG4gICAgICAgIGxldCBbd2luTGVmdCwgd2luUmlnaHRdID0gdGhpcy5nZXRFeWVXaW5kb3dzTmV4dGNsb3VkKGRhdGEsIHRvcG8pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kUHVwaWxzKGltYWdlLCB0b3BvLCBkYXRhLnNldHRpbmdzLCB3aW5MZWZ0LCB3aW5SaWdodCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBmaW5kUHVwaWxzRnJvbUJlbGx1cyhic2Q6IEJlbGx1c1NjYW5EYXRhKSB7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZmluZGluZyBleWVzIGZyb20gYmVsbHVzLi4uXCIpO1xyXG5cclxuICAgICAgICAvLyBnZXQgdGhlIHdpbmRvdyB3aXRoIHdoaWNoIHRoZSBleWVzIGNhbiBiZSBleHRyYWN0ZWRcclxuICAgICAgICBsZXQgdG9wbyA9IFRvcG9NZXNoLmNvcHlGcm9tTWVzaChic2QubWVzaCk7XHJcbiAgICAgICAgbGV0IGltYWdlID0gR2VvbkltYWdlLmZyb21JbWFnZURhdGEoYnNkLnRleHR1cmUpO1xyXG4gICAgICAgIGxldCBbd2luTGVmdCwgd2luUmlnaHRdID0gdGhpcy5nZXRFeWVXaW5kb3dzKGJzZCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRQdXBpbHMoaW1hZ2UsIHRvcG8sIGJzZC5zZXR0aW5ncywgd2luTGVmdCwgd2luUmlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNvbWUgc3R1cGlkIHdyYXBwaW5nXHJcbiAgICBwdWJsaWMgZmluZFB1cGlscyhpbWFnZTogR2VvbkltYWdlLCB0b3BvOiBUb3BvTWVzaCwgc2V0dGluZ3M6IGFueSwgd2luTGVmdDogRG9tYWluMiwgd2luUmlnaHQ6IERvbWFpbjIpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBsZWZ0IHNpZGVcclxuICAgICAgICBsZXQgcmFuc2FjU2V0dGluZ3MgPSBzZXR0aW5ncy5wcm9jZXNzX3JhbnNhYztcclxuICAgICAgICBsZXQgbGVmdFB1cGlsUG9pbnQgPSB0aGlzLmZpbmRQdXBpbEZyb21FeWUoaW1hZ2UsIHRvcG8sIHdpbkxlZnQsIHJhbnNhY1NldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gcmlnaHQgc2lkZVxyXG4gICAgICAgIGxldCByaWdodFB1cGlsUG9pbnQgPSB0aGlzLmZpbmRQdXBpbEZyb21FeWUoaW1hZ2UsIHRvcG8sIHdpblJpZ2h0LCByYW5zYWNTZXR0aW5ncyk7XHJcblxyXG4gICAgICAgIGlmIChsZWZ0UHVwaWxQb2ludCAmJiByaWdodFB1cGlsUG9pbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtsZWZ0UHVwaWxQb2ludCwgcmlnaHRQdXBpbFBvaW50XSBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGZpbmRQdXBpbEZyb21FeWUoaW1hZ2U6IEdlb25JbWFnZSwgbWVzaDogVG9wb01lc2gsICB3aW5kb3c6IERvbWFpbjIsIHJhbnNhY1NldHRpbmdzOiBhbnkpIDogVmVjdG9yMyB8IHVuZGVmaW5lZCB7XHJcblxyXG4gICAgICAgIC8vIHN0ZXAgMTogZ2V0IHBvaW50cyAodmVjdG9ycykgd2hpY2ggc3ltYm9saXplIHBpeGVscyBpbiBjb250cmFzdGluZyBhcmVhcyBvZiB0aGUgaW1hZ2UgKHRoZSBpcmlzKS5cclxuICAgICAgICBsZXQgZXllSW1nID0gaW1hZ2UudHJpbVdpdGhEb21haW4od2luZG93KTtcclxuICAgICAgICBsZXQgY29udHJhc3RFeWVJbWcgPSB0aGlzLmNvbnRyYXN0RGV0ZWN0aW9uKGV5ZUltZyk7XHJcbiAgICAgICAgbGV0IGNwcyA9IHRoaXMucGl4ZWxzVG9Qb2ludHMoY29udHJhc3RFeWVJbWcsIDUwKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoY3BzLmNvdW50KCkgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNjYWxlVmVjID0gbmV3IFZlY3RvcjIoMSAvIGltYWdlLndpZHRoLCAxIC8gaW1hZ2UuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gY29udmVydCB0aGVzZSBwb2ludHMgdG8gdGhlIHNhbWUgc3BhY2UgYXMgdGhlIHV2IHBvaW50cyBvZiB0aGUgbWVzaFxyXG4gICAgICAgIGNwcy5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIG1vdmUgZnJvbSBleWV0cmltIHRvIG9yaWdpbmFsIGltYWdlIHNwYWNlXHJcbiAgICAgICAgICAgIHAuYWRkKG5ldyBWZWN0b3IyKHdpbmRvdy54LnQwLCB3aW5kb3cueS50MCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gbW92ZSBmcm9tIHBpeGVsIHNwYWNlIHRvIG5vcm1hbGl6ZWQgdXYgc3BhY2VcclxuICAgICAgICAgICAgcC5tdWwoc2NhbGVWZWMpO1xyXG5cclxuICAgICAgICAgICAgLy8gZmxpcCBhbmQgbW92ZSBhY2NvcmRpbmcgdG8gdXYgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBwLm11bChuZXcgVmVjdG9yMigxLCAtMSkpO1xyXG4gICAgICAgICAgICBwLmFkZChuZXcgVmVjdG9yMigwLCAxKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvLyBzdGVwIDI6IGVsZXZhdGUgZnJvbSB1diBzcGFjZSB0byB2ZXJ0ZXggc3BhY2Ugb2YgdGhlIG1lc2hcclxuICAgICAgICBsZXQgY3BzRWxldmF0ZWQgPSBjcHMudG8zRCgpLm1hcCgocCwgaSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbWVzaC5lbGV2YXRlKHAudG8yRCgpKTtcclxuICAgICAgICB9KSBcclxuICAgICAgICB0aGlzLmFwcD8ud2hpdGVEb3RzLnB1c2goLi4uY3BzRWxldmF0ZWQudG9MaXN0KCkpO1xyXG5cclxuXHJcbiAgICAgICAgLy8gc3RlcCAzOiBmaXQgYSBwbGFuZSB0aHJvdWdoIHRoZSBwb2ludHMsIGFuZCBwcm9qZWN0IHRvIHRoaXMgcGxhbmVcclxuICAgICAgICBsZXQgcGxhbmUgPSBQbGFuZS5mcm9tTGVhc3RTcXVhcmVzKGNwc0VsZXZhdGVkKTtcclxuICAgICAgICBjcHNFbGV2YXRlZC5mb3JFYWNoKChwKSA9PiBwbGFuZS5wdWxsVG9QbGFuZShwKSk7XHJcbiAgICAgICAgbGV0IGNwc0ZpeGVkID0gY3BzRWxldmF0ZWQudG8yRCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHN0ZXAgNDogcmFuc2FjISBcclxuICAgICAgICBsZXQgcnNzID0gcmFuc2FjU2V0dGluZ3M7XHJcbiAgICAgICAgbGV0IHIgPSBSYW5zYWNDaXJjbGUyZChjcHNGaXhlZCwgcnNzLml0ZXJhdGlvbnMsIHJzcy5yYWRpdXMsIHJzcy50b2xlcmFuY2UsIHJzcy5zZWVkLCByc3MubWluX3Njb3JlLCByc3MubWF4X3JhZGl1c19kZXZpYXRpb24pO1xyXG5cclxuICAgICAgICBsZXQgZXllcG9pbnQ7XHJcbiAgICAgICAgbGV0IGJlc3RDaXJjbGU7XHJcbiAgICAgICAgaWYgKCFyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjb3VsZG50IGZpbmQgZXllcG9pbnQuLi5cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgW2Jlc3RDaXJjbGUsIHZhbHVlc10gPSByO1xyXG4gICAgICAgICAgICBleWVwb2ludCA9IHBsYW5lLnB1c2hUb1dvcmxkKGJlc3RDaXJjbGUuY2VudGVyLnRvM0QoKSk7ICAgIFxyXG4gICAgICAgICAgICB0aGlzLmFwcD8ubGluZVJlbmRlcmFibGVzLnB1c2goTGluZUFycmF5LmZyb21DaXJjbGUoQ2lyY2xlMy5mcm9tQ2lyY2xlMihiZXN0Q2lyY2xlLCBwbGFuZSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlYnVnXHJcbiAgICAgICAgY3BzRWxldmF0ZWQuZm9yRWFjaCgocCkgPT4ge1xyXG4gICAgICAgICAgICBwLnogPSAwO1xyXG4gICAgICAgICAgICByZXR1cm4gcGxhbmUucHVzaFRvV29ybGQocCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmFwcD8ubGluZVJlbmRlcmFibGVzLnB1c2goTGluZUFycmF5LmZyb21QbGFuZShwbGFuZSkpO1xyXG4gICAgICAgIHRoaXMuYXBwPy5yZWREb3RzLnB1c2goZXllcG9pbnQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBleWVwb2ludDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBjb250cmFzdERldGVjdGlvbihpbWFnZTogR2VvbkltYWdlKSA6IEdlb25JbWFnZSB7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwicHJvY2Vzc2luZyBpbWFnZSB3aXRoIHNpemU6IFwiLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgbGV0IGdyZXkgPSBpbWFnZS50b0dyZXlzY2FsZSgpO1xyXG4gICAgICAgIGxldCBibHVycmVkID0gZ3JleS5hcHBseUtlcm5lbChLZXJuZWxzLkdhdXNzNSk7XHJcbiAgICAgICAgbGV0IGxlZnQgPSBibHVycmVkLmFwcGx5S2VybmVsKEtlcm5lbHMuU29iZWxMZWZ0KTtcclxuICAgICAgICBsZXQgcmlnaHQgPSBibHVycmVkLmFwcGx5S2VybmVsKEtlcm5lbHMuU29iZWxSaWdodCk7XHJcbiAgICAgICAgbGV0IHN1bSA9IHRoaXMuU29iZWxTdW0obGVmdCwgcmlnaHQpO1xyXG5cclxuICAgICAgICBsZXQgW21pbiwgbWF4XSA9IHN1bS5nZXRNaW5NYXgoKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJtaW5tYXg6IFwiLCBtaW4sIG1heCk7XHJcblxyXG4gICAgICAgIGxldCB1cHBlciA9IG1heCAqIDAuNztcclxuICAgICAgICBsZXQgbG93ZXIgPSB1cHBlciAqIDAuMztcclxuICAgICAgICBsZXQgdGhyZXMgPSBzdW0uYXBwbHlUaHJlc2hvbGQobG93ZXIsIHVwcGVyKTtcclxuXHJcbiAgICAgICAgLy8gZGVidWcgXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJhZGRpbmcgaW1hZ2VzOlwiKVxyXG4gICAgICAgIHRoaXMuYXBwPy5pbWFnZXMucHVzaChibHVycmVkLnRvUkdCQSgpLCBzdW0udG9SR0JBKCksIHRocmVzLnRvUkdCQSgpKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdGhyZXM7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBwcml2YXRlIFNvYmVsU3VtKGhvcjogR2VvbkltYWdlLCB2ZXI6IEdlb25JbWFnZSkgOiBHZW9uSW1hZ2Uge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB3aWR0aCA9IGhvci53aWR0aDsgLy8gYXNzdW1lIHRoZSBzYW1lIGFzIHZlclxyXG4gICAgICAgIGxldCBoZWlnaHQgPSBob3IuaGVpZ2h0OyAvLyBhc3N1bWUgdGhlIHNhbWUgYXMgdmVyXHJcbiAgICAgICAgbGV0IHBzID0gaG9yLnBpeGVsU2l6ZTtcclxuXHJcbiAgICAgICAgbGV0IHN1bSA9IG5ldyBHZW9uSW1hZ2Uod2lkdGgsIGhlaWdodCwgcHMpO1xyXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGFzc3VtZSBncmV5IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBsZXQgb25lID0gaG9yLmdldCh4LCB5KVswXTtcclxuICAgICAgICAgICAgICAgIGxldCB0d28gPSB2ZXIuZ2V0KHgsIHkpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IE1hdGgucm91bmQoKG9uZSoqMiArIHR3byoqMikqKjAuNSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3VtLnNldCh4LCB5LCBbdmFsdWUsIHZhbHVlLCB2YWx1ZSwgMjU1XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1bTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFeWVXaW5kb3dzTmV4dGNsb3VkKGRhdGE6IE5leHRjbG91ZFNjYW5EYXRhLCBtZXNoOiBUb3BvTWVzaCkgOiBbRG9tYWluMiwgRG9tYWluMl0ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBiYl9vID0gZGF0YS5zZXR0aW5ncy5wcm9jZXNzLmJvdW5kaW5nX2JveF9vZmZzZXQ7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGJiX28pO1xyXG5cclxuICAgICAgICBsZXQgZXllR3Vlc3NMZWZ0ID0gZGF0YS5leWVQb2ludHNFZGl0ZWQuZ2V0VmVjdG9yKDApO1xyXG4gICAgICAgIGxldCBleWVHdWVzc1JpZ2h0ID0gZGF0YS5leWVQb2ludHNFZGl0ZWQuZ2V0VmVjdG9yKDEpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcImdyb3VuZFRydXRoTGVmdCwgZ3JvdW5kVHJ1dGhSaWdodFwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhleWVHdWVzc0xlZnQsIGV5ZUd1ZXNzUmlnaHQpO1xyXG5cclxuICAgICAgICB0aGlzLmFwcD8ud2hpdGVEb3RzPy5wdXNoKGV5ZUd1ZXNzTGVmdCk7XHJcbiAgICAgICAgdGhpcy5hcHA/LndoaXRlRG90cz8ucHVzaChleWVHdWVzc1JpZ2h0KTtcclxuXHJcbiAgICAgICAgbGV0IGV5ZUxhbmRtYXJrc0xlZnQgPSBtZXNoLmZsYXR0ZW5DbG9zZXN0UG9pbnQoZXllR3Vlc3NMZWZ0KTtcclxuICAgICAgICBsZXQgZXllTGFuZG1hcmtzUmlnaHQgPSBtZXNoLmZsYXR0ZW5DbG9zZXN0UG9pbnQoZXllR3Vlc3NSaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMuYXBwPy53aGl0ZURvdHM/LnB1c2goZXllTGFuZG1hcmtzTGVmdC50bzNEKCkpO1xyXG4gICAgICAgIHRoaXMuYXBwPy53aGl0ZURvdHM/LnB1c2goZXllTGFuZG1hcmtzUmlnaHQudG8zRCgpKTtcclxuXHJcbiAgICAgICAgLy8gdG8gdGV4dHVyZSBwaXhlbCBzcGFjZSBcclxuXHJcbiAgICAgICAgbGV0IG1hdCA9IGRhdGEuZ2V0VGV4dHVyZVRvVVZNYXRyaXgoKS5pbnZlcnNlKCk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKG1hdCk7XHJcblxyXG4gICAgICAgIC8vIGxldCBtYXQgPSBkYXRhLmdldFRleHR1cmVUb1VWTWF0cml4KCkuaW52ZXJzZSgpO1xyXG4gICAgICAgIGxldCBsZWZ0UGl4ZWwgID0gbWF0Lm11bHRpcGx5VmVjdG9yKGV5ZUxhbmRtYXJrc0xlZnQudG8zRCgpKS50bzJEKCk7XHJcbiAgICAgICAgbGV0IHJpZ2h0UGl4ZWwgPSBtYXQubXVsdGlwbHlWZWN0b3IoZXllTGFuZG1hcmtzUmlnaHQudG8zRCgpKS50bzJEKCk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW4gcGl4ZWxzcGFjZTogXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGxlZnRQaXhlbCwgcmlnaHRQaXhlbCk7XHJcblxyXG4gICAgICAgIGxldCB3aW5kb3cgPSBbLTcwLCA3MCwgLTcwLCA3MF07XHJcbiAgICAgICAgbGV0IHJpZ2h0V2luZG93ID0gRG9tYWluMi5mcm9tSW5jbHVkZShWZWN0b3IyQXJyYXkuZnJvbUxpc3QoW2xlZnRQaXhlbF0pKS5vZmZzZXQod2luZG93KTtcclxuICAgICAgICBsZXQgbGVmdFdpbmRvdyA9IERvbWFpbjIuZnJvbUluY2x1ZGUoVmVjdG9yMkFycmF5LmZyb21MaXN0KFtyaWdodFBpeGVsXSkpLm9mZnNldCh3aW5kb3cpO1xyXG5cclxuICAgICAgICByZXR1cm4gW3JpZ2h0V2luZG93LCBsZWZ0V2luZG93XTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFeWVXaW5kb3dzKGJzZDogQmVsbHVzU2NhbkRhdGEpIDogW0RvbWFpbjIsIERvbWFpbjJdIHtcclxuXHJcbiAgICAgICAgbGV0IHByID0gYnNkLnNldHRpbmdzLnByb2Nlc3MucG9pbnRfcmFuZ2VzO1xyXG4gICAgICAgIGxldCBiYl9vID0gYnNkLnNldHRpbmdzLnByb2Nlc3MuYm91bmRpbmdfYm94X29mZnNldDtcclxuXHJcbiAgICAgICAgbGV0IGV5ZUxhbmRtYXJrc0xlZnQgPSBic2QubGFuZG1hcmtzLnRha2VSb3dzKHByLmxlZnRfZXllX3NldCkgYXMgVmVjdG9yMkFycmF5O1xyXG4gICAgICAgIGxldCBleWVMYW5kbWFya3NSaWdodCA9IGJzZC5sYW5kbWFya3MudGFrZVJvd3MocHIucmlnaHRfZXllX3NldCkgYXMgVmVjdG9yMkFycmF5O1xyXG5cclxuICAgICAgICBsZXQgcmlnaHRXaW5kb3cgPSBEb21haW4yLmZyb21JbmNsdWRlKGV5ZUxhbmRtYXJrc0xlZnQpLm9mZnNldChiYl9vLmx5KTtcclxuICAgICAgICBsZXQgbGVmdFdpbmRvdyA9IERvbWFpbjIuZnJvbUluY2x1ZGUoZXllTGFuZG1hcmtzUmlnaHQpLm9mZnNldChiYl9vLnJ5KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFtyaWdodFdpbmRvdywgbGVmdFdpbmRvd107XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgcGl4ZWxzVG9Qb2ludHMoaW1hZ2U6IEdlb25JbWFnZSwgdGhyZXNob2xkOiBudW1iZXIpIDogVmVjdG9yMkFycmF5IHtcclxuXHJcbiAgICAgICAgbGV0IHBvaW50czogVmVjdG9yMltdID0gW107XHJcbiAgICAgICAgZm9yKGxldCB5ID0gMCA7IHkgPCBpbWFnZS5oZWlnaHQ7IHkrKykge1xyXG4gICAgICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgaW1hZ2Uud2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gaW1hZ2UuZ2V0KHgsIHkpWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gdGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2gobmV3IFZlY3RvcjIoeCwgeSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBWZWN0b3IyQXJyYXkuZnJvbUxpc3QocG9pbnRzKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/sfered/eye-finder.ts\n");

/***/ }),

/***/ "./src/sfered/ransac.ts":
/*!******************************!*\
  !*** ./src/sfered/ransac.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RansacCircle2d\": () => /* binding */ RansacCircle2d,\n/* harmony export */   \"RansacEliplse2d\": () => /* binding */ RansacEliplse2d\n/* harmony export */ });\n/* harmony import */ var _geo_circle2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geo/circle2 */ \"./src/geo/circle2.ts\");\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n\r\n\r\nfunction RansacCircle2d(points, iterations, radius, tolerance, seed, min_score, max_radius_deviation) {\r\n    //  Extract circle parameters from points in 2D space.\r\n    //  IN\r\n    //      - points : np.array[n, 2] -> sample points\r\n    //      - iterations : int -> how many times to repeat\r\n    //      - radius : float -> radius to create circles from\r\n    //      - tolerance : float -> point counts if within tolerance distance\r\n    //      - seed for randomization : int -> for random picking\r\n    //      - min_score : int -> if high_score is below min_score, its invalid\r\n    //      - num_scores : int -> if higher than one: use an average of the top x highscores for a more acurate result\r\n    //  OUT\r\n    //      - best circle, null if none passed the minimum score ('failsave')\r\n    //      - number of matches\r\n    //  Algorithm:\r\n    //  - iterate for MAX_TRIES times\r\n    //  - Pick 2 random 'points'\r\n    //  - Construct two circles with 'radius'\r\n    //  - per circle, per point in 'points'\r\n    //    - if distance to circle < 'tolerance'\r\n    //      - add 1 to score\r\n    //  - return the high score circle\r\n    //  TODO ideeen:\r\n    //  - varreer kleine beetjes in de radius?\r\n    //  - high score : top 5 gemiddelde <- might not be useful: results already amazing\r\n    //  - embrace ovaal vorm \r\n    // seed\r\n    // TODO SEED\r\n    //np.random.seed(seed)\r\n    console.log(points);\r\n    // TODO do-over of high score system\r\n    let high_score = 0;\r\n    let high_score_center = new _math_vector__WEBPACK_IMPORTED_MODULE_1__.Vector2(0, 0);\r\n    let high_score_radius = 0.0;\r\n    let high_score_ids = [];\r\n    let num_points = points.count();\r\n    for (let i = 0; i < iterations; i++) {\r\n        // randomize the radius a bit\r\n        let this_radius = radius + (Math.random() - 0.5) * max_radius_deviation;\r\n        // choose two, and create a circle with it\r\n        let id1 = randInt(0, num_points);\r\n        let id2 = randInt(0, num_points);\r\n        let centers = _geo_circle2__WEBPACK_IMPORTED_MODULE_0__.Circle2.centersFromPPR(points.getVector(id1), points.getVector(id2), this_radius);\r\n        // print(\"found some centers: \", centers)\r\n        for (let center of centers) {\r\n            // figure out the score\r\n            let includedIds = idsWithinCircle(points, center, radius, tolerance);\r\n            let score = includedIds.length;\r\n            // save if high score\r\n            if (score > high_score) {\r\n                high_score = score;\r\n                high_score_radius = this_radius;\r\n                high_score_center = center;\r\n                high_score_ids = includedIds;\r\n            }\r\n        }\r\n    }\r\n    // feedback\r\n    console.log(\"best score\", high_score);\r\n    if (high_score < min_score) {\r\n        console.log(\"this is smaller than the minimum score: ransac failed.\");\r\n        return undefined;\r\n    }\r\n    // construct the best circle, and return it\r\n    let best_circle = new _geo_circle2__WEBPACK_IMPORTED_MODULE_0__.Circle2(high_score_center, high_score_radius);\r\n    return [best_circle, high_score_ids];\r\n}\r\nfunction RansacEliplse2d(points, iterations, radius, elipseDeviation, tolerance, seed, minScore, maxRadiusDeviation) {\r\n    //  Extract circle parameters from points in 2D space.\r\n    //  IN\r\n    //      - points : np.array[n, 2] -> sample points\r\n    //      - iterations : int -> how many times to repeat\r\n    //      - radius : float -> radius to create circles from\r\n    //      - tolerance : float -> point counts if within tolerance distance\r\n    //      - seed for randomization : int -> for random picking\r\n    //      - min_score : int -> if high_score is below min_score, its invalid\r\n    //      - num_scores : int -> if higher than one: use an average of the top x highscores for a more acurate result\r\n    //  OUT\r\n    //      - best circle, null if none passed the minimum score ('failsave')\r\n    //      - number of matches\r\n    //  Algorithm:\r\n    //  - iterate for MAX_TRIES times\r\n    //  - Pick 2 random 'points'\r\n    //  - Construct two circles with 'radius'\r\n    //  - per circle, per point in 'points'\r\n    //    - if distance to circle < 'tolerance'\r\n    //      - add 1 to score\r\n    //  - return the high score circle\r\n    //  TODO ideeen:\r\n    //  - high score : top 5 gemiddelde <- might not be useful: results already amazing\r\n    //  - embrace ovaal vorm \r\n    // seed\r\n    // TODO SEED\r\n    //np.random.seed(seed)\r\n    console.log(points);\r\n    // TODO do-over of high score system\r\n    let high_score = 0;\r\n    let high_score_center = new _math_vector__WEBPACK_IMPORTED_MODULE_1__.Vector2(0, 0);\r\n    let high_score_radius = 0.0;\r\n    let high_score_ids = [];\r\n    let num_points = points.count();\r\n    for (let i = 0; i < iterations; i++) {\r\n        // randomize the radius a bit\r\n        let this_radius = radius + (Math.random() - 0.5) * maxRadiusDeviation;\r\n        // choose two, and create a circle with it\r\n        let id1 = randInt(0, num_points);\r\n        let id2 = randInt(0, num_points);\r\n        let centers = _geo_circle2__WEBPACK_IMPORTED_MODULE_0__.Circle2.centersFromPPR(points.getVector(id1), points.getVector(id2), this_radius);\r\n        // print(\"found some centers: \", centers)\r\n        for (let center of centers) {\r\n            // figure out the score\r\n            let includedIds = idsWithinCircle(points, center, radius, tolerance);\r\n            let score = includedIds.length;\r\n            // save if high score\r\n            if (score > high_score) {\r\n                high_score = score;\r\n                high_score_radius = this_radius;\r\n                high_score_center = center;\r\n                high_score_ids = includedIds;\r\n            }\r\n        }\r\n    }\r\n    // feedback\r\n    console.log(\"best score\", high_score);\r\n    if (high_score < minScore) {\r\n        console.log(\"this is smaller than the minimum score: ransac failed.\");\r\n        return undefined;\r\n    }\r\n    // construct the best circle, and return it\r\n    let best_circle = new _geo_circle2__WEBPACK_IMPORTED_MODULE_0__.Circle2(high_score_center, high_score_radius);\r\n    return [best_circle, high_score_ids];\r\n}\r\nfunction idsWithinCircle(pts, center, radius, tolerance) {\r\n    let indices = [];\r\n    pts.forEach((p, i) => {\r\n        let distance = p.disTo(center);\r\n        if (Math.abs(distance - radius) < tolerance) {\r\n            indices.push(i);\r\n        }\r\n    });\r\n    return indices;\r\n}\r\n/**\r\n * @param  {number} lower=0, including\r\n * @param  {number} upper=1, excluding\r\n */\r\nfunction randInt(lower, upper) {\r\n    return Math.floor(lower + (Math.random() * (upper - lower)));\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3NmZXJlZC9yYW5zYWMudHM/NWViMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ3dDO0FBRUE7QUFFakMsU0FBUyxjQUFjLENBQzFCLE1BQW9CLEVBQUUsVUFBa0IsRUFBRSxNQUFjLEVBQUUsU0FBaUIsRUFDM0UsSUFBWSxFQUFFLFNBQWlCLEVBQUUsb0JBQTRCO0lBQzdELHNEQUFzRDtJQUV0RCxNQUFNO0lBQ04sa0RBQWtEO0lBQ2xELHNEQUFzRDtJQUN0RCx5REFBeUQ7SUFDekQsd0VBQXdFO0lBQ3hFLDREQUE0RDtJQUM1RCwwRUFBMEU7SUFDMUUsa0hBQWtIO0lBRWxILE9BQU87SUFDUCx5RUFBeUU7SUFDekUsMkJBQTJCO0lBRTNCLGNBQWM7SUFDZCxpQ0FBaUM7SUFDakMsNEJBQTRCO0lBQzVCLHlDQUF5QztJQUN6Qyx1Q0FBdUM7SUFDdkMsMkNBQTJDO0lBQzNDLHdCQUF3QjtJQUV4QixrQ0FBa0M7SUFFbEMsZ0JBQWdCO0lBQ2hCLDBDQUEwQztJQUMxQyxtRkFBbUY7SUFDbkYseUJBQXlCO0lBRXpCLE9BQU87SUFDUCxZQUFZO0lBQ1osc0JBQXNCO0lBRXRCLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFcEIsb0NBQW9DO0lBQ3BDLElBQUksVUFBVSxHQUFHLENBQUM7SUFDbEIsSUFBSSxpQkFBaUIsR0FBWSxJQUFJLGlEQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xELElBQUksaUJBQWlCLEdBQUcsR0FBRztJQUMzQixJQUFJLGNBQWMsR0FBYSxFQUFFO0lBRWpDLElBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNoQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRyxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBRWxDLDZCQUE2QjtRQUM3QixJQUFJLFdBQVcsR0FB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LENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2pCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDL0IsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsR0FBRyxTQUFTLEVBQUU7WUFDekMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNuQjtJQUNMLENBQUMsQ0FBQztJQUNGLE9BQU8sT0FBTyxDQUFDO0FBQ25CLENBQUM7QUFFRDs7O0dBR0c7QUFDSCxTQUFTLE9BQU8sQ0FBQyxLQUFhLEVBQUUsS0FBYTtJQUN6QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsS0FBSyxHQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRCxDQUFDIiwiZmlsZSI6Ii4vc3JjL3NmZXJlZC9yYW5zYWMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IyQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIlxyXG5pbXBvcnQgeyBDaXJjbGUyIH0gZnJvbSBcIi4uL2dlby9jaXJjbGUyXCJcclxuaW1wb3J0IHsgQ29uc3QgfSBmcm9tIFwiLi4vbWF0aC9jb25zdFwiXHJcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFJhbnNhY0NpcmNsZTJkKFxyXG4gICAgcG9pbnRzOiBWZWN0b3IyQXJyYXksIGl0ZXJhdGlvbnM6IG51bWJlciwgcmFkaXVzOiBudW1iZXIsIHRvbGVyYW5jZTogbnVtYmVyLFxyXG4gICAgc2VlZDogbnVtYmVyLCBtaW5fc2NvcmU6IG51bWJlciwgbWF4X3JhZGl1c19kZXZpYXRpb246IG51bWJlcikgOiBbQ2lyY2xlMiwgbnVtYmVyW11dIHwgdW5kZWZpbmVkIHtcclxuICAgIC8vICBFeHRyYWN0IGNpcmNsZSBwYXJhbWV0ZXJzIGZyb20gcG9pbnRzIGluIDJEIHNwYWNlLlxyXG5cclxuICAgIC8vICBJTlxyXG4gICAgLy8gICAgICAtIHBvaW50cyA6IG5wLmFycmF5W24sIDJdIC0+IHNhbXBsZSBwb2ludHNcclxuICAgIC8vICAgICAgLSBpdGVyYXRpb25zIDogaW50IC0+IGhvdyBtYW55IHRpbWVzIHRvIHJlcGVhdFxyXG4gICAgLy8gICAgICAtIHJhZGl1cyA6IGZsb2F0IC0+IHJhZGl1cyB0byBjcmVhdGUgY2lyY2xlcyBmcm9tXHJcbiAgICAvLyAgICAgIC0gdG9sZXJhbmNlIDogZmxvYXQgLT4gcG9pbnQgY291bnRzIGlmIHdpdGhpbiB0b2xlcmFuY2UgZGlzdGFuY2VcclxuICAgIC8vICAgICAgLSBzZWVkIGZvciByYW5kb21pemF0aW9uIDogaW50IC0+IGZvciByYW5kb20gcGlja2luZ1xyXG4gICAgLy8gICAgICAtIG1pbl9zY29yZSA6IGludCAtPiBpZiBoaWdoX3Njb3JlIGlzIGJlbG93IG1pbl9zY29yZSwgaXRzIGludmFsaWRcclxuICAgIC8vICAgICAgLSBudW1fc2NvcmVzIDogaW50IC0+IGlmIGhpZ2hlciB0aGFuIG9uZTogdXNlIGFuIGF2ZXJhZ2Ugb2YgdGhlIHRvcCB4IGhpZ2hzY29yZXMgZm9yIGEgbW9yZSBhY3VyYXRlIHJlc3VsdFxyXG5cclxuICAgIC8vICBPVVRcclxuICAgIC8vICAgICAgLSBiZXN0IGNpcmNsZSwgbnVsbCBpZiBub25lIHBhc3NlZCB0aGUgbWluaW11bSBzY29yZSAoJ2ZhaWxzYXZlJylcclxuICAgIC8vICAgICAgLSBudW1iZXIgb2YgbWF0Y2hlc1xyXG5cclxuICAgIC8vICBBbGdvcml0aG06XHJcbiAgICAvLyAgLSBpdGVyYXRlIGZvciBNQVhfVFJJRVMgdGltZXNcclxuICAgIC8vICAtIFBpY2sgMiByYW5kb20gJ3BvaW50cydcclxuICAgIC8vICAtIENvbnN0cnVjdCB0d28gY2lyY2xlcyB3aXRoICdyYWRpdXMnXHJcbiAgICAvLyAgLSBwZXIgY2lyY2xlLCBwZXIgcG9pbnQgaW4gJ3BvaW50cydcclxuICAgIC8vICAgIC0gaWYgZGlzdGFuY2UgdG8gY2lyY2xlIDwgJ3RvbGVyYW5jZSdcclxuICAgIC8vICAgICAgLSBhZGQgMSB0byBzY29yZVxyXG5cclxuICAgIC8vICAtIHJldHVybiB0aGUgaGlnaCBzY29yZSBjaXJjbGVcclxuXHJcbiAgICAvLyAgVE9ETyBpZGVlZW46XHJcbiAgICAvLyAgLSB2YXJyZWVyIGtsZWluZSBiZWV0amVzIGluIGRlIHJhZGl1cz9cclxuICAgIC8vICAtIGhpZ2ggc2NvcmUgOiB0b3AgNSBnZW1pZGRlbGRlIDwtIG1pZ2h0IG5vdCBiZSB1c2VmdWw6IHJlc3VsdHMgYWxyZWFkeSBhbWF6aW5nXHJcbiAgICAvLyAgLSBlbWJyYWNlIG92YWFsIHZvcm0gXHJcblxyXG4gICAgLy8gc2VlZFxyXG4gICAgLy8gVE9ETyBTRUVEXHJcbiAgICAvL25wLnJhbmRvbS5zZWVkKHNlZWQpXHJcblxyXG4gICAgY29uc29sZS5sb2cocG9pbnRzKTtcclxuXHJcbiAgICAvLyBUT0RPIGRvLW92ZXIgb2YgaGlnaCBzY29yZSBzeXN0ZW1cclxuICAgIGxldCBoaWdoX3Njb3JlID0gMFxyXG4gICAgbGV0IGhpZ2hfc2NvcmVfY2VudGVyOiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoMCwwKTtcclxuICAgIGxldCBoaWdoX3Njb3JlX3JhZGl1cyA9IDAuMFxyXG4gICAgbGV0IGhpZ2hfc2NvcmVfaWRzOiBudW1iZXJbXSA9IFtdXHJcblxyXG4gICAgbGV0IG51bV9wb2ludHMgPSBwb2ludHMuY291bnQoKTtcclxuICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xyXG5cclxuICAgICAgICAvLyByYW5kb21pemUgdGhlIHJhZGl1cyBhIGJpdFxyXG4gICAgICAgIGxldCB0aGlzX3JhZGl1cyA9IHJhZGl1cyArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIG1heF9yYWRpdXNfZGV2aWF0aW9uXHJcblxyXG4gICAgICAgIC8vIGNob29zZSB0d28sIGFuZCBjcmVhdGUgYSBjaXJjbGUgd2l0aCBpdFxyXG4gICAgICAgIGxldCBpZDEgPSByYW5kSW50KDAsIG51bV9wb2ludHMpO1xyXG4gICAgICAgIGxldCBpZDIgPSByYW5kSW50KDAsIG51bV9wb2ludHMpO1xyXG4gICAgICAgIGxldCBjZW50ZXJzID0gQ2lyY2xlMi5jZW50ZXJzRnJvbVBQUihwb2ludHMuZ2V0VmVjdG9yKGlkMSksIHBvaW50cy5nZXRWZWN0b3IoaWQyKSwgdGhpc19yYWRpdXMpXHJcblxyXG4gICAgICAgIC8vIHByaW50KFwiZm91bmQgc29tZSBjZW50ZXJzOiBcIiwgY2VudGVycylcclxuICAgICAgICBmb3IobGV0IGNlbnRlciBvZiBjZW50ZXJzKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBmaWd1cmUgb3V0IHRoZSBzY29yZVxyXG4gICAgICAgICAgICBsZXQgaW5jbHVkZWRJZHMgPSBpZHNXaXRoaW5DaXJjbGUocG9pbnRzLCBjZW50ZXIsIHJhZGl1cywgdG9sZXJhbmNlKTtcclxuICAgICAgICAgICAgbGV0IHNjb3JlID0gaW5jbHVkZWRJZHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgLy8gc2F2ZSBpZiBoaWdoIHNjb3JlXHJcbiAgICAgICAgICAgIGlmIChzY29yZSA+IGhpZ2hfc2NvcmUpIHtcclxuICAgICAgICAgICAgICAgIGhpZ2hfc2NvcmUgPSBzY29yZVxyXG4gICAgICAgICAgICAgICAgaGlnaF9zY29yZV9yYWRpdXMgPSB0aGlzX3JhZGl1c1xyXG4gICAgICAgICAgICAgICAgaGlnaF9zY29yZV9jZW50ZXIgPSBjZW50ZXJcclxuICAgICAgICAgICAgICAgIGhpZ2hfc2NvcmVfaWRzID0gaW5jbHVkZWRJZHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyBmZWVkYmFja1xyXG4gICAgY29uc29sZS5sb2coXCJiZXN0IHNjb3JlXCIsIGhpZ2hfc2NvcmUpXHJcbiAgICBpZiAoaGlnaF9zY29yZSA8IG1pbl9zY29yZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwidGhpcyBpcyBzbWFsbGVyIHRoYW4gdGhlIG1pbmltdW0gc2NvcmU6IHJhbnNhYyBmYWlsZWQuXCIpO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY29uc3RydWN0IHRoZSBiZXN0IGNpcmNsZSwgYW5kIHJldHVybiBpdFxyXG4gICAgbGV0IGJlc3RfY2lyY2xlID0gbmV3IENpcmNsZTIoaGlnaF9zY29yZV9jZW50ZXIsIGhpZ2hfc2NvcmVfcmFkaXVzKVxyXG4gICAgcmV0dXJuIFtiZXN0X2NpcmNsZSwgaGlnaF9zY29yZV9pZHNdXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUmFuc2FjRWxpcGxzZTJkKFxyXG4gICAgcG9pbnRzOiBWZWN0b3IyQXJyYXksIGl0ZXJhdGlvbnM6IG51bWJlciwgcmFkaXVzOiBudW1iZXIsIGVsaXBzZURldmlhdGlvbjogbnVtYmVyLCB0b2xlcmFuY2U6IG51bWJlcixcclxuICAgIHNlZWQ6IG51bWJlciwgbWluU2NvcmU6IG51bWJlciwgbWF4UmFkaXVzRGV2aWF0aW9uOiBudW1iZXIpIDogW0NpcmNsZTIsIG51bWJlcltdXSB8IHVuZGVmaW5lZCB7XHJcbiAgICAvLyAgRXh0cmFjdCBjaXJjbGUgcGFyYW1ldGVycyBmcm9tIHBvaW50cyBpbiAyRCBzcGFjZS5cclxuXHJcbiAgICAvLyAgSU5cclxuICAgIC8vICAgICAgLSBwb2ludHMgOiBucC5hcnJheVtuLCAyXSAtPiBzYW1wbGUgcG9pbnRzXHJcbiAgICAvLyAgICAgIC0gaXRlcmF0aW9ucyA6IGludCAtPiBob3cgbWFueSB0aW1lcyB0byByZXBlYXRcclxuICAgIC8vICAgICAgLSByYWRpdXMgOiBmbG9hdCAtPiByYWRpdXMgdG8gY3JlYXRlIGNpcmNsZXMgZnJvbVxyXG4gICAgLy8gICAgICAtIHRvbGVyYW5jZSA6IGZsb2F0IC0+IHBvaW50IGNvdW50cyBpZiB3aXRoaW4gdG9sZXJhbmNlIGRpc3RhbmNlXHJcbiAgICAvLyAgICAgIC0gc2VlZCBmb3IgcmFuZG9taXphdGlvbiA6IGludCAtPiBmb3IgcmFuZG9tIHBpY2tpbmdcclxuICAgIC8vICAgICAgLSBtaW5fc2NvcmUgOiBpbnQgLT4gaWYgaGlnaF9zY29yZSBpcyBiZWxvdyBtaW5fc2NvcmUsIGl0cyBpbnZhbGlkXHJcbiAgICAvLyAgICAgIC0gbnVtX3Njb3JlcyA6IGludCAtPiBpZiBoaWdoZXIgdGhhbiBvbmU6IHVzZSBhbiBhdmVyYWdlIG9mIHRoZSB0b3AgeCBoaWdoc2NvcmVzIGZvciBhIG1vcmUgYWN1cmF0ZSByZXN1bHRcclxuXHJcbiAgICAvLyAgT1VUXHJcbiAgICAvLyAgICAgIC0gYmVzdCBjaXJjbGUsIG51bGwgaWYgbm9uZSBwYXNzZWQgdGhlIG1pbmltdW0gc2NvcmUgKCdmYWlsc2F2ZScpXHJcbiAgICAvLyAgICAgIC0gbnVtYmVyIG9mIG1hdGNoZXNcclxuXHJcbiAgICAvLyAgQWxnb3JpdGhtOlxyXG4gICAgLy8gIC0gaXRlcmF0ZSBmb3IgTUFYX1RSSUVTIHRpbWVzXHJcbiAgICAvLyAgLSBQaWNrIDIgcmFuZG9tICdwb2ludHMnXHJcbiAgICAvLyAgLSBDb25zdHJ1Y3QgdHdvIGNpcmNsZXMgd2l0aCAncmFkaXVzJ1xyXG4gICAgLy8gIC0gcGVyIGNpcmNsZSwgcGVyIHBvaW50IGluICdwb2ludHMnXHJcbiAgICAvLyAgICAtIGlmIGRpc3RhbmNlIHRvIGNpcmNsZSA8ICd0b2xlcmFuY2UnXHJcbiAgICAvLyAgICAgIC0gYWRkIDEgdG8gc2NvcmVcclxuXHJcbiAgICAvLyAgLSByZXR1cm4gdGhlIGhpZ2ggc2NvcmUgY2lyY2xlXHJcblxyXG4gICAgLy8gIFRPRE8gaWRlZWVuOlxyXG4gICAgLy8gIC0gaGlnaCBzY29yZSA6IHRvcCA1IGdlbWlkZGVsZGUgPC0gbWlnaHQgbm90IGJlIHVzZWZ1bDogcmVzdWx0cyBhbHJlYWR5IGFtYXppbmdcclxuICAgIC8vICAtIGVtYnJhY2Ugb3ZhYWwgdm9ybSBcclxuXHJcbiAgICAvLyBzZWVkXHJcbiAgICAvLyBUT0RPIFNFRURcclxuICAgIC8vbnAucmFuZG9tLnNlZWQoc2VlZClcclxuXHJcbiAgICBjb25zb2xlLmxvZyhwb2ludHMpO1xyXG5cclxuICAgIC8vIFRPRE8gZG8tb3ZlciBvZiBoaWdoIHNjb3JlIHN5c3RlbVxyXG4gICAgbGV0IGhpZ2hfc2NvcmUgPSAwXHJcbiAgICBsZXQgaGlnaF9zY29yZV9jZW50ZXI6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMigwLDApO1xyXG4gICAgbGV0IGhpZ2hfc2NvcmVfcmFkaXVzID0gMC4wXHJcbiAgICBsZXQgaGlnaF9zY29yZV9pZHM6IG51bWJlcltdID0gW11cclxuXHJcbiAgICBsZXQgbnVtX3BvaW50cyA9IHBvaW50cy5jb3VudCgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XHJcblxyXG4gICAgICAgIC8vIHJhbmRvbWl6ZSB0aGUgcmFkaXVzIGEgYml0XHJcbiAgICAgICAgbGV0IHRoaXNfcmFkaXVzID0gcmFkaXVzICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogbWF4UmFkaXVzRGV2aWF0aW9uXHJcblxyXG4gICAgICAgIC8vIGNob29zZSB0d28sIGFuZCBjcmVhdGUgYSBjaXJjbGUgd2l0aCBpdFxyXG4gICAgICAgIGxldCBpZDEgPSByYW5kSW50KDAsIG51bV9wb2ludHMpO1xyXG4gICAgICAgIGxldCBpZDIgPSByYW5kSW50KDAsIG51bV9wb2ludHMpO1xyXG4gICAgICAgIGxldCBjZW50ZXJzID0gQ2lyY2xlMi5jZW50ZXJzRnJvbVBQUihwb2ludHMuZ2V0VmVjdG9yKGlkMSksIHBvaW50cy5nZXRWZWN0b3IoaWQyKSwgdGhpc19yYWRpdXMpXHJcblxyXG4gICAgICAgIC8vIHByaW50KFwiZm91bmQgc29tZSBjZW50ZXJzOiBcIiwgY2VudGVycylcclxuICAgICAgICBmb3IobGV0IGNlbnRlciBvZiBjZW50ZXJzKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBmaWd1cmUgb3V0IHRoZSBzY29yZVxyXG4gICAgICAgICAgICBsZXQgaW5jbHVkZWRJZHMgPSBpZHNXaXRoaW5DaXJjbGUocG9pbnRzLCBjZW50ZXIsIHJhZGl1cywgdG9sZXJhbmNlKTtcclxuICAgICAgICAgICAgbGV0IHNjb3JlID0gaW5jbHVkZWRJZHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgLy8gc2F2ZSBpZiBoaWdoIHNjb3JlXHJcbiAgICAgICAgICAgIGlmIChzY29yZSA+IGhpZ2hfc2NvcmUpIHtcclxuICAgICAgICAgICAgICAgIGhpZ2hfc2NvcmUgPSBzY29yZVxyXG4gICAgICAgICAgICAgICAgaGlnaF9zY29yZV9yYWRpdXMgPSB0aGlzX3JhZGl1c1xyXG4gICAgICAgICAgICAgICAgaGlnaF9zY29yZV9jZW50ZXIgPSBjZW50ZXJcclxuICAgICAgICAgICAgICAgIGhpZ2hfc2NvcmVfaWRzID0gaW5jbHVkZWRJZHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyBmZWVkYmFja1xyXG4gICAgY29uc29sZS5sb2coXCJiZXN0IHNjb3JlXCIsIGhpZ2hfc2NvcmUpXHJcbiAgICBpZiAoaGlnaF9zY29yZSA8IG1pblNjb3JlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzIGlzIHNtYWxsZXIgdGhhbiB0aGUgbWluaW11bSBzY29yZTogcmFuc2FjIGZhaWxlZC5cIik7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb25zdHJ1Y3QgdGhlIGJlc3QgY2lyY2xlLCBhbmQgcmV0dXJuIGl0XHJcbiAgICBsZXQgYmVzdF9jaXJjbGUgPSBuZXcgQ2lyY2xlMihoaWdoX3Njb3JlX2NlbnRlciwgaGlnaF9zY29yZV9yYWRpdXMpXHJcbiAgICByZXR1cm4gW2Jlc3RfY2lyY2xlLCBoaWdoX3Njb3JlX2lkc11cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlkc1dpdGhpbkNpcmNsZShwdHM6IFZlY3RvcjJBcnJheSwgY2VudGVyOiBWZWN0b3IyLCByYWRpdXM6IG51bWJlciwgdG9sZXJhbmNlOiBudW1iZXIpIDogbnVtYmVyW10ge1xyXG4gICAgXHJcbiAgICBsZXQgaW5kaWNlczogbnVtYmVyW10gPSBbXTtcclxuICAgIHB0cy5mb3JFYWNoKChwLCBpKSA9PiB7IFxyXG4gICAgICAgIGxldCBkaXN0YW5jZSA9IHAuZGlzVG8oY2VudGVyKTtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2UgLSByYWRpdXMpIDwgdG9sZXJhbmNlKSB7XHJcbiAgICAgICAgICAgIGluZGljZXMucHVzaChpKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGluZGljZXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGxvd2VyPTAsIGluY2x1ZGluZ1xyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHVwcGVyPTEsIGV4Y2x1ZGluZ1xyXG4gKi9cclxuZnVuY3Rpb24gcmFuZEludChsb3dlcjogbnVtYmVyLCB1cHBlcjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihsb3dlciArIChNYXRoLnJhbmRvbSgpICogKHVwcGVyLWxvd2VyKSkpO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/sfered/ransac.ts\n");

/***/ }),

/***/ "./src/sfered/scan-data.ts":
/*!*********************************!*\
  !*** ./src/sfered/scan-data.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BellusScanData\": () => /* binding */ BellusScanData,\n/* harmony export */   \"NextcloudScanData\": () => /* binding */ NextcloudScanData\n/* harmony export */ });\n/* harmony import */ var _mesh_render_mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mesh/render-mesh */ \"./src/mesh/render-mesh.ts\");\n/* harmony import */ var _data_vector_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/vector-array */ \"./src/data/vector-array.ts\");\n/* harmony import */ var _math_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/matrix */ \"./src/math/matrix.ts\");\n/* harmony import */ var _system_domwrappers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system/domwrappers */ \"./src/system/domwrappers.ts\");\n/* harmony import */ var _img_Image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../img/Image */ \"./src/img/Image.ts\");\n// BellusData.ts \r\n// \r\n// author: Jos Feenstra\r\n// purpose : \r\n// - wrapper around all data gathered from Bellus3D.\r\n// - do all file -> object convertions here.         \r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nclass BellusScanData {\r\n    constructor(landmarkData, texture, mesh, front, settings) {\r\n        this.landmarkData = landmarkData;\r\n        this.texture = texture;\r\n        this.mesh = mesh;\r\n        this.front = front;\r\n        this.settings = settings;\r\n        this.landmarks = this.getLandmarks2f();\r\n        // this.landmarks3 = this.getLandmarks3f(); // NOTE - we will not use the bellus 3d landmarks. \r\n        // they are located within a uncypherable space\r\n    }\r\n    static fromFileList(files, settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // assign the correct files.\r\n            let jsonFile;\r\n            let textureFile;\r\n            let objFile;\r\n            let frontFile;\r\n            for (let i = 0; i < files.length; i++) {\r\n                let file = files.item(i);\r\n                let name = file.name;\r\n                console.log(`processing ${name}...`);\r\n                switch (name) {\r\n                    case 'facelandmarks.json':\r\n                        jsonFile = file;\r\n                        break;\r\n                    case 'head3d.jpg':\r\n                        textureFile = file;\r\n                        break;\r\n                    case 'head3d.obj':\r\n                        objFile = file;\r\n                        break;\r\n                    case 'image.jpg':\r\n                        frontFile = file;\r\n                        break;\r\n                }\r\n            }\r\n            return yield new Promise(function (resolve, reject) {\r\n                return __awaiter(this, void 0, void 0, function* () {\r\n                    if (jsonFile == undefined ||\r\n                        textureFile == undefined ||\r\n                        objFile == undefined ||\r\n                        frontFile == undefined) {\r\n                        alert(\"give me exactly one .json, one .ojb, and one .jpg file please!\");\r\n                        reject();\r\n                    }\r\n                    else {\r\n                        console.log(\"converting files to usable objects...\");\r\n                        let json = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_3__.loadJSONFromFile)(jsonFile);\r\n                        let texture = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_3__.loadImageFromFile)(textureFile);\r\n                        let objtext = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_3__.loadTextFromFile)(objFile);\r\n                        let mesh = (0,_mesh_render_mesh__WEBPACK_IMPORTED_MODULE_0__.meshFromObj)(objtext);\r\n                        let front = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_3__.loadImageFromFile)(frontFile);\r\n                        // flip texture horizontally\r\n                        let gi = _img_Image__WEBPACK_IMPORTED_MODULE_4__.GeonImage.fromImageData(texture);\r\n                        gi = gi.flipVer();\r\n                        mesh.setTexture(gi.toImageData());\r\n                        console.log(\"done! bellus scan loaded.\");\r\n                        resolve(new BellusScanData(json, texture, mesh, front, settings));\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    fromTextureToUVSpace(vectors) {\r\n        let [scaleY, scaleX] = this.getLandmarksImageSize();\r\n        console.log(\"scaling landmarks down by \" + scaleX + \", \" + scaleY);\r\n        let tf1 = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newScaler(1 / scaleX, -1 / scaleY, 0);\r\n        let tf2 = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newTranslation(0, 1, 0);\r\n        let tf = tf1.multiply(tf2);\r\n        return vectors.clone().transform(tf);\r\n    }\r\n    getLandmarksImageSize() {\r\n        // image sizes as registered in the 'facelandmarks' json.\r\n        let data = this.landmarkData.ImageSize;\r\n        return [data[0], data[1]];\r\n    }\r\n    getLandmarks2f() {\r\n        // 2d landmarks as registered in the 'facelandmarks' json\r\n        let data = this.landmarkData.Point2f;\r\n        let size = data.cols;\r\n        let landmarks = new _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array(data.data.length / 2);\r\n        landmarks.fillWith(data.data, 2);\r\n        return landmarks;\r\n    }\r\n}\r\nclass NextcloudScanData {\r\n    // data to be found in the json\r\n    constructor(landmarkData, texture, mesh, settings, json) {\r\n        this.landmarkData = landmarkData;\r\n        this.texture = texture;\r\n        this.mesh = mesh;\r\n        this.settings = settings;\r\n        this.json = json;\r\n        this.readJson(json);\r\n    }\r\n    readJson(json) {\r\n        this.eyePoints = _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array.fromNative(json.pupil_pts);\r\n        this.eyePointsEdited = _data_vector_array__WEBPACK_IMPORTED_MODULE_1__.Vector3Array.fromNative(json.pupil_pts_edited);\r\n    }\r\n    static fromFileList(files, settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            1;\r\n            // assign the correct files.\r\n            let textFile;\r\n            let textureFile;\r\n            let objFile;\r\n            let materialFile;\r\n            for (let i = 0; i < files.length; i++) {\r\n                let file = files.item(i);\r\n                let name = file.name;\r\n                console.log(`processing ${name}...`);\r\n                switch (name) {\r\n                    case 'scaninfo.txt':\r\n                        textFile = file;\r\n                        break;\r\n                    case 'head3d.jpg':\r\n                        textureFile = file;\r\n                        break;\r\n                    case 'head3d.obj':\r\n                        objFile = file;\r\n                        break;\r\n                    case 'head3d.obj.mtl':\r\n                        materialFile = file;\r\n                        break;\r\n                }\r\n            }\r\n            return yield new Promise(function (resolve, reject) {\r\n                return __awaiter(this, void 0, void 0, function* () {\r\n                    if (textFile == undefined ||\r\n                        textureFile == undefined ||\r\n                        objFile == undefined ||\r\n                        materialFile == undefined) {\r\n                        alert(\"give me at least one .txt, one .obj, one .mtl and one .jpg file please!\");\r\n                        reject();\r\n                    }\r\n                    else {\r\n                        console.log(\"converting files to usable objects...\");\r\n                        // read json bit\r\n                        let jsonbit = \"\";\r\n                        let text = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_3__.loadTextFromFile)(textFile);\r\n                        let lines = text.split('\\n');\r\n                        for (let i = 0; i < lines.length; i++) {\r\n                            let parts = lines[i].split(';');\r\n                            if (parts.length != 2)\r\n                                continue;\r\n                            if (parts[0] == 'FACEPOINTJSON') {\r\n                                jsonbit = parts[1];\r\n                            }\r\n                        }\r\n                        if (jsonbit == \"\") {\r\n                            alert(\"I found a text file, but it does not contain FACEPOINTJSON key, or a valid embedded json\");\r\n                            reject();\r\n                        }\r\n                        let json = JSON.parse(jsonbit);\r\n                        console.log(\"found the following json:\");\r\n                        console.log(json);\r\n                        // read the rest\r\n                        let texture = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_3__.loadImageFromFile)(textureFile);\r\n                        let objtext = yield (0,_system_domwrappers__WEBPACK_IMPORTED_MODULE_3__.loadTextFromFile)(objFile);\r\n                        let mesh = (0,_mesh_render_mesh__WEBPACK_IMPORTED_MODULE_0__.meshFromObj)(objtext);\r\n                        // flip texture horizontally -> this is needed for some inexplicable reason\r\n                        // and put the flipped version in the mesh\r\n                        let gi = _img_Image__WEBPACK_IMPORTED_MODULE_4__.GeonImage.fromImageData(texture);\r\n                        gi = gi.flipVer();\r\n                        mesh.setTexture(gi.toImageData());\r\n                        // feedback\r\n                        console.log(\"done! bellus scan loaded.\");\r\n                        // return\r\n                        resolve(new NextcloudScanData(json, texture, mesh, settings, json));\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    getTextureToUVMatrix() {\r\n        let [scaleY, scaleX] = [this.texture.height, this.texture.width];\r\n        let tf1 = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newScaler(1 / scaleX, -1 / scaleY, 1);\r\n        let tf2 = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newTranslation(0, 1, 0);\r\n        return tf1.multiply(tf2);\r\n    }\r\n    fromTextureToUVSpace(vectors) {\r\n        let [scaleY, scaleX] = this.getLandmarksImageSize();\r\n        console.log(\"scaling landmarks down by \" + scaleX + \", \" + scaleY);\r\n        let tf1 = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newScaler(1 / scaleX, -1 / scaleY, 1);\r\n        let tf2 = _math_matrix__WEBPACK_IMPORTED_MODULE_2__.Matrix4.newTranslation(0, 1, 0);\r\n        let tf = tf1.multiply(tf2);\r\n        return vectors.clone().transform(tf);\r\n    }\r\n    getLandmarksImageSize() {\r\n        // image sizes as registered in the 'facelandmarks' json.\r\n        let data = this.landmarkData.ImageSize;\r\n        return [data[0], data[1]];\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3NmZXJlZC9zY2FuLWRhdGEudHM/YTg0YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsaUJBQWlCO0FBQ2pCLEdBQUc7QUFDSCx1QkFBdUI7QUFDdkIsYUFBYTtBQUNiLG9EQUFvRDtBQUNwRCxxREFBcUQ7Ozs7Ozs7Ozs7QUFFUztBQUNJO0FBRXpCO0FBRXFEO0FBQ3JEO0FBRWxDLE1BQU0sY0FBYztJQVd2QixZQUFZLFlBQWlCLEVBQUUsT0FBa0IsRUFBRSxJQUFnQixFQUFFLEtBQWdCLEVBQUUsUUFBYTtRQUVoRyxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN2QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUV6QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN2QywrRkFBK0Y7UUFDL0YsK0NBQStDO0lBQ25ELENBQUM7SUFHRCxNQUFNLENBQU8sWUFBWSxDQUFDLEtBQWUsRUFBRSxRQUFhOztZQUVwRCw0QkFBNEI7WUFDNUIsSUFBSSxRQUEwQixDQUFDO1lBQy9CLElBQUksV0FBNkIsQ0FBQztZQUNsQyxJQUFJLE9BQXlCLENBQUM7WUFDOUIsSUFBSSxTQUEyQixDQUFDO1lBRWhDLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNuQyxJQUFJLElBQUksR0FBUyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBRSxDQUFDO2dCQUNoQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO2dCQUNyQixP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QU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUdPLHFCQUFxQjtRQUV6Qix5REFBeUQ7UUFDekQsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUM7UUFDdkMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QixDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvc2ZlcmVkL3NjYW4tZGF0YS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEJlbGx1c0RhdGEudHMgXHJcbi8vIFxyXG4vLyBhdXRob3I6IEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlIDogXHJcbi8vIC0gd3JhcHBlciBhcm91bmQgYWxsIGRhdGEgZ2F0aGVyZWQgZnJvbSBCZWxsdXMzRC5cclxuLy8gLSBkbyBhbGwgZmlsZSAtPiBvYmplY3QgY29udmVydGlvbnMgaGVyZS4gICAgICAgICBcclxuXHJcbmltcG9ydCB7IFJlbmRlck1lc2gsIG1lc2hGcm9tT2JqIH0gZnJvbSBcIi4uL21lc2gvcmVuZGVyLW1lc2hcIjtcclxuaW1wb3J0IHsgVmVjdG9yMkFycmF5LCBWZWN0b3IzQXJyYXkgfSBmcm9tIFwiLi4vZGF0YS92ZWN0b3ItYXJyYXlcIjtcclxuaW1wb3J0IHsgRG9tYWluLCBEb21haW4yIH0gZnJvbSBcIi4uL21hdGgvZG9tYWluXCI7XHJcbmltcG9ydCB7IE1hdHJpeDQgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBsb2FkSW1hZ2VGcm9tRmlsZSwgbG9hZEpTT05Gcm9tRmlsZSwgbG9hZFRleHRGcm9tRmlsZSB9IGZyb20gXCIuLi9zeXN0ZW0vZG9td3JhcHBlcnNcIjtcclxuaW1wb3J0IHsgR2VvbkltYWdlIH0gZnJvbSBcIi4uL2ltZy9JbWFnZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJlbGx1c1NjYW5EYXRhIHtcclxuXHJcbiAgICBsYW5kbWFya0RhdGE6IGFueTsgLy8ganNvblxyXG4gICAgdGV4dHVyZTogSW1hZ2VEYXRhOyBcclxuICAgIG1lc2g6IFJlbmRlck1lc2g7XHJcbiAgICBmcm9udDogSW1hZ2VEYXRhOyBcclxuICAgIHNldHRpbmdzOiBhbnk7IC8vIGxvY2FsIHNldHRpbmdzIGZpbGUuIFdlIHdhbnQgdGhpcyB0byBleHRyYWN0IHRoZSByaWdodCByZWdpb25zLlxyXG5cclxuICAgIGxhbmRtYXJrczogVmVjdG9yM0FycmF5O1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihsYW5kbWFya0RhdGE6IGFueSwgdGV4dHVyZTogSW1hZ2VEYXRhLCBtZXNoOiBSZW5kZXJNZXNoLCBmcm9udDogSW1hZ2VEYXRhLCBzZXR0aW5nczogYW55KSB7XHJcblxyXG4gICAgICAgIHRoaXMubGFuZG1hcmtEYXRhID0gbGFuZG1hcmtEYXRhO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XHJcbiAgICAgICAgdGhpcy5tZXNoID0gbWVzaDtcclxuICAgICAgICB0aGlzLmZyb250ID0gZnJvbnQ7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cclxuICAgICAgICB0aGlzLmxhbmRtYXJrcyA9IHRoaXMuZ2V0TGFuZG1hcmtzMmYoKTtcclxuICAgICAgICAvLyB0aGlzLmxhbmRtYXJrczMgPSB0aGlzLmdldExhbmRtYXJrczNmKCk7IC8vIE5PVEUgLSB3ZSB3aWxsIG5vdCB1c2UgdGhlIGJlbGx1cyAzZCBsYW5kbWFya3MuIFxyXG4gICAgICAgIC8vIHRoZXkgYXJlIGxvY2F0ZWQgd2l0aGluIGEgdW5jeXBoZXJhYmxlIHNwYWNlXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBhc3luYyBmcm9tRmlsZUxpc3QoZmlsZXM6IEZpbGVMaXN0LCBzZXR0aW5nczogYW55KSA6IFByb21pc2U8QmVsbHVzU2NhbkRhdGE+IHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBhc3NpZ24gdGhlIGNvcnJlY3QgZmlsZXMuXHJcbiAgICAgICAgbGV0IGpzb25GaWxlOiBGaWxlIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCB0ZXh0dXJlRmlsZTogRmlsZSB8IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgb2JqRmlsZTogRmlsZSB8IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgZnJvbnRGaWxlOiBGaWxlIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmaWxlOiBGaWxlID0gZmlsZXMuaXRlbShpKSE7XHJcbiAgICAgICAgICAgIGxldCBuYW1lID0gZmlsZS5uYW1lO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgcHJvY2Vzc2luZyAke25hbWV9Li4uYCk7XHJcbiAgICAgICAgICAgIHN3aXRjaChuYW1lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdmYWNlbGFuZG1hcmtzLmpzb24nOiBcclxuICAgICAgICAgICAgICAgICAgICBqc29uRmlsZSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdoZWFkM2QuanBnJzogXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZUZpbGUgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhZDNkLm9iaic6IFxyXG4gICAgICAgICAgICAgICAgICAgIG9iakZpbGUgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrOyBcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2ltYWdlLmpwZyc6IFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb250RmlsZSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKGFzeW5jIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGpzb25GaWxlID09IHVuZGVmaW5lZCAgICB8fCBcclxuICAgICAgICAgICAgICAgIHRleHR1cmVGaWxlID09IHVuZGVmaW5lZCB8fCBcclxuICAgICAgICAgICAgICAgIG9iakZpbGUgPT0gdW5kZWZpbmVkIHx8IFxyXG4gICAgICAgICAgICAgICAgZnJvbnRGaWxlID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJnaXZlIG1lIGV4YWN0bHkgb25lIC5qc29uLCBvbmUgLm9qYiwgYW5kIG9uZSAuanBnIGZpbGUgcGxlYXNlIVwiKTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb252ZXJ0aW5nIGZpbGVzIHRvIHVzYWJsZSBvYmplY3RzLi4uXCIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQganNvbiA9IGF3YWl0IGxvYWRKU09ORnJvbUZpbGUoanNvbkZpbGUpOyBcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0dXJlID0gYXdhaXQgbG9hZEltYWdlRnJvbUZpbGUodGV4dHVyZUZpbGUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9ianRleHQgPSBhd2FpdCBsb2FkVGV4dEZyb21GaWxlKG9iakZpbGUpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1lc2ggPSBtZXNoRnJvbU9iaihvYmp0ZXh0KTtcclxuICAgICAgICAgICAgICAgIGxldCBmcm9udCA9IGF3YWl0IGxvYWRJbWFnZUZyb21GaWxlKGZyb250RmlsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmxpcCB0ZXh0dXJlIGhvcml6b250YWxseVxyXG4gICAgICAgICAgICAgICAgbGV0IGdpID0gR2VvbkltYWdlLmZyb21JbWFnZURhdGEodGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICBnaSA9IGdpLmZsaXBWZXIoKTtcclxuICAgICAgICAgICAgICAgIG1lc2guc2V0VGV4dHVyZShnaS50b0ltYWdlRGF0YSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRvbmUhIGJlbGx1cyBzY2FuIGxvYWRlZC5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgQmVsbHVzU2NhbkRhdGEoanNvbiwgdGV4dHVyZSwgbWVzaCwgZnJvbnQsIHNldHRpbmdzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnJvbVRleHR1cmVUb1VWU3BhY2UodmVjdG9yczogVmVjdG9yM0FycmF5KSA6IFZlY3RvcjNBcnJheSB7XHJcblxyXG4gICAgICAgIGxldCBbc2NhbGVZLCBzY2FsZVhdID0gdGhpcy5nZXRMYW5kbWFya3NJbWFnZVNpemUoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNjYWxpbmcgbGFuZG1hcmtzIGRvd24gYnkgXCIgKyBzY2FsZVggKyBcIiwgXCIgKyBzY2FsZVkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB0ZjEgPSBNYXRyaXg0Lm5ld1NjYWxlcigxL3NjYWxlWCwgLTEvc2NhbGVZLCAwKVxyXG4gICAgICAgIGxldCB0ZjIgPSBNYXRyaXg0Lm5ld1RyYW5zbGF0aW9uKDAsMSwwKVxyXG4gICAgICAgIGxldCB0ZiA9IHRmMS5tdWx0aXBseSh0ZjIpO1xyXG4gICAgICAgIHJldHVybiB2ZWN0b3JzLmNsb25lKCkudHJhbnNmb3JtKHRmKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRMYW5kbWFya3NJbWFnZVNpemUoKSA6IFtudW1iZXIsIG51bWJlcl0ge1xyXG5cclxuICAgICAgICAvLyBpbWFnZSBzaXplcyBhcyByZWdpc3RlcmVkIGluIHRoZSAnZmFjZWxhbmRtYXJrcycganNvbi5cclxuICAgICAgICBsZXQgZGF0YSA9IHRoaXMubGFuZG1hcmtEYXRhLkltYWdlU2l6ZTtcclxuICAgICAgICByZXR1cm4gW2RhdGFbMF0sIGRhdGFbMV1dO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldExhbmRtYXJrczJmKCkgOiBWZWN0b3IzQXJyYXkge1xyXG5cclxuICAgICAgICAvLyAyZCBsYW5kbWFya3MgYXMgcmVnaXN0ZXJlZCBpbiB0aGUgJ2ZhY2VsYW5kbWFya3MnIGpzb25cclxuICAgICAgICBsZXQgZGF0YSA9IHRoaXMubGFuZG1hcmtEYXRhLlBvaW50MmY7XHJcbiAgICAgICAgbGV0IHNpemUgPSBkYXRhLmNvbHM7XHJcbiAgICAgICAgbGV0IGxhbmRtYXJrcyA9IG5ldyBWZWN0b3IzQXJyYXkoZGF0YS5kYXRhLmxlbmd0aCAvIDIpO1xyXG4gICAgICAgIGxhbmRtYXJrcy5maWxsV2l0aChkYXRhLmRhdGEsIDIpO1xyXG4gICAgICAgIHJldHVybiBsYW5kbWFya3M7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJpdmF0ZSBnZXRMYW5kbWFya3MzZigpIDogVmVjdG9yM0FycmF5IHtcclxuXHJcbiAgICAvLyAgICAgLy8gMmQgbGFuZG1hcmtzIGFzIHJlZ2lzdGVyZWQgaW4gdGhlICdmYWNlbGFuZG1hcmtzJyBqc29uXHJcbiAgICAvLyAgICAgbGV0IGRhdGEgPSB0aGlzLmxhbmRtYXJrRGF0YS5Qb2ludDNmO1xyXG4gICAgLy8gICAgIGxldCBzaXplID0gZGF0YS5jb2xzO1xyXG4gICAgLy8gICAgIGxldCBhcnIgPSBuZXcgVmVjdG9yM0FycmF5KHNpemUpO1xyXG4gICAgLy8gICAgIGFyci5maWxsV2l0aChkYXRhLmRhdGEpO1xyXG5cclxuICAgIC8vICAgICByZXR1cm4gYXJyO1xyXG4gICAgLy8gfSAgXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOZXh0Y2xvdWRTY2FuRGF0YSB7XHJcblxyXG4gICAgbGFuZG1hcmtEYXRhOiBhbnk7IC8vIGpzb25cclxuICAgIHRleHR1cmU6IEltYWdlRGF0YTsgXHJcbiAgICBtZXNoOiBSZW5kZXJNZXNoO1xyXG4gICAgc2V0dGluZ3M6IGFueTsgLy8gbG9jYWwgc2V0dGluZ3MgZmlsZS4gV2Ugd2FudCB0aGlzIHRvIGV4dHJhY3QgdGhlIHJpZ2h0IHJlZ2lvbnMuXHJcbiAgICBqc29uOiBhbnk7XHJcbiAgICBleWVQb2ludHNFZGl0ZWQhOiBWZWN0b3IzQXJyYXk7XHJcbiAgICBleWVQb2ludHMhOiBWZWN0b3IzQXJyYXk7XHJcblxyXG4gICAgLy8gZGF0YSB0byBiZSBmb3VuZCBpbiB0aGUganNvblxyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihsYW5kbWFya0RhdGE6IGFueSwgdGV4dHVyZTogSW1hZ2VEYXRhLCBtZXNoOiBSZW5kZXJNZXNoLCBzZXR0aW5nczogYW55LCBqc29uOiBhbnkpIHtcclxuXHJcbiAgICAgICAgdGhpcy5sYW5kbWFya0RhdGEgPSBsYW5kbWFya0RhdGE7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICB0aGlzLm1lc2ggPSBtZXNoO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLmpzb24gPSBqc29uO1xyXG5cclxuICAgICAgICB0aGlzLnJlYWRKc29uKGpzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVhZEpzb24oanNvbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5leWVQb2ludHMgPSBWZWN0b3IzQXJyYXkuZnJvbU5hdGl2ZShqc29uLnB1cGlsX3B0cyk7XHJcbiAgICAgICAgdGhpcy5leWVQb2ludHNFZGl0ZWQgPSBWZWN0b3IzQXJyYXkuZnJvbU5hdGl2ZShqc29uLnB1cGlsX3B0c19lZGl0ZWQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgZnJvbUZpbGVMaXN0KGZpbGVzOiBGaWxlTGlzdCwgc2V0dGluZ3M6IGFueSkgOiBQcm9taXNlPE5leHRjbG91ZFNjYW5EYXRhPiB7XHJcbiAgICAgICAgMVxyXG4gICAgICAgIC8vIGFzc2lnbiB0aGUgY29ycmVjdCBmaWxlcy5cclxuICAgICAgICBsZXQgdGV4dEZpbGU6IEZpbGUgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHRleHR1cmVGaWxlOiBGaWxlIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBvYmpGaWxlOiBGaWxlIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBtYXRlcmlhbEZpbGU6IEZpbGUgfCB1bmRlZmluZWQ7XHJcbiAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGZpbGU6IEZpbGUgPSBmaWxlcy5pdGVtKGkpITtcclxuICAgICAgICAgICAgbGV0IG5hbWUgPSBmaWxlLm5hbWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBwcm9jZXNzaW5nICR7bmFtZX0uLi5gKTtcclxuICAgICAgICAgICAgc3dpdGNoKG5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3NjYW5pbmZvLnR4dCc6IFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRGaWxlID0gZmlsZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hlYWQzZC5qcGcnOiBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlRmlsZSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdoZWFkM2Qub2JqJzogXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqRmlsZSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IFxyXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhZDNkLm9iai5tdGwnOiBcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbEZpbGUgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrOyBcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoYXN5bmMgZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGV4dEZpbGUgPT0gdW5kZWZpbmVkICAgIHx8IFxyXG4gICAgICAgICAgICAgICAgdGV4dHVyZUZpbGUgPT0gdW5kZWZpbmVkIHx8IFxyXG4gICAgICAgICAgICAgICAgb2JqRmlsZSA9PSB1bmRlZmluZWQgfHwgXHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbEZpbGUgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcImdpdmUgbWUgYXQgbGVhc3Qgb25lIC50eHQsIG9uZSAub2JqLCBvbmUgLm10bCBhbmQgb25lIC5qcGcgZmlsZSBwbGVhc2UhXCIpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvbnZlcnRpbmcgZmlsZXMgdG8gdXNhYmxlIG9iamVjdHMuLi5cIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIHJlYWQganNvbiBiaXRcclxuICAgICAgICAgICAgICAgIGxldCBqc29uYml0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gYXdhaXQgbG9hZFRleHRGcm9tRmlsZSh0ZXh0RmlsZSk7IFxyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnRzID0gbGluZXNbaV0uc3BsaXQoJzsnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9IDIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0c1swXSA9PSAnRkFDRVBPSU5USlNPTicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAganNvbmJpdCA9IHBhcnRzWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChqc29uYml0ID09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIkkgZm91bmQgYSB0ZXh0IGZpbGUsIGJ1dCBpdCBkb2VzIG5vdCBjb250YWluIEZBQ0VQT0lOVEpTT04ga2V5LCBvciBhIHZhbGlkIGVtYmVkZGVkIGpzb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7IFxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgIGxldCBqc29uOiBKU09OID0gSlNPTi5wYXJzZShqc29uYml0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZvdW5kIHRoZSBmb2xsb3dpbmcganNvbjpcIik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZWFkIHRoZSByZXN0XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dHVyZSA9IGF3YWl0IGxvYWRJbWFnZUZyb21GaWxlKHRleHR1cmVGaWxlKTtcclxuICAgICAgICAgICAgICAgIGxldCBvYmp0ZXh0ID0gYXdhaXQgbG9hZFRleHRGcm9tRmlsZShvYmpGaWxlKTtcclxuICAgICAgICAgICAgICAgIGxldCBtZXNoID0gbWVzaEZyb21PYmoob2JqdGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmxpcCB0ZXh0dXJlIGhvcml6b250YWxseSAtPiB0aGlzIGlzIG5lZWRlZCBmb3Igc29tZSBpbmV4cGxpY2FibGUgcmVhc29uXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgcHV0IHRoZSBmbGlwcGVkIHZlcnNpb24gaW4gdGhlIG1lc2hcclxuICAgICAgICAgICAgICAgIGxldCBnaSA9IEdlb25JbWFnZS5mcm9tSW1hZ2VEYXRhKHRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgZ2kgPSBnaS5mbGlwVmVyKCk7XHJcbiAgICAgICAgICAgICAgICBtZXNoLnNldFRleHR1cmUoZ2kudG9JbWFnZURhdGEoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmVlZGJhY2tcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZG9uZSEgYmVsbHVzIHNjYW4gbG9hZGVkLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm5cclxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IE5leHRjbG91ZFNjYW5EYXRhKGpzb24sIHRleHR1cmUsIG1lc2gsIHNldHRpbmdzLCBqc29uKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUZXh0dXJlVG9VVk1hdHJpeCgpIDogTWF0cml4NCB7XHJcbiAgICAgICAgbGV0IFtzY2FsZVksIHNjYWxlWF0gPSBbdGhpcy50ZXh0dXJlLmhlaWdodCwgdGhpcy50ZXh0dXJlLndpZHRoXTtcclxuICAgICAgICBsZXQgdGYxID0gTWF0cml4NC5uZXdTY2FsZXIoMS9zY2FsZVgsIC0xL3NjYWxlWSwgMSlcclxuICAgICAgICBsZXQgdGYyID0gTWF0cml4NC5uZXdUcmFuc2xhdGlvbigwLDEsMClcclxuICAgICAgICByZXR1cm4gIHRmMS5tdWx0aXBseSh0ZjIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmcm9tVGV4dHVyZVRvVVZTcGFjZSh2ZWN0b3JzOiBWZWN0b3IzQXJyYXkpIDogVmVjdG9yM0FycmF5IHtcclxuXHJcbiAgICAgICAgbGV0IFtzY2FsZVksIHNjYWxlWF0gPSB0aGlzLmdldExhbmRtYXJrc0ltYWdlU2l6ZSgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic2NhbGluZyBsYW5kbWFya3MgZG93biBieSBcIiArIHNjYWxlWCArIFwiLCBcIiArIHNjYWxlWSk7XHJcblxyXG4gICAgICAgIGxldCB0ZjEgPSBNYXRyaXg0Lm5ld1NjYWxlcigxL3NjYWxlWCwgLTEvc2NhbGVZLCAxKVxyXG4gICAgICAgIGxldCB0ZjIgPSBNYXRyaXg0Lm5ld1RyYW5zbGF0aW9uKDAsMSwwKVxyXG4gICAgICAgIGxldCB0ZiA9IHRmMS5tdWx0aXBseSh0ZjIpO1xyXG4gICAgICAgIHJldHVybiB2ZWN0b3JzLmNsb25lKCkudHJhbnNmb3JtKHRmKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRMYW5kbWFya3NJbWFnZVNpemUoKSA6IFtudW1iZXIsIG51bWJlcl0ge1xyXG5cclxuICAgICAgICAvLyBpbWFnZSBzaXplcyBhcyByZWdpc3RlcmVkIGluIHRoZSAnZmFjZWxhbmRtYXJrcycganNvbi5cclxuICAgICAgICBsZXQgZGF0YSA9IHRoaXMubGFuZG1hcmtEYXRhLkltYWdlU2l6ZTtcclxuICAgICAgICByZXR1cm4gW2RhdGFbMF0sIGRhdGFbMV1dO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/sfered/scan-data.ts\n");

/***/ }),

/***/ "./src/system/domwrappers.ts":
/*!***********************************!*\
  !*** ./src/system/domwrappers.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addDropFileEventListeners\": () => /* binding */ addDropFileEventListeners,\n/* harmony export */   \"loadTextFromFile\": () => /* binding */ loadTextFromFile,\n/* harmony export */   \"loadJSONFromFile\": () => /* binding */ loadJSONFromFile,\n/* harmony export */   \"loadImageFromFile\": () => /* binding */ loadImageFromFile\n/* harmony export */ });\n// domwrappers.ts\r\n// author : Jos Feenstra\r\n// purpuse : wrap certain DOM functionalities \r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nfunction addDropFileEventListeners(canvas, filesCallback) {\r\n    console.log(\"setting up drag events...\");\r\n    canvas.addEventListener('dragenter', function (ev) {\r\n        // ev.stopPropagation();\r\n        ev.preventDefault();\r\n        console.log(\"entering entering...\");\r\n        return true;\r\n    }, true);\r\n    // setup file upload\r\n    canvas.addEventListener('dragover', function (ev) {\r\n        //add hover class when drag over\r\n        // ev.stopPropagation();\r\n        ev.preventDefault();\r\n        console.log(\"over drag....\");\r\n        return true;\r\n    }, true);\r\n    canvas.addEventListener('dragleave', function (ev) {\r\n        //remove hover class when drag out\r\n        // ev.stopPropagation();\r\n        ev.preventDefault();\r\n        console.log(\"leaving drag....\");\r\n        return true;\r\n    }, true);\r\n    canvas.addEventListener('drop', function (ev) {\r\n        //prevent browser from open the file when drop off\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n        //retrieve uploaded files data\r\n        var files = ev.dataTransfer.files;\r\n        filesCallback(files);\r\n        return true;\r\n    }, true);\r\n}\r\nfunction loadImageTest(files) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let image = yield loadImageFromFile(files.item(0));\r\n    });\r\n}\r\nfunction loadTextFromFile(file) {\r\n    return new Promise((resolve, reject) => {\r\n        let reader = new FileReader();\r\n        reader.readAsText(file);\r\n        reader.onload = () => {\r\n            // console.log(reader.result);\r\n            resolve(reader.result);\r\n        };\r\n        reader.onerror = (error) => reject(error);\r\n    });\r\n}\r\nfunction loadJSONFromFile(file) {\r\n    return new Promise((resolve, reject) => {\r\n        let reader = new FileReader();\r\n        reader.readAsText(file);\r\n        reader.onload = () => {\r\n            // console.log(reader.result);\r\n            resolve(JSON.parse(reader.result));\r\n        };\r\n        reader.onerror = (error) => reject(error);\r\n    });\r\n}\r\nfunction loadImageFromFile(file) {\r\n    return new Promise((resolve, reject) => {\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => loadImageHelper1(reader).then(imageData => resolve(imageData), error => reject(error));\r\n    });\r\n}\r\nfunction loadImageHelper1(fileReader) {\r\n    return new Promise(function (resolve, reject) {\r\n        let img = document.createElement('img');\r\n        img.src = fileReader.result;\r\n        img.onload = () => resolve(loadImageHelper2(img));\r\n        img.onerror = () => reject(new Error(`Script load error for ${img}`));\r\n    });\r\n}\r\nfunction loadImageHelper2(image) {\r\n    var _a;\r\n    // turn it into image data by building a complete canvas and sampling it\r\n    let canvas = document.createElement('canvas');\r\n    ;\r\n    canvas.width = image.width;\r\n    canvas.height = image.height;\r\n    let ctx = canvas.getContext('2d');\r\n    ctx.drawImage(image, 0, 0);\r\n    let data = ctx.getImageData(0, 0, image.width, image.height);\r\n    (_a = canvas.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(canvas);\r\n    return data;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3N5c3RlbS9kb213cmFwcGVycy50cz9kMWY4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxpQkFBaUI7QUFDakIsd0JBQXdCO0FBQ3hCLDhDQUE4Qzs7Ozs7Ozs7OztBQUl2QyxTQUFTLHlCQUF5QixDQUFDLE1BQXlCLEVBQUUsYUFBeUM7SUFFMUcsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsVUFBUyxFQUFhO1FBRXZELHdCQUF3QjtRQUN4QixFQUFFLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztRQUNuQyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFVCxvQkFBb0I7SUFDcEIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxVQUFTLEVBQWE7UUFFdEQsZ0NBQWdDO1FBQ2hDLHdCQUF3QjtRQUN4QixFQUFFLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUM7UUFDNUIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRVQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxVQUFTLEVBQWE7UUFFdkQsa0NBQWtDO1FBQ2xDLHdCQUF3QjtRQUN4QixFQUFFLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztRQUMvQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFVCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLFVBQVMsRUFBYTtRQUVsRCxrREFBa0Q7UUFDbEQsRUFBRSxD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QUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMxRSxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFHRCxTQUFTLGdCQUFnQixDQUFDLEtBQXVCOztJQUU3Qyx3RUFBd0U7SUFDeEUsSUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUUsQ0FBQztJQUFBLENBQUM7SUFDaEQsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQzNCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUM3QixJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxDQUFDO0lBQ25DLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMzQixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0QsWUFBTSxDQUFDLFVBQVUsMENBQUUsV0FBVyxDQUFDLE1BQU0sRUFBRTtJQUN2QyxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDIiwiZmlsZSI6Ii4vc3JjL3N5c3RlbS9kb213cmFwcGVycy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRvbXdyYXBwZXJzLnRzXHJcbi8vIGF1dGhvciA6IEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwdXNlIDogd3JhcCBjZXJ0YWluIERPTSBmdW5jdGlvbmFsaXRpZXMgXHJcblxyXG4vLyBzZXQgYW55IHRvIGRvY3VtZW50IHRvIGFkZCBkcm9wIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGVudGlyZSBkb2N1bWVudCwgb3IgdXNlIGFueSBvdGhlciBkaXYuXHJcbnR5cGUgRnVuY0dlbmVyaWNSZXR1cm4gPSA8VD4oKSA9PiBUO1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkRHJvcEZpbGVFdmVudExpc3RlbmVycyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBmaWxlc0NhbGxiYWNrOiBDYWxsYmFja09uZVBhcmFtPEZpbGVMaXN0PikgXHJcbntcclxuICAgIGNvbnNvbGUubG9nKFwic2V0dGluZyB1cCBkcmFnIGV2ZW50cy4uLlwiKTtcclxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBmdW5jdGlvbihldjogRHJhZ0V2ZW50KSB7XHJcblxyXG4gICAgICAgIC8vIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJlbnRlcmluZyBlbnRlcmluZy4uLlwiKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gc2V0dXAgZmlsZSB1cGxvYWRcclxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2OiBEcmFnRXZlbnQpIHtcclxuXHJcbiAgICAgICAgLy9hZGQgaG92ZXIgY2xhc3Mgd2hlbiBkcmFnIG92ZXJcclxuICAgICAgICAvLyBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwib3ZlciBkcmFnLi4uLlwiKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgXHJcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZXY6IERyYWdFdmVudCkge1xyXG5cclxuICAgICAgICAvL3JlbW92ZSBob3ZlciBjbGFzcyB3aGVuIGRyYWcgb3V0XHJcbiAgICAgICAgLy8gZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImxlYXZpbmcgZHJhZy4uLi5cIilcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sIHRydWUpO1xyXG5cclxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZnVuY3Rpb24oZXY6IERyYWdFdmVudCkge1xyXG5cclxuICAgICAgICAvL3ByZXZlbnQgYnJvd3NlciBmcm9tIG9wZW4gdGhlIGZpbGUgd2hlbiBkcm9wIG9mZlxyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIC8vcmV0cmlldmUgdXBsb2FkZWQgZmlsZXMgZGF0YVxyXG4gICAgICAgIHZhciBmaWxlczogRmlsZUxpc3QgPSBldi5kYXRhVHJhbnNmZXIhLmZpbGVzO1xyXG5cclxuICAgICAgICBmaWxlc0NhbGxiYWNrKGZpbGVzKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sIHRydWUpO1xyXG59XHJcblxyXG5cclxuaW50ZXJmYWNlIENhbGxiYWNrT25lUGFyYW08VDEsIFQyID0gdm9pZD4ge1xyXG4gICAgKHBhcmFtMTogVDEpOiBUMjtcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRJbWFnZVRlc3QoZmlsZXM6IEZpbGVMaXN0KSB7XHJcblxyXG4gICAgbGV0IGltYWdlID0gYXdhaXQgbG9hZEltYWdlRnJvbUZpbGUoZmlsZXMuaXRlbSgwKSEpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9hZFRleHRGcm9tRmlsZShmaWxlOiBGaWxlKSA6IFByb21pc2U8c3RyaW5nPiB7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcclxuICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZWFkZXIucmVzdWx0KTtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0IGFzIHN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gKGVycm9yKSA9PiByZWplY3QoZXJyb3IpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2FkSlNPTkZyb21GaWxlKGZpbGU6IEZpbGUpIDogUHJvbWlzZTxKU09OPiB7XHJcbiAgICBcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0IGFzIHN0cmluZykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZWFkZXIub25lcnJvciA9IChlcnJvcikgPT4gcmVqZWN0KGVycm9yKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9hZEltYWdlRnJvbUZpbGUoZmlsZTogRmlsZSkgOiBQcm9taXNlPEltYWdlRGF0YT4ge1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IGxvYWRJbWFnZUhlbHBlcjEocmVhZGVyKS50aGVuKFxyXG4gICAgICAgICAgICBpbWFnZURhdGEgPT4gcmVzb2x2ZShpbWFnZURhdGEpLFxyXG4gICAgICAgICAgICBlcnJvciA9PiByZWplY3QoZXJyb3IpLFxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGxvYWRJbWFnZUhlbHBlcjEoZmlsZVJlYWRlcjogRmlsZVJlYWRlcikgOiBQcm9taXNlPEltYWdlRGF0YT4ge1xyXG4gICAgXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpIGFzIEhUTUxJbWFnZUVsZW1lbnRcclxuICAgICAgICBpbWcuc3JjID0gZmlsZVJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xyXG4gICAgXHJcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUobG9hZEltYWdlSGVscGVyMihpbWcpKTtcclxuICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYFNjcmlwdCBsb2FkIGVycm9yIGZvciAke2ltZ31gKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGxvYWRJbWFnZUhlbHBlcjIoaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQpIDogSW1hZ2VEYXRhXHJcbntcclxuICAgIC8vIHR1cm4gaXQgaW50byBpbWFnZSBkYXRhIGJ5IGJ1aWxkaW5nIGEgY29tcGxldGUgY2FudmFzIGFuZCBzYW1wbGluZyBpdFxyXG4gICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpITs7XHJcbiAgICBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XHJcbiAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG4gICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XHJcbiAgICBsZXQgZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7XHJcbiAgICBjYW52YXMucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQoY2FudmFzKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/system/domwrappers.ts\n");

/***/ }),

/***/ "./src/system/fpsCounter.ts":
/*!**********************************!*\
  !*** ./src/system/fpsCounter.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FpsCounter\": () => /* binding */ FpsCounter\n/* harmony export */ });\nclass FpsCounter {\r\n    constructor() {\r\n        this.fps = 0;\r\n        this.updateEveryXTicks = 100;\r\n        this.elapsed = 0;\r\n        this.frames = 0;\r\n    }\r\n    update(state) {\r\n        this.frames += 1;\r\n        this.elapsed += state.tick;\r\n        if (this.elapsed > this.updateEveryXTicks) {\r\n            this.setFps();\r\n            this.elapsed = 0;\r\n            this.frames = 0;\r\n        }\r\n    }\r\n    setFps() {\r\n        this.fps = Math.round(this.frames / this.elapsed * 1000);\r\n    }\r\n    getFps() {\r\n        return this.fps;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3N5c3RlbS9mcHNDb3VudGVyLnRzPzY3OGQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUVPLE1BQU0sVUFBVTtJQU9uQjtRQUxBLFFBQUcsR0FBRyxDQUFDLENBQUM7UUFDUixzQkFBaUIsR0FBRyxHQUFHLENBQUM7UUFDeEIsWUFBTyxHQUFHLENBQUMsQ0FBQztRQUNaLFdBQU0sR0FBRyxDQUFDLENBQUM7SUFJWCxDQUFDO0lBRUQsTUFBTSxDQUFDLEtBQWlCO1FBQ3BCLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQztRQUMzQixJQUFJLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1lBQ3ZDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNkLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO1lBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1NBQ25CO0lBQ0wsQ0FBQztJQUVELE1BQU07UUFDRixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFFRCxNQUFNO1FBQ0YsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ3BCLENBQUM7Q0FDSiIsImZpbGUiOiIuL3NyYy9zeXN0ZW0vZnBzQ291bnRlci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0U3RhdGUgfSBmcm9tIFwiLi9pbnB1dC1zdGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZwc0NvdW50ZXIge1xyXG5cclxuICAgIGZwcyA9IDA7XHJcbiAgICB1cGRhdGVFdmVyeVhUaWNrcyA9IDEwMDtcclxuICAgIGVsYXBzZWQgPSAwO1xyXG4gICAgZnJhbWVzID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoc3RhdGU6IElucHV0U3RhdGUpIHtcclxuICAgICAgICB0aGlzLmZyYW1lcyArPSAxO1xyXG4gICAgICAgIHRoaXMuZWxhcHNlZCArPSBzdGF0ZS50aWNrO1xyXG4gICAgICAgIGlmICh0aGlzLmVsYXBzZWQgPiB0aGlzLnVwZGF0ZUV2ZXJ5WFRpY2tzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RnBzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZWxhcHNlZCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVzID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9ICAgIFxyXG4gICAgXHJcbiAgICBzZXRGcHMoKSB7XHJcbiAgICAgICAgdGhpcy5mcHMgPSBNYXRoLnJvdW5kKHRoaXMuZnJhbWVzIC8gdGhpcy5lbGFwc2VkICogMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RnBzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZwczsgICBcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/system/fpsCounter.ts\n");

/***/ }),

/***/ "./src/system/input-state.ts":
/*!***********************************!*\
  !*** ./src/system/input-state.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"InputState\": () => /* binding */ InputState\n/* harmony export */ });\n/* harmony import */ var _math_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/vector */ \"./src/math/vector.ts\");\n// CanvasInputHandler.ts\r\n// author : Jos Feenstra\r\n// purpose : handle all input events.\r\n\r\nvar Key;\r\n(function (Key) {\r\n    Key[Key[\"A\"] = 0] = \"A\";\r\n    Key[Key[\"B\"] = 1] = \"B\";\r\n    Key[Key[\"C\"] = 2] = \"C\";\r\n    Key[Key[\"D\"] = 3] = \"D\";\r\n    Key[Key[\"E\"] = 4] = \"E\";\r\n    Key[Key[\"F\"] = 5] = \"F\";\r\n    Key[Key[\"G\"] = 6] = \"G\";\r\n    Key[Key[\"H\"] = 7] = \"H\";\r\n    Key[Key[\"I\"] = 8] = \"I\";\r\n    Key[Key[\"J\"] = 9] = \"J\";\r\n    Key[Key[\"K\"] = 10] = \"K\";\r\n    Key[Key[\"L\"] = 11] = \"L\";\r\n    Key[Key[\"M\"] = 12] = \"M\";\r\n    Key[Key[\"N\"] = 13] = \"N\";\r\n    Key[Key[\"O\"] = 14] = \"O\";\r\n    Key[Key[\"P\"] = 15] = \"P\";\r\n    Key[Key[\"Q\"] = 16] = \"Q\";\r\n    Key[Key[\"R\"] = 17] = \"R\";\r\n    Key[Key[\"S\"] = 18] = \"S\";\r\n    Key[Key[\"T\"] = 19] = \"T\";\r\n    Key[Key[\"U\"] = 20] = \"U\";\r\n    Key[Key[\"V\"] = 21] = \"V\";\r\n    Key[Key[\"W\"] = 22] = \"W\";\r\n    Key[Key[\"X\"] = 23] = \"X\";\r\n    Key[Key[\"Y\"] = 24] = \"Y\";\r\n    Key[Key[\"Z\"] = 25] = \"Z\";\r\n    Key[Key[\"Up\"] = 26] = \"Up\";\r\n    Key[Key[\"Down\"] = 27] = \"Down\";\r\n    Key[Key[\"Left\"] = 28] = \"Left\";\r\n    Key[Key[\"Right\"] = 29] = \"Right\";\r\n    Key[Key[\"Space\"] = 30] = \"Space\";\r\n    Key[Key[\"Control\"] = 31] = \"Control\";\r\n    Key[Key[\"Alt\"] = 32] = \"Alt\";\r\n    Key[Key[\"Shift\"] = 33] = \"Shift\";\r\n    Key[Key[\"Enter\"] = 34] = \"Enter\";\r\n    Key[Key[\"Esc\"] = 35] = \"Esc\";\r\n    Key[Key[\"N1\"] = 36] = \"N1\";\r\n    Key[Key[\"N2\"] = 37] = \"N2\";\r\n    Key[Key[\"N3\"] = 38] = \"N3\";\r\n    Key[Key[\"N4\"] = 39] = \"N4\";\r\n    Key[Key[\"N5\"] = 40] = \"N5\";\r\n    Key[Key[\"N6\"] = 41] = \"N6\";\r\n    Key[Key[\"N7\"] = 42] = \"N7\";\r\n    Key[Key[\"N8\"] = 43] = \"N8\";\r\n    Key[Key[\"N9\"] = 44] = \"N9\";\r\n    Key[Key[\"N0\"] = 45] = \"N0\";\r\n    Key[Key[\"Plus\"] = 46] = \"Plus\";\r\n    Key[Key[\"Minus\"] = 47] = \"Minus\";\r\n    Key[Key[\"Backspace\"] = 48] = \"Backspace\";\r\n})(Key || (Key = {}));\r\nfunction toMapping(key) {\r\n    switch (key) {\r\n        case (Key.A): return 1;\r\n        case (Key.B): return 2;\r\n        case (Key.C): return 3;\r\n        case (Key.D): return 4;\r\n        case (Key.E): return 5;\r\n        case (Key.F): return 6;\r\n        default: return 0;\r\n    }\r\n}\r\nclass InputState {\r\n    constructor(canvas) {\r\n        this.mousePos = _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2.zero();\r\n        this.mouseDelta = _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2.zero();\r\n        this.mouseLeftDown = false;\r\n        this.mouseLeftPressed = false;\r\n        this.mouseLeftPrev = false;\r\n        this.mouseRightDown = false;\r\n        this.mouseRightPressed = false;\r\n        this.mouseRightPrev = false;\r\n        this.mouseMiddleDown = false;\r\n        this.mouseMiddlePressed = false;\r\n        this.mouseMiddlePrev = false;\r\n        this.keysDown = {};\r\n        this.keysPressed = [];\r\n        this.scrollValue = 0;\r\n        // link\r\n        this.canvas = canvas;\r\n        // time\r\n        this.tick = 0;\r\n        this.oldTime = Date.now();\r\n        this.newTime = this.oldTime;\r\n        this.startTime = Date.now();\r\n        this.minimumTick = 1000 / 144;\r\n        // mouse\r\n        canvas.addEventListener(\"mousemove\", this.setMousePos.bind(this));\r\n        canvas.addEventListener(\"mousedown\", this.setMouseDown.bind(this));\r\n        canvas.addEventListener(\"mouseup\", this.setMouseUp.bind(this));\r\n        canvas.addEventListener(\"contextmenu\", (e) => { e.preventDefault(); e.stopPropagation(); });\r\n        canvas.addEventListener(\"mousemove\", this.setMousePos.bind(this));\r\n        canvas.addEventListener(\"wheel\", this.setMouseScroll.bind(this));\r\n        canvas.addEventListener(\"touchmove\", this.setTouch.bind(this));\r\n        canvas.addEventListener(\"touchstart\", this.setTouch.bind(this));\r\n        canvas.addEventListener(\"touchend\", this.setTouchUp.bind(this));\r\n        for (let i = 0; i < 223; i++)\r\n            this.keysDown[i] = false;\r\n        // keyboard\r\n        canvas.addEventListener(\"keydown\", this.onKeyDown.bind(this));\r\n        // canvas.addEventListener(\"keypressed\", this.onKeyPressed.bind(this));\r\n        canvas.addEventListener(\"keyup\", this.onKeyUp.bind(this));\r\n        // final   \r\n        canvas.focus();\r\n    }\r\n    preUpdate() {\r\n        // this must be called every tick within whatever context this is used\r\n        // update time\r\n        this.newTime = Date.now();\r\n        this.tick = (this.newTime - this.oldTime);\r\n        this.oldTime = this.newTime;\r\n        // update mouse\r\n        this.mouseLeftPressed = (this.mouseLeftPrev != this.mouseLeftDown) && this.mouseLeftDown;\r\n        this.mouseRightPressed = (this.mouseRightPrev != this.mouseRightDown) && this.mouseRightDown;\r\n        this.mouseMiddlePressed = (this.mouseMiddlePrev != this.mouseMiddleDown) && this.mouseMiddleDown;\r\n        this.mouseLeftPrev = this.mouseLeftDown;\r\n        this.mouseRightPrev = this.mouseRightDown;\r\n        this.mouseMiddlePrev = this.mouseMiddleDown;\r\n    }\r\n    postUpdate() {\r\n        // this also must be called for keyIsPressed to work\r\n        // refresh keypresses\r\n        this.keysPressed = [];\r\n    }\r\n    IsKeyDown(key) {\r\n        return this.keysDown[key];\r\n    }\r\n    IsKeyPressed(key) {\r\n        return this.keysPressed.includes(key);\r\n    }\r\n    onKeyDown(e) {\r\n        if (this.keysDown[e.key] == true)\r\n            return;\r\n        console.log(e.key);\r\n        this.keysDown[e.key.toLowerCase()] = true;\r\n        this.keysPressed.push(e.key);\r\n    }\r\n    onKeyUp(e) {\r\n        this.keysDown[e.key.toLowerCase()] = false;\r\n    }\r\n    onKeyPressed(e) {\r\n        // NOTE: i made a different system to handle this, see onKeyDown\r\n    }\r\n    setTouch(e) {\r\n        e.preventDefault();\r\n        this.mousePos = new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(e.touches[0].clientX, e.touches[0].clientY);\r\n        this.mouseLeftDown = true;\r\n    }\r\n    setTouchUp(e) {\r\n        e.preventDefault();\r\n        this.mouseLeftDown = false;\r\n    }\r\n    setMouseScroll(e) {\r\n        // console.log(\"we be scrollin' now...\")\r\n        // normalize all scrolling behaviour\r\n        let value = 0.1;\r\n        if (e.deltaY < 0)\r\n            value = -0.1;\r\n        // we dont want negative scroll values...\r\n        this.scrollValue = Math.max(0, this.scrollValue + value);\r\n    }\r\n    setMousePos(e) {\r\n        // this is a bit messy, BUT, multiply by camera parameters\r\n        this.mousePos = new _math_vector__WEBPACK_IMPORTED_MODULE_0__.Vector2(e.clientX, e.clientY);\r\n        ;\r\n    }\r\n    setMouseUp(e) {\r\n        let code = e.buttons;\r\n        if (code < 4) {\r\n            this.mouseMiddleDown = false;\r\n        }\r\n        if (code < 2) {\r\n            this.mouseRightDown = false;\r\n        }\r\n        if (code < 1) {\r\n            this.mouseLeftDown = false;\r\n        }\r\n    }\r\n    setMouseDown(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        let code = e.buttons;\r\n        if (code >= 4) {\r\n            code -= 4;\r\n            this.mouseMiddleDown = true;\r\n        }\r\n        if (code >= 2) {\r\n            code -= 2;\r\n            this.mouseRightDown = true;\r\n        }\r\n        if (code >= 1) {\r\n            code -= 1;\r\n            this.mouseLeftDown = true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3N5c3RlbS9pbnB1dC1zdGF0ZS50cz8yMjI4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsd0JBQXdCO0FBQ3hCLHdCQUF3QjtBQUN4QixxQ0FBcUM7QUFFSTtBQUV6QyxJQUFLLEdBSUo7QUFKRCxXQUFLLEdBQUc7SUFDSix1QkFBQztJQUFFLHVCQUFDO0lBQUUsdUJBQUM7SUFBRSx1QkFBQztJQUFFLHVCQUFDO0lBQUUsdUJBQUM7SUFBRyx1QkFBQztJQUFFLHVCQUFDO0lBQUUsdUJBQUM7SUFBRSx1QkFBQztJQUFFLHdCQUFDO0lBQUUsd0JBQUM7SUFBRSx3QkFBQztJQUFFLHdCQUFDO0lBQUUsd0JBQUM7SUFBRSx3QkFBQztJQUFFLHdCQUFDO0lBQUUsd0JBQUM7SUFBRSx3QkFBQztJQUFFLHdCQUFDO0lBQUUsd0JBQUM7SUFBRSx3QkFBQztJQUFFLHdCQUFDO0lBQUUsd0JBQUM7SUFBRSx3QkFBQztJQUFFLHdCQUFDO0lBQzdFLDBCQUFFO0lBQUUsOEJBQUk7SUFBRSw4QkFBSTtJQUFFLGdDQUFLO0lBQUUsZ0NBQUs7SUFBRSxvQ0FBTztJQUFFLDRCQUFHO0lBQUUsZ0NBQUs7SUFBRSxnQ0FBSztJQUFFLDRCQUFHO0lBQzdELDBCQUFFO0lBQUUsMEJBQUU7SUFBRSwwQkFBRTtJQUFFLDBCQUFFO0lBQUcsMEJBQUU7SUFBRywwQkFBRTtJQUFFLDBCQUFFO0lBQUUsMEJBQUU7SUFBRywwQkFBRTtJQUFFLDBCQUFFO0lBQUUsOEJBQUk7SUFBRSxnQ0FBSztJQUFFLHdDQUFTO0FBQ3JFLENBQUMsRUFKSSxHQUFHLEtBQUgsR0FBRyxRQUlQO0FBRUQsU0FBUyxTQUFTLENBQUMsR0FBUTtJQUN2QixRQUFPLEdBQUcsRUFBRTtRQUNSLEtBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0QixLQUFJLENBQUMsR0FBRyxDQUFDLENB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Y0FBYyxHQUFHLEtBQUssQ0FBQztTQUMvQjtRQUNELElBQUksSUFBSSxHQUFHLENBQUMsRUFDWjtZQUNJLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1NBQzlCO0lBQ0wsQ0FBQztJQUdPLFlBQVksQ0FBQyxDQUFhO1FBRTlCLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUNuQixDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDcEIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQztRQUNyQixJQUFJLElBQUksSUFBSSxDQUFDLEVBQ2I7WUFDSSxJQUFJLElBQUksQ0FBQyxDQUFDO1lBQ1YsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7U0FDL0I7UUFDRCxJQUFJLElBQUksSUFBSSxDQUFDLEVBQ2I7WUFDSSxJQUFJLElBQUksQ0FBQyxDQUFDO1lBQ1YsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7U0FDOUI7UUFDRCxJQUFJLElBQUksSUFBSSxDQUFDLEVBQ2I7WUFDSSxJQUFJLElBQUksQ0FBQyxDQUFDO1lBQ1YsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7U0FDN0I7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0NBQ0oiLCJmaWxlIjoiLi9zcmMvc3lzdGVtL2lucHV0LXN0YXRlLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ2FudmFzSW5wdXRIYW5kbGVyLnRzXHJcbi8vIGF1dGhvciA6IEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlIDogaGFuZGxlIGFsbCBpbnB1dCBldmVudHMuXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcblxyXG5lbnVtIEtleSB7XHJcbiAgICBBLCBCLCBDLCBELCBFLCBGLCAgRywgSCwgSSwgSiwgSywgTCwgTSwgTiwgTywgUCwgUSwgUiwgUywgVCwgVSwgViwgVywgWCwgWSwgWixcclxuICAgIFVwLCBEb3duLCBMZWZ0LCBSaWdodCwgU3BhY2UsIENvbnRyb2wsIEFsdCwgU2hpZnQsIEVudGVyLCBFc2MsXHJcbiAgICBOMSwgTjIsIE4zLCBONCwgIE41LCAgTjYsIE43LCBOOCwgIE45LCBOMCwgUGx1cywgTWludXMsIEJhY2tzcGFjZVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b01hcHBpbmcoa2V5OiBLZXkpIDogbnVtYmVyIHtcclxuICAgIHN3aXRjaChrZXkpIHtcclxuICAgICAgICBjYXNlKEtleS5BKTogcmV0dXJuIDE7XHJcbiAgICAgICAgY2FzZShLZXkuQik6IHJldHVybiAyO1xyXG4gICAgICAgIGNhc2UoS2V5LkMpOiByZXR1cm4gMztcclxuICAgICAgICBjYXNlKEtleS5EKTogcmV0dXJuIDQ7XHJcbiAgICAgICAgY2FzZShLZXkuRSk6IHJldHVybiA1O1xyXG4gICAgICAgIGNhc2UoS2V5LkYpOiByZXR1cm4gNjtcclxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJS2V5cyBcclxue1xyXG4gICAgW2tleTogc3RyaW5nXSA6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0U3RhdGUge1xyXG5cclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcblxyXG4gICAgdGljazogbnVtYmVyO1xyXG4gICAgb2xkVGltZTogbnVtYmVyO1xyXG4gICAgbmV3VGltZTogbnVtYmVyO1xyXG4gICAgc3RhcnRUaW1lOiBudW1iZXI7XHJcbiAgICBtaW5pbXVtVGljazogbnVtYmVyO1xyXG5cclxuICAgIG1vdXNlUG9zOiBWZWN0b3IyID0gVmVjdG9yMi56ZXJvKCk7XHJcbiAgICBtb3VzZURlbHRhOiBWZWN0b3IyID0gVmVjdG9yMi56ZXJvKCk7XHJcbiAgICBtb3VzZUxlZnREb3duID0gZmFsc2U7XHJcbiAgICBtb3VzZUxlZnRQcmVzc2VkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIG1vdXNlTGVmdFByZXYgPSBmYWxzZTtcclxuXHJcbiAgICBtb3VzZVJpZ2h0RG93biA9IGZhbHNlO1xyXG4gICAgbW91c2VSaWdodFByZXNzZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgbW91c2VSaWdodFByZXYgPSBmYWxzZTtcclxuXHJcbiAgICBtb3VzZU1pZGRsZURvd24gPSBmYWxzZTtcclxuICAgIG1vdXNlTWlkZGxlUHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBtb3VzZU1pZGRsZVByZXYgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGtleXNEb3duOiBJS2V5cyA9IHt9O1xyXG4gICAgcHJpdmF0ZSBrZXlzUHJlc3NlZDogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBzY3JvbGxWYWx1ZSA9IDA7XHJcblxyXG4gICAgLy8gZGVsZWdhdGUgZnVuY3Rpb25zXHJcbiAgICBvbk1vdXNlV2hlZWxTY3JvbGw/OiBGdW5jdGlvbjtcclxuICAgIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgLy8gbGlua1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG5cclxuICAgICAgICAvLyB0aW1lXHJcbiAgICAgICAgdGhpcy50aWNrID0gMDtcclxuICAgICAgICB0aGlzLm9sZFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMubmV3VGltZSA9IHRoaXMub2xkVGltZTtcclxuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5taW5pbXVtVGljayA9IDEwMDAgLyAxNDQ7XHJcblxyXG4gICAgICAgIC8vIG1vdXNlXHJcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5zZXRNb3VzZVBvcy5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLnNldE1vdXNlRG93bi5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5zZXRNb3VzZVVwLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKGUpID0+IHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpOyB9KTtcclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLnNldE1vdXNlUG9zLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5zZXRNb3VzZVNjcm9sbC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLnNldFRvdWNoLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLnNldFRvdWNoLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5zZXRUb3VjaFVwLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAyMjMgO2krKylcclxuICAgICAgICAgICAgdGhpcy5rZXlzRG93bltpXSA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGtleWJvYXJkXHJcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMub25LZXlEb3duLmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8vIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NlZFwiLCB0aGlzLm9uS2V5UHJlc3NlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMub25LZXlVcC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gZmluYWwgICBcclxuICAgICAgICBjYW52YXMuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHByZVVwZGF0ZSgpIHtcclxuICAgICAgICAvLyB0aGlzIG11c3QgYmUgY2FsbGVkIGV2ZXJ5IHRpY2sgd2l0aGluIHdoYXRldmVyIGNvbnRleHQgdGhpcyBpcyB1c2VkXHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSB0aW1lXHJcbiAgICAgICAgdGhpcy5uZXdUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB0aGlzLnRpY2sgPSAodGhpcy5uZXdUaW1lIC0gdGhpcy5vbGRUaW1lKTtcclxuICAgICAgICB0aGlzLm9sZFRpbWUgPSB0aGlzLm5ld1RpbWU7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBtb3VzZVxyXG4gICAgICAgIHRoaXMubW91c2VMZWZ0UHJlc3NlZCA9ICAodGhpcy5tb3VzZUxlZnRQcmV2ICE9IHRoaXMubW91c2VMZWZ0RG93bikgJiYgdGhpcy5tb3VzZUxlZnREb3duO1xyXG4gICAgICAgIHRoaXMubW91c2VSaWdodFByZXNzZWQgPSAgKHRoaXMubW91c2VSaWdodFByZXYgIT0gdGhpcy5tb3VzZVJpZ2h0RG93bikgJiYgdGhpcy5tb3VzZVJpZ2h0RG93bjtcclxuICAgICAgICB0aGlzLm1vdXNlTWlkZGxlUHJlc3NlZCA9ICAodGhpcy5tb3VzZU1pZGRsZVByZXYgIT0gdGhpcy5tb3VzZU1pZGRsZURvd24pICYmIHRoaXMubW91c2VNaWRkbGVEb3duO1xyXG5cclxuICAgICAgICB0aGlzLm1vdXNlTGVmdFByZXYgPSB0aGlzLm1vdXNlTGVmdERvd25cclxuICAgICAgICB0aGlzLm1vdXNlUmlnaHRQcmV2ID0gdGhpcy5tb3VzZVJpZ2h0RG93blxyXG4gICAgICAgIHRoaXMubW91c2VNaWRkbGVQcmV2ID0gdGhpcy5tb3VzZU1pZGRsZURvd25cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHBvc3RVcGRhdGUoKSB7XHJcblxyXG4gICAgICAgIC8vIHRoaXMgYWxzbyBtdXN0IGJlIGNhbGxlZCBmb3Iga2V5SXNQcmVzc2VkIHRvIHdvcmtcclxuXHJcbiAgICAgICAgLy8gcmVmcmVzaCBrZXlwcmVzc2VzXHJcbiAgICAgICAgdGhpcy5rZXlzUHJlc3NlZCA9IFtdO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgSXNLZXlEb3duKGtleTogc3RyaW5nKSA6IGJvb2xlYW5cclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5rZXlzRG93bltrZXldOyAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBJc0tleVByZXNzZWQoa2V5OiBzdHJpbmcpIDogYm9vbGVhblxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmtleXNQcmVzc2VkLmluY2x1ZGVzKGtleSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBvbktleURvd24oZTogS2V5Ym9hcmRFdmVudClcclxuICAgIHsgXHJcbiAgICAgICAgaWYgKHRoaXMua2V5c0Rvd25bZS5rZXldID09IHRydWUpIHJldHVybjtcclxuICAgICAgICBjb25zb2xlLmxvZyhlLmtleSk7XHJcbiAgICAgICAgdGhpcy5rZXlzRG93bltlLmtleS50b0xvd2VyQ2FzZSgpXSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5rZXlzUHJlc3NlZC5wdXNoKGUua2V5KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIG9uS2V5VXAoZTogS2V5Ym9hcmRFdmVudClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmtleXNEb3duW2Uua2V5LnRvTG93ZXJDYXNlKCldID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBvbktleVByZXNzZWQoZTogS2V5Ym9hcmRFdmVudClcclxuICAgIHtcclxuICAgICAgICAvLyBOT1RFOiBpIG1hZGUgYSBkaWZmZXJlbnQgc3lzdGVtIHRvIGhhbmRsZSB0aGlzLCBzZWUgb25LZXlEb3duXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc2V0VG91Y2goZTogVG91Y2hFdmVudCkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VzZVBvcyA9IG5ldyBWZWN0b3IyKGUudG91Y2hlc1swXS5jbGllbnRYLCBlLnRvdWNoZXNbMF0uY2xpZW50WSk7XHJcbiAgICAgICAgdGhpcy5tb3VzZUxlZnREb3duID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzZXRUb3VjaFVwKGU6IFRvdWNoRXZlbnQpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5tb3VzZUxlZnREb3duID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc2V0TW91c2VTY3JvbGwoZTogV2hlZWxFdmVudCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwid2UgYmUgc2Nyb2xsaW4nIG5vdy4uLlwiKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBhbGwgc2Nyb2xsaW5nIGJlaGF2aW91clxyXG4gICAgICAgIGxldCB2YWx1ZSA9IDAuMTtcclxuICAgICAgICBpZiAoZS5kZWx0YVkgPCAwKSBcclxuICAgICAgICAgICAgdmFsdWUgPSAtMC4xO1xyXG5cclxuICAgICAgICAvLyB3ZSBkb250IHdhbnQgbmVnYXRpdmUgc2Nyb2xsIHZhbHVlcy4uLlxyXG4gICAgICAgIHRoaXMuc2Nyb2xsVmFsdWUgPSBNYXRoLm1heCgwLCB0aGlzLnNjcm9sbFZhbHVlICsgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHNldE1vdXNlUG9zKGU6IE1vdXNlRXZlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgLy8gdGhpcyBpcyBhIGJpdCBtZXNzeSwgQlVULCBtdWx0aXBseSBieSBjYW1lcmEgcGFyYW1ldGVyc1xyXG4gICAgICAgIHRoaXMubW91c2VQb3MgPSBuZXcgVmVjdG9yMihlLmNsaWVudFgsIGUuY2xpZW50WSk7O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHNldE1vdXNlVXAoZTogTW91c2VFdmVudClcclxuICAgIHtcclxuICAgICAgICBsZXQgY29kZSA9IGUuYnV0dG9ucztcclxuICAgICAgICBpZiAoY29kZSA8IDQpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZU1pZGRsZURvd24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvZGUgPCAyKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VSaWdodERvd24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvZGUgPCAxKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VMZWZ0RG93biA9IGZhbHNlO1xyXG4gICAgICAgIH0gXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc2V0TW91c2VEb3duKGU6IE1vdXNlRXZlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgbGV0IGNvZGUgPSBlLmJ1dHRvbnM7XHJcbiAgICAgICAgaWYgKGNvZGUgPj0gNCkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb2RlIC09IDQ7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VNaWRkbGVEb3duID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvZGUgPj0gMikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb2RlIC09IDI7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VSaWdodERvd24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29kZSA+PSAxKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvZGUgLT0gMTtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZUxlZnREb3duID0gdHJ1ZTtcclxuICAgICAgICB9ICBcclxuICAgICAgICByZXR1cm4gZmFsc2U7ICAgICBcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/system/input-state.ts\n");

/***/ }),

/***/ "./src/system/ui.ts":
/*!**************************!*\
  !*** ./src/system/ui.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"UI\": () => /* binding */ UI,\n/* harmony export */   \"SliderParameter\": () => /* binding */ SliderParameter\n/* harmony export */ });\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/math */ \"./src/math/math.ts\");\n// name:    ui.js\r\n// author:  Jos Feenstra\r\n// purpose: lets create the UI using html & dom api, because why the hell not\r\n\r\nclass UI {\r\n    constructor(frame) {\r\n        this.globalContext = frame;\r\n        this.currentContext = frame;\r\n    }\r\n    addContext(appName) {\r\n        this.currentContext = this.globalContext;\r\n        let appDiv = this.addDiv(appName);\r\n        this.currentContext = appDiv;\r\n    }\r\n    setContext(appName) {\r\n        this.globalContext.getElementsByClassName(appName);\r\n    }\r\n    removeContext(appName) {\r\n        this.setContext(appName);\r\n        let count = this.currentContext.childElementCount;\r\n        for (let i = count - 1; i >= 0; i -= 1) {\r\n            this.currentContext.removeChild(this.currentContext.children.item(i));\r\n        }\r\n        let temp = this.currentContext;\r\n        this.currentContext = this.globalContext;\r\n        this.currentContext.removeChild(temp);\r\n    }\r\n    addDiv(classname, items = []) {\r\n        let div = this.addElement(\"div\", classname);\r\n        items.forEach(item => {\r\n            div.appendChild(item);\r\n        });\r\n        return div;\r\n    }\r\n    addBooleanSlider(param, onInput = () => { }) {\r\n        let checkbox = this.addElement(\"input\", \"checkbox-slider-control\");\r\n        checkbox.type = \"checkbox\";\r\n        checkbox.addEventListener('change', () => {\r\n            let state = checkbox.checked;\r\n            param.set(state ? 1 : 0);\r\n            onInput(checkbox.valueAsNumber);\r\n            text1.innerText = param.name;\r\n        });\r\n        checkbox.checked = param.get() == 1;\r\n        let text1 = this.addElement(\"p\", \"slider-text\");\r\n        text1.innerText = param.name;\r\n        this.addDiv(\"slider\", [\r\n            text1,\r\n            checkbox,\r\n        ]);\r\n        return checkbox;\r\n    }\r\n    addSlider(param, onInput = () => { }) {\r\n        let slider = this.addRangeInput(param, onInput);\r\n        let text1 = this.addElement(\"p\", \"slider-text\");\r\n        text1.innerText = param.name;\r\n        let text2 = this.addElement(\"p\", \"slider-value\");\r\n        text2.innerText = slider.value;\r\n        this.addDiv(\"slider\", [\r\n            text1,\r\n            text2,\r\n            slider,\r\n        ]);\r\n        slider.oninput = () => {\r\n            param.set(slider.valueAsNumber);\r\n            onInput(slider.valueAsNumber);\r\n            text1.innerText = param.name;\r\n            text2.innerText = slider.value;\r\n        };\r\n        return slider;\r\n    }\r\n    addRangeInput(param, onInput = () => { }) {\r\n        // a slider looks like this : <input type=\"range\" min=\"1\" max=\"100\" step=\"1\" value=\"50\">\r\n        let slider = this.addElement(\"input\", \"slider-control\");\r\n        slider.type = \"range\";\r\n        slider.min = param.min.toString();\r\n        slider.max = param.max.toString();\r\n        slider.valueAsNumber = param.state;\r\n        slider.step = param.step.toString();\r\n        return slider;\r\n    }\r\n    addText() {\r\n        this.addElement(\"\");\r\n    }\r\n    addEnum(keys, values, onchange) {\r\n        // <select>\r\n        //  <option>Cappuccino</option>\r\n        //  <option>Mocha</option>\r\n        // </select>\r\n        if (keys.length != values.length) {\r\n            console.error(\"need same amount of keys & values\");\r\n        }\r\n        let count = keys.length;\r\n        let e = this.addElement(\"select\", \"enum-selector\");\r\n        for (let i = 0; i < count; i++) {\r\n            let o = this.addElement(\"option\", \"enum-item\");\r\n            o.innerText = keys[i];\r\n            e.appendChild(o);\r\n        }\r\n        console.log(e);\r\n        e.addEventListener(\"change\", (e) => {\r\n            let target = e.target;\r\n            let i = keys.indexOf(target.value);\r\n            onchange(values[i]);\r\n        });\r\n        return e;\r\n    }\r\n    addElement(element, className = \"\") {\r\n        let el = document.createElement(element);\r\n        el.className = className;\r\n        this.currentContext.appendChild(el);\r\n        return el;\r\n    }\r\n}\r\n// a slider parameter\r\nclass SliderParameter {\r\n    constructor(name, state, min = -Infinity, max = Infinity, step = 0.1) {\r\n        this.name = name;\r\n        this.state = state;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n    }\r\n    get() {\r\n        return this.state;\r\n    }\r\n    set(state) {\r\n        // TODO ROUND TO NEAREST STEP\r\n        this.state = _math_math__WEBPACK_IMPORTED_MODULE_0__.GMath.clamp(state, this.min, this.max);\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZmVyZWQtbGFuZG1hcmtzLy4vc3JjL3N5c3RlbS91aS50cz8wNGI4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGlCQUFpQjtBQUNqQix3QkFBd0I7QUFDeEIsNkVBQTZFO0FBRXhDO0FBRTlCLE1BQU0sRUFBRTtJQU1YLFlBQVksS0FBcUI7UUFDN0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDM0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUdELFVBQVUsQ0FBQyxPQUFlO1FBRXRCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUN6QyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO0lBQ2pDLENBQUM7SUFHRCxVQUFVLENBQUMsT0FBZTtRQUN0QixJQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFHRCxhQUFhLENBQUMsT0FBZTtRQUN6QixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3pCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsaUJBQWlCLENBQUM7UUFDbEQsS0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxFQUFHLENBQUMsSUFBRyxDQUFDLEVBQUcsQ0FBQyxJQUFFLENBQUMsRUFBRTtZQUNuQyxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFFLENBQUMsQ0FBQztTQUMxRTtRQUVELElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsYUFB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QUFhO1FBQ2IsNkJBQTZCO1FBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsbURBQVcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDeEQsQ0FBQztDQUNKIiwiZmlsZSI6Ii4vc3JjL3N5c3RlbS91aS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIG5hbWU6ICAgIHVpLmpzXHJcbi8vIGF1dGhvcjogIEpvcyBGZWVuc3RyYVxyXG4vLyBwdXJwb3NlOiBsZXRzIGNyZWF0ZSB0aGUgVUkgdXNpbmcgaHRtbCAmIGRvbSBhcGksIGJlY2F1c2Ugd2h5IHRoZSBoZWxsIG5vdFxyXG5cclxuaW1wb3J0IHsgR01hdGggfSBmcm9tIFwiLi4vbWF0aC9tYXRoXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVUkge1xyXG5cclxuICAgIFxyXG4gICAgcmVhZG9ubHkgZ2xvYmFsQ29udGV4dDogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBjdXJyZW50Q29udGV4dCE6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZyYW1lOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsQ29udGV4dCA9IGZyYW1lO1xyXG4gICAgICAgIHRoaXMuY3VycmVudENvbnRleHQgPSBmcmFtZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYWRkQ29udGV4dChhcHBOYW1lOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q29udGV4dCA9IHRoaXMuZ2xvYmFsQ29udGV4dDtcclxuICAgICAgICBsZXQgYXBwRGl2ID0gdGhpcy5hZGREaXYoYXBwTmFtZSk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q29udGV4dCA9IGFwcERpdjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0Q29udGV4dChhcHBOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmdsb2JhbENvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhcHBOYW1lKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmVtb3ZlQ29udGV4dChhcHBOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnNldENvbnRleHQoYXBwTmFtZSk7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy5jdXJyZW50Q29udGV4dC5jaGlsZEVsZW1lbnRDb3VudDtcclxuICAgICAgICBmb3IgKGxldCBpID0gY291bnQgLSAxIDsgaSA+PTAgOyBpLT0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbnRleHQucmVtb3ZlQ2hpbGQodGhpcy5jdXJyZW50Q29udGV4dC5jaGlsZHJlbi5pdGVtKGkpISk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGVtcCA9IHRoaXMuY3VycmVudENvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q29udGV4dCA9IHRoaXMuZ2xvYmFsQ29udGV4dDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRDb250ZXh0LnJlbW92ZUNoaWxkKHRlbXApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhZGREaXYoY2xhc3NuYW1lOiBzdHJpbmcsIGl0ZW1zOiBIVE1MRWxlbWVudFtdPVtdKSA6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgICBsZXQgZGl2ID0gdGhpcy5hZGRFbGVtZW50KFwiZGl2XCIsIGNsYXNzbmFtZSkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFkZEJvb2xlYW5TbGlkZXIocGFyYW06IFNsaWRlclBhcmFtZXRlciwgb25JbnB1dDogKHY6IG51bWJlcikgPT4gdm9pZCA9ICgpID0+IHt9KSB7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjaGVja2JveCA9IHRoaXMuYWRkRWxlbWVudChcImlucHV0XCIsIFwiY2hlY2tib3gtc2xpZGVyLWNvbnRyb2xcIikgYXMgSFRNTElucHV0RWxlbWVudDsgICAgXHJcbiAgICAgICAgY2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIjtcclxuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgc3RhdGUgPSBjaGVja2JveC5jaGVja2VkO1xyXG4gICAgICAgICAgICBwYXJhbS5zZXQoc3RhdGU/IDEgOiAwKTtcclxuXHJcbiAgICAgICAgICAgIG9uSW5wdXQoY2hlY2tib3gudmFsdWVBc051bWJlcik7XHJcbiAgICAgICAgICAgIHRleHQxLmlubmVyVGV4dCA9IHBhcmFtLm5hbWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHBhcmFtLmdldCgpID09IDE7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0MSA9IHRoaXMuYWRkRWxlbWVudChcInBcIiwgXCJzbGlkZXItdGV4dFwiKTtcclxuICAgICAgICB0ZXh0MS5pbm5lclRleHQgPSBwYXJhbS5uYW1lO1xyXG5cclxuICAgICAgICB0aGlzLmFkZERpdihcInNsaWRlclwiLCBbXHJcbiAgICAgICAgICAgIHRleHQxLFxyXG4gICAgICAgICAgICBjaGVja2JveCxcclxuICAgICAgICBdKTtcclxuXHJcblxyXG5cclxuICAgICAgICByZXR1cm4gY2hlY2tib3g7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFkZFNsaWRlcihwYXJhbTogU2xpZGVyUGFyYW1ldGVyLCBvbklucHV0OiAodjogbnVtYmVyKSA9PiB2b2lkID0gKCkgPT4ge30pIHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgc2xpZGVyID0gdGhpcy5hZGRSYW5nZUlucHV0KHBhcmFtLCBvbklucHV0KTtcclxuICAgICAgICBsZXQgdGV4dDEgPSB0aGlzLmFkZEVsZW1lbnQoXCJwXCIsIFwic2xpZGVyLXRleHRcIik7XHJcbiAgICAgICAgdGV4dDEuaW5uZXJUZXh0ID0gcGFyYW0ubmFtZTtcclxuXHJcbiAgICAgICAgbGV0IHRleHQyID0gdGhpcy5hZGRFbGVtZW50KFwicFwiLCBcInNsaWRlci12YWx1ZVwiKTtcclxuICAgICAgICB0ZXh0Mi5pbm5lclRleHQgPSBzbGlkZXIudmFsdWU7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkRGl2KFwic2xpZGVyXCIsIFtcclxuICAgICAgICAgICAgdGV4dDEsXHJcbiAgICAgICAgICAgIHRleHQyLFxyXG4gICAgICAgICAgICBzbGlkZXIsXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHNsaWRlci5vbmlucHV0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBwYXJhbS5zZXQoc2xpZGVyLnZhbHVlQXNOdW1iZXIpO1xyXG4gICAgICAgICAgICBvbklucHV0KHNsaWRlci52YWx1ZUFzTnVtYmVyKTtcclxuICAgICAgICAgICAgdGV4dDEuaW5uZXJUZXh0ID0gcGFyYW0ubmFtZTtcclxuICAgICAgICAgICAgdGV4dDIuaW5uZXJUZXh0ID0gc2xpZGVyLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2xpZGVyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhZGRSYW5nZUlucHV0KHBhcmFtOiBTbGlkZXJQYXJhbWV0ZXIsIG9uSW5wdXQ6ICh2OiBudW1iZXIpID0+IHZvaWQgPSAoKSA9PiB7fSkge1xyXG5cclxuICAgICAgICAvLyBhIHNsaWRlciBsb29rcyBsaWtlIHRoaXMgOiA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMVwiIG1heD1cIjEwMFwiIHN0ZXA9XCIxXCIgdmFsdWU9XCI1MFwiPlxyXG4gICAgICAgIGxldCBzbGlkZXIgPSB0aGlzLmFkZEVsZW1lbnQoXCJpbnB1dFwiLCBcInNsaWRlci1jb250cm9sXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7ICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHNsaWRlci50eXBlID0gXCJyYW5nZVwiO1xyXG4gICAgICAgIHNsaWRlci5taW4gPSBwYXJhbS5taW4udG9TdHJpbmcoKTtcclxuICAgICAgICBzbGlkZXIubWF4ID0gcGFyYW0ubWF4LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgc2xpZGVyLnZhbHVlQXNOdW1iZXIgPSBwYXJhbS5zdGF0ZTtcclxuICAgICAgICBzbGlkZXIuc3RlcCA9IHBhcmFtLnN0ZXAudG9TdHJpbmcoKTtcclxuIFxyXG4gICAgICAgIHJldHVybiBzbGlkZXI7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFkZFRleHQoKSB7XHJcbiAgICAgICAgdGhpcy5hZGRFbGVtZW50KFwiXCIpXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBhZGRFbnVtPFQ+KGtleXM6IHN0cmluZ1tdLCB2YWx1ZXM6IFRbXSwgb25jaGFuZ2U6IChzZWxlY3Rpb246IFQpID0+IHZvaWQpIDogSFRNTFNlbGVjdEVsZW1lbnQge1xyXG4gICAgICAgIC8vIDxzZWxlY3Q+XHJcbiAgICAgICAgLy8gIDxvcHRpb24+Q2FwcHVjY2lubzwvb3B0aW9uPlxyXG4gICAgICAgIC8vICA8b3B0aW9uPk1vY2hhPC9vcHRpb24+XHJcbiAgICAgICAgLy8gPC9zZWxlY3Q+XHJcblxyXG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCAhPSB2YWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJuZWVkIHNhbWUgYW1vdW50IG9mIGtleXMgJiB2YWx1ZXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjb3VudCA9IGtleXMubGVuZ3RoO1xyXG5cclxuICAgICAgICBsZXQgZSA9IHRoaXMuYWRkRWxlbWVudChcInNlbGVjdFwiLCBcImVudW0tc2VsZWN0b3JcIikgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbyA9IHRoaXMuYWRkRWxlbWVudChcIm9wdGlvblwiLCBcImVudW0taXRlbVwiKTtcclxuICAgICAgICAgICAgby5pbm5lclRleHQgPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICBlLmFwcGVuZENoaWxkKG8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuXHJcbiAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlOiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCBpID0ga2V5cy5pbmRleE9mKHRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgIG9uY2hhbmdlKHZhbHVlc1tpXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgYWRkRWxlbWVudChlbGVtZW50OiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nID0gXCJcIikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudClcclxuXHJcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgIHRoaXMuY3VycmVudENvbnRleHQuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgICAgIHJldHVybiBlbDtcclxuICAgIH1cclxufVxyXG5cclxuLy8gYSBzbGlkZXIgcGFyYW1ldGVyXHJcbmV4cG9ydCBjbGFzcyBTbGlkZXJQYXJhbWV0ZXIge1xyXG5cclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHN0YXRlOiBudW1iZXI7XHJcbiAgICBtaW46IG51bWJlcjtcclxuICAgIG1heDogbnVtYmVyO1xyXG4gICAgc3RlcDogbnVtYmVyXHJcblxyXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBzdGF0ZTogbnVtYmVyLCBtaW4gPS0gSW5maW5pdHksIG1heCA9IEluZmluaXR5LCBzdGVwPTAuMSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cclxuICAgICAgICB0aGlzLm1pbiA9IG1pbjtcclxuICAgICAgICB0aGlzLm1heCA9IG1heDtcclxuICAgICAgICB0aGlzLnN0ZXAgPSBzdGVwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldChzdGF0ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gVE9ETyBST1VORCBUTyBORUFSRVNUIFNURVBcclxuICAgICAgICB0aGlzLnN0YXRlID0gR01hdGguY2xhbXAoc3RhdGUsIHRoaXMubWluLCB0aGlzLm1heCk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/system/ui.ts\n");

/***/ }),

/***/ "./src/sfered/settings.json":
/*!**********************************!*\
  !*** ./src/sfered/settings.json ***!
  \**********************************/
/***/ ((module) => {

module.exports = JSON.parse("{\"process\":{\"n_bellus_points\":77,\"point_ranges\":{\"left_eye_set\":[30,31,32,33,34,35,36,37,38],\"right_eye_set\":[40,41,42,43,44,45,46,47,39],\"left_ear_set\":[0,1,2],\"right_ear_set\":[12,11,10]},\"bounding_box_offset\":{\"remark\":\"left_right_up_down. means: offset indefinetly\",\"ly\":[-10,10,-15,15],\"ry\":[-10,10,-15,15],\"la\":[1200,-10,150,150],\"ra\":[-10,1200,150,150]},\"filtering\":{\"blur_first\":1,\"gaus_k_size\":9,\"median_kernel_size\":7,\"canny_thresh_lower\":50,\"canny_thresh_upper\":150,\"histeq_clip_limit\":3,\"histeq_cell_size\":[8,8]}},\"process_ransac\":{\"seed\":3474647,\"iterations\":10000,\"radius\":5.55,\"max_radius_deviation\":0.2,\"tolerance\":0.35,\"min_score\":10,\"max_deviation_from_guess(i think is is not used anymore)\":6,\"remark\":\"this stuff here is raw data\",\"radius_iris\":5.5,\"radius_eye\":12.25},\"process_ears\":{},\"process_brows\":{},\"output\":{\"remark\":\"use this to determine the keys of the output json\",\"file_name\":\"results.json\",\"pupil_pt_left\":\"pupil_pt_left\",\"pupil_pt_right\":\"pupil_pt_right\",\"pupil_pt_flat_left\":\"pupil_pt_flat_left\",\"pupil_pt_flat_right\":\"pupil_pt_flat_right\",\"all_dlib_points\":\"all_dlib_points\",\"ear_pt_left\":\"ear_pt_left\",\"ear_pt_right\":\"ear_pt_right\",\"brow_pts_left\":\"brow_pts_left\",\"brow_pts_right\":\"brow_pts_right\"},\"debug\":{\"remark\":\"use output_test_points to export all points generated in inbetween steps\",\"write_debug_points\":true,\"silent\":false,\"plot\":false}}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;